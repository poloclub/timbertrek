var Ou=Object.defineProperty;var zu=(e,t,n)=>t in e?Ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var A=(e,t,n)=>(zu(e,typeof t!="symbol"?t+"":t,n),n),Yu=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var ge=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};var re=(e,t,n)=>(Yu(e,t,"access private method"),n);const Uu=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};Uu();function ce(){}const Zs=e=>e;function F(e,t,n,r,i){e.__svelte_meta={loc:{file:t,line:n,column:r,char:i}}}function el(e){return e()}function Vo(){return Object.create(null)}function We(e){e.forEach(el)}function Qs(e){return typeof e=="function"}function Be(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Gu(e){return Object.keys(e).length===0}const tl=typeof window!="undefined";let nl=tl?()=>window.performance.now():()=>Date.now(),Js=tl?e=>requestAnimationFrame(e):ce;const Zt=new Set;function rl(e){Zt.forEach(t=>{t.c(e)||(Zt.delete(t),t.f())}),Zt.size!==0&&Js(rl)}function il(e){let t;return Zt.size===0&&Js(rl),{promise:new Promise(n=>{Zt.add(t={c:e,f:n})}),abort(){Zt.delete(t)}}}function sl(e,t){e.appendChild(t)}function ol(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Bu(e){const t=N("style");return ju(ol(e),t),t.sheet}function ju(e,t){sl(e.head||e,t)}function al(e,t,n){e.insertBefore(t,n||null)}function Ks(e){e.parentNode.removeChild(e)}function Ki(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function N(e){return document.createElement(e)}function tn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function me(e){return document.createTextNode(e)}function Q(){return me(" ")}function $i(){return me("")}function Xu(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function qu(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Zu(e){return Array.from(e.childNodes)}function Sr(e,t){e.value=t==null?"":t}function es(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ye(e,t,n){e.classList[n?"add":"remove"](t)}function ll(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}class ts{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,n,r=null){this.e||(this.e=N(n.nodeName),this.t=n,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)al(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(Ks)}}const xr=new Map;let Tr=0;function Qu(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ju(e,t){const n={stylesheet:Bu(t),rules:{}};return xr.set(e,n),n}function cl(e,t,n,r,i,s,o,a=0){const c=16.666/r;let l=`{
`;for(let m=0;m<=1;m+=c){const p=t+(n-t)*s(m);l+=m*100+`%{${o(p,1-p)}}
`}const u=l+`100% {${o(n,1-n)}}
}`,f=`__svelte_${Qu(u)}_${a}`,h=ol(e),{stylesheet:d,rules:w}=xr.get(h)||Ju(h,e);w[f]||(w[f]=!0,d.insertRule(`@keyframes ${f} ${u}`,d.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${f} ${r}ms linear ${i}ms 1 both`,Tr+=1,f}function ul(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Tr-=i,Tr||Ku())}function Ku(){Js(()=>{Tr||(xr.forEach(e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}}),xr.clear())})}function $u(e,t,n,r){if(!t)return ce;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return ce;const{delay:s=0,duration:o=300,easing:a=Zs,start:c=nl()+s,end:l=c+o,tick:u=ce,css:f}=n(e,{from:t,to:i},r);let h=!0,d=!1,w;function g(){f&&(w=cl(e,0,1,o,s,a,f)),s||(d=!0)}function m(){f&&ul(e,w),h=!1}return il(p=>{if(!d&&p>=c&&(d=!0),d&&p>=l&&(u(1,0),m()),!h)return!1;if(d){const y=p-c,b=0+1*a(y/o);u(b,1-b)}return!0}),g(),u(0,1),m}function eh(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,hl(e,i)}}function hl(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i=r.transform==="none"?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Dn;function Cn(e){Dn=e}function fl(){if(!Dn)throw new Error("Function called outside component initialization");return Dn}function xe(e){fl().$$.on_mount.push(e)}function kr(e){fl().$$.on_destroy.push(e)}const Sn=[],Ee=[],dr=[],Do=[],dl=Promise.resolve();let ns=!1;function pl(){ns||(ns=!0,dl.then(gl))}function $s(){return pl(),dl}function Mr(e){dr.push(e)}const Si=new Set;let Kn=0;function gl(){const e=Dn;do{for(;Kn<Sn.length;){const t=Sn[Kn];Kn++,Cn(t),th(t.$$)}for(Cn(null),Sn.length=0,Kn=0;Ee.length;)Ee.pop()();for(let t=0;t<dr.length;t+=1){const n=dr[t];Si.has(n)||(Si.add(n),n())}dr.length=0}while(Sn.length);for(;Do.length;)Do.pop()();ns=!1,Si.clear(),Cn(e)}function th(e){if(e.fragment!==null){e.update(),We(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Mr)}}let gn;function nh(){return gn||(gn=Promise.resolve(),gn.then(()=>{gn=null})),gn}function Ao(e,t,n){e.dispatchEvent(ll(`${t?"intro":"outro"}${n}`))}const pr=new Set;let xt;function It(){xt={r:0,c:[],p:xt}}function Et(){xt.r||We(xt.c),xt=xt.p}function we(e,t){e&&e.i&&(pr.delete(e),e.i(t))}function be(e,t,n,r){if(e&&e.o){if(pr.has(e))return;pr.add(e),xt.c.push(()=>{pr.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const rh={duration:0};function ml(e,t,n){let r=t(e,n),i=!0,s;const o=xt;o.r+=1;function a(){const{delay:c=0,duration:l=300,easing:u=Zs,tick:f=ce,css:h}=r||rh;h&&(s=cl(e,1,0,l,c,u,h));const d=nl()+c,w=d+l;Mr(()=>Ao(e,!1,"start")),il(g=>{if(i){if(g>=w)return f(0,1),Ao(e,!1,"end"),--o.r||We(o.c),!1;if(g>=d){const m=u((g-d)/l);f(1-m,m)}}return i})}return Qs(r)?nh().then(()=>{r=r(),a()}):a(),{end(c){c&&r.tick&&r.tick(1,0),i&&(s&&ul(e,s),i=!1)}}}const eo=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function wl(e,t){be(e,1,1,()=>{t.delete(e.key)})}function ih(e,t){e.f(),wl(e,t)}function yl(e,t,n,r,i,s,o,a,c,l,u,f){let h=e.length,d=s.length,w=h;const g={};for(;w--;)g[e[w].key]=w;const m=[],p=new Map,y=new Map;for(w=d;w--;){const T=f(i,s,w),I=n(T);let V=o.get(I);V?r&&V.p(T,t):(V=l(I,T),V.c()),p.set(I,m[w]=V),I in g&&y.set(I,Math.abs(w-g[I]))}const b=new Set,x=new Set;function M(T){we(T,1),T.m(a,u),o.set(T.key,T),u=T.first,d--}for(;h&&d;){const T=m[d-1],I=e[h-1],V=T.key,E=I.key;T===I?(u=T.first,h--,d--):p.has(E)?!o.has(V)||b.has(V)?M(T):x.has(E)?h--:y.get(V)>y.get(E)?(x.add(V),M(T)):(b.add(E),h--):(c(I,o),h--)}for(;h--;){const T=e[h];p.has(T.key)||c(T,o)}for(;d;)M(m[d-1]);return m}function Cr(e,t,n,r){const i=new Set;for(let s=0;s<t.length;s++){const o=r(n(e,t,s));if(i.has(o))throw new Error("Cannot have duplicate keys in a keyed each");i.add(o)}}function Qe(e){e&&e.c()}function Ue(e,t,n,r){const{fragment:i,on_mount:s,on_destroy:o,after_update:a}=e.$$;i&&i.m(t,n),r||Mr(()=>{const c=s.map(el).filter(Qs);o?o.push(...c):We(c),e.$$.on_mount=[]}),a.forEach(Mr)}function Ge(e,t){const n=e.$$;n.fragment!==null&&(We(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function sh(e,t){e.$$.dirty[0]===-1&&(Sn.push(e),pl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Je(e,t,n,r,i,s,o,a=[-1]){const c=Dn;Cn(e);const l=e.$$={fragment:null,ctx:null,props:s,update:ce,not_equal:i,bound:Vo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Vo(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};o&&o(l.root);let u=!1;if(l.ctx=n?n(e,t.props||{},(f,h,...d)=>{const w=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=w)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](w),u&&sh(e,f)),h}):[],l.update(),u=!0,We(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=Zu(t.target);l.fragment&&l.fragment.l(f),f.forEach(Ks)}else l.fragment&&l.fragment.c();t.intro&&we(e.$$.fragment),Ue(e,t.target,t.anchor,t.customElement),gl()}Cn(c)}class oh{$destroy(){Ge(this,1),this.$destroy=ce}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Gu(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function te(e,t){document.dispatchEvent(ll(e,Object.assign({version:"3.46.6"},t),!0))}function _(e,t){te("SvelteDOMInsert",{target:e,node:t}),sl(e,t)}function he(e,t,n){te("SvelteDOMInsert",{target:e,node:t,anchor:n}),al(e,t,n)}function le(e){te("SvelteDOMRemove",{node:e}),Ks(e)}function ae(e,t,n,r,i,s){const o=r===!0?["capture"]:r?Array.from(Object.keys(r)):[];i&&o.push("preventDefault"),s&&o.push("stopPropagation"),te("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:o});const a=Xu(e,t,n,r);return()=>{te("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:o}),a()}}function S(e,t,n){qu(e,t,n),n==null?te("SvelteDOMRemoveAttribute",{node:e,attribute:t}):te("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function Ye(e,t){t=""+t,e.wholeText!==t&&(te("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function lt(e){if(typeof e!="string"&&!(e&&typeof e=="object"&&"length"in e)){let t="{#each} only iterates over array-like objects.";throw typeof Symbol=="function"&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function Ke(e,t,n){for(const r of Object.keys(t))~n.indexOf(r)||console.warn(`<${e}> received an unexpected slot "${r}".`)}class $e extends oh{constructor(t){if(!t||!t.target&&!t.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}function ah(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function lh(e){const t=e-1;return t*t*t+1}function ui(e,{delay:t=0,duration:n=400,easing:r=Zs}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}const Ut=[];function jn(e,t=ce){let n;const r=new Set;function i(a){if(Be(e,a)&&(e=a,n)){const c=!Ut.length;for(const l of r)l[1](),Ut.push(l,e);if(c){for(let l=0;l<Ut.length;l+=2)Ut[l][0](Ut[l+1]);Ut.length=0}}}function s(a){i(a(e))}function o(a,c=ce){const l=[a,c];return r.add(l),r.size===1&&(n=t(i)||ce),a(e),()=>{r.delete(l),r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}var Nt=(e=>(e[e.DepthChanged=0]="DepthChanged",e.None="",e))(Nt||{});const nn=()=>({shown:!1,favTrees:[]}),to=()=>({depthMax:0,depthLow:0,depthHigh:0,depthColors:[],action:""}),no=()=>({featureMap:new Map,treeMap:new Map,treeID:0,ancestorFs:[],show:!1,x:20,y:20,getFeatureColor:null}),rn=()=>({shown:!1,curAccuracyLow:0,curAccuracyHigh:1,curHeightRange:new Set([]),curDepthFeatures:new Map,treeDepthFeaturesMap:null,treeHeightMap:null,featureMap:new Map,getFeatureColor:null,featureOrder:[]}),sn=()=>({pinnedTrees:[],lastActiveTreeID:null,getFeatureColor:null,getFeatureInfo:null}),Fo=()=>jn(nn()),No=()=>jn(to()),Lo=()=>jn(no()),Ho=()=>jn(sn()),Po=()=>jn(rn());var rs="http://www.w3.org/1999/xhtml",Io={svg:"http://www.w3.org/2000/svg",xhtml:rs,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Io.hasOwnProperty(t)?{space:Io[t],local:e}:e}function ch(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===rs&&t.documentElement.namespaceURI===rs?t.createElement(e):t.createElementNS(n,e)}}function uh(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function vl(e){var t=hi(e);return(t.local?uh:ch)(t)}function hh(){}function ro(e){return e==null?hh:function(){return this.querySelector(e)}}function fh(e){typeof e!="function"&&(e=ro(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),c,l,u=0;u<o;++u)(c=s[u])&&(l=e.call(c,c.__data__,u,s))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new Re(r,this._parents)}function bl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function dh(){return[]}function _l(e){return e==null?dh:function(){return this.querySelectorAll(e)}}function ph(e){return function(){return bl(e.apply(this,arguments))}}function gh(e){typeof e=="function"?e=ph(e):e=_l(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new Re(r,i)}function Sl(e){return function(){return this.matches(e)}}function xl(e){return function(t){return t.matches(e)}}var mh=Array.prototype.find;function wh(e){return function(){return mh.call(this.children,e)}}function yh(){return this.firstElementChild}function vh(e){return this.select(e==null?yh:wh(typeof e=="function"?e:xl(e)))}var bh=Array.prototype.filter;function _h(){return Array.from(this.children)}function Sh(e){return function(){return bh.call(this.children,e)}}function xh(e){return this.selectAll(e==null?_h:Sh(typeof e=="function"?e:xl(e)))}function Th(e){typeof e!="function"&&(e=Sl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new Re(r,this._parents)}function Tl(e){return new Array(e.length)}function kh(){return new Re(this._enter||this._groups.map(Tl),this._parents)}function Vr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vr.prototype={constructor:Vr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Mh(e){return function(){return e}}function Ch(e,t,n,r,i,s){for(var o=0,a,c=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new Vr(e,s[o]);for(;o<c;++o)(a=t[o])&&(i[o]=a)}function Vh(e,t,n,r,i,s,o){var a,c,l=new Map,u=t.length,f=s.length,h=new Array(u),d;for(a=0;a<u;++a)(c=t[a])&&(h[a]=d=o.call(c,c.__data__,a,t)+"",l.has(d)?i[a]=c:l.set(d,c));for(a=0;a<f;++a)d=o.call(e,s[a],a,s)+"",(c=l.get(d))?(r[a]=c,c.__data__=s[a],l.delete(d)):n[a]=new Vr(e,s[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(h[a])===c&&(i[a]=c)}function Dh(e){return e.__data__}function Ah(e,t){if(!arguments.length)return Array.from(this,Dh);var n=t?Vh:Ch,r=this._parents,i=this._groups;typeof e!="function"&&(e=Mh(e));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),l=0;l<s;++l){var u=r[l],f=i[l],h=f.length,d=Fh(e.call(u,u&&u.__data__,l,r)),w=d.length,g=a[l]=new Array(w),m=o[l]=new Array(w),p=c[l]=new Array(h);n(u,f,g,m,p,d,t);for(var y=0,b=0,x,M;y<w;++y)if(x=g[y]){for(y>=b&&(b=y+1);!(M=m[b])&&++b<w;);x._next=M||null}}return o=new Re(o,r),o._enter=a,o._exit=c,o}function Fh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Nh(){return new Re(this._exit||this._groups.map(Tl),this._parents)}function Lh(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Hh(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],f=l.length,h=a[c]=new Array(f),d,w=0;w<f;++w)(d=l[w]||u[w])&&(h[w]=d);for(;c<i;++c)a[c]=n[c];return new Re(a,this._parents)}function Ph(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Ih(e){e||(e=Eh);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),l,u=0;u<a;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new Re(i,this._parents).order()}function Eh(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Rh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Wh(){return Array.from(this)}function Oh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function zh(){let e=0;for(const t of this)++e;return e}function Yh(){return!this.node()}function Uh(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Gh(e){return function(){this.removeAttribute(e)}}function Bh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jh(e,t){return function(){this.setAttribute(e,t)}}function Xh(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Zh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qh(e,t){var n=hi(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Bh:Gh:typeof t=="function"?n.local?Zh:qh:n.local?Xh:jh)(n,t))}function kl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Jh(e){return function(){this.style.removeProperty(e)}}function Kh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $h(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ef(e,t,n){return arguments.length>1?this.each((t==null?Jh:typeof t=="function"?$h:Kh)(e,t,n==null?"":n)):on(this.node(),e)}function on(e,t){return e.style.getPropertyValue(t)||kl(e).getComputedStyle(e,null).getPropertyValue(t)}function tf(e){return function(){delete this[e]}}function nf(e,t){return function(){this[e]=t}}function rf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function sf(e,t){return arguments.length>1?this.each((t==null?tf:typeof t=="function"?rf:nf)(e,t)):this.node()[e]}function Ml(e){return e.trim().split(/^|\s+/)}function io(e){return e.classList||new Cl(e)}function Cl(e){this._node=e,this._names=Ml(e.getAttribute("class")||"")}Cl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vl(e,t){for(var n=io(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Dl(e,t){for(var n=io(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function of(e){return function(){Vl(this,e)}}function af(e){return function(){Dl(this,e)}}function lf(e,t){return function(){(t.apply(this,arguments)?Vl:Dl)(this,e)}}function cf(e,t){var n=Ml(e+"");if(arguments.length<2){for(var r=io(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?lf:t?of:af)(n,t))}function uf(){this.textContent=""}function hf(e){return function(){this.textContent=e}}function ff(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function df(e){return arguments.length?this.each(e==null?uf:(typeof e=="function"?ff:hf)(e)):this.node().textContent}function pf(){this.innerHTML=""}function gf(e){return function(){this.innerHTML=e}}function mf(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function wf(e){return arguments.length?this.each(e==null?pf:(typeof e=="function"?mf:gf)(e)):this.node().innerHTML}function yf(){this.nextSibling&&this.parentNode.appendChild(this)}function vf(){return this.each(yf)}function bf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _f(){return this.each(bf)}function Sf(e){var t=typeof e=="function"?e:vl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xf(){return null}function Tf(e,t){var n=typeof e=="function"?e:vl(e),r=t==null?xf:typeof t=="function"?t:ro(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function kf(){var e=this.parentNode;e&&e.removeChild(this)}function Mf(){return this.each(kf)}function Cf(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Df(e){return this.select(e?Vf:Cf)}function Af(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ff(e){return function(t){e.call(this,t,this.__data__)}}function Nf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Lf(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Hf(e,t,n){return function(){var r=this.__on,i,s=Ff(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Pf(e,t,n){var r=Nf(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?Hf:Lf,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Al(e,t,n){var r=kl(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function If(e,t){return function(){return Al(this,e,t)}}function Ef(e,t){return function(){return Al(this,e,t.apply(this,arguments))}}function Rf(e,t){return this.each((typeof t=="function"?Ef:If)(e,t))}function*Wf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var so=[null];function Re(e,t){this._groups=e,this._parents=t}function un(){return new Re([[document.documentElement]],so)}function Of(){return this}Re.prototype=un.prototype={constructor:Re,select:fh,selectAll:gh,selectChild:vh,selectChildren:xh,filter:Th,data:Ah,enter:kh,exit:Nh,join:Lh,merge:Hh,selection:Of,order:Ph,sort:Ih,call:Rh,nodes:Wh,node:Oh,size:zh,empty:Yh,each:Uh,attr:Qh,style:ef,property:sf,classed:cf,text:df,html:wf,raise:vf,lower:_f,append:Sf,insert:Tf,remove:Mf,clone:Df,datum:Af,on:Pf,dispatch:Rf,[Symbol.iterator]:Wf};function Ie(e){return typeof e=="string"?new Re([[document.querySelector(e)]],[document.documentElement]):new Re([[e]],so)}function zf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function et(e,t){if(e=zf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Yf(e){return typeof e=="string"?new Re([document.querySelectorAll(e)],[document.documentElement]):new Re([bl(e)],so)}function Uf(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function Gf(e,t){return fetch(e,t).then(Uf)}function is(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fl(e){let t=e,n=e,r=e;e.length!==2&&(t=(a,c)=>e(a)-c,n=is,r=(a,c)=>is(e(a),c));function i(a,c,l=0,u=a.length){if(l<u){if(n(c,c)!==0)return u;do{const f=l+u>>>1;r(a[f],c)<0?l=f+1:u=f}while(l<u)}return l}function s(a,c,l=0,u=a.length){if(l<u){if(n(c,c)!==0)return u;do{const f=l+u>>>1;r(a[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function o(a,c,l=0,u=a.length){const f=i(a,c,l,u-1);return f>l&&t(a[f-1],c)>-t(a[f],c)?f-1:f}return{left:i,center:o,right:s}}function Bf(e){return e===null?NaN:+e}const jf=Fl(is),Xf=jf.right;Fl(Bf).center;var Nl=Xf;function qf(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function gr(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Eo extends Map{constructor(t,n=Jf){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Ro(this,t))}has(t){return super.has(Ro(this,t))}set(t,n){return super.set(Zf(this,t),n)}delete(t){return super.delete(Qf(this,t))}}function Ro({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Zf({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Qf({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Jf(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Kf(e){return e}var $f=Array.prototype,e0=$f.slice;function $n(e){return()=>e}var ss=Math.sqrt(50),os=Math.sqrt(10),as=Math.sqrt(2);function Dr(e,t,n){var r,i=-1,s,o,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(s=e,e=t,t=s),(a=An(e,t,n))===0||!isFinite(a))return[];if(a>0){let c=Math.round(e/a),l=Math.round(t/a);for(c*a<e&&++c,l*a>t&&--l,o=new Array(s=l-c+1);++i<s;)o[i]=(c+i)*a}else{a=-a;let c=Math.round(e*a),l=Math.round(t*a);for(c/a<e&&++c,l/a>t&&--l,o=new Array(s=l-c+1);++i<s;)o[i]=(c+i)/a}return r&&o.reverse(),o}function An(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=ss?10:s>=os?5:s>=as?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=ss?10:s>=os?5:s>=as?2:1)}function t0(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=ss?i*=10:s>=os?i*=5:s>=as&&(i*=2),t<e?-i:i}function n0(e,t,n){let r;for(;;){const i=An(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function r0(e){return Math.ceil(Math.log(qf(e))/Math.LN2)+1}function i0(){var e=Kf,t=gr,n=r0;function r(i){Array.isArray(i)||(i=Array.from(i));var s,o=i.length,a,c,l=new Array(o);for(s=0;s<o;++s)l[s]=e(i[s],s,i);var u=t(l),f=u[0],h=u[1],d=n(l,f,h);if(!Array.isArray(d)){const p=h,y=+d;if(t===gr&&([f,h]=n0(f,h,y)),d=Dr(f,h,y),d[0]<=f&&(c=An(f,h,y)),d[d.length-1]>=h)if(p>=h&&t===gr){const b=An(f,h,y);isFinite(b)&&(b>0?h=(Math.floor(h/b)+1)*b:b<0&&(h=(Math.ceil(h*-b)+1)/-b))}else d.pop()}for(var w=d.length;d[0]<=f;)d.shift(),--w;for(;d[w-1]>h;)d.pop(),--w;var g=new Array(w+1),m;for(s=0;s<=w;++s)m=g[s]=[],m.x0=s>0?d[s-1]:f,m.x1=s<w?d[s]:h;if(isFinite(c)){if(c>0)for(s=0;s<o;++s)(a=l[s])!=null&&f<=a&&a<=h&&g[Math.floor((a-f)/c)].push(i[s]);else if(c<0)for(s=0;s<o;++s)(a=l[s])!=null&&f<=a&&a<=h&&g[Math.floor((f-a)*c)].push(i[s])}else for(s=0;s<o;++s)(a=l[s])!=null&&f<=a&&a<=h&&g[Nl(d,a,0,w)].push(i[s]);return g}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:$n(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:$n([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Array.isArray(i)?$n(e0.call(i)):$n(i),r):n},r}function s0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function o0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function a0(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function l0(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function c0(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function u0(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Xn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Wo=Symbol("implicit");function oo(){var e=new Eo,t=[],n=[],r=Wo;function i(s){let o=e.get(s);if(o===void 0){if(r!==Wo)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Eo;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return oo(t,n).unknown(r)},Xn.apply(i,arguments),i}function ao(){var e=oo().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,c=0,l=0,u=.5;delete e.unknown;function f(){var h=t().length,d=i<r,w=d?i:r,g=d?r:i;s=(g-w)/Math.max(1,h-c+l*2),a&&(s=Math.floor(s)),w+=(g-w-s*(h-c))*u,o=s*(1-c),a&&(w=Math.round(w),o=Math.round(o));var m=c0(h).map(function(p){return w+s*p});return n(d?m.reverse():m)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(a=!!h,f()):a},e.padding=function(h){return arguments.length?(c=Math.min(1,l=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return ao(t(),[r,i]).round(a).paddingInner(c).paddingOuter(l).align(u)},Xn.apply(f(),arguments)}function Ll(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Ll(t())},e}function h0(){return Ll(ao.apply(null,arguments).paddingInner(1))}function hn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qn(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Vt(){}var Rt=.7,an=1/Rt,Qt="\\s*([+-]?\\d+)\\s*",Fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f0=/^#([0-9a-f]{3,8})$/,d0=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),p0=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),g0=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${Fn}\\)$`),m0=new RegExp(`^rgba\\(${ht},${ht},${ht},${Fn}\\)$`),w0=new RegExp(`^hsl\\(${Fn},${ht},${ht}\\)$`),y0=new RegExp(`^hsla\\(${Fn},${ht},${ht},${Fn}\\)$`),Oo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hn(Vt,Mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zo,formatHex:zo,formatHex8:v0,formatHsl:b0,formatRgb:Yo,toString:Yo});function zo(){return this.rgb().formatHex()}function v0(){return this.rgb().formatHex8()}function b0(){return Hl(this).formatHsl()}function Yo(){return this.rgb().formatRgb()}function Mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=f0.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Uo(t):n===3?new ke(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?er(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?er(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=d0.exec(e))?new ke(t[1],t[2],t[3],1):(t=p0.exec(e))?new ke(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=g0.exec(e))?er(t[1],t[2],t[3],t[4]):(t=m0.exec(e))?er(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=w0.exec(e))?jo(t[1],t[2]/100,t[3]/100,1):(t=y0.exec(e))?jo(t[1],t[2]/100,t[3]/100,t[4]):Oo.hasOwnProperty(e)?Uo(Oo[e]):e==="transparent"?new ke(NaN,NaN,NaN,0):null}function Uo(e){return new ke(e>>16&255,e>>8&255,e&255,1)}function er(e,t,n,r){return r<=0&&(e=t=n=NaN),new ke(e,t,n,r)}function lo(e){return e instanceof Vt||(e=Mt(e)),e?(e=e.rgb(),new ke(e.r,e.g,e.b,e.opacity)):new ke}function ls(e,t,n,r){return arguments.length===1?lo(e):new ke(e,t,n,r==null?1:r)}function ke(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}hn(ke,ls,qn(Vt,{brighter(e){return e=e==null?an:Math.pow(an,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ke(Ht(this.r),Ht(this.g),Ht(this.b),Ar(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Go,formatHex:Go,formatHex8:_0,formatRgb:Bo,toString:Bo}));function Go(){return`#${Lt(this.r)}${Lt(this.g)}${Lt(this.b)}`}function _0(){return`#${Lt(this.r)}${Lt(this.g)}${Lt(this.b)}${Lt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bo(){const e=Ar(this.opacity);return`${e===1?"rgb(":"rgba("}${Ht(this.r)}, ${Ht(this.g)}, ${Ht(this.b)}${e===1?")":`, ${e})`}`}function Ar(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lt(e){return e=Ht(e),(e<16?"0":"")+e.toString(16)}function jo(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rt(e,t,n,r)}function Hl(e){if(e instanceof rt)return new rt(e.h,e.s,e.l,e.opacity);if(e instanceof Vt||(e=Mt(e)),!e)return new rt;if(e instanceof rt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new rt(o,a,c,e.opacity)}function Pl(e,t,n,r){return arguments.length===1?Hl(e):new rt(e,t,n,r==null?1:r)}function rt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}hn(rt,Pl,qn(Vt,{brighter(e){return e=e==null?an:Math.pow(an,e),new rt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new rt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ke(xi(e>=240?e-240:e+120,i,r),xi(e,i,r),xi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new rt(Xo(this.h),tr(this.s),tr(this.l),Ar(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ar(this.opacity);return`${e===1?"hsl(":"hsla("}${Xo(this.h)}, ${tr(this.s)*100}%, ${tr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xo(e){return e=(e||0)%360,e<0?e+360:e}function tr(e){return Math.max(0,Math.min(1,e||0))}function xi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Il=Math.PI/180,El=180/Math.PI,Fr=18,Rl=.96422,Wl=1,Ol=.82521,zl=4/29,Jt=6/29,Yl=3*Jt*Jt,S0=Jt*Jt*Jt;function Ul(e){if(e instanceof ft)return new ft(e.l,e.a,e.b,e.opacity);if(e instanceof ct)return Bl(e);e instanceof ke||(e=lo(e));var t=Ci(e.r),n=Ci(e.g),r=Ci(e.b),i=Ti((.2225045*t+.7168786*n+.0606169*r)/Wl),s,o;return t===n&&n===r?s=o=i:(s=Ti((.4360747*t+.3850649*n+.1430804*r)/Rl),o=Ti((.0139322*t+.0971045*n+.7141733*r)/Ol)),new ft(116*i-16,500*(s-i),200*(i-o),e.opacity)}function x0(e,t,n,r){return arguments.length===1?Ul(e):new ft(e,t,n,r==null?1:r)}function ft(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}hn(ft,x0,qn(Vt,{brighter(e){return new ft(this.l+Fr*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new ft(this.l-Fr*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Rl*ki(t),e=Wl*ki(e),n=Ol*ki(n),new ke(Mi(3.1338561*t-1.6168667*e-.4906146*n),Mi(-.9787684*t+1.9161415*e+.033454*n),Mi(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Ti(e){return e>S0?Math.pow(e,1/3):e/Yl+zl}function ki(e){return e>Jt?e*e*e:Yl*(e-zl)}function Mi(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ci(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Gl(e){if(e instanceof ct)return new ct(e.h,e.c,e.l,e.opacity);if(e instanceof ft||(e=Ul(e)),e.a===0&&e.b===0)return new ct(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*El;return new ct(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function T0(e,t,n,r){return arguments.length===1?Gl(e):new ct(n,t,e,r==null?1:r)}function k0(e,t,n,r){return arguments.length===1?Gl(e):new ct(e,t,n,r==null?1:r)}function ct(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Bl(e){if(isNaN(e.h))return new ft(e.l,0,0,e.opacity);var t=e.h*Il;return new ft(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}hn(ct,k0,qn(Vt,{brighter(e){return new ct(this.h,this.c,this.l+Fr*(e==null?1:e),this.opacity)},darker(e){return new ct(this.h,this.c,this.l-Fr*(e==null?1:e),this.opacity)},rgb(){return Bl(this).rgb()}}));var jl=-.14861,co=1.78277,uo=-.29227,fi=-.90649,Nn=1.97294,qo=Nn*fi,Zo=Nn*co,Qo=co*uo-fi*jl;function M0(e){if(e instanceof Pt)return new Pt(e.h,e.s,e.l,e.opacity);e instanceof ke||(e=lo(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Qo*r+qo*t-Zo*n)/(Qo+qo-Zo),s=r-i,o=(Nn*(n-i)-uo*s)/fi,a=Math.sqrt(o*o+s*s)/(Nn*i*(1-i)),c=a?Math.atan2(o,s)*El-120:NaN;return new Pt(c<0?c+360:c,a,i,e.opacity)}function Ct(e,t,n,r){return arguments.length===1?M0(e):new Pt(e,t,n,r==null?1:r)}function Pt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}hn(Pt,Ct,qn(Vt,{brighter(e){return e=e==null?an:Math.pow(an,e),new Pt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rt:Math.pow(Rt,e),new Pt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Il,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ke(255*(t+n*(jl*r+co*i)),255*(t+n*(uo*r+fi*i)),255*(t+n*(Nn*r)),this.opacity)}}));var di=e=>()=>e;function Xl(e,t){return function(n){return e+n*t}}function C0(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function V0(e,t){var n=t-e;return n?Xl(e,n>180||n<-180?n-360*Math.round(n/360):n):di(isNaN(e)?t:e)}function D0(e){return(e=+e)==1?Kt:function(t,n){return n-t?C0(t,n,e):di(isNaN(t)?n:t)}}function Kt(e,t){var n=t-e;return n?Xl(e,n):di(isNaN(e)?t:e)}var Nr=function e(t){var n=D0(t);function r(i,s){var o=n((i=ls(i)).r,(s=ls(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),l=Kt(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=e,r}(1);function A0(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function F0(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function N0(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Zn(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function L0(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function H0(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Zn(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var cs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vi=new RegExp(cs.source,"g");function P0(e){return function(){return e}}function I0(e){return function(t){return e(t)+""}}function ql(e,t){var n=cs.lastIndex=Vi.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=cs.exec(e))&&(i=Vi.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:tt(r,i)})),n=Vi.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?I0(c[0].x):P0(t):(t=c.length,function(l){for(var u=0,f;u<t;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function Zn(e,t){var n=typeof t,r;return t==null||n==="boolean"?di(t):(n==="number"?tt:n==="string"?(r=Mt(t))?(t=r,Nr):ql:t instanceof Mt?Nr:t instanceof Date?L0:F0(t)?A0:Array.isArray(t)?N0:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?H0:tt)(e,t)}function E0(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Jo=180/Math.PI,us={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zl(e,t,n,r,i,s){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Jo,skewX:Math.atan(c)*Jo,scaleX:o,scaleY:a}}var nr;function R0(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?us:Zl(t.a,t.b,t.c,t.d,t.e,t.f)}function W0(e){return e==null||(nr||(nr=document.createElementNS("http://www.w3.org/2000/svg","g")),nr.setAttribute("transform",e),!(e=nr.transform.baseVal.consolidate()))?us:(e=e.matrix,Zl(e.a,e.b,e.c,e.d,e.e,e.f))}function Ql(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,u,f,h,d,w){if(l!==f||u!==h){var g=d.push("translate(",null,t,null,n);w.push({i:g-4,x:tt(l,f)},{i:g-2,x:tt(u,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:tt(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:tt(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,h,d,w){if(l!==f||u!==h){var g=d.push(i(d)+"scale(",null,",",null,")");w.push({i:g-4,x:tt(l,f)},{i:g-2,x:tt(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=e(l),u=e(u),s(l.translateX,l.translateY,u.translateX,u.translateY,f,h),o(l.rotate,u.rotate,f,h),a(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(d){for(var w=-1,g=h.length,m;++w<g;)f[(m=h[w]).i]=m.x(d);return f.join("")}}}var O0=Ql(R0,"px, ","px)","deg)"),z0=Ql(W0,", ",")",")"),Y0=1e-12;function Ko(e){return((e=Math.exp(e))+1/e)/2}function U0(e){return((e=Math.exp(e))-1/e)/2}function G0(e){return((e=Math.exp(2*e))-1)/(e+1)}var B0=function e(t,n,r){function i(s,o){var a=s[0],c=s[1],l=s[2],u=o[0],f=o[1],h=o[2],d=u-a,w=f-c,g=d*d+w*w,m,p;if(g<Y0)p=Math.log(h/l)/t,m=function(I){return[a+I*d,c+I*w,l*Math.exp(t*I*p)]};else{var y=Math.sqrt(g),b=(h*h-l*l+r*g)/(2*l*n*y),x=(h*h-l*l-r*g)/(2*h*n*y),M=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(x*x+1)-x);p=(T-M)/t,m=function(I){var V=I*p,E=Ko(M),Y=l/(n*y)*(E*G0(t*V+M)-U0(M));return[a+Y*d,c+Y*w,l*E/Ko(t*V+M)]}}return m.duration=p*1e3*t/Math.SQRT2,m}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return e(o,a,c)},i}(Math.SQRT2,2,4);function Jl(e){return function t(n){n=+n;function r(i,s){var o=e((i=Ct(i)).h,(s=Ct(s)).h),a=Kt(i.s,s.s),c=Kt(i.l,s.l),l=Kt(i.opacity,s.opacity);return function(u){return i.h=o(u),i.s=a(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=t,r}(1)}Jl(V0);var Kl=Jl(Kt);function j0(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function X0(e){return function(){return e}}function q0(e){return+e}var $o=[0,1];function ut(e){return e}function hs(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:X0(isNaN(t)?NaN:.5)}function Z0(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Q0(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=hs(i,r),s=n(o,s)):(r=hs(r,i),s=n(s,o)),function(a){return s(r(a))}}function J0(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=hs(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var c=Nl(e,a,1,r)-1;return s[c](i[c](a))}}function ho(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function fo(){var e=$o,t=$o,n=Zn,r,i,s,o=ut,a,c,l;function u(){var h=Math.min(e.length,t.length);return o!==ut&&(o=Z0(e[0],e[h-1])),a=h>2?J0:Q0,c=l=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=a(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=a(t,e.map(r),tt)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,q0),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=E0,u()},f.clamp=function(h){return arguments.length?(o=h?!0:ut,u()):o!==ut},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,u()}}function K0(){return fo()(ut,ut)}function $0(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Lr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ln(e){return e=Lr(Math.abs(e)),e?e[1]:NaN}function e1(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],c=0;i>0&&a>0&&(c+a+1>r&&(a=Math.max(1,r-c)),s.push(n.substring(i-=a,i+a)),!((c+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function t1(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var n1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ln(e){if(!(t=n1.exec(e)))throw new Error("invalid format: "+e);var t;return new po({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ln.prototype=po.prototype;function po(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}po.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function r1(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var $l;function i1(e,t){var n=Lr(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-($l=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Lr(e,Math.max(0,t+s-1))[0]}function ea(e,t){var n=Lr(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var ta={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$0,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ea(e*100,t),r:ea,s:i1,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function na(e){return e}var ra=Array.prototype.map,ia=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function s1(e){var t=e.grouping===void 0||e.thousands===void 0?na:e1(ra.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?na:t1(ra.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Ln(f);var h=f.fill,d=f.align,w=f.sign,g=f.symbol,m=f.zero,p=f.width,y=f.comma,b=f.precision,x=f.trim,M=f.type;M==="n"?(y=!0,M="g"):ta[M]||(b===void 0&&(b=12),x=!0,M="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var T=g==="$"?n:g==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",I=g==="$"?r:/[%p]/.test(M)?o:"",V=ta[M],E=/[defgprs%]/.test(M);b=b===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function Y(k){var L=T,D=I,v,H,C;if(M==="c")D=V(k)+D,k="";else{k=+k;var P=k<0||1/k<0;if(k=isNaN(k)?c:V(Math.abs(k),b),x&&(k=r1(k)),P&&+k==0&&w!=="+"&&(P=!1),L=(P?w==="("?w:a:w==="-"||w==="("?"":w)+L,D=(M==="s"?ia[8+$l/3]:"")+D+(P&&w==="("?")":""),E){for(v=-1,H=k.length;++v<H;)if(C=k.charCodeAt(v),48>C||C>57){D=(C===46?i+k.slice(v+1):k.slice(v))+D,k=k.slice(0,v);break}}}y&&!m&&(k=t(k,1/0));var O=L.length+k.length+D.length,z=O<p?new Array(p-O+1).join(h):"";switch(y&&m&&(k=t(z+k,z.length?p-D.length:1/0),z=""),d){case"<":k=L+k+D+z;break;case"=":k=L+z+k+D;break;case"^":k=z.slice(0,O=z.length>>1)+L+k+D+z.slice(O);break;default:k=z+L+k+D;break}return s(k)}return Y.toString=function(){return f+""},Y}function u(f,h){var d=l((f=Ln(f),f.type="f",f)),w=Math.max(-8,Math.min(8,Math.floor(ln(h)/3)))*3,g=Math.pow(10,-w),m=ia[8+w/3];return function(p){return d(g*p)+m}}return{format:l,formatPrefix:u}}var rr,pi,ec;o1({thousands:",",grouping:[3],currency:["$",""]});function o1(e){return rr=s1(e),pi=rr.format,ec=rr.formatPrefix,rr}function a1(e){return Math.max(0,-ln(Math.abs(e)))}function l1(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ln(t)/3)))*3-ln(Math.abs(e)))}function c1(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ln(t)-ln(e))+1}function u1(e,t,n,r){var i=t0(e,t,n),s;switch(r=Ln(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=l1(i,o))&&(r.precision=s),ec(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=c1(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=a1(i))&&(r.precision=s-(r.type==="%")*2);break}}return pi(r)}function tc(e){var t=e.domain;return e.ticks=function(n){var r=t();return Dr(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return u1(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],c,l,u=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);u-- >0;){if(l=An(o,a,n),l===c)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;c=l}return e},e}function nc(){var e=K0();return e.copy=function(){return ho(e,nc())},Xn.apply(e,arguments),tc(e)}function h1(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function sa(e){return Math.log(e)}function oa(e){return Math.exp(e)}function f1(e){return-Math.log(-e)}function d1(e){return-Math.exp(-e)}function p1(e){return isFinite(e)?+("1e"+e):e<0?0:e}function g1(e){return e===10?p1:e===Math.E?Math.exp:t=>Math.pow(e,t)}function m1(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function aa(e){return(t,n)=>-e(-t,n)}function w1(e){const t=e(sa,oa),n=t.domain;let r=10,i,s;function o(){return i=m1(r),s=g1(r),n()[0]<0?(i=aa(i),s=aa(s),e(f1,d1)):e(sa,oa),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const c=n();let l=c[0],u=c[c.length-1];const f=u<l;f&&([l,u]=[u,l]);let h=i(l),d=i(u),w,g;const m=a==null?10:+a;let p=[];if(!(r%1)&&d-h<m){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(w=1;w<r;++w)if(g=h<0?w/s(-h):w*s(h),!(g<l)){if(g>u)break;p.push(g)}}else for(;h<=d;++h)for(w=r-1;w>=1;--w)if(g=h>0?w/s(-h):w*s(h),!(g<l)){if(g>u)break;p.push(g)}p.length*2<m&&(p=Dr(l,u,m))}else p=Dr(h,d,Math.min(d-h,m)).map(s);return f?p.reverse():p},t.tickFormat=(a,c)=>{if(a==null&&(a=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Ln(c)).precision==null&&(c.trim=!0),c=pi(c)),a===1/0)return c;const l=Math.max(1,r*a/t.ticks().length);return u=>{let f=u/s(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=l?c(u):""}},t.nice=()=>n(h1(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function rc(){const e=w1(fo()).domain([1,10]);return e.copy=()=>ho(e,rc()).base(e.base()),Xn.apply(e,arguments),e}function la(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function y1(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function v1(e){return e<0?-e*e:e*e}function b1(e){var t=e(ut,ut),n=1;function r(){return n===1?e(ut,ut):n===.5?e(y1,v1):e(la(n),la(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},tc(t)}function go(){var e=b1(fo());return e.copy=function(){return ho(e,go()).exponent(e.exponent())},Xn.apply(e,arguments),e}function _1(){return go.apply(null,arguments).exponent(.5)}var Di=new Date,Ai=new Date;function vt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return e(s=new Date(+s)),s},i.ceil=function(s){return e(s=new Date(s-1)),t(s,1),e(s),s},i.round=function(s){var o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=function(s,o){return t(s=new Date(+s),o==null?1:Math.floor(o)),s},i.range=function(s,o,a){var c=[],l;if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return c;do c.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return c},i.filter=function(s){return vt(function(o){if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););})},n&&(i.count=function(s,o){return Di.setTime(+s),Ai.setTime(+o),e(Di),e(Ai),Math.floor(n(Di,Ai))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(o){return r(o)%s===0}:function(o){return i.count(0,o)%s===0}):i}),i}const S1=1e3,mo=S1*60,x1=mo*60,wo=x1*24,ic=wo*7;var T1=vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mo)/wo,e=>e.getDate()-1),sc=T1;function Ot(e){return vt(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*mo)/ic})}var k1=Ot(0),fs=Ot(1);Ot(2);Ot(3);var Hn=Ot(4);Ot(5);Ot(6);var oc=vt(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});oc.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:vt(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};var Pn=oc,M1=vt(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/wo},function(e){return e.getUTCDate()-1}),ac=M1;function zt(e){return vt(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/ic})}var C1=zt(0),ds=zt(1);zt(2);zt(3);var In=zt(4);zt(5);zt(6);var lc=vt(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});lc.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:vt(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};var En=lc;function Fi(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ni(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mn(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function V1(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,c=e.shortMonths,l=wn(i),u=yn(i),f=wn(s),h=yn(s),d=wn(o),w=yn(o),g=wn(a),m=yn(a),p=wn(c),y=yn(c),b={a:P,A:O,b:z,B,c:null,d:pa,e:pa,f:J1,g:ad,G:cd,H:q1,I:Z1,j:Q1,L:cc,m:K1,M:$1,p:j,q:U,Q:wa,s:ya,S:ed,u:td,U:nd,V:rd,w:id,W:sd,x:null,X:null,y:od,Y:ld,Z:ud,"%":ma},x={a:se,A:$,b:q,B:J,c:null,d:ga,e:ga,f:pd,g:Td,G:Md,H:hd,I:fd,j:dd,L:hc,m:gd,M:md,p:K,q:pe,Q:wa,s:ya,S:wd,u:yd,U:vd,V:bd,w:_d,W:Sd,x:null,X:null,y:xd,Y:kd,Z:Cd,"%":ma},M={a:Y,A:k,b:L,B:D,c:v,d:fa,e:fa,f:G1,g:ha,G:ua,H:da,I:da,j:O1,L:U1,m:W1,M:z1,p:E,q:R1,Q:j1,s:X1,S:Y1,u:L1,U:H1,V:P1,w:N1,W:I1,x:H,X:C,y:ha,Y:ua,Z:E1,"%":B1};b.x=T(n,b),b.X=T(r,b),b.c=T(t,b),x.x=T(n,x),x.X=T(r,x),x.c=T(t,x);function T(G,Z){return function(ee){var W=[],de=-1,oe=0,ve=G.length,ne,X,ue;for(ee instanceof Date||(ee=new Date(+ee));++de<ve;)G.charCodeAt(de)===37&&(W.push(G.slice(oe,de)),(X=ca[ne=G.charAt(++de)])!=null?ne=G.charAt(++de):X=ne==="e"?" ":"0",(ue=Z[ne])&&(ne=ue(ee,X)),W.push(ne),oe=de+1);return W.push(G.slice(oe,de)),W.join("")}}function I(G,Z){return function(ee){var W=mn(1900,void 0,1),de=V(W,G,ee+="",0),oe,ve;if(de!=ee.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(Z&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(oe=Ni(mn(W.y,0,1)),ve=oe.getUTCDay(),oe=ve>4||ve===0?ds.ceil(oe):ds(oe),oe=ac.offset(oe,(W.V-1)*7),W.y=oe.getUTCFullYear(),W.m=oe.getUTCMonth(),W.d=oe.getUTCDate()+(W.w+6)%7):(oe=Fi(mn(W.y,0,1)),ve=oe.getDay(),oe=ve>4||ve===0?fs.ceil(oe):fs(oe),oe=sc.offset(oe,(W.V-1)*7),W.y=oe.getFullYear(),W.m=oe.getMonth(),W.d=oe.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),ve="Z"in W?Ni(mn(W.y,0,1)).getUTCDay():Fi(mn(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(ve+5)%7:W.w+W.U*7-(ve+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,Ni(W)):Fi(W)}}function V(G,Z,ee,W){for(var de=0,oe=Z.length,ve=ee.length,ne,X;de<oe;){if(W>=ve)return-1;if(ne=Z.charCodeAt(de++),ne===37){if(ne=Z.charAt(de++),X=M[ne in ca?Z.charAt(de++):ne],!X||(W=X(G,ee,W))<0)return-1}else if(ne!=ee.charCodeAt(W++))return-1}return W}function E(G,Z,ee){var W=l.exec(Z.slice(ee));return W?(G.p=u.get(W[0].toLowerCase()),ee+W[0].length):-1}function Y(G,Z,ee){var W=d.exec(Z.slice(ee));return W?(G.w=w.get(W[0].toLowerCase()),ee+W[0].length):-1}function k(G,Z,ee){var W=f.exec(Z.slice(ee));return W?(G.w=h.get(W[0].toLowerCase()),ee+W[0].length):-1}function L(G,Z,ee){var W=p.exec(Z.slice(ee));return W?(G.m=y.get(W[0].toLowerCase()),ee+W[0].length):-1}function D(G,Z,ee){var W=g.exec(Z.slice(ee));return W?(G.m=m.get(W[0].toLowerCase()),ee+W[0].length):-1}function v(G,Z,ee){return V(G,t,Z,ee)}function H(G,Z,ee){return V(G,n,Z,ee)}function C(G,Z,ee){return V(G,r,Z,ee)}function P(G){return o[G.getDay()]}function O(G){return s[G.getDay()]}function z(G){return c[G.getMonth()]}function B(G){return a[G.getMonth()]}function j(G){return i[+(G.getHours()>=12)]}function U(G){return 1+~~(G.getMonth()/3)}function se(G){return o[G.getUTCDay()]}function $(G){return s[G.getUTCDay()]}function q(G){return c[G.getUTCMonth()]}function J(G){return a[G.getUTCMonth()]}function K(G){return i[+(G.getUTCHours()>=12)]}function pe(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var Z=T(G+="",b);return Z.toString=function(){return G},Z},parse:function(G){var Z=I(G+="",!1);return Z.toString=function(){return G},Z},utcFormat:function(G){var Z=T(G+="",x);return Z.toString=function(){return G},Z},utcParse:function(G){var Z=I(G+="",!0);return Z.toString=function(){return G},Z}}}var ca={"-":"",_:" ","0":"0"},Me=/^\s*\d+/,D1=/^%/,A1=/[\\^$*+?|[\]().{}]/g;function fe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function F1(e){return e.replace(A1,"\\$&")}function wn(e){return new RegExp("^(?:"+e.map(F1).join("|")+")","i")}function yn(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function N1(e,t,n){var r=Me.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function L1(e,t,n){var r=Me.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function H1(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function P1(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function I1(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ua(e,t,n){var r=Me.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ha(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function E1(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function R1(e,t,n){var r=Me.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function W1(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function fa(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function O1(e,t,n){var r=Me.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function da(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function z1(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Y1(e,t,n){var r=Me.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function U1(e,t,n){var r=Me.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function G1(e,t,n){var r=Me.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function B1(e,t,n){var r=D1.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function j1(e,t,n){var r=Me.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function X1(e,t,n){var r=Me.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function pa(e,t){return fe(e.getDate(),t,2)}function q1(e,t){return fe(e.getHours(),t,2)}function Z1(e,t){return fe(e.getHours()%12||12,t,2)}function Q1(e,t){return fe(1+sc.count(Pn(e),e),t,3)}function cc(e,t){return fe(e.getMilliseconds(),t,3)}function J1(e,t){return cc(e,t)+"000"}function K1(e,t){return fe(e.getMonth()+1,t,2)}function $1(e,t){return fe(e.getMinutes(),t,2)}function ed(e,t){return fe(e.getSeconds(),t,2)}function td(e){var t=e.getDay();return t===0?7:t}function nd(e,t){return fe(k1.count(Pn(e)-1,e),t,2)}function uc(e){var t=e.getDay();return t>=4||t===0?Hn(e):Hn.ceil(e)}function rd(e,t){return e=uc(e),fe(Hn.count(Pn(e),e)+(Pn(e).getDay()===4),t,2)}function id(e){return e.getDay()}function sd(e,t){return fe(fs.count(Pn(e)-1,e),t,2)}function od(e,t){return fe(e.getFullYear()%100,t,2)}function ad(e,t){return e=uc(e),fe(e.getFullYear()%100,t,2)}function ld(e,t){return fe(e.getFullYear()%1e4,t,4)}function cd(e,t){var n=e.getDay();return e=n>=4||n===0?Hn(e):Hn.ceil(e),fe(e.getFullYear()%1e4,t,4)}function ud(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fe(t/60|0,"0",2)+fe(t%60,"0",2)}function ga(e,t){return fe(e.getUTCDate(),t,2)}function hd(e,t){return fe(e.getUTCHours(),t,2)}function fd(e,t){return fe(e.getUTCHours()%12||12,t,2)}function dd(e,t){return fe(1+ac.count(En(e),e),t,3)}function hc(e,t){return fe(e.getUTCMilliseconds(),t,3)}function pd(e,t){return hc(e,t)+"000"}function gd(e,t){return fe(e.getUTCMonth()+1,t,2)}function md(e,t){return fe(e.getUTCMinutes(),t,2)}function wd(e,t){return fe(e.getUTCSeconds(),t,2)}function yd(e){var t=e.getUTCDay();return t===0?7:t}function vd(e,t){return fe(C1.count(En(e)-1,e),t,2)}function fc(e){var t=e.getUTCDay();return t>=4||t===0?In(e):In.ceil(e)}function bd(e,t){return e=fc(e),fe(In.count(En(e),e)+(En(e).getUTCDay()===4),t,2)}function _d(e){return e.getUTCDay()}function Sd(e,t){return fe(ds.count(En(e)-1,e),t,2)}function xd(e,t){return fe(e.getUTCFullYear()%100,t,2)}function Td(e,t){return e=fc(e),fe(e.getUTCFullYear()%100,t,2)}function kd(e,t){return fe(e.getUTCFullYear()%1e4,t,4)}function Md(e,t){var n=e.getUTCDay();return e=n>=4||n===0?In(e):In.ceil(e),fe(e.getUTCFullYear()%1e4,t,4)}function Cd(){return"+0000"}function ma(){return"%"}function wa(e){return+e}function ya(e){return Math.floor(+e/1e3)}var Li,dc;Vd({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Vd(e){return Li=V1(e),dc=Li.format,Li}function Dd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var Ad=Dd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");Kl(Ct(-100,.75,.35),Ct(80,1.5,.8));Kl(Ct(260,.75,.35),Ct(80,1.5,.8));var ir=Ct();function Fd(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return ir.h=360*e-100,ir.s=1.5-1.5*t,ir.l=.8-.9*t,ir+""}var cn=0,xn=0,vn=0,pc=1e3,Hr,Tn,Pr=0,Wt=0,gi=0,Rn=typeof performance=="object"&&performance.now?performance:Date,gc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yo(){return Wt||(gc(Nd),Wt=Rn.now()+gi)}function Nd(){Wt=0}function Ir(){this._call=this._time=this._next=null}Ir.prototype=mc.prototype={constructor:Ir,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yo():+n)+(t==null?0:+t),!this._next&&Tn!==this&&(Tn?Tn._next=this:Hr=this,Tn=this),this._call=e,this._time=n,ps()},stop:function(){this._call&&(this._call=null,this._time=1/0,ps())}};function mc(e,t,n){var r=new Ir;return r.restart(e,t,n),r}function Ld(){yo(),++cn;for(var e=Hr,t;e;)(t=Wt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--cn}function va(){Wt=(Pr=Rn.now())+gi,cn=xn=0;try{Ld()}finally{cn=0,Pd(),Wt=0}}function Hd(){var e=Rn.now(),t=e-Pr;t>pc&&(gi-=t,Pr=e)}function Pd(){for(var e,t=Hr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Hr=n);Tn=e,ps(r)}function ps(e){if(!cn){xn&&(xn=clearTimeout(xn));var t=e-Wt;t>24?(e<1/0&&(xn=setTimeout(va,e-Rn.now()-gi)),vn&&(vn=clearInterval(vn))):(vn||(Pr=Rn.now(),vn=setInterval(Hd,pc)),cn=1,gc(va))}}function gs(e,t,n){var r=new Ir;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Id={value:()=>{}};function Qn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mr(n)}function mr(e){this._=e}function Ed(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mr.prototype=Qn.prototype={constructor:mr,on:function(e,t){var n=this._,r=Ed(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Rd(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=ba(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ba(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new mr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Rd(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ba(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Id,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Wd=Qn("start","end","cancel","interrupt"),Od=[],wc=0,_a=1,ms=2,wr=3,Sa=4,ws=5,yr=6;function mi(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;zd(e,n,{name:t,index:r,group:i,on:Wd,tween:Od,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:wc})}function vo(e,t){var n=it(e,t);if(n.state>wc)throw new Error("too late; already scheduled");return n}function dt(e,t){var n=it(e,t);if(n.state>wr)throw new Error("too late; already running");return n}function it(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function zd(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=mc(s,0,n.time);function s(l){n.state=_a,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var u,f,h,d;if(n.state!==_a)return c();for(u in r)if(d=r[u],d.name===n.name){if(d.state===wr)return gs(o);d.state===Sa?(d.state=yr,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[u]):+u<t&&(d.state=yr,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[u])}if(gs(function(){n.state===wr&&(n.state=Sa,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=ms,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ms){for(n.state=wr,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=ws,1),f=-1,h=i.length;++f<h;)i[f].call(e,u);n.state===ws&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=yr,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function $t(e,t){var n=e.__transition,r,i,s=!0,o;if(!!n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>ms&&r.state<ws,r.state=yr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Yd(e){return this.each(function(){$t(this,e)})}function Ud(e,t){var n,r;return function(){var i=dt(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Gd(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=dt(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=a;break}c===l&&i.push(a)}s.tween=i}}function Bd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=it(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Ud:Gd)(n,e,t))}function bo(e,t,n){var r=e._id;return e.each(function(){var i=dt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return it(i,r).value[t]}}function yc(e,t){var n;return(typeof t=="number"?tt:t instanceof Mt?Nr:(n=Mt(t))?(t=n,Nr):ql)(e,t)}function jd(e){return function(){this.removeAttribute(e)}}function Xd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qd(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Zd(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Qd(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function Jd(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function Kd(e,t){var n=hi(e),r=n==="transform"?z0:yc;return this.attrTween(e,typeof t=="function"?(n.local?Jd:Qd)(n,r,bo(this,"attr."+e,t)):t==null?(n.local?Xd:jd)(n):(n.local?Zd:qd)(n,r,t))}function $d(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ep(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tp(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ep(e,s)),n}return i._value=t,i}function np(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&$d(e,s)),n}return i._value=t,i}function rp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=hi(e);return this.tween(n,(r.local?tp:np)(r,t))}function ip(e,t){return function(){vo(this,e).delay=+t.apply(this,arguments)}}function sp(e,t){return t=+t,function(){vo(this,e).delay=t}}function op(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ip:sp)(t,e)):it(this.node(),t).delay}function ap(e,t){return function(){dt(this,e).duration=+t.apply(this,arguments)}}function lp(e,t){return t=+t,function(){dt(this,e).duration=t}}function cp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ap:lp)(t,e)):it(this.node(),t).duration}function up(e,t){if(typeof t!="function")throw new Error;return function(){dt(this,e).ease=t}}function hp(e){var t=this._id;return arguments.length?this.each(up(t,e)):it(this.node(),t).ease}function fp(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;dt(this,e).ease=n}}function dp(e){if(typeof e!="function")throw new Error;return this.each(fp(this._id,e))}function pp(e){typeof e!="function"&&(e=Sl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&a.push(c);return new yt(r,this._parents,this._name,this._id)}function gp(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=t[a],l=n[a],u=c.length,f=o[a]=new Array(u),h,d=0;d<u;++d)(h=c[d]||l[d])&&(f[d]=h);for(;a<r;++a)o[a]=t[a];return new yt(o,this._parents,this._name,this._id)}function mp(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function wp(e,t,n){var r,i,s=mp(t)?vo:dt;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function yp(e,t){var n=this._id;return arguments.length<2?it(this.node(),n).on.on(e):this.each(wp(n,e,t))}function vp(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bp(){return this.on("end.remove",vp(this._id))}function _p(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ro(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,l=s[o]=new Array(c),u,f,h=0;h<c;++h)(u=a[h])&&(f=e.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,mi(l[h],t,n,h,l,it(u,n)));return new yt(s,this._parents,t,n)}function Sp(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_l(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=e.call(u,u.__data__,f,c),d,w=it(u,n),g=0,m=h.length;g<m;++g)(d=h[g])&&mi(d,t,n,g,h,w);s.push(h),o.push(u)}return new yt(s,o,t,n)}var xp=un.prototype.constructor;function Tp(){return new xp(this._groups,this._parents)}function kp(e,t){var n,r,i;return function(){var s=on(this,e),o=(this.style.removeProperty(e),on(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function vc(e){return function(){this.style.removeProperty(e)}}function Mp(e,t,n){var r,i=n+"",s;return function(){var o=on(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Cp(e,t,n){var r,i,s;return function(){var o=on(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),on(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a))}}function Vp(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var c=dt(this,e),l=c.on,u=c.value[s]==null?a||(a=vc(t)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function Dp(e,t,n){var r=(e+="")=="transform"?O0:yc;return t==null?this.styleTween(e,kp(e,r)).on("end.style."+e,vc(e)):typeof t=="function"?this.styleTween(e,Cp(e,r,bo(this,"style."+e,t))).each(Vp(this._id,e)):this.styleTween(e,Mp(e,r,t),n).on("end.style."+e,null)}function Ap(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Fp(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Ap(e,o,n)),r}return s._value=t,s}function Np(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Fp(e,t,n==null?"":n))}function Lp(e){return function(){this.textContent=e}}function Hp(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Pp(e){return this.tween("text",typeof e=="function"?Hp(bo(this,"text",e)):Lp(e==null?"":e+""))}function Ip(e){return function(t){this.textContent=e.call(this,t)}}function Ep(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ip(i)),t}return r._value=e,r}function Rp(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ep(e))}function Wp(){for(var e=this._name,t=this._id,n=_c(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)if(c=o[l]){var u=it(c,t);mi(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new yt(r,this._parents,e,n)}function Op(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var l=dt(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),i===0&&s()})}var zp=0;function yt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function bc(e){return un().transition(e)}function _c(){return++zp}var gt=un.prototype;yt.prototype=bc.prototype={constructor:yt,select:_p,selectAll:Sp,selectChild:gt.selectChild,selectChildren:gt.selectChildren,filter:pp,merge:gp,selection:Tp,transition:Wp,call:gt.call,nodes:gt.nodes,node:gt.node,size:gt.size,empty:gt.empty,each:gt.each,on:yp,attr:Kd,attrTween:rp,style:Dp,styleTween:Np,text:Pp,textTween:Rp,remove:bp,tween:Bd,delay:op,duration:cp,ease:hp,easeVarying:dp,end:Op,[Symbol.iterator]:gt[Symbol.iterator]};const Yp=e=>+e;function Up(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Sc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Gp=3,Bp=function e(t){t=+t;function n(r){return((r*=2)<=1?Math.pow(r,t):2-Math.pow(2-r,t))/2}return n.exponent=e,n}(Gp);function jp(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}var xa=2*Math.PI,Xp=1,qp=.3,Zp=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=xa);function i(s){return 1-t*jp(s=+s)*Math.sin((s+r)/n)}return i.amplitude=function(s){return e(s,n*xa)},i.period=function(s){return e(t,s)},i}(Xp,qp),Qp={time:null,delay:0,duration:250,ease:Sc};function Jp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Kp(e){var t,n;e instanceof yt?(t=e._id,e=e._name):(t=_c(),(n=Qp).time=yo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,l=0;l<a;++l)(c=o[l])&&mi(c,e,t,l,o,n||Jp(c,t));return new yt(r,this._parents,e,t)}un.prototype.interrupt=Yd;un.prototype.transition=Kp;function $p(e){return e}var Hi=1,Pi=2,ys=3,kn=4,Ta=1e-6;function eg(e){return"translate("+e+",0)"}function tg(e){return"translate(0,"+e+")"}function ng(e){return t=>+e(t)}function rg(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function ig(){return!this.__axis}function xc(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,c=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,l=e===Hi||e===kn?-1:1,u=e===kn||e===Pi?"x":"y",f=e===Hi||e===ys?eg:tg;function h(d){var w=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,g=i==null?t.tickFormat?t.tickFormat.apply(t,n):$p:i,m=Math.max(s,0)+a,p=t.range(),y=+p[0]+c,b=+p[p.length-1]+c,x=(t.bandwidth?rg:ng)(t.copy(),c),M=d.selection?d.selection():d,T=M.selectAll(".domain").data([null]),I=M.selectAll(".tick").data(w,t).order(),V=I.exit(),E=I.enter().append("g").attr("class","tick"),Y=I.select("line"),k=I.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),I=I.merge(E),Y=Y.merge(E.append("line").attr("stroke","currentColor").attr(u+"2",l*s)),k=k.merge(E.append("text").attr("fill","currentColor").attr(u,l*m).attr("dy",e===Hi?"0em":e===ys?"0.71em":"0.32em")),d!==M&&(T=T.transition(d),I=I.transition(d),Y=Y.transition(d),k=k.transition(d),V=V.transition(d).attr("opacity",Ta).attr("transform",function(L){return isFinite(L=x(L))?f(L+c):this.getAttribute("transform")}),E.attr("opacity",Ta).attr("transform",function(L){var D=this.parentNode.__axis;return f((D&&isFinite(D=D(L))?D:x(L))+c)})),V.remove(),T.attr("d",e===kn||e===Pi?o?"M"+l*o+","+y+"H"+c+"V"+b+"H"+l*o:"M"+c+","+y+"V"+b:o?"M"+y+","+l*o+"V"+c+"H"+b+"V"+l*o:"M"+y+","+c+"H"+b),I.attr("opacity",1).attr("transform",function(L){return f(x(L)+c)}),Y.attr(u+"2",l*s),k.attr(u,l*m).text(g),M.filter(ig).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Pi?"start":e===kn?"end":"middle"),M.each(function(){this.__axis=x})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(s=o=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(a=+d,h):a},h.offset=function(d){return arguments.length?(c=+d,h):c},h}function sg(e){return xc(ys,e)}function og(e){return xc(kn,e)}const vs=Math.PI,bs=2*vs,At=1e-6,ag=bs-At;function _s(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Jn(){return new _s}_s.prototype=Jn.prototype={constructor:_s,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var s=this._x1,o=this._y1,a=n-e,c=r-t,l=s-e,u=o-t,f=l*l+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>At)if(!(Math.abs(u*a-c*l)>At)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var h=n-s,d=r-o,w=a*a+c*c,g=h*h+d*d,m=Math.sqrt(w),p=Math.sqrt(f),y=i*Math.tan((vs-Math.acos((w+f-g)/(2*m*p)))/2),b=y/p,x=y/m;Math.abs(b-1)>At&&(this._+="L"+(e+b*l)+","+(t+b*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>l*d)+","+(this._x1=e+x*a)+","+(this._y1=t+x*c)}},arc:function(e,t,n,r,i,s){e=+e,t=+t,n=+n,s=!!s;var o=n*Math.cos(r),a=n*Math.sin(r),c=e+o,l=t+a,u=1^s,f=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+l:(Math.abs(this._x1-c)>At||Math.abs(this._y1-l)>At)&&(this._+="L"+c+","+l),n&&(f<0&&(f=f%bs+bs),f>ag?this._+="A"+n+","+n+",0,1,"+u+","+(e-o)+","+(t-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):f>At&&(this._+="A"+n+","+n+",0,"+ +(f>=vs)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Le(e){return function(){return e}}const ka=Math.abs,Ae=Math.atan2,Dt=Math.cos,lg=Math.max,Ii=Math.min,st=Math.sin,qt=Math.sqrt,ze=1e-12,Wn=Math.PI,Er=Wn/2,cg=2*Wn;function ug(e){return e>1?0:e<-1?Wn:Math.acos(e)}function Ma(e){return e>=1?Er:e<=-1?-Er:Math.asin(e)}function hg(e){return e.innerRadius}function fg(e){return e.outerRadius}function dg(e){return e.startAngle}function pg(e){return e.endAngle}function gg(e){return e&&e.padAngle}function mg(e,t,n,r,i,s,o,a){var c=n-e,l=r-t,u=o-i,f=a-s,h=f*c-u*l;if(!(h*h<ze))return h=(u*(t-s)-f*(e-i))/h,[e+h*c,t+h*l]}function sr(e,t,n,r,i,s,o){var a=e-n,c=t-r,l=(o?s:-s)/qt(a*a+c*c),u=l*c,f=-l*a,h=e+u,d=t+f,w=n+u,g=r+f,m=(h+w)/2,p=(d+g)/2,y=w-h,b=g-d,x=y*y+b*b,M=i-s,T=h*g-w*d,I=(b<0?-1:1)*qt(lg(0,M*M*x-T*T)),V=(T*b-y*I)/x,E=(-T*y-b*I)/x,Y=(T*b+y*I)/x,k=(-T*y+b*I)/x,L=V-m,D=E-p,v=Y-m,H=k-p;return L*L+D*D>v*v+H*H&&(V=Y,E=k),{cx:V,cy:E,x01:-u,y01:-f,x11:V*(i/M-1),y11:E*(i/M-1)}}function wg(){var e=hg,t=fg,n=Le(0),r=null,i=dg,s=pg,o=gg,a=null;function c(){var l,u,f=+e.apply(this,arguments),h=+t.apply(this,arguments),d=i.apply(this,arguments)-Er,w=s.apply(this,arguments)-Er,g=ka(w-d),m=w>d;if(a||(a=l=Jn()),h<f&&(u=h,h=f,f=u),!(h>ze))a.moveTo(0,0);else if(g>cg-ze)a.moveTo(h*Dt(d),h*st(d)),a.arc(0,0,h,d,w,!m),f>ze&&(a.moveTo(f*Dt(w),f*st(w)),a.arc(0,0,f,w,d,m));else{var p=d,y=w,b=d,x=w,M=g,T=g,I=o.apply(this,arguments)/2,V=I>ze&&(r?+r.apply(this,arguments):qt(f*f+h*h)),E=Ii(ka(h-f)/2,+n.apply(this,arguments)),Y=E,k=E,L,D;if(V>ze){var v=Ma(V/f*st(I)),H=Ma(V/h*st(I));(M-=v*2)>ze?(v*=m?1:-1,b+=v,x-=v):(M=0,b=x=(d+w)/2),(T-=H*2)>ze?(H*=m?1:-1,p+=H,y-=H):(T=0,p=y=(d+w)/2)}var C=h*Dt(p),P=h*st(p),O=f*Dt(x),z=f*st(x);if(E>ze){var B=h*Dt(y),j=h*st(y),U=f*Dt(b),se=f*st(b),$;if(g<Wn&&($=mg(C,P,U,se,B,j,O,z))){var q=C-$[0],J=P-$[1],K=B-$[0],pe=j-$[1],G=1/st(ug((q*K+J*pe)/(qt(q*q+J*J)*qt(K*K+pe*pe)))/2),Z=qt($[0]*$[0]+$[1]*$[1]);Y=Ii(E,(f-Z)/(G-1)),k=Ii(E,(h-Z)/(G+1))}}T>ze?k>ze?(L=sr(U,se,C,P,h,k,m),D=sr(B,j,O,z,h,k,m),a.moveTo(L.cx+L.x01,L.cy+L.y01),k<E?a.arc(L.cx,L.cy,k,Ae(L.y01,L.x01),Ae(D.y01,D.x01),!m):(a.arc(L.cx,L.cy,k,Ae(L.y01,L.x01),Ae(L.y11,L.x11),!m),a.arc(0,0,h,Ae(L.cy+L.y11,L.cx+L.x11),Ae(D.cy+D.y11,D.cx+D.x11),!m),a.arc(D.cx,D.cy,k,Ae(D.y11,D.x11),Ae(D.y01,D.x01),!m))):(a.moveTo(C,P),a.arc(0,0,h,p,y,!m)):a.moveTo(C,P),!(f>ze)||!(M>ze)?a.lineTo(O,z):Y>ze?(L=sr(O,z,B,j,f,-Y,m),D=sr(C,P,U,se,f,-Y,m),a.lineTo(L.cx+L.x01,L.cy+L.y01),Y<E?a.arc(L.cx,L.cy,Y,Ae(L.y01,L.x01),Ae(D.y01,D.x01),!m):(a.arc(L.cx,L.cy,Y,Ae(L.y01,L.x01),Ae(L.y11,L.x11),!m),a.arc(0,0,f,Ae(L.cy+L.y11,L.cx+L.x11),Ae(D.cy+D.y11,D.cx+D.x11),m),a.arc(D.cx,D.cy,Y,Ae(D.y11,D.x11),Ae(D.y01,D.x01),!m))):a.arc(0,0,f,x,b,m)}if(a.closePath(),l)return a=null,l+""||null}return c.centroid=function(){var l=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,u=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Wn/2;return[Dt(u)*l,st(u)*l]},c.innerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:Le(+l),c):e},c.outerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:Le(+l),c):t},c.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:Le(+l),c):n},c.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:Le(+l),c):r},c.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Le(+l),c):i},c.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Le(+l),c):s},c.padAngle=function(l){return arguments.length?(o=typeof l=="function"?l:Le(+l),c):o},c.context=function(l){return arguments.length?(a=l==null?null:l,c):a},c}var yg=Array.prototype.slice;function vg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Tc(e){this._context=e}Tc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function bg(e){return new Tc(e)}function kc(e){return e[0]}function Mc(e){return e[1]}function _g(e,t){var n=Le(!0),r=null,i=bg,s=null;e=typeof e=="function"?e:e===void 0?kc:Le(e),t=typeof t=="function"?t:t===void 0?Mc:Le(t);function o(a){var c,l=(a=vg(a)).length,u,f=!1,h;for(r==null&&(s=i(h=Jn())),c=0;c<=l;++c)!(c<l&&n(u=a[c],c,a))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(u,c,a),+t(u,c,a));if(h)return s=null,h+""||null}return o.x=function(a){return arguments.length?(e=typeof a=="function"?a:Le(+a),o):e},o.y=function(a){return arguments.length?(t=typeof a=="function"?a:Le(+a),o):t},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:Le(!!a),o):n},o.curve=function(a){return arguments.length?(i=a,r!=null&&(s=i(r)),o):i},o.context=function(a){return arguments.length?(a==null?r=s=null:s=i(r=a),o):r},o}class Cc{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Sg(e){return new Cc(e,!0)}function xg(e){return new Cc(e,!1)}function Tg(e){return e.source}function kg(e){return e.target}function Vc(e){let t=Tg,n=kg,r=kc,i=Mc,s=null,o=null;function a(){let c;const l=yg.call(arguments),u=t.apply(this,l),f=n.apply(this,l);if(s==null&&(o=e(c=Jn())),o.lineStart(),l[0]=u,o.point(+r.apply(this,l),+i.apply(this,l)),l[0]=f,o.point(+r.apply(this,l),+i.apply(this,l)),o.lineEnd(),c)return o=null,c+""||null}return a.source=function(c){return arguments.length?(t=c,a):t},a.target=function(c){return arguments.length?(n=c,a):n},a.x=function(c){return arguments.length?(r=typeof c=="function"?c:Le(+c),a):r},a.y=function(c){return arguments.length?(i=typeof c=="function"?c:Le(+c),a):i},a.context=function(c){return arguments.length?(c==null?s=o=null:o=e(s=c),a):s},a}function Mg(){return Vc(Sg)}function Cg(){return Vc(xg)}function Ca(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Dc(e){this._context=e}Dc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ca(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ca(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vg(e){return new Dc(e)}function Va(e){return e<0?-1:1}function Da(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Va(s)+Va(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Aa(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ei(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function Rr(e){this._context=e}Rr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ei(this,this._t0,Aa(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ei(this,Aa(this,n=Da(this,e,t)),n);break;default:Ei(this,this._t0,n=Da(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Ac(e){this._context=new Fc(e)}(Ac.prototype=Object.create(Rr.prototype)).point=function(e,t){Rr.prototype.point.call(this,t,e)};function Fc(e){this._context=e}Fc.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Dg(e){return new Rr(e)}function Ag(e){return new Ac(e)}function Nc(e,t){this._context=e,this._t=t}Nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Fg(e){return new Nc(e,1)}function Ng(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Lg(){return this.eachAfter(Ng)}function Hg(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Pg(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Ig(e,t){for(var n=this,r=[n],i=[],s,o,a,c=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++c,this);return this}function Eg(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Rg(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Wg(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Og(e){for(var t=this,n=zg(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function zg(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Yg(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ug(){return Array.from(this)}function Gg(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Bg(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*jg(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function _o(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Zg)):t===void 0&&(t=qg);for(var n=new On(e),r,i=[n],s,o,a,c;r=i.pop();)if((o=t(r.data))&&(c=(o=Array.from(o)).length))for(r.children=o,a=c-1;a>=0;--a)i.push(s=o[a]=new On(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Jg)}function Xg(){return _o(this).eachBefore(Qg)}function qg(e){return e.children}function Zg(e){return Array.isArray(e)?e[1]:null}function Qg(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Jg(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function On(e){this.data=e,this.depth=this.height=0,this.parent=null}On.prototype=_o.prototype={constructor:On,count:Lg,each:Hg,eachAfter:Ig,eachBefore:Pg,find:Eg,sum:Rg,sort:Wg,path:Og,ancestors:Yg,descendants:Ug,leaves:Gg,links:Bg,copy:Xg,[Symbol.iterator]:jg};function Kg(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function $g(e,t,n,r,i){for(var s=e.children,o,a=-1,c=s.length,l=e.value&&(r-t)/e.value;++a<c;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function em(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(Kg),o}function s(o,a){return function(c){c.children&&$g(c,c.x0,o*(c.depth+1)/a,c.x1,o*(c.depth+2)/a);var l=c.x0,u=c.y0,f=c.x1-n,h=c.y1-n;f<l&&(l=f=(l+f)/2),h<u&&(u=h=(u+h)/2),c.x0=l,c.y0=u,c.x1=f,c.y1=h}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}function tm(e,t){return e.parent===t.parent?1:2}function Ri(e){var t=e.children;return t?t[0]:e.t}function Wi(e){var t=e.children;return t?t[t.length-1]:e.t}function nm(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function rm(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function im(e,t,n){return e.a.parent===t.parent?e.a:n}function vr(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}vr.prototype=Object.create(On.prototype);function sm(e){for(var t=new vr(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new vr(s[o],o)),i.parent=n;return(t.parent=new vr(null,0)).children=[t],t}function om(){var e=tm,t=1,n=1,r=null;function i(l){var u=sm(l);if(u.eachAfter(s),u.parent.m=-u.z,u.eachBefore(o),r)l.eachBefore(c);else{var f=l,h=l,d=l;l.eachBefore(function(y){y.x<f.x&&(f=y),y.x>h.x&&(h=y),y.depth>d.depth&&(d=y)});var w=f===h?1:e(f,h)/2,g=w-f.x,m=t/(h.x+w+g),p=n/(d.depth||1);l.eachBefore(function(y){y.x=(y.x+g)*m,y.y=y.depth*p})}return l}function s(l){var u=l.children,f=l.parent.children,h=l.i?f[l.i-1]:null;if(u){rm(l);var d=(u[0].z+u[u.length-1].z)/2;h?(l.z=h.z+e(l._,h._),l.m=l.z-d):l.z=d}else h&&(l.z=h.z+e(l._,h._));l.parent.A=a(l,h,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,u,f){if(u){for(var h=l,d=l,w=u,g=h.parent.children[0],m=h.m,p=d.m,y=w.m,b=g.m,x;w=Wi(w),h=Ri(h),w&&h;)g=Ri(g),d=Wi(d),d.a=l,x=w.z+y-h.z-m+e(w._,h._),x>0&&(nm(im(w,l,f),l,x),m+=x,p+=x),y+=w.m,m+=h.m,b+=g.m,p+=d.m;w&&!Wi(d)&&(d.t=w,d.m+=y-p),h&&!Ri(g)&&(g.t=h,g.m+=m-b,f=l)}return f}function c(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}const am={passive:!1},zn={capture:!0,passive:!1};function Oi(e){e.stopImmediatePropagation()}function en(e){e.preventDefault(),e.stopImmediatePropagation()}function So(e){var t=e.document.documentElement,n=Ie(e).on("dragstart.drag",en,zn);"onselectstart"in t?n.on("selectstart.drag",en,zn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xo(e,t){var n=e.document.documentElement,r=Ie(e).on("dragstart.drag",null);t&&(r.on("click.drag",en,zn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var or=e=>()=>e;function Ss(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Ss.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function lm(e){return!e.ctrlKey&&!e.button}function cm(){return this.parentNode}function um(e,t){return t==null?{x:e.x,y:e.y}:t}function hm(){return navigator.maxTouchPoints||"ontouchstart"in this}function fm(){var e=lm,t=cm,n=um,r=hm,i={},s=Qn("start","drag","end"),o=0,a,c,l,u,f=0;function h(x){x.on("mousedown.drag",d).filter(r).on("touchstart.drag",m).on("touchmove.drag",p,am).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(x,M){if(!(u||!e.call(this,x,M))){var T=b(this,t.call(this,x,M),x,M,"mouse");!T||(Ie(x.view).on("mousemove.drag",w,zn).on("mouseup.drag",g,zn),So(x.view),Oi(x),l=!1,a=x.clientX,c=x.clientY,T("start",x))}}function w(x){if(en(x),!l){var M=x.clientX-a,T=x.clientY-c;l=M*M+T*T>f}i.mouse("drag",x)}function g(x){Ie(x.view).on("mousemove.drag mouseup.drag",null),xo(x.view,l),en(x),i.mouse("end",x)}function m(x,M){if(!!e.call(this,x,M)){var T=x.changedTouches,I=t.call(this,x,M),V=T.length,E,Y;for(E=0;E<V;++E)(Y=b(this,I,x,M,T[E].identifier,T[E]))&&(Oi(x),Y("start",x,T[E]))}}function p(x){var M=x.changedTouches,T=M.length,I,V;for(I=0;I<T;++I)(V=i[M[I].identifier])&&(en(x),V("drag",x,M[I]))}function y(x){var M=x.changedTouches,T=M.length,I,V;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),I=0;I<T;++I)(V=i[M[I].identifier])&&(Oi(x),V("end",x,M[I]))}function b(x,M,T,I,V,E){var Y=s.copy(),k=et(E||T,M),L,D,v;if((v=n.call(x,new Ss("beforestart",{sourceEvent:T,target:h,identifier:V,active:o,x:k[0],y:k[1],dx:0,dy:0,dispatch:Y}),I))!=null)return L=v.x-k[0]||0,D=v.y-k[1]||0,function H(C,P,O){var z=k,B;switch(C){case"start":i[V]=H,B=o++;break;case"end":delete i[V],--o;case"drag":k=et(O||P,M),B=o;break}Y.call(C,x,new Ss(C,{sourceEvent:P,subject:v,target:h,identifier:V,active:B,x:k[0]+L,y:k[1]+D,dx:k[0]-z[0],dy:k[1]-z[1],dispatch:Y}),I)}}return h.filter=function(x){return arguments.length?(e=typeof x=="function"?x:or(!!x),h):e},h.container=function(x){return arguments.length?(t=typeof x=="function"?x:or(x),h):t},h.subject=function(x){return arguments.length?(n=typeof x=="function"?x:or(x),h):n},h.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:or(!!x),h):r},h.on=function(){var x=s.on.apply(s,arguments);return x===s?h:x},h.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,h):Math.sqrt(f)},h}var zi=e=>()=>e;function dm(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function pm(e){e.stopImmediatePropagation()}function Yi(e){e.preventDefault(),e.stopImmediatePropagation()}var Fa={name:"drag"},Ui={name:"space"},Gt={name:"handle"},Bt={name:"center"};const{abs:Na,max:Fe,min:Ne}=Math;function La(e){return[+e[0],+e[1]]}function xs(e){return[La(e[0]),La(e[1])]}var Gi={name:"x",handles:["w","e"].map(Yn),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Bi={name:"y",handles:["n","s"].map(Yn),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},gm={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Yn),input:function(e){return e==null?null:xs(e)},output:function(e){return e}},mt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ha={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Pa={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},mm={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},wm={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Yn(e){return{type:e}}function ym(e){return!e.ctrlKey&&!e.button}function vm(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function bm(){return navigator.maxTouchPoints||"ontouchstart"in this}function ji(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function _m(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Sm(){return xm(gm)}function xm(e){var t=vm,n=ym,r=bm,i=!0,s=Qn("start","brush","end"),o=6,a;function c(m){var p=m.property("__brush",g).selectAll(".overlay").data([Yn("overlay")]);p.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",mt.overlay).merge(p).each(function(){var b=ji(this).extent;Ie(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),m.selectAll(".selection").data([Yn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",mt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var y=m.selectAll(".handle").data(e.handles,function(b){return b.type});y.exit().remove(),y.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return mt[b.type]}),m.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(m,p,y){m.tween?m.on("start.brush",function(b){u(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){u(this,arguments).end(b)}).tween("brush",function(){var b=this,x=b.__brush,M=u(b,arguments),T=x.selection,I=e.input(typeof p=="function"?p.apply(this,arguments):p,x.extent),V=Zn(T,I);function E(Y){x.selection=Y===1&&I===null?null:V(Y),l.call(b),M.brush()}return T!==null&&I!==null?E:E(1)}):m.each(function(){var b=this,x=arguments,M=b.__brush,T=e.input(typeof p=="function"?p.apply(b,x):p,M.extent),I=u(b,x).beforestart();$t(b),M.selection=T===null?null:T,l.call(b),I.start(y).brush(y).end(y)})},c.clear=function(m,p){c.move(m,null,p)};function l(){var m=Ie(this),p=ji(this).selection;p?(m.selectAll(".selection").style("display",null).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(y){return y.type[y.type.length-1]==="e"?p[1][0]-o/2:p[0][0]-o/2}).attr("y",function(y){return y.type[0]==="s"?p[1][1]-o/2:p[0][1]-o/2}).attr("width",function(y){return y.type==="n"||y.type==="s"?p[1][0]-p[0][0]+o:o}).attr("height",function(y){return y.type==="e"||y.type==="w"?p[1][1]-p[0][1]+o:o})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(m,p,y){var b=m.__brush.emitter;return b&&(!y||!b.clean)?b:new f(m,p,y)}function f(m,p,y){this.that=m,this.args=p,this.state=m.__brush,this.active=0,this.clean=y}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,p){return this.starting?(this.starting=!1,this.emit("start",m,p)):this.emit("brush",m),this},brush:function(m,p){return this.emit("brush",m,p),this},end:function(m,p){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,p)),this},emit:function(m,p,y){var b=Ie(this.that).datum();s.call(m,this.that,new dm(m,{sourceEvent:p,target:c,selection:e.output(this.state.selection),mode:y,dispatch:s}),b)}};function h(m){if(a&&!m.touches||!n.apply(this,arguments))return;var p=this,y=m.target.__data__.type,b=(i&&m.metaKey?y="overlay":y)==="selection"?Fa:i&&m.altKey?Bt:Gt,x=e===Bi?null:mm[y],M=e===Gi?null:wm[y],T=ji(p),I=T.extent,V=T.selection,E=I[0][0],Y,k,L=I[0][1],D,v,H=I[1][0],C,P,O=I[1][1],z,B,j=0,U=0,se,$=x&&M&&i&&m.shiftKey,q,J,K=Array.from(m.touches||[m],X=>{const ue=X.identifier;return X=et(X,p),X.point0=X.slice(),X.identifier=ue,X});$t(p);var pe=u(p,arguments,!0).beforestart();if(y==="overlay"){V&&(se=!0);const X=[K[0],K[1]||K[0]];T.selection=V=[[Y=e===Bi?E:Ne(X[0][0],X[1][0]),D=e===Gi?L:Ne(X[0][1],X[1][1])],[C=e===Bi?H:Fe(X[0][0],X[1][0]),z=e===Gi?O:Fe(X[0][1],X[1][1])]],K.length>1&&de(m)}else Y=V[0][0],D=V[0][1],C=V[1][0],z=V[1][1];k=Y,v=D,P=C,B=z;var G=Ie(p).attr("pointer-events","none"),Z=G.selectAll(".overlay").attr("cursor",mt[y]);if(m.touches)pe.moved=W,pe.ended=oe;else{var ee=Ie(m.view).on("mousemove.brush",W,!0).on("mouseup.brush",oe,!0);i&&ee.on("keydown.brush",ve,!0).on("keyup.brush",ne,!0),So(m.view)}l.call(p),pe.start(m,b.name);function W(X){for(const ue of X.changedTouches||[X])for(const He of K)He.identifier===ue.identifier&&(He.cur=et(ue,p));if($&&!q&&!J&&K.length===1){const ue=K[0];Na(ue.cur[0]-ue[0])>Na(ue.cur[1]-ue[1])?J=!0:q=!0}for(const ue of K)ue.cur&&(ue[0]=ue.cur[0],ue[1]=ue.cur[1]);se=!0,Yi(X),de(X)}function de(X){const ue=K[0],He=ue.point0;var Ce;switch(j=ue[0]-He[0],U=ue[1]-He[1],b){case Ui:case Fa:{x&&(j=Fe(E-Y,Ne(H-C,j)),k=Y+j,P=C+j),M&&(U=Fe(L-D,Ne(O-z,U)),v=D+U,B=z+U);break}case Gt:{K[1]?(x&&(k=Fe(E,Ne(H,K[0][0])),P=Fe(E,Ne(H,K[1][0])),x=1),M&&(v=Fe(L,Ne(O,K[0][1])),B=Fe(L,Ne(O,K[1][1])),M=1)):(x<0?(j=Fe(E-Y,Ne(H-Y,j)),k=Y+j,P=C):x>0&&(j=Fe(E-C,Ne(H-C,j)),k=Y,P=C+j),M<0?(U=Fe(L-D,Ne(O-D,U)),v=D+U,B=z):M>0&&(U=Fe(L-z,Ne(O-z,U)),v=D,B=z+U));break}case Bt:{x&&(k=Fe(E,Ne(H,Y-j*x)),P=Fe(E,Ne(H,C+j*x))),M&&(v=Fe(L,Ne(O,D-U*M)),B=Fe(L,Ne(O,z+U*M)));break}}P<k&&(x*=-1,Ce=Y,Y=C,C=Ce,Ce=k,k=P,P=Ce,y in Ha&&Z.attr("cursor",mt[y=Ha[y]])),B<v&&(M*=-1,Ce=D,D=z,z=Ce,Ce=v,v=B,B=Ce,y in Pa&&Z.attr("cursor",mt[y=Pa[y]])),T.selection&&(V=T.selection),q&&(k=V[0][0],P=V[1][0]),J&&(v=V[0][1],B=V[1][1]),(V[0][0]!==k||V[0][1]!==v||V[1][0]!==P||V[1][1]!==B)&&(T.selection=[[k,v],[P,B]],l.call(p),pe.brush(X,b.name))}function oe(X){if(pm(X),X.touches){if(X.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else xo(X.view,se),ee.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);G.attr("pointer-events","all"),Z.attr("cursor",mt.overlay),T.selection&&(V=T.selection),_m(V)&&(T.selection=null,l.call(p)),pe.end(X,b.name)}function ve(X){switch(X.keyCode){case 16:{$=x&&M;break}case 18:{b===Gt&&(x&&(C=P-j*x,Y=k+j*x),M&&(z=B-U*M,D=v+U*M),b=Bt,de(X));break}case 32:{(b===Gt||b===Bt)&&(x<0?C=P-j:x>0&&(Y=k-j),M<0?z=B-U:M>0&&(D=v-U),b=Ui,Z.attr("cursor",mt.selection),de(X));break}default:return}Yi(X)}function ne(X){switch(X.keyCode){case 16:{$&&(q=J=$=!1,de(X));break}case 18:{b===Bt&&(x<0?C=P:x>0&&(Y=k),M<0?z=B:M>0&&(D=v),b=Gt,de(X));break}case 32:{b===Ui&&(X.altKey?(x&&(C=P-j*x,Y=k+j*x),M&&(z=B-U*M,D=v+U*M),b=Bt):(x<0?C=P:x>0&&(Y=k),M<0?z=B:M>0&&(D=v),b=Gt),Z.attr("cursor",mt[y]),de(X));break}default:return}Yi(X)}}function d(m){u(this,arguments).moved(m)}function w(m){u(this,arguments).ended(m)}function g(){var m=this.__brush||{selection:null};return m.extent=xs(t.apply(this,arguments)),m.dim=e,m}return c.extent=function(m){return arguments.length?(t=typeof m=="function"?m:zi(xs(m)),c):t},c.filter=function(m){return arguments.length?(n=typeof m=="function"?m:zi(!!m),c):n},c.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:zi(!!m),c):r},c.handleSize=function(m){return arguments.length?(o=+m,c):o},c.keyModifiers=function(m){return arguments.length?(i=!!m,c):i},c.on=function(){var m=s.on.apply(s,arguments);return m===s?c:m},c}var ar=e=>()=>e;function Tm(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Tt(e,t,n){this.k=e,this.x=t,this.y=n}Tt.prototype={constructor:Tt,scale:function(e){return e===1?this:new Tt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Tt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var To=new Tt(1,0,0);function Xi(e){e.stopImmediatePropagation()}function bn(e){e.preventDefault(),e.stopImmediatePropagation()}function km(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Mm(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ia(){return this.__zoom||To}function Cm(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dm(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Am(){var e=km,t=Mm,n=Dm,r=Cm,i=Vm,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=B0,l=Qn("start","zoom","end"),u,f,h,d=500,w=150,g=0,m=10;function p(v){v.property("__zoom",Ia).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",Y).filter(i).on("touchstart.zoom",k).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(v,H,C,P){var O=v.selection?v.selection():v;O.property("__zoom",Ia),v!==O?M(v,H,C,P):O.interrupt().each(function(){T(this,arguments).event(P).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},p.scaleBy=function(v,H,C,P){p.scaleTo(v,function(){var O=this.__zoom.k,z=typeof H=="function"?H.apply(this,arguments):H;return O*z},C,P)},p.scaleTo=function(v,H,C,P){p.transform(v,function(){var O=t.apply(this,arguments),z=this.__zoom,B=C==null?x(O):typeof C=="function"?C.apply(this,arguments):C,j=z.invert(B),U=typeof H=="function"?H.apply(this,arguments):H;return n(b(y(z,U),B,j),O,o)},C,P)},p.translateBy=function(v,H,C,P){p.transform(v,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),o)},null,P)},p.translateTo=function(v,H,C,P,O){p.transform(v,function(){var z=t.apply(this,arguments),B=this.__zoom,j=P==null?x(z):typeof P=="function"?P.apply(this,arguments):P;return n(To.translate(j[0],j[1]).scale(B.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof C=="function"?-C.apply(this,arguments):-C),z,o)},P,O)};function y(v,H){return H=Math.max(s[0],Math.min(s[1],H)),H===v.k?v:new Tt(H,v.x,v.y)}function b(v,H,C){var P=H[0]-C[0]*v.k,O=H[1]-C[1]*v.k;return P===v.x&&O===v.y?v:new Tt(v.k,P,O)}function x(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function M(v,H,C,P){v.on("start.zoom",function(){T(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(P).end()}).tween("zoom",function(){var O=this,z=arguments,B=T(O,z).event(P),j=t.apply(O,z),U=C==null?x(j):typeof C=="function"?C.apply(O,z):C,se=Math.max(j[1][0]-j[0][0],j[1][1]-j[0][1]),$=O.__zoom,q=typeof H=="function"?H.apply(O,z):H,J=c($.invert(U).concat(se/$.k),q.invert(U).concat(se/q.k));return function(K){if(K===1)K=q;else{var pe=J(K),G=se/pe[2];K=new Tt(G,U[0]-pe[0]*G,U[1]-pe[1]*G)}B.zoom(null,K)}})}function T(v,H,C){return!C&&v.__zooming||new I(v,H)}function I(v,H){this.that=v,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,H),this.taps=0}I.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,H){return this.mouse&&v!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var H=Ie(this.that).datum();l.call(v,this.that,new Tm(v,{sourceEvent:this.sourceEvent,target:p,type:v,transform:this.that.__zoom,dispatch:l}),H)}};function V(v,...H){if(!e.apply(this,arguments))return;var C=T(this,H).event(v),P=this.__zoom,O=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,r.apply(this,arguments)))),z=et(v);if(C.wheel)(C.mouse[0][0]!==z[0]||C.mouse[0][1]!==z[1])&&(C.mouse[1]=P.invert(C.mouse[0]=z)),clearTimeout(C.wheel);else{if(P.k===O)return;C.mouse=[z,P.invert(z)],$t(this),C.start()}bn(v),C.wheel=setTimeout(B,w),C.zoom("mouse",n(b(y(P,O),C.mouse[0],C.mouse[1]),C.extent,o));function B(){C.wheel=null,C.end()}}function E(v,...H){if(h||!e.apply(this,arguments))return;var C=v.currentTarget,P=T(this,H,!0).event(v),O=Ie(v.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",se,!0),z=et(v,C),B=v.clientX,j=v.clientY;So(v.view),Xi(v),P.mouse=[z,this.__zoom.invert(z)],$t(this),P.start();function U($){if(bn($),!P.moved){var q=$.clientX-B,J=$.clientY-j;P.moved=q*q+J*J>g}P.event($).zoom("mouse",n(b(P.that.__zoom,P.mouse[0]=et($,C),P.mouse[1]),P.extent,o))}function se($){O.on("mousemove.zoom mouseup.zoom",null),xo($.view,P.moved),bn($),P.event($).end()}}function Y(v,...H){if(!!e.apply(this,arguments)){var C=this.__zoom,P=et(v.changedTouches?v.changedTouches[0]:v,this),O=C.invert(P),z=C.k*(v.shiftKey?.5:2),B=n(b(y(C,z),P,O),t.apply(this,H),o);bn(v),a>0?Ie(this).transition().duration(a).call(M,B,P,v):Ie(this).call(p.transform,B,P,v)}}function k(v,...H){if(!!e.apply(this,arguments)){var C=v.touches,P=C.length,O=T(this,H,v.changedTouches.length===P).event(v),z,B,j,U;for(Xi(v),B=0;B<P;++B)j=C[B],U=et(j,this),U=[U,this.__zoom.invert(U),j.identifier],O.touch0?!O.touch1&&O.touch0[2]!==U[2]&&(O.touch1=U,O.taps=0):(O.touch0=U,z=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),z&&(O.taps<2&&(f=U[0],u=setTimeout(function(){u=null},d)),$t(this),O.start())}}function L(v,...H){if(!!this.__zooming){var C=T(this,H).event(v),P=v.changedTouches,O=P.length,z,B,j,U;for(bn(v),z=0;z<O;++z)B=P[z],j=et(B,this),C.touch0&&C.touch0[2]===B.identifier?C.touch0[0]=j:C.touch1&&C.touch1[2]===B.identifier&&(C.touch1[0]=j);if(B=C.that.__zoom,C.touch1){var se=C.touch0[0],$=C.touch0[1],q=C.touch1[0],J=C.touch1[1],K=(K=q[0]-se[0])*K+(K=q[1]-se[1])*K,pe=(pe=J[0]-$[0])*pe+(pe=J[1]-$[1])*pe;B=y(B,Math.sqrt(K/pe)),j=[(se[0]+q[0])/2,(se[1]+q[1])/2],U=[($[0]+J[0])/2,($[1]+J[1])/2]}else if(C.touch0)j=C.touch0[0],U=C.touch0[1];else return;C.zoom("touch",n(b(B,j,U),C.extent,o))}}function D(v,...H){if(!!this.__zooming){var C=T(this,H).event(v),P=v.changedTouches,O=P.length,z,B;for(Xi(v),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),z=0;z<O;++z)B=P[z],C.touch0&&C.touch0[2]===B.identifier?delete C.touch0:C.touch1&&C.touch1[2]===B.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(B=et(B,this),Math.hypot(f[0]-B[0],f[1]-B[1])<m)){var j=Ie(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return p.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:ar(+v),p):r},p.filter=function(v){return arguments.length?(e=typeof v=="function"?v:ar(!!v),p):e},p.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:ar(!!v),p):i},p.extent=function(v){return arguments.length?(t=typeof v=="function"?v:ar([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),p):t},p.scaleExtent=function(v){return arguments.length?(s[0]=+v[0],s[1]=+v[1],p):[s[0],s[1]]},p.translateExtent=function(v){return arguments.length?(o[0][0]=+v[0][0],o[1][0]=+v[1][0],o[0][1]=+v[0][1],o[1][1]=+v[1][1],p):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},p.constrain=function(v){return arguments.length?(n=v,p):n},p.duration=function(v){return arguments.length?(a=+v,p):a},p.interpolate=function(v){return arguments.length?(c=v,p):c},p.on=function(){var v=l.on.apply(l,arguments);return v===l?p:v},p.clickDistance=function(v){return arguments.length?(g=(v=+v)*v,p):Math.sqrt(g)},p.tapDistance=function(v){return arguments.length?(m=+v,p):m},p}var R={select:Ie,selectAll:Yf,json:Gf,scaleLinear:nc,scaleSqrt:_1,scalePoint:h0,scaleBand:ao,scalePow:go,scaleOrdinal:oo,scaleLog:rc,schemeTableau10:Ad,interpolateRainbow:Fd,lch:T0,hsl:Pl,color:Mt,quantize:j0,interpolate:Zn,max:s0,maxIndex:a0,min:o0,minIndex:l0,extent:gr,sum:u0,bin:i0,timeout:gs,transition:bc,easeLinear:Yp,easePolyInOut:Bp,easeQuadInOut:Up,easeCubicInOut:Sc,easeElasticOut:Zp,axisLeft:og,axisBottom:sg,line:_g,curveStepAfter:Fg,brush:Sm,zoom:Am,zoomIdentity:To,drag:fm,format:pi,curveMonotoneX:Dg,curveMonotoneY:Ag,curveBasis:Vg,timeFormat:dc,hierarchy:_o,partition:em,tree:om,arc:wg,linkHorizontal:Mg,linkVertical:Cg,path:Jn};const wi=(e,t)=>Math.round((e+Number.EPSILON)*10**t)/10**t,Fm=(e,t=null,n="download.json")=>{const r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));let i=t,s=!1;t===null&&(i=document.createElement("a"),i.style.display="none",s=!0),i==null||i.setAttribute("href",r),i==null||i.setAttribute("download",`${n}`),i==null||i.click(),s&&(i==null||i.remove())},Ea=e=>{const t=e[0],n=e[1],r=e[2],i=[t,n,r].map(s=>(s/=255,s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)));return i[0]*.2126+i[1]*.7152+i[2]*.0722},Wr=(e,t)=>{const n=Ea(e),r=Ea(t);return n>r?(r+.05)/(n+.05):(n+.05)/(r+.05)},Nm=(e,t)=>e.size===t.size&&[...e].every(n=>t.has(n));class Ra{constructor(t,n,r,i){A(this,"favoritesStore");A(this,"favoritesStoreValue");A(this,"searchStore");A(this,"searchStoreValue");A(this,"sunburstStore");A(this,"sunburstStoreValue");A(this,"handlerUpdated");A(this,"favoritesClicked",()=>{this.favoritesStoreValue.shown=!this.favoritesStoreValue.shown,this.favoritesStore.set(this.favoritesStoreValue),this.favoritesStoreValue.shown&&this.searchStoreValue.shown&&(this.searchStoreValue.shown=!1,this.searchStore.set(this.searchStoreValue))});A(this,"searchClicked",()=>{this.searchStoreValue.shown=!this.searchStoreValue.shown,this.searchStore.set(this.searchStoreValue),this.searchStoreValue.shown&&this.favoritesStoreValue.shown&&(this.favoritesStoreValue.shown=!1,this.favoritesStore.set(this.favoritesStoreValue))});A(this,"depthBoxClicked",t=>{t<this.sunburstStoreValue.depthLow||(t>this.sunburstStoreValue.depthHigh?(this.sunburstStoreValue.depthHigh=t,this.sunburstStoreValue.action=Nt.DepthChanged,this.sunburstStore.set(this.sunburstStoreValue)):this.sunburstStoreValue.depthLow<t&&t<this.sunburstStoreValue.depthHigh?(this.sunburstStoreValue.depthHigh=t,this.sunburstStoreValue.action=Nt.DepthChanged,this.sunburstStore.set(this.sunburstStoreValue)):this.sunburstStoreValue.depthLow===t||this.sunburstStoreValue.depthHigh===t||console.error("Unknown case in depthBoxClicked()"))});A(this,"getDepthBoxStyle",t=>{const n=this.sunburstStoreValue.depthColors[t-1];let r="inherit";if(n===null||n==="")return"";{const i=[252,252,252],s=[74,74,74],o=R.color(n).rgb(),a=[o.r,o.g,o.b];Wr(i,a)<Wr(s,a)&&(r="hsla(0, 0%, 99%, 1)")}return`
    background-color: ${n}; color: ${r}; border: none;
    `});this.handlerUpdated=t,this.favoritesStore=n,this.favoritesStoreValue=nn(),this.favoritesStore.subscribe(s=>{this.favoritesStoreValue=s,this.handlerUpdated()}),this.sunburstStore=r,this.sunburstStoreValue=to(),this.sunburstStore.subscribe(s=>{this.sunburstStoreValue=s,this.handlerUpdated()}),this.searchStore=i,this.searchStoreValue=rn(),this.searchStore.subscribe(s=>{this.searchStoreValue=s,this.handlerUpdated()})}}var Lc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path></svg>',Hc='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z"></path></svg>',Pc=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <path d="M8,14.25L7.655,14.916L7.647,14.912L7.629,14.902C7.524,14.848 7.421,14.791 7.319,14.732C6.1,14.038 4.95,13.23 3.885,12.318C2.045,10.731 0,8.35 0,5.5C0,2.836 2.086,1 4.25,1C5.797,1 7.153,1.802 8,3.02C8.847,1.802 10.203,1 11.75,1C13.914,1 16,2.836 16,5.5C16,8.35 13.955,10.731 12.115,12.318C10.959,13.306 9.705,14.172 8.371,14.902L8.353,14.912L8.347,14.915L8.345,14.915L8,14.25ZM8,14.25L8.345,14.916C8.129,15.028 7.871,15.028 7.655,14.916L8,14.25Z"/>
</svg>
`;const Pe="src/components/toolbar/Toolbar.svelte";function Wa(e,t,n){const r=e.slice();return r[12]=t[n],r}function Oa(e,t,n){const r=e.slice();return r[12]=t[n],r}function Ts(e){let t;const n={c:function(){var i,s;t=N("div"),S(t,"class","depth-line s-JBVBfphpN2RX"),ye(t,"in-range",e[12]+2<=((i=e[1])==null?void 0:i.sunburstStoreValue.depthHigh)&&e[12]+2>((s=e[1])==null?void 0:s.sunburstStoreValue.depthLow)),F(t,Pe,192,10,5217)},m:function(i,s){he(i,t,s)},p:function(i,s){var o,a;s&2&&ye(t,"in-range",i[12]+2<=((o=i[1])==null?void 0:o.sunburstStoreValue.depthHigh)&&i[12]+2>((a=i[1])==null?void 0:a.sunburstStoreValue.depthLow))},d:function(i){i&&le(t)}};return te("SvelteRegisterBlock",{block:n,id:Ts.name,type:"each",source:"(192:8) {#each [...Array(Math.max(handler?.sunburstStoreValue.depthMax - 1, 0)).keys()] as i}",ctx:e}),n}function ks(e){let t,n=e[12]+1+"",r,i,s,o,a;function c(){return e[5](e[12])}const l={c:function(){var f,h,d,w;t=N("div"),r=me(n),i=Q(),S(t,"class","depth-box s-JBVBfphpN2RX"),S(t,"style",s=(f=e[1])==null?void 0:f.getDepthBoxStyle(e[12]+1)),ye(t,"in-range",e[12]+1<=((h=e[1])==null?void 0:h.sunburstStoreValue.depthHigh)&&e[12]+1>=((d=e[1])==null?void 0:d.sunburstStoreValue.depthLow)),ye(t,"no-hover",e[12]+1===((w=e[1])==null?void 0:w.sunburstStoreValue.depthHigh)),F(t,Pe,201,8,5517)},m:function(f,h){he(f,t,h),_(t,r),_(t,i),o||(a=ae(t,"click",c,!1,!1,!1),o=!0)},p:function(f,h){var d,w,g,m;e=f,h&2&&n!==(n=e[12]+1+"")&&Ye(r,n),h&2&&s!==(s=(d=e[1])==null?void 0:d.getDepthBoxStyle(e[12]+1))&&S(t,"style",s),h&2&&ye(t,"in-range",e[12]+1<=((w=e[1])==null?void 0:w.sunburstStoreValue.depthHigh)&&e[12]+1>=((g=e[1])==null?void 0:g.sunburstStoreValue.depthLow)),h&2&&ye(t,"no-hover",e[12]+1===((m=e[1])==null?void 0:m.sunburstStoreValue.depthHigh))},d:function(f){f&&le(t),o=!1,a()}};return te("SvelteRegisterBlock",{block:l,id:ks.name,type:"each",source:"(201:6) {#each [...Array(handler?.sunburstStoreValue.depthMax).keys()] as i}",ctx:e}),l}function Ms(e){var D,v;let t,n,r,i,s,o,a,c,l,u,f,h,d,w,g,m,p,y,b,x,M,T,I,V=[...Array(Math.max(((D=e[1])==null?void 0:D.sunburstStoreValue.depthMax)-1,0)).keys()];lt(V);let E=[];for(let H=0;H<V.length;H+=1)E[H]=Ts(Oa(e,V,H));let Y=[...Array((v=e[1])==null?void 0:v.sunburstStoreValue.depthMax).keys()];lt(Y);let k=[];for(let H=0;H<Y.length;H+=1)k[H]=ks(Wa(e,Y,H));const L={c:function(){var C,P;t=N("div"),n=N("div"),r=N("div"),r.textContent="Show Depth",i=Q(),s=N("div"),o=N("div");for(let O=0;O<E.length;O+=1)E[O].c();a=Q();for(let O=0;O<k.length;O+=1)k[O].c();c=Q(),l=N("div"),u=N("div"),f=N("span"),h=new ts,d=Q(),w=N("div"),g=Q(),m=N("span"),m.textContent="Favorites",p=Q(),y=N("div"),b=N("span"),x=Q(),M=N("span"),M.textContent="Search",S(r,"class","depth-label s-JBVBfphpN2RX"),F(r,Pe,187,4,4996),S(o,"class","depth-box-lines s-JBVBfphpN2RX"),F(o,Pe,190,6,5083),S(s,"class","depth-box-container s-JBVBfphpN2RX"),F(s,Pe,189,4,5043),S(n,"class","depths s-JBVBfphpN2RX"),F(n,Pe,186,2,4971),h.a=d,S(w,"class","hidden-heart s-JBVBfphpN2RX"),ye(w,"pulse",!1),F(w,Pe,225,8,6200),S(f,"class","svg-icon s-JBVBfphpN2RX"),F(f,Pe,223,6,6142),S(m,"class","button-text s-JBVBfphpN2RX"),F(m,Pe,229,6,6315),S(u,"class","tool-button s-JBVBfphpN2RX"),ye(u,"shown",(C=e[1])==null?void 0:C.favoritesStoreValue.shown),F(u,Pe,216,4,5974),S(b,"class","svg-icon s-JBVBfphpN2RX"),F(b,Pe,239,6,6538),S(M,"class","button-text s-JBVBfphpN2RX"),F(M,Pe,242,6,6609),S(y,"class","tool-button s-JBVBfphpN2RX"),ye(y,"shown",(P=e[1])==null?void 0:P.searchStoreValue.shown),F(y,Pe,232,4,6376),S(l,"class","tools s-JBVBfphpN2RX"),F(l,Pe,215,2,5950),S(t,"class","toolbar s-JBVBfphpN2RX"),F(t,Pe,185,0,4925)},l:function(C){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(C,P){he(C,t,P),_(t,n),_(n,r),_(n,i),_(n,s),_(s,o);for(let O=0;O<E.length;O+=1)E[O].m(o,null);_(s,a);for(let O=0;O<k.length;O+=1)k[O].m(s,null);_(t,c),_(t,l),_(l,u),_(u,f),h.m(Hc,f),_(f,d),_(f,w),w.innerHTML=Pc,_(u,g),_(u,m),_(l,p),_(l,y),_(y,b),b.innerHTML=Lc,_(y,x),_(y,M),e[8](t),T||(I=[ae(u,"click",e[6],!1,!1,!1),ae(y,"click",e[7],!1,!1,!1)],T=!0)},p:function(C,[P]){var O,z,B,j;if(P&2){V=[...Array(Math.max(((O=C[1])==null?void 0:O.sunburstStoreValue.depthMax)-1,0)).keys()],lt(V);let U;for(U=0;U<V.length;U+=1){const se=Oa(C,V,U);E[U]?E[U].p(se,P):(E[U]=Ts(se),E[U].c(),E[U].m(o,null))}for(;U<E.length;U+=1)E[U].d(1);E.length=V.length}if(P&2){Y=[...Array((z=C[1])==null?void 0:z.sunburstStoreValue.depthMax).keys()],lt(Y);let U;for(U=0;U<Y.length;U+=1){const se=Wa(C,Y,U);k[U]?k[U].p(se,P):(k[U]=ks(se),k[U].c(),k[U].m(s,null))}for(;U<k.length;U+=1)k[U].d(1);k.length=Y.length}P&2&&ye(u,"shown",(B=C[1])==null?void 0:B.favoritesStoreValue.shown),P&2&&ye(y,"shown",(j=C[1])==null?void 0:j.searchStoreValue.shown)},i:ce,o:ce,d:function(C){C&&le(t),Ki(E,C),Ki(k,C),e[8](null),T=!1,We(I)}};return te("SvelteRegisterBlock",{block:L,id:Ms.name,type:"component",source:"",ctx:e}),L}function Lm(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("Toolbar",r,[]);let{favoritesStore:s=null}=t,{sunburstStore:o=null}=t,{searchStore:a=null}=t,c=null,l=!1,u=null;xe(()=>{l=!0});const f=()=>{n(1,u)},h=()=>{s&&o&&a&&n(1,u=new Ra(f,s,o,a))},d=["favoritesStore","sunburstStore","searchStore"];Object.keys(t).forEach(y=>{!~d.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&console.warn(`<Toolbar> was created with unknown prop '${y}'`)});const w=y=>u==null?void 0:u.depthBoxClicked(y+1),g=()=>{u==null||u.favoritesClicked()},m=()=>{u==null||u.searchClicked()};function p(y){Ee[y?"unshift":"push"](()=>{c=y,n(0,c)})}return e.$$set=y=>{"favoritesStore"in y&&n(2,s=y.favoritesStore),"sunburstStore"in y&&n(3,o=y.sunburstStore),"searchStore"in y&&n(4,a=y.searchStore)},e.$capture_state=()=>({onMount:xe,ToolbarEventHandler:Ra,iconSearch:Lc,iconHeart:Hc,iconHeartSolid:Pc,favoritesStore:s,sunburstStore:o,searchStore:a,component:c,mounted:l,handler:u,handlerUpdated:f,initView:h}),e.$inject_state=y=>{"favoritesStore"in y&&n(2,s=y.favoritesStore),"sunburstStore"in y&&n(3,o=y.sunburstStore),"searchStore"in y&&n(4,a=y.searchStore),"component"in y&&n(0,c=y.component),"mounted"in y&&(l=y.mounted),"handler"in y&&n(1,u=y.handler)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&28&&s&&o&&a&&h()},[c,u,s,o,a,w,g,m,p]}class Ic extends $e{constructor(t){super(t);Je(this,t,Lm,Ms,Be,{favoritesStore:2,sunburstStore:3,searchStore:4}),te("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:t,id:Ms.name})}get favoritesStore(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sunburstStore(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sunburstStore(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get searchStore(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set searchStore(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const br={sunburstWidth:650,treeWindowWidth:150,treeWindowHeaderHeight:26,treeWindowHeight:0,toolbarHeight:36},Hm={mouseenterDelay:300};br.treeWindowHeight=br.treeWindowHeaderHeight+br.treeWindowWidth;const Pm={"red-50":"hsl(350, 100.0%, 96.08%)","red-100":"hsl(354, 100.0%, 90.2%)","red-200":"hsl(0, 72.65%, 77.06%)","red-300":"hsl(0, 68.67%, 67.45%)","red-400":"hsl(1, 83.25%, 62.55%)","red-500":"hsl(4, 89.62%, 58.43%)","red-600":"hsl(1, 77.19%, 55.29%)","red-700":"hsl(0, 65.08%, 50.59%)","red-800":"hsl(0, 66.39%, 46.67%)","red-900":"hsl(0, 73.46%, 41.37%)","red-a100":"hsl(4, 100.0%, 75.1%)","red-a200":"hsl(0, 100.0%, 66.08%)","red-a400":"hsl(348, 100.0%, 54.51%)","red-a700":"hsl(0, 100.0%, 41.76%)","pink-50":"hsl(340, 80.0%, 94.12%)","pink-100":"hsl(339, 81.33%, 85.29%)","pink-200":"hsl(339, 82.11%, 75.88%)","pink-300":"hsl(339, 82.56%, 66.27%)","pink-400":"hsl(339, 81.9%, 58.82%)","pink-500":"hsl(339, 82.19%, 51.57%)","pink-600":"hsl(338, 77.78%, 47.65%)","pink-700":"hsl(336, 77.98%, 42.75%)","pink-800":"hsl(333, 79.27%, 37.84%)","pink-900":"hsl(328, 81.33%, 29.41%)","pink-a100":"hsl(339, 100.0%, 75.1%)","pink-a200":"hsl(339, 100.0%, 62.55%)","pink-a400":"hsl(338, 100.0%, 48.04%)","pink-a700":"hsl(333, 84.11%, 41.96%)","purple-50":"hsl(292, 44.44%, 92.94%)","purple-100":"hsl(291, 46.07%, 82.55%)","purple-200":"hsl(291, 46.94%, 71.18%)","purple-300":"hsl(291, 46.6%, 59.61%)","purple-400":"hsl(291, 46.61%, 50.78%)","purple-500":"hsl(291, 63.72%, 42.16%)","purple-600":"hsl(287, 65.05%, 40.39%)","purple-700":"hsl(282, 67.88%, 37.84%)","purple-800":"hsl(277, 70.17%, 35.49%)","purple-900":"hsl(267, 75.0%, 31.37%)","purple-a100":"hsl(291, 95.38%, 74.51%)","purple-a200":"hsl(291, 95.9%, 61.76%)","purple-a400":"hsl(291, 100.0%, 48.82%)","purple-a700":"hsl(280, 100.0%, 50.0%)","deep-purple-50":"hsl(264, 45.45%, 93.53%)","deep-purple-100":"hsl(261, 45.68%, 84.12%)","deep-purple-200":"hsl(261, 46.27%, 73.73%)","deep-purple-300":"hsl(261, 46.81%, 63.14%)","deep-purple-400":"hsl(261, 46.72%, 55.1%)","deep-purple-500":"hsl(261, 51.87%, 47.25%)","deep-purple-600":"hsl(259, 53.91%, 45.1%)","deep-purple-700":"hsl(257, 57.75%, 41.76%)","deep-purple-800":"hsl(254, 60.8%, 39.02%)","deep-purple-900":"hsl(251, 68.79%, 33.92%)","deep-purple-a100":"hsl(261, 100.0%, 76.67%)","deep-purple-a200":"hsl(255, 100.0%, 65.1%)","deep-purple-a400":"hsl(258, 100.0%, 56.08%)","deep-purple-a700":"hsl(265, 100.0%, 45.88%)","indigo-50":"hsl(231, 43.75%, 93.73%)","indigo-100":"hsl(231, 45.0%, 84.31%)","indigo-200":"hsl(230, 44.36%, 73.92%)","indigo-300":"hsl(230, 44.09%, 63.53%)","indigo-400":"hsl(230, 44.25%, 55.69%)","indigo-500":"hsl(230, 48.36%, 47.84%)","indigo-600":"hsl(231, 50.0%, 44.71%)","indigo-700":"hsl(231, 53.62%, 40.59%)","indigo-800":"hsl(232, 57.22%, 36.67%)","indigo-900":"hsl(234, 65.79%, 29.8%)","indigo-a100":"hsl(230, 100.0%, 77.45%)","indigo-a200":"hsl(230, 98.84%, 66.08%)","indigo-a400":"hsl(230, 98.97%, 61.76%)","indigo-a700":"hsl(230, 99.04%, 59.22%)","blue-50":"hsl(205, 86.67%, 94.12%)","blue-100":"hsl(207, 88.89%, 85.88%)","blue-200":"hsl(206, 89.74%, 77.06%)","blue-300":"hsl(206, 89.02%, 67.84%)","blue-400":"hsl(206, 89.95%, 60.98%)","blue-500":"hsl(206, 89.74%, 54.12%)","blue-600":"hsl(208, 79.28%, 50.78%)","blue-700":"hsl(209, 78.72%, 46.08%)","blue-800":"hsl(211, 80.28%, 41.76%)","blue-900":"hsl(216, 85.06%, 34.12%)","blue-a100":"hsl(217, 100.0%, 75.49%)","blue-a200":"hsl(217, 100.0%, 63.33%)","blue-a400":"hsl(217, 100.0%, 58.04%)","blue-a700":"hsl(224, 100.0%, 58.04%)","light-blue-50":"hsl(198, 93.55%, 93.92%)","light-blue-100":"hsl(198, 92.41%, 84.51%)","light-blue-200":"hsl(198, 92.37%, 74.31%)","light-blue-300":"hsl(198, 91.3%, 63.92%)","light-blue-400":"hsl(198, 91.93%, 56.27%)","light-blue-500":"hsl(198, 97.57%, 48.43%)","light-blue-600":"hsl(199, 97.41%, 45.49%)","light-blue-700":"hsl(201, 98.1%, 41.37%)","light-blue-800":"hsl(202, 97.91%, 37.45%)","light-blue-900":"hsl(206, 98.72%, 30.59%)","light-blue-a100":"hsl(198, 100.0%, 75.1%)","light-blue-a200":"hsl(198, 100.0%, 62.55%)","light-blue-a400":"hsl(198, 100.0%, 50.0%)","light-blue-a700":"hsl(202, 100.0%, 45.88%)","cyan-50":"hsl(186, 72.22%, 92.94%)","cyan-100":"hsl(186, 71.11%, 82.35%)","cyan-200":"hsl(186, 71.62%, 70.98%)","cyan-300":"hsl(186, 71.15%, 59.22%)","cyan-400":"hsl(186, 70.87%, 50.2%)","cyan-500":"hsl(186, 100.0%, 41.57%)","cyan-600":"hsl(186, 100.0%, 37.84%)","cyan-700":"hsl(185, 100.0%, 32.75%)","cyan-800":"hsl(185, 100.0%, 28.04%)","cyan-900":"hsl(182, 100.0%, 19.61%)","cyan-a100":"hsl(180, 100.0%, 75.88%)","cyan-a200":"hsl(180, 100.0%, 54.71%)","cyan-a400":"hsl(186, 100.0%, 50.0%)","cyan-a700":"hsl(187, 100.0%, 41.57%)","teal-50":"hsl(176, 40.91%, 91.37%)","teal-100":"hsl(174, 41.28%, 78.63%)","teal-200":"hsl(174, 41.9%, 64.9%)","teal-300":"hsl(174, 41.83%, 50.78%)","teal-400":"hsl(174, 62.75%, 40.0%)","teal-500":"hsl(174, 100.0%, 29.41%)","teal-600":"hsl(173, 100.0%, 26.86%)","teal-700":"hsl(173, 100.0%, 23.73%)","teal-800":"hsl(172, 100.0%, 20.59%)","teal-900":"hsl(169, 100.0%, 15.1%)","teal-a100":"hsl(166, 100.0%, 82.75%)","teal-a200":"hsl(165, 100.0%, 69.61%)","teal-a400":"hsl(165, 82.26%, 51.37%)","teal-a700":"hsl(171, 100.0%, 37.45%)","green-50":"hsl(124, 39.39%, 93.53%)","green-100":"hsl(121, 37.5%, 84.31%)","green-200":"hsl(122, 37.4%, 74.31%)","green-300":"hsl(122, 38.46%, 64.31%)","green-400":"hsl(122, 38.46%, 56.67%)","green-500":"hsl(122, 39.44%, 49.22%)","green-600":"hsl(122, 40.97%, 44.51%)","green-700":"hsl(122, 43.43%, 38.82%)","green-800":"hsl(123, 46.2%, 33.53%)","green-900":"hsl(124, 55.37%, 23.73%)","green-a100":"hsl(136, 77.22%, 84.51%)","green-a200":"hsl(150, 81.82%, 67.65%)","green-a400":"hsl(150, 100.0%, 45.1%)","green-a700":"hsl(144, 100.0%, 39.22%)","light-green-50":"hsl(88, 51.72%, 94.31%)","light-green-100":"hsl(87, 50.68%, 85.69%)","light-green-200":"hsl(88, 50.0%, 76.47%)","light-green-300":"hsl(87, 50.0%, 67.06%)","light-green-400":"hsl(87, 50.24%, 59.8%)","light-green-500":"hsl(87, 50.21%, 52.75%)","light-green-600":"hsl(89, 46.12%, 48.04%)","light-green-700":"hsl(92, 47.91%, 42.16%)","light-green-800":"hsl(95, 49.46%, 36.47%)","light-green-900":"hsl(103, 55.56%, 26.47%)","light-green-a100":"hsl(87, 100.0%, 78.24%)","light-green-a200":"hsl(87, 100.0%, 67.45%)","light-green-a400":"hsl(92, 100.0%, 50.59%)","light-green-a700":"hsl(96, 81.15%, 47.84%)","lime-50":"hsl(65, 71.43%, 94.51%)","lime-100":"hsl(64, 69.01%, 86.08%)","lime-200":"hsl(65, 70.69%, 77.25%)","lime-300":"hsl(65, 70.37%, 68.24%)","lime-400":"hsl(65, 69.7%, 61.18%)","lime-500":"hsl(65, 69.96%, 54.31%)","lime-600":"hsl(63, 59.68%, 49.61%)","lime-700":"hsl(62, 61.43%, 43.73%)","lime-800":"hsl(59, 62.89%, 38.04%)","lime-900":"hsl(53, 69.93%, 30.0%)","lime-a100":"hsl(65, 100.0%, 75.29%)","lime-a200":"hsl(65, 100.0%, 62.75%)","lime-a400":"hsl(73, 100.0%, 50.0%)","lime-a700":"hsl(75, 100.0%, 45.88%)","yellow-50":"hsl(55, 100.0%, 95.29%)","yellow-100":"hsl(53, 100.0%, 88.43%)","yellow-200":"hsl(53, 100.0%, 80.78%)","yellow-300":"hsl(53, 100.0%, 73.14%)","yellow-400":"hsl(53, 100.0%, 67.25%)","yellow-500":"hsl(53, 100.0%, 61.57%)","yellow-600":"hsl(48, 98.04%, 60.0%)","yellow-700":"hsl(42, 96.26%, 58.04%)","yellow-800":"hsl(37, 94.64%, 56.08%)","yellow-900":"hsl(28, 91.74%, 52.55%)","yellow-a100":"hsl(60, 100.0%, 77.65%)","yellow-a200":"hsl(60, 100.0%, 50.0%)","yellow-a400":"hsl(55, 100.0%, 50.0%)","yellow-a700":"hsl(50, 100.0%, 50.0%)","amber-50":"hsl(46, 100.0%, 94.12%)","amber-100":"hsl(45, 100.0%, 85.1%)","amber-200":"hsl(45, 100.0%, 75.49%)","amber-300":"hsl(45, 100.0%, 65.49%)","amber-400":"hsl(45, 100.0%, 57.84%)","amber-500":"hsl(45, 100.0%, 51.37%)","amber-600":"hsl(42, 100.0%, 50.0%)","amber-700":"hsl(37, 100.0%, 50.0%)","amber-800":"hsl(33, 100.0%, 50.0%)","amber-900":"hsl(26, 100.0%, 50.0%)","amber-a100":"hsl(47, 100.0%, 74.9%)","amber-a200":"hsl(47, 100.0%, 62.55%)","amber-a400":"hsl(46, 100.0%, 50.0%)","amber-a700":"hsl(40, 100.0%, 50.0%)","orange-50":"hsl(36, 100.0%, 93.92%)","orange-100":"hsl(35, 100.0%, 84.9%)","orange-200":"hsl(35, 100.0%, 75.1%)","orange-300":"hsl(35, 100.0%, 65.1%)","orange-400":"hsl(35, 100.0%, 57.45%)","orange-500":"hsl(35, 100.0%, 50.0%)","orange-600":"hsl(33, 100.0%, 49.22%)","orange-700":"hsl(30, 100.0%, 48.04%)","orange-800":"hsl(27, 100.0%, 46.86%)","orange-900":"hsl(21, 100.0%, 45.1%)","orange-a100":"hsl(38, 100.0%, 75.1%)","orange-a200":"hsl(33, 100.0%, 62.55%)","orange-a400":"hsl(34, 100.0%, 50.0%)","orange-a700":"hsl(25, 100.0%, 50.0%)","deep-orange-50":"hsl(5, 71.43%, 94.51%)","deep-orange-100":"hsl(14, 100.0%, 86.86%)","deep-orange-200":"hsl(14, 100.0%, 78.43%)","deep-orange-300":"hsl(14, 100.0%, 69.8%)","deep-orange-400":"hsl(14, 100.0%, 63.14%)","deep-orange-500":"hsl(14, 100.0%, 56.67%)","deep-orange-600":"hsl(14, 90.68%, 53.73%)","deep-orange-700":"hsl(14, 80.39%, 50.0%)","deep-orange-800":"hsl(14, 82.28%, 46.47%)","deep-orange-900":"hsl(14, 88.18%, 39.8%)","deep-orange-a100":"hsl(14, 100.0%, 75.1%)","deep-orange-a200":"hsl(14, 100.0%, 62.55%)","deep-orange-a400":"hsl(14, 100.0%, 50.0%)","deep-orange-a700":"hsl(11, 100.0%, 43.33%)","brown-50":"hsl(19, 15.79%, 92.55%)","brown-100":"hsl(16, 15.79%, 81.37%)","brown-200":"hsl(14, 15.19%, 69.02%)","brown-300":"hsl(15, 15.32%, 56.47%)","brown-400":"hsl(15, 17.5%, 47.06%)","brown-500":"hsl(15, 25.39%, 37.84%)","brown-600":"hsl(15, 25.29%, 34.12%)","brown-700":"hsl(14, 25.68%, 29.02%)","brown-800":"hsl(11, 25.81%, 24.31%)","brown-900":"hsl(8, 27.84%, 19.02%)","gray-50":"hsl(0, 0.0%, 98.04%)","gray-100":"hsl(0, 0.0%, 96.08%)","gray-200":"hsl(0, 0.0%, 93.33%)","gray-300":"hsl(0, 0.0%, 87.84%)","gray-400":"hsl(0, 0.0%, 74.12%)","gray-500":"hsl(0, 0.0%, 61.96%)","gray-600":"hsl(0, 0.0%, 45.88%)","gray-700":"hsl(0, 0.0%, 38.04%)","gray-800":"hsl(0, 0.0%, 25.88%)","gray-900":"hsl(0, 0.0%, 12.94%)","blue-gray-50":"hsl(204, 15.15%, 93.53%)","blue-gray-100":"hsl(198, 15.66%, 83.73%)","blue-gray-200":"hsl(199, 15.33%, 73.14%)","blue-gray-300":"hsl(199, 15.63%, 62.35%)","blue-gray-400":"hsl(200, 15.38%, 54.12%)","blue-gray-500":"hsl(199, 18.3%, 46.08%)","blue-gray-600":"hsl(198, 18.45%, 40.39%)","blue-gray-700":"hsl(199, 18.34%, 33.14%)","blue-gray-800":"hsl(199, 17.91%, 26.27%)","blue-gray-900":"hsl(199, 19.15%, 18.43%)","blue-gray-1000":"hsl(199, 20.93%, 8.43%)"},Se={colors:Pm,layout:br,time:Hm};var jt=(e=>(e[e.First=0]="First",e[e.Second=1]="Second",e[e.Both=2]="Both",e))(jt||{}),Mn=(e=>(e[e.PairArray=0]="PairArray",e[e.PairString=1]="PairString",e))(Mn||{}),nt=(e=>(e[e.SectorArc=0]="SectorArc",e[e.MidLine=1]="MidLine",e))(nt||{});const Im=[[" ",19.3],["!",34.3],['"',39.7],["#",58],["$",58],["%",78.6],["&",70.3],["'",23],["(",30],[")",30],["*",40],["+",58],[",",21.2],["-",34.7],[".",21.2],["/",37.3],["0",58],["1",58],["2",58],["3",58],["4",58],["5",58],["6",58],["7",58],["8",58],["9",58],[":",25.2],[";",25.2],["<",58],["=",58],[">",58],["?",39.8],["@",82.2],["A",68],["B",64.7],["C",68.5],["D",75.3],["E",58.1],["F",56.6],["G",73.4],["H",75.6],["I",30.7],["J",44.4],["K",68.1],["L",51.4],["M",92],["N",75.6],["O",79.8],["P",61.1],["Q",79.8],["R",64.4],["S",53],["T",59],["U",73],["V",68],["W",101.9],["X",64.3],["Y",62.9],["Z",62.4],["[",30],["\\",37.5],["]",30],["^",58],["_",39.4],["`",30.7],["a",50.7],["b",55.9],["c",46.7],["d",55.9],["e",52.4],["f",33.7],["g",51.1],["h",55.6],["i",25.6],["j",25.4],["k",52.4],["l",25.6],["m",82.1],["n",55.6],["o",55.6],["p",55.2],["q",55.9],["r",40.3],["s",43.4],["t",37.3],["u",55.6],["v",51.2],["w",76.6],["x",50.4],["y",51.2],["z",46.2],["{",30],["|",30],["}",30],["~",58],["_median",55.9]],Em=[['"&',-9.1],['",',-11.4],['"-',-8.9],['".',-11.4],['"/',-9.1],['"@',-2.3],['"A',-9.1],['"C',-2.3],['"G',-2.3],['"O',-2.3],['"Q',-2.3],['"V',2.4],['"W',2.4],['"Y',1.5],['"\\',2.4],['"a',-3.2],['"c',-4.6],['"d',-4.6],['"e',-4.6],['"o',-4.6],['"q',-4.6],["'&",-9.1],["',",-11.4],["'-",-8.9],["'.",-11.4],["'/",-9.1],["'@",-2.3],["'A",-9.1],["'C",-2.3],["'G",-2.3],["'O",-2.3],["'Q",-2.3],["'V",2.4],["'W",2.4],["'Y",1.5],["'\\",2.4],["'a",-3.2],["'c",-4.6],["'d",-4.6],["'e",-4.6],["'o",-4.6],["'q",-4.6],["(@",-2],["(C",-2],["(G",-2],["(O",-2],["(Q",-2],["(c",-1.6],["(d",-1.6],["(e",-1.6],["(o",-1.6],["(q",-1.6],["*&",-9.1],["*,",-11.4],["*-",-8.9],["*.",-11.4],["*/",-9.1],["*@",-2.3],["*A",-9.1],["*C",-2.3],["*G",-2.3],["*O",-2.3],["*Q",-2.3],["*V",2.4],["*W",2.4],["*Y",1.5],["*\\",2.4],["*a",-3.2],["*c",-4.6],["*d",-4.6],["*e",-4.6],["*o",-4.6],["*q",-4.6],[',"',-11.4],[",'",-11.4],[",*",-11.4],[",-",-6.8],[",@",-2.8],[",C",-2.8],[",G",-2.8],[",O",-2.8],[",Q",-2.8],[",T",-9],[",V",-9],[",W",-6.1],[",Y",-7.6],[",\\",-9],[",v",-6.6],[",w",-3.1],[",y",-6.6],['-"',-8.9],["-&",-2.6],["-'",-8.9],["-*",-8.9],["-,",-6.8],["-.",-6.8],["-/",-2.6],["-A",-2.6],["-T",-9],["-V",-5.6],["-W",-1.6],["-X",-3.1],["-Y",-8],["-Z",-2.3],["-\\",-5.6],['."',-11.4],[".'",-11.4],[".*",-11.4],[".-",-6.8],[".@",-2.8],[".C",-2.8],[".G",-2.8],[".O",-2.8],[".Q",-2.8],[".T",-9],[".V",-9],[".W",-6.1],[".Y",-7.6],[".\\",-9],[".v",-6.6],[".w",-3.1],[".y",-6.6],['/"',2.4],["/&",-6.8],["/'",2.4],["/*",2.4],["/,",-9.6],["/-",-5.6],["/.",-9.6],["//",-6.8],["/:",-4.4],["/;",-4.4],["/?",2.4],["/@",-2.6],["/A",-6.8],["/C",-2.6],["/G",-2.6],["/J",-7.6],["/O",-2.6],["/Q",-2.6],["/a",-5.8],["/c",-5.8],["/d",-5.8],["/e",-5.8],["/f",-1.5],["/g",-6.8],["/m",-4.4],["/n",-4.4],["/o",-5.8],["/p",-4.4],["/q",-5.8],["/r",-4.4],["/s",-5.3],["/t",-2.1],["/u",-4.4],["/v",-2.4],["/x",-2.6],["/y",-2.4],["/z",-4.1],['@"',-2.3],["@&",-2.1],["@'",-2.3],["@)",-2],["@*",-2.3],["@,",-2.8],["@.",-2.8],["@/",-2.1],["@A",-2.1],["@T",-4.9],["@V",-2.6],["@X",-1.5],["@Y",-4],["@Z",-3.5],["@\\",-2.6],["@]",-2],["@}",-2],['A"',-9.1],["A'",-9.1],["A*",-9.1],["A-",-2.6],["A?",-2.8],["A@",-2.1],["AC",-2.1],["AG",-2.1],["AJ",2.5],["AO",-2.1],["AQ",-2.1],["AT",-6.6],["AU",-2.8],["AV",-6.8],["AW",-4.2],["AY",-8.2],["A\\",-6.8],["Av",-4.1],["Ay",-4.1],["C-",-7.5],['D"',-2.3],["D&",-2.1],["D'",-2.3],["D)",-2],["D*",-2.3],["D,",-2.8],["D.",-2.8],["D/",-2.1],["DA",-2.1],["DT",-4.9],["DV",-2.6],["DX",-1.5],["DY",-4],["DZ",-3.5],["D\\",-2.6],["D]",-2],["D}",-2],["F&",-6.6],["F,",-9],["F.",-9],["F/",-6.6],["F:",-3],["F;",-3],["F?",1.5],["FA",-6.6],["FJ",-9.9],["Fc",-3.5],["Fd",-3.5],["Fe",-3.5],["Fm",-3],["Fn",-3],["Fo",-3.5],["Fp",-3],["Fq",-3.5],["Fr",-3],["Fu",-3],["J&",-2.8],["J,",-2.5],["J.",-2.5],["J/",-2.8],["JA",-2.8],["K-",-3.1],["K@",-1.5],["KC",-1.5],["KG",-1.5],["KO",-1.5],["KQ",-1.5],["Kc",-1.8],["Kd",-1.8],["Ke",-1.8],["Kf",-2.6],["Ko",-1.8],["Kq",-1.8],["Kt",-4.1],["Kv",-3.3],["Kw",-2.8],["Ky",-3.3],['L"',-14.5],["L'",-14.5],["L*",-14.5],["L,",2.7],["L-",-9.9],["L.",2.7],["L?",-2.5],["L@",-4],["LC",-4],["LG",-4],["LO",-4],["LQ",-4],["LT",-8.6],["LV",-9.1],["LW",-7.6],["LY",-10.6],["L\\",-9.1],["Lc",-1.8],["Ld",-1.8],["Le",-1.8],["Lo",-1.8],["Lq",-1.8],["Lv",-5.4],["Lw",-4],["Ly",-5.4],['O"',-2.3],["O&",-2.1],["O'",-2.3],["O)",-2],["O*",-2.3],["O,",-2.8],["O.",-2.8],["O/",-2.1],["OA",-2.1],["OT",-4.9],["OV",-2.6],["OX",-1.5],["OY",-4],["OZ",-3.5],["O\\",-2.6],["O]",-2],["O}",-2],["P&",-6.9],["P,",-12.4],["P.",-12.4],["P/",-6.9],["PA",-6.9],["PJ",-9.1],["Pa",-2.5],["Pc",-1.5],["Pd",-1.5],["Pe",-1.5],["Po",-1.5],["Pq",-1.5],['Q"',-2.3],["Q&",-2.1],["Q'",-2.3],["Q)",-2],["Q*",-2.3],["Q,",-2.8],["Q.",-2.8],["Q/",-2.1],["QA",-2.1],["QT",-4.9],["QV",-2.6],["QX",-1.5],["QY",-4],["QZ",-3.5],["Q\\",-2.6],["Q]",-2],["Q}",-2],["R@",-2.3],["RC",-2.3],["RG",-2.3],["RO",-2.3],["RQ",-2.3],["RT",-2.6],["RU",-2.1],["T&",-6.6],["T,",-9],["T-",-9],["T.",-9],["T/",-6.6],["T:",-8],["T;",-8],["T@",-4.9],["TA",-6.6],["TC",-4.9],["TG",-4.9],["TJ",-10],["TO",-4.9],["TQ",-4.9],["Ta",-12.5],["Tc",-10.5],["Td",-10.5],["Te",-10.5],["Tg",-9.4],["Tm",-8],["Tn",-8],["To",-10.5],["Tp",-8],["Tq",-10.5],["Tr",-8],["Ts",-8.1],["Tu",-8],["Tv",-9],["Tw",-7],["Tx",-7.2],["Ty",-9],["Tz",-6],["U&",-2.8],["U,",-2.5],["U.",-2.5],["U/",-2.8],["UA",-2.8],['V"',2.4],["V&",-6.8],["V'",2.4],["V*",2.4],["V,",-9.6],["V-",-5.6],["V.",-9.6],["V/",-6.8],["V:",-4.4],["V;",-4.4],["V?",2.4],["V@",-2.6],["VA",-6.8],["VC",-2.6],["VG",-2.6],["VJ",-7.6],["VO",-2.6],["VQ",-2.6],["Va",-5.8],["Vc",-5.8],["Vd",-5.8],["Ve",-5.8],["Vf",-1.5],["Vg",-6.8],["Vm",-4.4],["Vn",-4.4],["Vo",-5.8],["Vp",-4.4],["Vq",-5.8],["Vr",-4.4],["Vs",-5.3],["Vt",-2.1],["Vu",-4.4],["Vv",-2.4],["Vx",-2.6],["Vy",-2.4],["Vz",-4.1],['W"',2.4],["W&",-4.7],["W'",2.4],["W*",2.4],["W,",-6.1],["W-",-1.6],["W.",-6.1],["W/",-4.7],["W?",1.7],["WA",-4.7],["WJ",-5.1],["Wa",-4.4],["Wc",-1.6],["Wd",-1.6],["We",-1.6],["Wg",-4.9],["Wo",-1.6],["Wq",-1.6],["Ws",-2.3],["X-",-3.1],["X@",-1.5],["XC",-1.5],["XG",-1.5],["XO",-1.5],["XQ",-1.5],["Xc",-1.8],["Xd",-1.8],["Xe",-1.8],["Xf",-2.6],["Xo",-1.8],["Xq",-1.8],["Xt",-4.1],["Xv",-3.3],["Xw",-2.8],["Xy",-3.3],['Y"',1.5],["Y&",-8.2],["Y'",1.5],["Y*",1.5],["Y,",-7.6],["Y-",-8],["Y.",-7.6],["Y/",-8.2],["Y:",-6.1],["Y;",-6.1],["Y?",1.7],["Y@",-4],["YA",-8.2],["YC",-4],["YG",-4],["YJ",-10],["YO",-4],["YQ",-4],["Ya",-6.4],["Yc",-8],["Yd",-8],["Ye",-8],["Yg",-8.6],["Ym",-6.1],["Yn",-6.1],["Yo",-8],["Yp",-6.1],["Yq",-8],["Yr",-6.1],["Ys",-6.4],["Yu",-6.1],["Yv",-5],["Yw",-4.6],["Yx",-6.6],["Yy",-5],["Z-",-3.5],["Z?",1.7],["Z@",-2.9],["ZC",-2.9],["ZG",-2.9],["ZO",-2.9],["ZQ",-2.9],["Zc",-1.9],["Zd",-1.9],["Ze",-1.9],["Zo",-1.9],["Zq",-1.9],["Zs",-1.4],["Zv",-2],["Zy",-2],["[@",-2],["[C",-2],["[G",-2],["[O",-2],["[Q",-2],["[c",-1.6],["[d",-1.6],["[e",-1.6],["[o",-1.6],["[q",-1.6],['\\"',-9.1],["\\'",-9.1],["\\*",-9.1],["\\-",-2.6],["\\?",-2.8],["\\@",-2.1],["\\C",-2.1],["\\G",-2.1],["\\J",2.5],["\\O",-2.1],["\\Q",-2.1],["\\T",-6.6],["\\U",-2.8],["\\V",-6.8],["\\W",-4.2],["\\Y",-8.2],["\\\\",-6.8],["\\v",-4.1],["\\y",-4.1],['a"',-3.6],["a'",-3.6],["a*",-3.6],["av",-1.6],["aw",-.8],["ay",-1.6],['b"',-4.6],["b'",-4.6],["b)",-1.6],["b*",-4.6],["bV",-5.8],["bW",-1.6],["b\\",-5.8],["b]",-1.6],["bv",-1.3],["bx",-3],["by",-1.3],["b}",-1.6],['e"',-4.6],["e'",-4.6],["e)",-1.6],["e*",-4.6],["eV",-5.8],["eW",-1.6],["e\\",-5.8],["e]",-1.6],["ev",-1.3],["ex",-3],["ey",-1.3],["e}",-1.6],['f"',3.4],["f'",3.4],["f*",3.4],["f,",-6.5],["f.",-6.5],["fi",-2.3],['h"',-3.6],["h'",-3.6],["h*",-3.6],["hv",-1.6],["hw",-.8],["hy",-1.6],["kc",-3],["kd",-3],["ke",-3],["ko",-3],["kq",-3],['m"',-3.6],["m'",-3.6],["m*",-3.6],["mv",-1.6],["mw",-.8],["my",-1.6],['n"',-3.6],["n'",-3.6],["n*",-3.6],["nv",-1.6],["nw",-.8],["ny",-1.6],['o"',-4.6],["o'",-4.6],["o)",-1.6],["o*",-4.6],["oV",-5.8],["oW",-1.6],["o\\",-5.8],["o]",-1.6],["ov",-1.3],["ox",-3],["oy",-1.3],["o}",-1.6],['p"',-4.6],["p'",-4.6],["p)",-1.6],["p*",-4.6],["pV",-5.8],["pW",-1.6],["p\\",-5.8],["p]",-1.6],["pv",-1.3],["px",-3],["py",-1.3],["p}",-1.6],["r,",-6.6],["r.",-6.6],["ra",-1.9],["v&",-4.1],["v,",-6.6],["v.",-6.6],["v/",-4.1],["vA",-4.1],["vc",-1.3],["vd",-1.3],["ve",-1.3],["vo",-1.3],["vq",-1.3],["w,",-3.1],["w.",-3.1],["xc",-3],["xd",-3],["xe",-3],["xo",-3],["xq",-3],["y&",-4.1],["y,",-6.6],["y.",-6.6],["y/",-4.1],["yA",-4.1],["yc",-1.3],["yd",-1.3],["ye",-1.3],["yo",-1.3],["yq",-1.3],["{@",-2],["{C",-2],["{G",-2],["{O",-2],["{Q",-2],["{c",-1.6],["{d",-1.6],["{e",-1.6],["{o",-1.6],["{q",-1.6]];var Rm={textWidth:Im,kerningWidth:Em};const Wm=(e,t,n=16)=>{const r=new Map(e.textWidth),i=new Map(e.kerningWidth),s=[...t];let o=0;for(const[a,c]of s.entries())o+=r.get(c)||r.get("_median"),a!==s.length-1&&(o+=i.get(`${c}${s[a+1]}`)||0);return o/(100/n)},Ze=(e,t=16)=>Wm(Rm,e,t),lr=Math.PI/2,Ec=20;function Om(e,t){switch(t){case nt.SectorArc:{const n=[this.xScale(e.x0)-lr,this.xScale(e.x1)-lr],r=Math.max(0,(this.yScale(e.y0)+this.yScale(e.y1))/2),i=(n[0]+n[1])/2,s=i>0&&i<Math.PI;s&&n.reverse();const o=R.path();return o.arc(0,0,r,n[0],n[1],s),o.toString()}case nt.MidLine:{const n=[this.xScale(e.x0)-lr,this.xScale(e.x1)-lr],r=(n[0]+n[1])/2,i=this.yScale(e.y0),s=this.yScale(e.y1),o=i*Math.cos(r),a=i*Math.sin(r),c=s*Math.cos(r),l=s*Math.sin(r),u=R.path();return r>=Math.PI/2&&r<=Math.PI*3/2?(u.moveTo(c,l),u.lineTo(o,a)):(u.moveTo(o,a),u.lineTo(c,l)),u.toString()}}}function zm(e,t=16,n=null,r=0){n==null&&(n=this.getFeatureInfo(e.data.f).nameValue);const i=Ze(n,t),s=this.xScale(e.x1)-this.xScale(e.x0),o=Math.max(0,(this.yScale(e.y0)+this.yScale(e.y1))/2),a=s*o;return i<=a-r}const ko=(e,t)=>{const n=R.color(e(t.data.f));let r="currentcolor";if(n!==null){const i=[252,252,252],s=[74,74,74],o=R.color(n).rgb(),a=[o.r,o.g,o.b];Wr(i,a)<Wr(s,a)&&(r="hsla(0, 0%, 99%, 1)")}return r};function Ym(){const t=this.svg.select("g.mid-circle-group").selectAll("g.mid-circle");if(t.size()===0)return;const n=this.svg.select(`g.arc-${this.sunburstStoreValue.depthLow}`).datum(),i=(this.yScale(n.y1)-this.yScale(n.y0))/t.size(),s=Math.PI*1.2,o=t.append("text").attr("class","feature-name").style("fill",l=>ko(this.getFeatureColor,l)),a=this.textFontScale(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow),c=(l,u)=>{const f=this.getFeatureInfo(l.data.f);let h=f.nameValue,d=Ze(h,16*a);if(d>u)for(h=f.shortValue,d=Ze(h,16*a);d>u;)h=h.replace("...",""),h=h.slice(0,h.length-1),h=`${h}...`,d=Ze(h,16*a);return h};o.filter(l=>l.depth===1).style("font-size",`${a}rem`).text(l=>c(l,i*2-10)),o.filter(l=>l.depth!==1).style("font-size",`${a}rem`).append("textPath").attr("startOffset","50%").attr("xlink:href",l=>`#mid-circle-text-arc-${l.depth}`).text(l=>c(l,i*(l.depth-.5)*s))}function Um(){const e=this.svg.select("g.arc-group"),t=this.svg.select("g.text-group");let n=e.selectAll(`g.arc-${this.xScale.domain()[0]===0&&this.xScale.domain()[1]===1?this.sunburstStoreValue.depthLow:this.sunburstStoreValue.depthLow+1}`);n=n.sort((f,h)=>f.x0-h.x0),n=n.filter(f=>f.x0>=this.xScale.domain()[0]&&f.x1<=this.xScale.domain()[1]&&f.data.f!=="_");const r=t.selectAll("g.text-group").data(n.data()).join("g").attr("class","text-group");r.append("path").attr("class","text-arc").attr("id",(f,h)=>`text-arc-${h}`).attr("d",f=>this.textArc(f,nt.SectorArc)),r.append("path").attr("class","text-line").attr("id",(f,h)=>`text-line-${h}`).attr("d",f=>this.textArc(f,nt.MidLine));const i=r.append("text").attr("class","feature-name");i.style("fill",f=>ko(this.getFeatureColor,f));const s=new Set,o=new Map;if(i.size()===0)return;const a=this.yScale(i.datum().y1)-this.yScale(i.datum().y0)-15,c=this.textFontScale(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow),l=i.style("font-size",`${c}rem`).append("textPath").attr("startOffset","50%").attr("xlink:href",(f,h)=>{const d=this.getFeatureInfo(f.data.f);let w=d.nameValue,g=!1;return s.has(d.name)&&(w=d.value,g=!0),s.add(d.name),Ze(w,16*c)<a?(o.set(h,nt.MidLine),`#text-line-${h}`):!g&&this.doesTextFitArc(f,16*c,w,10)?(o.set(h,nt.SectorArc),`#text-arc-${h}`):(o.set(h,nt.MidLine),`#text-line-${h}`)});s.clear(),l.text((f,h)=>{const d=this.getFeatureInfo(f.data.f);let w=d.nameValue,g=!1;if(s.has(d.name)&&(w=d.value,g=!0),o.get(h)===nt.MidLine){if(this.yScale(f.y1)*(this.xScale(f.x1)-this.xScale(f.x0))<Ec)return"";let p=Ze(w,16*c);if(p>a&&!g)for(w=d.shortValue,p=Ze(w,16*c);p>a;)w=w.replace("...",""),w=w.slice(0,w.length-1),w=`${w}...`,p=Ze(w,16*c)}return s.add(d.name),w});const u=new Set;Array.from(this.featureMap.entries()).forEach(f=>{s.has(f[1][0])||u.add(f[0])}),this.drawSecondaryText(u)}function Gm(e){const t=this.svg.select("g.arc-group"),n=this.svg.select("g.text-group");let r=t.selectAll(`g.arc-${this.xScale.domain()[0]===0&&this.xScale.domain()[1]===1?this.sunburstStoreValue.depthLow+1:this.sunburstStoreValue.depthLow+2}`);if(r=r.filter(u=>u.x0>=this.xScale.domain()[0]&&u.x1<=this.xScale.domain()[1]&&e.has(+u.data.f)),r.size()===0)return;r=r.sort((u,f)=>u.x0-f.x0);const i=n.selectAll("g.s-text-group").data(r.data()).join("g").attr("class","text-group");i.append("path").attr("class","text-arc").attr("id",(u,f)=>`s-text-arc-${f}`).attr("d",u=>this.textArc(u,nt.SectorArc)),i.append("path").attr("class","text-line").attr("id",(u,f)=>`s-text-line-${f}`).attr("d",u=>this.textArc(u,nt.MidLine));const s=i.append("text").attr("class","feature-name"),o=this.yScale(s.datum().y1)-this.yScale(s.datum().y0)-15,a=this.textFontScale(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow);s.style("fill",u=>ko(this.getFeatureColor,u));const c=s.style("font-size",`${a}rem`).append("textPath").attr("startOffset","50%").attr("xlink:href",(u,f)=>{const d=this.getFeatureInfo(u.data.f).nameValue;return Ze(d,16*a)<o?`#s-text-line-${f}`:this.doesTextFitArc(u,16*a,d,10)?`#s-text-arc-${f}`:`#s-text-line-${f}`}),l=new Set;c.text(u=>{if(l.has(u.data.f))return"";const f=this.getFeatureInfo(u.data.f);let h=f.nameValue;if(this.yScale(u.y1)*(this.xScale(u.x1)-this.xScale(u.x0))<Ec)return"";let w=Ze(h,16*a);if(w>o)for(h=f.shortValue,w=Ze(h,16*a);w>o;)h=h.replace("...",""),h=h.slice(0,h.length-1),h=`${h}...`,w=Ze(h,16*a);return l.add(u.data.f),h})}function Bm(){this.svg.select(".text-group").selectAll("*").remove(),this.svg.selectAll("text.feature-name").remove()}let Vn=null,_r=null,Rc=new Date().getTime();function jm(e,t){if(e.stopPropagation(),e.preventDefault(),t!==null&&t.data.f==="_")return;let n={x0:0,x1:1,y0:0,y1:1},r=t;const i=this.xScale.domain(),s=this.yScale.domain(),o=this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow;if(t===null||t.x0==i[0]&&t.x1==i[1]){const l=this.arcDomainStack.pop();l!==void 0?(r=l.node,n=l,this.sunburstStoreValue.depthLow=r.depth===0?1:r.depth,this.sunburstStoreValue.depthHigh=Math.min(this.sunburstStoreValue.depthLow+l.depthGap,this.sunburstStoreValue.depthMax)):console.error("No more arc domain from the stack to pop!")}else{const l=1/(this.sunburstStoreValue.depthMax+1);this.sunburstStoreValue.depthLow=t.depth,this.sunburstStoreValue.depthHigh=Math.min(t.depth+o,this.sunburstStoreValue.depthMax),n={x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y0+l*(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow+1)};const u={x0:i[0],x1:i[1],y0:s[0],y1:s[1],node:this.curHeadNode,depthGap:o};this.arcDomainStack.push(u)}const a=new Array(this.sunburstStoreValue.depthMax).fill("");r.ancestors().forEach(l=>{if(l.depth>0){const u=this.getFeatureColor(l.data.f);a[l.depth-1]=u}}),this.sunburstStoreValue.depthColors=a,this.sunburstStore.set(this.sunburstStoreValue),this.curHeadNode=r,this.sunburstUpdated(),this.arcZoom(n)}function Xm(e,t){if(e.currentTarget===null)return;t.ancestors().filter(r=>r.depth>0).forEach(r=>{const i=this.svg.select(`path#arc-${r.data.nid}`);R.select(i.node().parentElement).raise(),i.classed("highlighted",!0)})}function qm(e,t){if(e.currentTarget===null)return;t.ancestors().filter(r=>r.depth>0).forEach(r=>{this.svg.select(`path#arc-${r.data.nid}`).classed("highlighted",!1)})}function Zm(e,t){e.preventDefault(),e.stopPropagation(),this.arcMouseenterHandler(e,t),_r!==null&&(window.clearTimeout(_r),_r=null);const n=()=>{if(t.data.t===void 0)return;const r=t.data.t;this.treeWindowStoreValue.treeID=+r;const i=t.ancestors().filter(o=>o.depth!==0).map(o=>o.data.f).reverse();this.treeWindowStoreValue.ancestorFs=i;const s=this.getTreeWindowPos(t);this.treeWindowStoreValue.x=s.x,this.treeWindowStoreValue.y=s.y,this.treeWindowStoreValue.show=!0,this.treeWindowStore.set(this.treeWindowStoreValue),Vn=null};this.treeWindowStoreValue.show||new Date().getTime()-Rc<500?n():Vn=window.setTimeout(n,Se.time.mouseenterDelay)}function Qm(e,t){t.data.t!==void 0&&(e.preventDefault(),e.stopPropagation(),this.arcMouseleaveHandler(e,t),Vn!==null&&(window.clearTimeout(Vn),Vn=null),_r=window.setTimeout(()=>{this.treeWindowStoreValue.show=!1,this.treeWindowStore.set(this.treeWindowStoreValue),Rc=new Date().getTime()},100))}function Jm(e){let t=(this.xScale(e.x0)+this.xScale(e.x1))/2-Math.PI/2;const n=this.yScale(e.y1)+8,r={x:Math.cos(t)*n,y:Math.sin(t)*n,quad:Math.floor(t/(Math.PI/2))+2};e.x0===this.xScale.domain()[0]&&e.x1===this.xScale.domain()[1]&&(r.x=Math.cos(-Math.PI/4)*n,r.y=Math.sin(-Math.PI/4)*n,r.quad=1);const i=u=>{const f={x:0,y:0};switch(u.quad){case 1:{f.x=u.x,f.y=u.y-Se.layout.treeWindowHeight;break}case 2:{f.x=u.x,f.y=u.y;break}case 3:{f.x=u.x-Se.layout.treeWindowWidth,f.y=u.y;break}case 4:{f.x=u.x-Se.layout.treeWindowWidth,f.y=u.y-Se.layout.treeWindowHeight;break}default:console.warn("Unknown quad!")}return f};let s=window.innerHeight;R.select(".timbertrek-page").size()>0&&(s=R.select(".timbertrek-page").node().getBoundingClientRect().height);const o=5,a=this.svg.node().getBoundingClientRect(),c={x:a.x+a.width/2,y:a.y+a.height/2};let l=i(r);if(l.y+c.y<o){const f=-(c.y-Se.layout.treeWindowHeight-o);t=Math.asin(f/n),r.quad===4&&(t=Math.PI-t),r.x=Math.cos(t)*n,r.y=Math.sin(t)*n,r.quad=Math.floor(t/(Math.PI/2))+2,l=i(r)}if(l.y+c.y+Se.layout.treeWindowHeight>s-o){const u=s-o-c.y-Se.layout.treeWindowHeight;t=Math.asin(u/n),r.quad===3&&(t=Math.PI-t),r.x=Math.cos(t)*n,r.y=Math.sin(t)*n,r.quad=Math.floor(t/(Math.PI/2))+2,l=i(r)}return l.x=c.x+l.x,l.y=c.y+l.y,l}function Km(e,t){if(e.preventDefault(),e.stopPropagation(),localStorage.getItem("treeWindowPinnedOnce")!=="true"&&localStorage.setItem("treeWindowPinnedOnce","true"),t.data.t===void 0)return;const n=t.data.t,r=this.treeWindowStoreValue.treeMap.get(n);if(r===void 0)return;const i=this.getTreeWindowPos(t),s={x:i.x,y:i.y,width:Se.layout.treeWindowWidth,height:Se.layout.treeWindowHeight},o={x:20,y:20};if(this.pinnedTreeStoreValue.lastActiveTreeID!==null){const a=this.pinnedTreeStoreValue.pinnedTrees.filter(c=>c.treeID===this.pinnedTreeStoreValue.lastActiveTreeID)[0];o.x=a.x+20,o.y=a.y+30}if(this.pinnedTreeStoreValue.pinnedTrees.map(a=>a.treeID).includes(n)){let a=-1;for(let l=0;l<this.pinnedTreeStoreValue.pinnedTrees.length;l++)if(this.pinnedTreeStoreValue.pinnedTrees[l].treeID===n){a=l;break}if(a===-1){console.warn("Could not find the clicked tree in the pinnedTrees array!");return}const c=this.pinnedTreeStoreValue.pinnedTrees[a];c.isPinned?c.jiggle():(c.isPinned=!0,c.startPos=s,c.x=o.x,c.y=o.y),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}else{const a={tree:r[0],treeMetric:wi(r[2],4),treeID:n,x:o.x,y:o.y,startPos:s,isFav:!1,isPinned:!0,note:"",jiggle:()=>{}};this.pinnedTreeStoreValue.pinnedTrees.push(a),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}}function $m(){const t=this.treeWindowStoreValue.treeMap.get(322);if(t!==void 0){const n={x:70,y:150};if(this.pinnedTreeStoreValue.lastActiveTreeID!==null){const i=this.pinnedTreeStoreValue.pinnedTrees.filter(s=>s.treeID===this.pinnedTreeStoreValue.lastActiveTreeID)[0];n.x=i.x+20,n.y=i.y+30}const r={tree:t[0],treeMetric:wi(t[2],4),treeID:322,x:n.x,y:n.y,startPos:{x:0,y:0,width:0,height:0},isFav:!1,isPinned:!0,note:"",jiggle:()=>{}};this.pinnedTreeStoreValue.pinnedTrees.push(r),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}}let kt=null;function e6(){this.treeMapMap.forEach((n,r)=>{n[2]>=this.localAccuracyLow&&n[2]<=this.localAccuracyHigh?this.selectedTrees.accuracy.add(r):this.selectedTrees.accuracy.delete(r)});const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=R.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var o;(o=s.uniqueTreeIDs)==null||o.forEach(a=>{i.add(a)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburst()}function t6(){if(this.searchStoreValue.treeHeightMap===null)return;this.searchStoreValue.treeHeightMap.forEach((n,r)=>{this.localHeightRange.has(n)?this.selectedTrees.height.add(r):this.selectedTrees.height.delete(r)});const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{const r=n;r.previous={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,data:r.data},n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=R.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var o;(o=s.uniqueTreeIDs)==null||o.forEach(a=>{i.add(a)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburstWithAnimation()}function n6(){if(this.searchStoreValue.treeDepthFeaturesMap===null)return;for(const[n,r]of this.searchStoreValue.treeDepthFeaturesMap){let i=!0;e:for(const[s,o]of r)for(const a of o)if(!this.localDepthFeatures.get(s).has(a)){i=!1;break e}i?this.selectedTrees.depth.add(n):this.selectedTrees.depth.delete(n)}const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{const r=n;r.previous={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,data:r.data},n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=R.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var o;(o=s.uniqueTreeIDs)==null||o.forEach(a=>{i.add(a)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburstWithAnimation()}function r6(e=500){const t=this.svg.select(".content-group"),n=R.transition().duration(e).ease(R.easeLinear);this.removeText(),this.arcDomainStack.forEach(i=>{i.x0=i.node.x0,i.x1=i.node.x1}),this.xScale.domain([this.curHeadNode.x0,this.curHeadNode.x1]),t.select(".arc-group").selectAll("g.arc").data(this.partition.descendants().slice(1),i=>i.data.nid).select("path").transition(n).tween("data",i=>{const s={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1,data:i.data},o=R.interpolate(i.previous,s);return a=>i.previous=o(a)}).style("display",i=>i.data.f===";"||i.depth>this.sunburstStoreValue.depthHigh+1?"none":(i.value!==void 0&&i.value===0,"initial")).attrTween("d",i=>()=>this.arc(i.previous)).on("end",(i,s,o)=>{const a=R.select(o[s]);let c="initial";i.data.f===";"||i.depth>this.sunburstStoreValue.depthHigh+1||i.value!==void 0&&i.value===0?c="none":c="initial",a.style("display",c)}),kt!==null&&(window.clearTimeout(kt),kt=null),kt=window.setTimeout(()=>{this.drawCenterText(),this.drawText()},700),this.sunburstUpdated()}function i6(){const e=this.svg.select(".content-group");this.removeText(),this.arcDomainStack.forEach(t=>{t.x0=t.node.x0,t.x1=t.node.x1}),this.xScale.domain([this.curHeadNode.x0,this.curHeadNode.x1]),e.select(".arc-group").selectAll("g.arc").data(this.partition.descendants().slice(1),t=>t.data.nid).select("path").attr("d",t=>this.arc(t)).style("display",t=>t.data.f===";"||t.depth>this.sunburstStoreValue.depthHigh+1||t.value!==void 0&&t.value===0?"none":"initial"),kt!==null&&(window.clearTimeout(kt),kt=null),kt=window.setTimeout(()=>{this.drawCenterText(),this.drawText()},500),this.sunburstUpdated()}const cr=800;var zr,Wc,Yr,Oc,Ur,zc,Gr,Yc,Br,Uc,jr,Gc,Xr,Bc;class za{constructor({component:t,data:n,sunburstStore:r,treeWindowStore:i,pinnedTreeStore:s,searchStore:o,sunburstUpdated:a}){ge(this,zr);ge(this,Yr);ge(this,Ur);ge(this,Gr);ge(this,Br);ge(this,jr);ge(this,Xr);A(this,"svg");A(this,"sunburstStore");A(this,"sunburstStoreValue");A(this,"treeWindowStore");A(this,"treeWindowStoreValue");A(this,"pinnedTreeStore");A(this,"pinnedTreeStoreValue");A(this,"searchStore");A(this,"searchStoreValue");A(this,"sunburstUpdated");A(this,"padding");A(this,"width");A(this,"height");A(this,"maxRadius");A(this,"xScale");A(this,"yScale");A(this,"textFontScale");A(this,"data");A(this,"dataRoot");A(this,"treeMapMap");A(this,"partition");A(this,"featureCount");A(this,"featureValueCount");A(this,"featureOrder");A(this,"arc");A(this,"featureMap");A(this,"colorScale");A(this,"arcDomainStack");A(this,"curHeadNode");A(this,"localAccuracyLow");A(this,"localAccuracyHigh");A(this,"localHeightRange");A(this,"localDepthFeatures");A(this,"viewInitialized",!1);A(this,"selectedTrees");A(this,"textArc",Om);A(this,"doesTextFitArc",zm);A(this,"removeText",Bm);A(this,"drawText",Um);A(this,"drawSecondaryText",Gm);A(this,"drawCenterText",Ym);A(this,"arcClicked",jm);A(this,"arcMouseenterHandler",Xm);A(this,"arcMouseleaveHandler",qm);A(this,"leafArcClickHandler",Km);A(this,"leafArcMouseenterHandler",Zm);A(this,"leafArcMouseleaveHandler",Qm);A(this,"getTreeWindowPos",Jm);A(this,"tempShowPinnedTree",$m);A(this,"syncAccuracyRange",e6);A(this,"updateSunburst",i6);A(this,"updateSunburstWithAnimation",r6);A(this,"syncHeightRange",t6);A(this,"syncDepthFeatures",n6);A(this,"getFeatureColor",t=>this.colorScale(this.getFeatureNameValue(t,jt.First,Mn.PairString)));this.svg=R.select(t).select("svg").attr("width","100%").attr("height","100%").attr("viewbox","0 0 650 650").attr("preserveAspectRatio","none"),this.padding={top:10,bottom:10,left:10,right:10};const c=this.svg.node().getBoundingClientRect();this.width=c.width-this.padding.left-this.padding.right,this.height=c.height-this.padding.top-this.padding.bottom,this.data=n.trie,this.treeMapMap=new Map,Object.keys(n.treeMap).forEach(l=>{this.treeMapMap.set(+l,n.treeMap[+l])}),this.featureMap=new Map;for(const[l,u]of Object.entries(n.featureMap))this.featureMap.set(parseInt(l),u);this.featureCount=new Map,this.featureValueCount=new Map,this.colorScale=R.scaleOrdinal(),this.featureOrder=[],console.log(this.data),console.log(this.featureMap),this.dataRoot=R.hierarchy(this.data,l=>l.c).sum(l=>l.f==="_"?1:0),this.partition=re(this,zr,Wc).call(this),this.curHeadNode=this.partition,this.sunburstStore=r,this.sunburstStoreValue=to(),re(this,Ur,zc).call(this),this.treeWindowStore=i,this.treeWindowStoreValue=no(),re(this,Gr,Yc).call(this),this.pinnedTreeStore=s,this.pinnedTreeStoreValue=sn(),re(this,Br,Uc).call(this),this.searchStore=o,this.searchStoreValue=rn(),this.localAccuracyLow=this.searchStoreValue.curAccuracyLow,this.localAccuracyHigh=this.searchStoreValue.curAccuracyHigh,this.localHeightRange=new Set([...this.searchStoreValue.curHeightRange]),this.localDepthFeatures=qi(this.searchStoreValue.curDepthFeatures),this.selectedTrees={accuracy:new Set(this.treeMapMap.keys()),height:new Set(this.treeMapMap.keys()),depth:new Set(this.treeMapMap.keys())},re(this,jr,Gc).call(this),this.sunburstUpdated=a,this.maxRadius=this.width/2,this.xScale=R.scaleLinear().domain([0,1]).range([0,2*Math.PI]).clamp(!0),this.yScale=R.scaleLinear().domain([0,1]).range([0,this.maxRadius]),this.textFontScale=R.scaleLinear().domain([1,this.sunburstStoreValue.depthMax-1]).range([.93,.7]),this.arcDomainStack=[],this.arc=R.arc().startAngle(l=>this.xScale(l.x0)).endAngle(l=>{const u=l;let f=u.x1;return u.x0===u.x1&&(f=u.x0+1e-6),this.xScale(f)}).padAngle(l=>{const u=l,f=this.xScale(l.x1)-this.xScale(l.x0);return u.data.f==="_"?f<.001?0:Math.min(f/2,.015):0}).padRadius(this.radius*1.5).innerRadius(l=>Math.max(0,this.yScale(l.y0))).outerRadius(l=>Math.max(this.yScale(l.y0),this.yScale(l.y1)-1)),console.time("Draw sunburst"),this.initView(),this.viewInitialized=!0,console.timeEnd("Draw sunburst")}get radius(){return this.width/(2*(this.sunburstStoreValue.depthMax-this.sunburstStoreValue.depthLow+1))}getFeatureInfo(t){const n={name:"",value:"",nameValue:"",short:"",shortValue:""},r=parseInt(t);if(!isNaN(r)){const i=this.featureMap.get(r);i!==void 0&&(n.name=i[0],n.value=i[1],n.short=i[2],n.nameValue=`${n.name} ${n.value}`,n.shortValue=`${n.short} ${n.value}`)}return n}getFeatureNameValue(t,n=jt.First,r=Mn.PairArray){let i=-1;if(t.includes(" "))switch(n){case jt.First:i=+t.replace(/(.*)\s.*/,"$1");break;case jt.Second:i=+t.replace(/.*\s(.*)/,"$1");break;case jt.Both:i=+t.replace(/(.*)\s.*/,"$1");break;default:console.error("Unknown cases")}else i=+t;switch(r){case Mn.PairArray:return isNaN(i)?["",""]:this.featureMap.get(i);case Mn.PairString:{if(isNaN(i))return"";const s=this.featureMap.get(i);return s!==void 0?`${s[0]}:${s[1]}`:(console.error(`Encounter unrecorded key ${i}`),"")}}}initView(){const t=this.svg.append("g").attr("class","content-group").attr("transform",`translate(${this.padding.left+this.width/2}, ${this.padding.top+this.height/2})`);t.append("g").attr("class","mid-circle-group");const n=t.append("g").attr("class","arc-group");t.append("g").attr("class","text-group");const r=n.selectAll("g.arc").data(this.partition.descendants().slice(1),o=>o.data.nid).join("g").attr("class",o=>`arc arc-${o.depth}`).classed("leaf",o=>o.data.f==="_");r.append("path").attr("class","arc").classed("leaf",o=>o.data.f==="_").attr("id",o=>`arc-${o.data.nid}`).attr("d",o=>this.arc(o)).on("click",(o,a)=>this.arcClicked(o,a)).on("mouseenter",(o,a)=>this.arcMouseenterHandler(o,a)).on("mouseleave",(o,a)=>this.arcMouseleaveHandler(o,a)).style("fill",o=>o.data.f==="_"?"null":this.getFeatureColor(o.data.f)).style("display",o=>o.data.f===";"||o.depth>this.sunburstStoreValue.depthHigh+1?"none":"initial").filter(o=>o.data.f==="_").on("click",(o,a)=>this.leafArcClickHandler(o,a)).on("mouseenter",(o,a)=>this.leafArcMouseenterHandler(o,a)).on("mouseleave",(o,a)=>this.leafArcMouseleaveHandler(o,a)),r.append("title").text(o=>this.getFeatureInfo(o.data.f).nameValue);const s=1/(this.sunburstStoreValue.depthMax+1);this.arcZoom({x0:this.xScale.domain()[0],x1:this.xScale.domain()[1],y0:0,y1:(this.sunburstStoreValue.depthHigh+1)*s},500)}arcZoom(t,n=cr){this.removeText(),re(this,Xr,Bc).call(this,t),this.svg.select(".arc-group").transition().duration(n).ease(R.easeCubicInOut).tween("zoom",()=>{const i=R.interpolate(this.xScale.domain(),[t.x0,t.x1]),s=R.interpolate(this.yScale.domain(),[t.y0,t.y1]);return o=>{this.xScale.domain(i(o)),this.yScale.domain(s(o))}}).on("end",()=>{this.drawText(),this.drawCenterText()}).selectAll(".arc").attrTween("d",i=>()=>this.arc(i)).style("fill-opacity",i=>i.y0>=t.y1?.2:1).style("pointer-events",i=>i.y0>=t.y1?"none":"initial").style("display",i=>{const s=i;return s.data.f===";"||s.depth>this.sunburstStoreValue.depthHigh+1?"none":"initial"})}}zr=new WeakSet,Wc=function(){let t=0;this.dataRoot.eachBefore(r=>{r.data.f==="_"&&(r.data.u=!0),r.data.nid=t++}),this.dataRoot.children.forEach(r=>{const[i,s]=this.getFeatureNameValue(r.data.f);if(this.featureCount.has(i))this.featureCount.set(i,this.featureCount.get(i)+r.value),this.featureValueCount.get(i).has(s)?this.featureValueCount.get(i).set(s,this.featureValueCount.get(i).get(s)+r.value):this.featureValueCount.get(i).set(s,r.value);else{this.featureCount.set(i,r.value);const o=new Map;o.set(s,r.value),this.featureValueCount.set(i,o)}}),this.featureCount.set("",0),this.colorScale=re(this,Yr,Oc).call(this),this.dataRoot=this.dataRoot.sort((r,i)=>{const s=this.getFeatureInfo(r.data.f).name,o=this.getFeatureInfo(i.data.f).name,a=this.featureCount.get(s),c=this.featureCount.get(o),l=R.lch(this.getFeatureColor(r.data.f)).l,u=R.lch(this.getFeatureColor(i.data.f)).l;return a!==void 0&&c!==void 0?c-a||l-u:(console.warn(`Encountered unrecorded keys '${s}', '${o}'`),0)}),this.featureOrder=this.dataRoot.children.map(r=>parseInt(r.data.f)),this.featureMap.forEach((r,i)=>{this.featureOrder.includes(i)||this.featureOrder.push(i)});const n=R.partition()(this.dataRoot);return n.eachAfter(r=>{var i;if(r.data.f==="_")r.uniqueTreeIDs=new Set([r.data.t]);else{const s=new Set;(i=r.children)==null||i.forEach(o=>{var a;(a=o.uniqueTreeIDs)==null||a.forEach(c=>{s.add(c)})}),r.uniqueTreeIDs=s}}),n.each(r=>{var i;r.treeNum=((i=r.uniqueTreeIDs)==null?void 0:i.size)||0,r.uniqueTreeIDs=null}),n},Yr=new WeakSet,Oc=function(){const t=[],n=[],s=[R.lch(49.184,30.07,260.445),R.lch(68.968,73.064,62.176),R.lch(56.278,61.87,27.615),R.lch(60.11,50.293,135.863),R.lch(82.442,65.798,87.008),R.lch(69.948,22.911,191.071),R.lch(57.703,28.677,334.556),R.lch(52.777,22.881,53.64),R.lch(75.303,39.883,16.269)];return Array.from(this.featureCount.keys()).filter(c=>c!=="").sort((c,l)=>this.featureCount.get(l)-this.featureCount.get(c)).forEach((c,l)=>{l>8&&console.error("Number of feature is greater than 9");const u=R.lch(R.color(s[l%8])),f=Array.from(this.featureValueCount.get(c).keys()).sort((d,w)=>this.featureValueCount.get(c).get(w)-this.featureValueCount.get(c).get(d)),h=f.length;if(u.l+h*20<=92)f.forEach((d,w)=>{const g=`${c}:${d}`,m=R.lch(u.l+w*20,u.c,u.h);t.push(g),n.push(m.formatHsl())});else{const d=(92-u.l)/h;f.forEach((w,g)=>{const m=`${c}:${w}`,p=R.lch(u.l+g*d,u.c,u.h);t.push(m),n.push(p.formatHsl())})}}),R.scaleOrdinal(n).domain(t)},Ur=new WeakSet,zc=function(){this.sunburstStore.subscribe(t=>{switch(this.sunburstStoreValue=t,this.sunburstStoreValue.action){case Nt.DepthChanged:{this.sunburstStoreValue.action=Nt.None;const n=1/(this.sunburstStoreValue.depthMax+1),r=this.arcDomainStack.length>0?this.yScale.domain()[0]:0;this.arcZoom({x0:this.xScale.domain()[0],x1:this.xScale.domain()[1],y0:r,y1:(this.sunburstStoreValue.depthHigh+1)*n},500),this.sunburstStore.set(this.sunburstStoreValue);break}case Nt.None:break;default:console.error("Unknown case in sunburstStore action")}}),this.sunburstStoreValue.depthMax=this.partition.height,this.sunburstStoreValue.depthLow=1,this.sunburstStoreValue.depthHigh=this.sunburstStoreValue.depthLow+2,this.sunburstStoreValue.action=Nt.None,this.sunburstStoreValue.depthColors=new Array(this.sunburstStoreValue.depthMax).fill(""),this.sunburstStore.set(this.sunburstStoreValue)},Gr=new WeakSet,Yc=function(){this.treeWindowStore.subscribe(t=>{this.treeWindowStoreValue=t}),this.treeWindowStoreValue.getFeatureColor=this.getFeatureColor,this.treeWindowStore.set(this.treeWindowStoreValue)},Br=new WeakSet,Uc=function(){this.pinnedTreeStore.subscribe(t=>{this.pinnedTreeStoreValue=t}),this.pinnedTreeStoreValue.getFeatureColor=this.getFeatureColor,this.pinnedTreeStoreValue.getFeatureInfo=t=>this.getFeatureInfo(t),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)},jr=new WeakSet,Gc=function(){this.searchStore.subscribe(t=>{this.searchStoreValue=t,this.viewInitialized&&this.searchStoreValue.shown&&(this.searchStoreValue.curAccuracyHigh!==this.localAccuracyHigh||this.searchStoreValue.curAccuracyLow!==this.localAccuracyLow)?(this.localAccuracyHigh=this.searchStoreValue.curAccuracyHigh,this.localAccuracyLow=this.searchStoreValue.curAccuracyLow,this.syncAccuracyRange()):(this.localAccuracyHigh=this.searchStoreValue.curAccuracyHigh,this.localAccuracyLow=this.searchStoreValue.curAccuracyLow);const n=[...this.localHeightRange].every(i=>this.searchStoreValue.curHeightRange.has(i))&&this.localHeightRange.size===this.searchStoreValue.curHeightRange.size;this.viewInitialized&&this.searchStoreValue.shown&&!n?(this.localHeightRange=new Set([...this.searchStoreValue.curHeightRange]),this.syncHeightRange()):this.localHeightRange=new Set([...this.searchStoreValue.curHeightRange]);const r=[...this.searchStoreValue.curDepthFeatures.entries()].every(i=>this.localDepthFeatures.has(i[0])?Nm(this.localDepthFeatures.get(i[0]),i[1]):!1);this.viewInitialized&&this.searchStoreValue.shown&&!r?(this.localDepthFeatures=qi(this.searchStoreValue.curDepthFeatures),this.syncDepthFeatures()):this.localDepthFeatures=qi(this.searchStoreValue.curDepthFeatures)}),this.searchStoreValue.getFeatureColor=this.getFeatureColor,this.searchStoreValue.featureMap=this.featureMap,this.searchStoreValue.featureOrder=this.featureOrder;for(let t=1;t<this.partition.height;t++){const n=new Set([...this.featureMap.keys()].map(r=>r));this.searchStoreValue.curDepthFeatures.set(t,n)}this.searchStore.set(this.searchStoreValue)},Xr=new WeakSet,Bc=function(t){let n=!1;this.arcDomainStack.length>0&&(n=this.curHeadNode.depth-this.arcDomainStack[this.arcDomainStack.length-1].node.depth!==1);const r=this.svg.select("g.content-group").selectAll("g.mid-circle-group").data([0]).join("g").attr("class","mid-circle-group").raise(),i=this.curHeadNode.ancestors().filter(u=>u.depth!==0),s=R.scaleLinear().domain([t.y0,t.y1]).range([0,this.maxRadius]),o=s(this.curHeadNode.y1)-s(this.curHeadNode.y0),a=i.map(u=>u.depth),c=R.scaleLinear().domain([R.min(a)-1,R.max(a)]).range([0,o]),l=c(1);r.selectAll("g.mid-circle").data(i,u=>u.value).join(u=>{const f=u.append("g").attr("class","mid-circle").on("click",h=>this.arcClicked(h,null));return f.append("circle").attr("r",0).style("fill",h=>this.getFeatureColor(h.data.f)).call(h=>h.transition().duration(0).delay(n?cr-100:cr+100).attr("r",d=>c(d.depth))),f.append("path").attr("class","mid-circle-text-arc").attr("id",h=>`mid-circle-text-arc-${h.depth}`).attr("d",h=>{const d=[Math.PI*.5,Math.PI*2.5],w=l*(h.depth-.5),g=R.path();return g.arc(0,0,w,d[0],d[1],!1),g.toString()}),f.append("title").text(h=>this.getFeatureInfo(h.data.f).nameValue),f},u=>{const f=u;return f.select("circle").transition("zoom").duration(cr).ease(R.easeCubicInOut).attr("r",h=>c(h.depth)),f.select("path").attr("d",h=>{const d=[Math.PI*.5,Math.PI*2.5],w=l*(h.depth-.5),g=R.path();return g.arc(0,0,w,d[0],d[1],!1),g.toString()}),f})};const qi=e=>{const t=new Map;return e.forEach((n,r)=>{t.set(r,new Set([...n]))}),t};const _n="src/components/sunburst/Sunburst.svelte";function Cs(e){var m,p;let t,n,r,i,s,o=(((m=e[1])==null?void 0:m.curHeadNode.value)|0)+"",a,c,l,u,f=(((p=e[1])==null?void 0:p.curHeadNode.treeNum)|0)+"",h,d,w;const g={c:function(){var b,x;t=N("div"),n=tn("svg"),r=Q(),i=N("div"),s=N("span"),a=me(o),c=me(" paths"),l=Q(),u=N("span"),h=me(f),d=me(" trees"),S(n,"class","sunburst-svg s-_PkX202GTJ8Y"),F(n,_n,128,2,2867),S(s,"class","rule-stat s-_PkX202GTJ8Y"),F(s,_n,135,4,3108),S(u,"class","tree-stat s-_PkX202GTJ8Y"),F(u,_n,136,4,3183),S(i,"class","stat-overlay s-_PkX202GTJ8Y"),S(i,"title",w=`There are ${(b=e[1])==null?void 0:b.curHeadNode.value} decision paths `.concat(`and ${(x=e[1])==null?void 0:x.curHeadNode.treeNum} decisions trees in the current selection.`)),F(i,_n,129,2,2898),S(t,"class","sunburst s-_PkX202GTJ8Y"),F(t,_n,127,0,2820)},l:function(b){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(b,x){he(b,t,x),_(t,n),_(t,r),_(t,i),_(i,s),_(s,a),_(s,c),_(i,l),_(i,u),_(u,h),_(u,d),e[8](t)},p:function(b,[x]){var M,T,I,V;x&2&&o!==(o=(((M=b[1])==null?void 0:M.curHeadNode.value)|0)+"")&&Ye(a,o),x&2&&f!==(f=(((T=b[1])==null?void 0:T.curHeadNode.treeNum)|0)+"")&&Ye(h,f),x&2&&w!==(w=`There are ${(I=b[1])==null?void 0:I.curHeadNode.value} decision paths `.concat(`and ${(V=b[1])==null?void 0:V.curHeadNode.treeNum} decisions trees in the current selection.`))&&S(i,"title",w)},i:ce,o:ce,d:function(b){b&&le(t),e[8](null)}};return te("SvelteRegisterBlock",{block:g,id:Cs.name,type:"component",source:"",ctx:e}),g}function s6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("Sunburst",r,[]);let{data:s=null}=t,{sunburstStore:o=null}=t,{treeWindowStore:a=null}=t,{pinnedTreeStore:c=null}=t,{searchStore:l=null}=t,u=null,f=!1,h=null;const d=()=>{n(1,h)};xe(()=>{n(7,f=!0)});const w=()=>{u&&s&&o&&a&&l&&c&&n(1,h=new za({component:u,data:s,sunburstStore:o,treeWindowStore:a,pinnedTreeStore:c,searchStore:l,sunburstUpdated:d}))},g=["data","sunburstStore","treeWindowStore","pinnedTreeStore","searchStore"];Object.keys(t).forEach(p=>{!~g.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<Sunburst> was created with unknown prop '${p}'`)});function m(p){Ee[p?"unshift":"push"](()=>{u=p,n(0,u)})}return e.$$set=p=>{"data"in p&&n(2,s=p.data),"sunburstStore"in p&&n(3,o=p.sunburstStore),"treeWindowStore"in p&&n(4,a=p.treeWindowStore),"pinnedTreeStore"in p&&n(5,c=p.pinnedTreeStore),"searchStore"in p&&n(6,l=p.searchStore)},e.$capture_state=()=>({Sunburst:za,onMount:xe,config:Se,data:s,sunburstStore:o,treeWindowStore:a,pinnedTreeStore:c,searchStore:l,component:u,mounted:f,sunburst:h,sunburstUpdated:d,initView:w}),e.$inject_state=p=>{"data"in p&&n(2,s=p.data),"sunburstStore"in p&&n(3,o=p.sunburstStore),"treeWindowStore"in p&&n(4,a=p.treeWindowStore),"pinnedTreeStore"in p&&n(5,c=p.pinnedTreeStore),"searchStore"in p&&n(6,l=p.searchStore),"component"in p&&n(0,u=p.component),"mounted"in p&&n(7,f=p.mounted),"sunburst"in p&&n(1,h=p.sunburst)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&253&&s&&o&&a&&c&&l&&f&&u&&w()},[u,h,s,o,a,c,l,f,m]}class jc extends $e{constructor(t){super(t);Je(this,t,s6,Cs,Be,{data:2,sunburstStore:3,treeWindowStore:4,pinnedTreeStore:5,searchStore:6}),te("SvelteRegisterComponent",{component:this,tagName:"Sunburst_1",options:t,id:Cs.name})}get data(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sunburstStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sunburstStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get treeWindowStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set treeWindowStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get searchStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set searchStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var qr,Xc,Zr,qc,Qr,Zc;class Ya{constructor({component:t,treeMapMap:n,featureMap:r,treeWindowStore:i,treeWindowUpdated:s,width:o=150,height:a=150}){ge(this,qr);ge(this,Zr);ge(this,Qr);A(this,"treeMap");A(this,"curTreeID");A(this,"curAncestorFs");A(this,"treeWindowStore");A(this,"treeWindowStoreValue");A(this,"treeWindowUpdated");A(this,"svg");A(this,"padding");A(this,"width");A(this,"height");A(this,"getStyle",()=>`left: ${this.treeWindowStoreValue.x}px;
      top: ${this.treeWindowStoreValue.y}px;`);A(this,"shouldHidePinLabel",()=>localStorage.getItem("treeWindowPinnedOnce")===null?(localStorage.setItem("treeWindowPinnedOnce","false"),!1):localStorage.getItem("treeWindowPinnedOnce")==="true");this.treeMap=n,this.curTreeID=0,this.curAncestorFs=[],this.treeWindowUpdated=s,this.treeWindowStore=i,this.treeWindowStoreValue=no(),re(this,qr,Xc).call(this,r),this.svg=R.select(t).select("svg.tree-svg").attr("width",o).attr("height",a).attr("viewbox",`0 0 ${o} ${a}`).attr("preserveAspectRatio","none"),this.padding={top:20,bottom:20,left:0,right:0},this.width=o-this.padding.left-this.padding.right,this.height=a-this.padding.top-this.padding.bottom}get tree(){const t=this.treeMap.get(this.curTreeID);return t!==void 0?t[0]:(console.warn(`No such tree on the record ${this.curTreeID}`),null)}get treeMetric(){const t=this.treeMap.get(this.curTreeID);return t!==void 0?wi(t[2],4):null}}qr=new WeakSet,Xc=function(t){this.treeWindowStore.subscribe(n=>{this.treeWindowStoreValue=n,this.svg!==void 0&&(this.treeWindowStoreValue.treeID!==this.curTreeID||this.treeWindowStoreValue.ancestorFs.length!==this.curAncestorFs.length||!this.treeWindowStoreValue.ancestorFs.every((r,i)=>r===this.curAncestorFs[i]))&&this.treeMap.get(this.treeWindowStoreValue.treeID)&&(this.curTreeID=this.treeWindowStoreValue.treeID,this.curAncestorFs=[...this.treeWindowStoreValue.ancestorFs],re(this,Zr,qc).call(this)),this.treeWindowUpdated()}),this.treeWindowStoreValue.featureMap=t,this.treeWindowStoreValue.treeMap=this.treeMap,this.treeWindowStore.set(this.treeWindowStoreValue)},Zr=new WeakSet,qc=function(){this.svg.selectAll("g.content").remove(),re(this,Qr,Zc).call(this)},Qr=new WeakSet,Zc=function(){if(this.tree===null){console.warn("Trying to draw a tree that does not exist");return}const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=R.hierarchy(this.tree,g=>g.c),r=7,i=r*1,s=R.tree().size([this.width,this.height])(n),o=t.append("g").attr("class","link-group");o.selectAll("path.link").data(s.links()).join("path").attr("class",g=>`link link-${g.source.data.f[0]}`).attr("id",g=>{const m=g.source.ancestors().length>1?g.source.ancestors()[1].data.f[0]:"r",p=g.source.data.f[0],y=g.target.data.f[0];return g.target.data.f[0]==="+"?`link-${m}-${p}-p`:g.target.data.f[0]==="-"?`link-${m}-${p}-n`:`link-${m}-${p}-${y}`}).attr("d",g=>R.line()([[g.source.x,g.source.y],[g.target.x,g.target.y]]));const c=t.append("g").attr("class","node-group").selectAll("g").data(s.descendants()).join("g").attr("class","node").attr("transform",g=>`translate(${g.x}, ${g.y})`),l=new Set(["-","+"]);c.filter(g=>!l.has(g.data.f[0])).append("circle").attr("r",r).style("fill",g=>this.treeWindowStoreValue.getFeatureColor?this.treeWindowStoreValue.getFeatureColor(g.data.f[0]):Se.colors["gray-500"]),c.filter(g=>l.has(g.data.f[0])).append("rect").attr("x",-i).attr("y",-i).attr("rx",2).attr("ry",2).attr("width",2*i).attr("height",2*i),c.filter(g=>l.has(g.data.f[0])).append("text").attr("dy",.5).text(g=>g.data.f[0]);for(let g=0;g<this.curAncestorFs.length-1;g++){const m=g===0?"r":this.curAncestorFs[g-1],p=this.curAncestorFs[g],y=this.curAncestorFs[g+1];this.curAncestorFs[g+1]==="_"?(o.selectAll(`#link-${m}-${p}-p`).classed("highlighted",!0),o.selectAll(`#link-${m}-${p}-n`).classed("highlighted",!0)):o.selectAll(`#link-${m}-${p}-${y}`).classed("highlighted",!0)}const u=o.selectAll(`.link-${this.curAncestorFs[0]}`).data(),f=5,h=-1,d=[{x:(u[0].source.x+u[0].target.x)/2-f,y:(u[0].source.y+u[0].target.y)/2+h},{x:(u[1].source.x+u[1].target.x)/2+f,y:(u[1].source.y+u[1].target.y)/2+h}];t.append("g").attr("class","label-group").selectAll("text.split-label").data(d).join("text").attr("class","split-label").classed("split-label-left",(g,m)=>m===0).attr("x",g=>g.x).attr("y",g=>g.y).text((g,m)=>m===0?"true":"false")};var Qc='<svg viewBox="0 0 48 63" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M45.606-7.813c-.033.782.309 1.278 1.025 1.49.716.211 1.351.073 1.904-.415l5.713-5.762 6.348 15.771c.162.391.431.668.805.831.375.162.741.179 1.099.048l4.102-1.709c.39-.162.642-.431.756-.805.114-.375.074-.757-.122-1.148l-6.738-15.527 8.008-.488c.781-.033 1.318-.35 1.611-.953.293-.602.163-1.212-.39-1.831L48.828-39.356c-.553-.553-1.131-.707-1.733-.463-.602.244-.904.74-.904 1.489l-.585 30.517Z" style="fill-rule:nonzero" transform="translate(-18.934 59.052) scale(.91051)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(1.43013 0 0 1.46942 -3373.023 -6348.854)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(1.01125 -1.01125 1.03904 1.03904 -6884.807 -2079.508)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(0 -1.43013 1.46942 0 -6348.578 3420.756)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(-1.01125 -1.01125 1.03904 -1.03904 -2079.243 6931.533)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(1.01125 1.01125 -1.03904 1.03904 2129.287 -6885.076)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(0 1.43013 -1.46942 0 6396.933 -3375.343)"/></svg>';const{Object:o6}=eo,ot="src/components/tree-window/TreeWindow.svelte";function Vs(e){var V,E;let t,n,r,i,s=((V=e[1])==null?void 0:V.treeWindowStoreValue.treeID)+"",o,a,c,l,u=((E=e[1])==null?void 0:E.treeMetric)+"",f,h,d,w,g,m,p,y,b,x,M,T;const I={c:function(){var k,L,D;t=N("div"),n=N("div"),r=N("span"),i=me("Tree "),o=me(s),a=Q(),c=N("span"),l=me("("),f=me(u),h=me(")"),d=Q(),w=N("div"),g=N("div"),m=N("div"),p=N("div"),y=Q(),b=N("span"),b.textContent="pin",x=Q(),M=tn("svg"),S(r,"class","tree-name s-cr5gyj4Gsmo-"),F(r,ot,156,4,3655),S(c,"class","tree-acc s-cr5gyj4Gsmo-"),F(c,ot,160,4,3750),S(n,"class","tree-header s-cr5gyj4Gsmo-"),F(n,ot,155,2,3625),S(p,"class","svg-icon s-cr5gyj4Gsmo-"),F(p,ot,169,8,3980),S(b,"class","s-cr5gyj4Gsmo-"),F(b,ot,172,8,4054),S(m,"class","label s-cr5gyj4Gsmo-"),F(m,ot,168,6,3952),S(g,"class","label-container s-cr5gyj4Gsmo-"),ye(g,"no-display",(k=e[1])==null?void 0:k.shouldHidePinLabel()),F(g,ot,164,4,3847),S(M,"class","tree-svg s-cr5gyj4Gsmo-"),F(M,ot,176,4,4100),S(w,"class","content s-cr5gyj4Gsmo-"),F(w,ot,163,2,3821),S(t,"class","tree-window s-cr5gyj4Gsmo-"),S(t,"style",T=(L=e[1])==null?void 0:L.getStyle()),ye(t,"show",(D=e[1])==null?void 0:D.treeWindowStoreValue.show),F(t,ot,149,0,3484)},l:function(k){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(k,L){he(k,t,L),_(t,n),_(n,r),_(r,i),_(r,o),_(n,a),_(n,c),_(c,l),_(c,f),_(c,h),_(t,d),_(t,w),_(w,g),_(g,m),_(m,p),p.innerHTML=Qc,_(m,y),_(m,b),_(w,x),_(w,M),e[6](t)},p:function(k,[L]){var D,v,H,C,P;L&2&&s!==(s=((D=k[1])==null?void 0:D.treeWindowStoreValue.treeID)+"")&&Ye(o,s),L&2&&u!==(u=((v=k[1])==null?void 0:v.treeMetric)+"")&&Ye(f,u),L&2&&ye(g,"no-display",(H=k[1])==null?void 0:H.shouldHidePinLabel()),L&2&&T!==(T=(C=k[1])==null?void 0:C.getStyle())&&S(t,"style",T),L&2&&ye(t,"show",(P=k[1])==null?void 0:P.treeWindowStoreValue.show)},i:ce,o:ce,d:function(k){k&&le(t),e[6](null)}};return te("SvelteRegisterBlock",{block:I,id:Vs.name,type:"component",source:"",ctx:e}),I}function a6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("TreeWindow",r,[]);let{data:s=null}=t,{featureMap:o=null}=t,{treeWindowStore:a=null}=t,c=null,l=!1,u=null;xe(()=>{n(5,l=!0)});const f=()=>{n(1,u)},h=()=>{if(c&&s&&o&&a){const g=s.treeMap,m=new Map;Object.keys(g).forEach(p=>{m.set(+p,g[+p])}),n(1,u=new Ya({component:c,treeMapMap:m,featureMap:o,treeWindowStore:a,treeWindowUpdated:f}))}},d=["data","featureMap","treeWindowStore"];o6.keys(t).forEach(g=>{!~d.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&console.warn(`<TreeWindow> was created with unknown prop '${g}'`)});function w(g){Ee[g?"unshift":"push"](()=>{c=g,n(0,c)})}return e.$$set=g=>{"data"in g&&n(2,s=g.data),"featureMap"in g&&n(3,o=g.featureMap),"treeWindowStore"in g&&n(4,a=g.treeWindowStore)},e.$capture_state=()=>({onMount:xe,TreeWindow:Ya,iconClick:Qc,data:s,featureMap:o,treeWindowStore:a,component:c,mounted:l,treeWindow:u,treeWindowUpdated:f,initView:h}),e.$inject_state=g=>{"data"in g&&n(2,s=g.data),"featureMap"in g&&n(3,o=g.featureMap),"treeWindowStore"in g&&n(4,a=g.treeWindowStore),"component"in g&&n(0,c=g.component),"mounted"in g&&n(5,l=g.mounted),"treeWindow"in g&&n(1,u=g.treeWindow)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&61&&s&&o&&a&&l&&c&&h()},[c,u,s,o,a,l,w]}class Jc extends $e{constructor(t){super(t);Je(this,t,a6,Vs,Be,{data:2,featureMap:3,treeWindowStore:4}),te("SvelteRegisterComponent",{component:this,tagName:"TreeWindow_1",options:t,id:Vs.name})}get data(){throw new Error("<TreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<TreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get featureMap(){throw new Error("<TreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set featureMap(t){throw new Error("<TreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get treeWindowStore(){throw new Error("<TreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set treeWindowStore(t){throw new Error("<TreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var wt,Ft,Jr,Kc,qs,l6,Kr,$c,$r,eu;class Ua{constructor({component:t,pinnedTree:n,pinnedTreeStore:r,favoritesStore:i,pinnedTreeWindowUpdated:s,width:o=200,height:a=200}){ge(this,wt);ge(this,Jr);ge(this,qs);ge(this,Kr);ge(this,$r);A(this,"pinnedTree");A(this,"pinnedTreeWindowUpdated");A(this,"svg");A(this,"padding");A(this,"width");A(this,"height");A(this,"pinnedTreeStore");A(this,"pinnedTreeStoreValue");A(this,"pinnedTreeStoreUnsubscriber");A(this,"favoritesStore");A(this,"favoritesStoreValue");A(this,"favoritesStoreUnsubscriber");A(this,"sankey",!1);A(this,"hidden",!0);A(this,"endPos");A(this,"node");A(this,"playLaunchingAnimation",()=>{const t=this.pinnedTree.startPos.width/this.endPos.width,n=this.pinnedTree.startPos.height/this.endPos.height,r=this.pinnedTree.startPos.x-this.endPos.x,i=this.pinnedTree.startPos.y-this.endPos.y;this.node.animate([{transformOrigin:"top left",opacity:0,transform:`
            translate(${r}px, ${i}px)
            scale(${t}, ${n})
          `},{transformOrigin:"top left",opacity:1,transform:"none"}],{duration:300,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)",fill:"none"})});A(this,"getStyle",()=>`
      left: ${this.pinnedTree.x}px;      top: ${this.pinnedTree.y}px;`);A(this,"alterLayout",()=>{this.sankey?(re(this,Kr,$c).call(this),this.sankey=!1):(re(this,$r,eu).call(this),this.sankey=!0)});A(this,"heartClicked",async t=>{if(t.preventDefault(),t.stopPropagation(),re(this,wt,Ft).call(this),this.pinnedTree.isFav=!this.pinnedTree.isFav,this.pinnedTreeWindowUpdated(),this.pinnedTree.isFav){await $s();const n=R.select(".hidden-heart");n.transition().duration(400).ease(R.easeCubicInOut).style("transform","scale(1)").style("opacity",1).on("end",()=>{n.classed("pulse",!0),setTimeout(()=>{n.classed("pulse",!1).transition().duration(400).style("transform","scale(0)").style("opacity",0)},1500)});const r=R.select(this.node).select(".icon-heart").classed("play-animation",!0).on("animationend",()=>{r.classed("play-animation",!1)});new Set(this.favoritesStoreValue.favTrees.map(s=>s.pinnedTree.treeID)).has(this.pinnedTree.treeID)||this.favoritesStoreValue.favTrees.push({pinnedTree:this.pinnedTree,pinnedTreeUpdated:()=>{this.pinnedTreeWindowUpdated()},getFeatureColor:this.pinnedTreeStoreValue.getFeatureColor===null?s=>Se.colors["gray-500"]:this.pinnedTreeStoreValue.getFeatureColor})}else{const r=[...this.favoritesStoreValue.favTrees.map(i=>i.pinnedTree.treeID)].indexOf(this.pinnedTree.treeID);r>-1&&this.favoritesStoreValue.favTrees.splice(r,1)}this.favoritesStore.set(this.favoritesStoreValue),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)});A(this,"noteClicked",t=>{t.preventDefault(),t.stopPropagation(),re(this,wt,Ft).call(this);const n=R.select(this.node).select(".note-window");n.classed("show",!n.classed("show"))});A(this,"closeClicked",t=>{t.preventDefault(),t.stopPropagation();let n=!1;if(this.pinnedTreeStoreValue.lastActiveTreeID!==null&&(n=this.pinnedTreeStoreValue.lastActiveTreeID===this.pinnedTree.treeID),this.pinnedTree.isFav)this.pinnedTree.isPinned=!1;else{const r=this.pinnedTreeStoreValue.pinnedTrees.indexOf(this.pinnedTree);r>-1?this.pinnedTreeStoreValue.pinnedTrees.splice(r,1):console.warn("Trying to delete a tree that does not exist!")}if(n){let r=!1;for(let i=this.pinnedTreeStoreValue.pinnedTrees.length-1;i>=0;i--)if(this.pinnedTreeStoreValue.pinnedTrees[i].isPinned){this.pinnedTreeStoreValue.lastActiveTreeID=this.pinnedTreeStoreValue.pinnedTrees[i].treeID,r=!0;break}r||(this.pinnedTreeStoreValue.lastActiveTreeID=null)}this.pinnedTreeStore.set(this.pinnedTreeStoreValue)});A(this,"cancelEvent",t=>{t.preventDefault(),t.stopPropagation()});A(this,"headerMousedownHandler",t=>{t.preventDefault(),t.stopPropagation(),re(this,wt,Ft).call(this);const n={x:t.pageX,y:t.pageY},r=s=>{s.preventDefault(),s.stopPropagation();const o=this.node.offsetLeft+s.pageX-n.x,a=this.node.offsetTop+s.pageY-n.y;n.x=s.pageX,n.y=s.pageY,this.node.style.left=`${o}px`,this.node.style.top=`${a}px`},i=()=>{document.removeEventListener("mousemove",r,!0),document.removeEventListener("mouseup",i,!0),document.body.style.cursor="default",this.pinnedTree.x=parseFloat(this.node.style.left),this.pinnedTree.y=parseFloat(this.node.style.top)};document.addEventListener("mousemove",r,!0),document.addEventListener("mouseup",i,!0),document.body.style.cursor="move"});A(this,"contentMousedownHandler",t=>{re(this,wt,Ft).call(this)});A(this,"switchToggled",t=>{t.stopPropagation(),t.preventDefault();const n=R.select(t.currentTarget);n.attr("aria-checked",n.attr("aria-checked")==="true"?"false":!0),this.alterLayout()});this.pinnedTree=n,this.pinnedTreeWindowUpdated=s,this.width=o,this.height=a,this.node=t,this.pinnedTree.jiggle=()=>{re(this,wt,Ft).call(this),this.node.classList.add("jiggle"),this.node.onanimationend=()=>{this.node.classList.remove("jiggle")}},this.pinnedTreeStore=r,this.pinnedTreeStoreValue=sn(),this.pinnedTreeStoreUnsubscriber=this.pinnedTreeStore.subscribe(l=>{this.pinnedTreeStoreValue=l}),this.favoritesStore=i,this.favoritesStoreValue=nn(),this.favoritesStoreUnsubscriber=this.favoritesStore.subscribe(l=>{this.favoritesStoreValue=l}),re(this,wt,Ft).call(this),this.svg=R.select(t).select("svg.tree-svg").attr("width",o).attr("height",a).attr("viewbox",`0 0 ${o} ${a}`).attr("preserveAspectRatio","none"),this.padding={top:20,bottom:20,left:0,right:0},this.width=o-this.padding.left-this.padding.right,this.height=a-this.padding.top-this.padding.bottom,re(this,Jr,Kc).call(this);const c=R.select(t).node().getBoundingClientRect();this.endPos={x:this.pinnedTree.x,y:this.pinnedTree.y,width:c.width,height:c.height},this.hidden=!1,this.pinnedTreeWindowUpdated(),this.playLaunchingAnimation()}}wt=new WeakSet,Ft=function(){var n;const t=this.node.parentNode;(n=t==null?void 0:t.parentNode)==null||n.appendChild(t),this.pinnedTreeStoreValue.lastActiveTreeID=this.pinnedTree.treeID},Jr=new WeakSet,Kc=function(){const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=R.hierarchy(this.pinnedTree.tree,g=>g.c),r=7,i=r*1,s=R.tree().size([this.width,this.height])(n),o=t.append("g").attr("class","link-group");o.selectAll("path.link").data(s.links()).join("path").attr("class",g=>`link link-${g.source.data.f[0]}`).attr("id",g=>g.target.data.f[0]==="+"?`link-${g.source.data.f[0]}-p`:g.target.data.f[0]==="-"?`link-${g.source.data.f[0]}-n`:`link-${g.source.data.f[0]}-${g.target.data.f[0]}`).attr("d",g=>R.line()([[g.source.x,g.source.y],[g.target.x,g.target.y]]));const c=t.append("g").attr("class","node-group").selectAll("g").data(s.descendants()).join("g").attr("class","node").attr("transform",g=>`translate(${g.x}, ${g.y})`),l=new Set(["-","+"]);c.filter(g=>!l.has(g.data.f[0])).append("rect").attr("class","node-rect").attr("x",-i).attr("y",-i).attr("rx",r).attr("ry",r).attr("width",2*i).attr("height",2*i).style("fill",g=>this.pinnedTreeStoreValue.getFeatureColor?this.pinnedTreeStoreValue.getFeatureColor(g.data.f[0]):Se.colors["gray-500"]),c.filter(g=>!l.has(g.data.f[0])).append("title").text(g=>this.pinnedTreeStoreValue.getFeatureInfo?this.pinnedTreeStoreValue.getFeatureInfo(g.data.f[0]).nameValue:""),c.filter(g=>l.has(g.data.f[0])).append("rect").attr("class","leaf-rect").attr("x",-i).attr("y",-i).attr("rx",2).attr("ry",2).attr("width",2*i).attr("height",2*i),c.filter(g=>l.has(g.data.f[0])).append("text").attr("dy",.5).text(g=>g.data.f[0]);const u=o.selectAll(`.link-${this.pinnedTree.tree.f[0]}`).data(),f=5,h=-1,d=[{x:(u[0].source.x+u[0].target.x)/2-f,y:(u[0].source.y+u[0].target.y)/2+h},{x:(u[1].source.x+u[1].target.x)/2+f,y:(u[1].source.y+u[1].target.y)/2+h}];t.append("g").attr("class","label-group").selectAll("text.split-label").data(d).join("text").attr("class","split-label").classed("split-label-left",(g,m)=>m===0).attr("x",g=>g.x).attr("y",g=>g.y).text((g,m)=>m===0?"true":"false")},qs=new WeakSet,l6=function(){const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=R.hierarchy(this.pinnedTree.tree,m=>m.c),i=7*1,s=R.tree().size([this.width,this.height])(n),o=t.append("g").attr("class","link-group"),a=t.append("g").attr("class","node-group"),c={top:this.padding.top,bottom:this.padding.bottom,left:20,right:20},l=s.data.f[1],u=R.scaleLinear().domain([0,l]).range([0,this.width+this.padding.left+this.padding.right-c.left-c.right]),f=[];let h=0,d=-1;s.descendants().forEach(m=>{const p=Object.assign(m);p.depth!==d&&(h=p.parent===null?c.left:p.parent.x,d=p.depth),p.x=h,p.width=u(p.data.f[1]),h+=p.width,f.push(p)});const w=a.selectAll("g").data(f).join("g").attr("class","node").attr("transform",m=>`translate(${m.x}, ${m.y})`),g=new Set(["-","+"]);w.filter(m=>!g.has(m.data.f[0])).append("rect").attr("class","node-rect sankey").attr("x",0).attr("y",-i).attr("width",m=>m.width).attr("height",2*i).attr("rx",m=>m.width<16?1:2).attr("ry",m=>m.width<16?1:2).style("fill",m=>this.pinnedTreeStoreValue.getFeatureColor?this.pinnedTreeStoreValue.getFeatureColor(m.data.f[0]):Se.colors["gray-500"]),w.filter(m=>g.has(m.data.f[0])).append("rect").attr("class","leaf-rect").attr("x",0).attr("y",-i).attr("rx",m=>m.width<16?1:2).attr("ry",m=>m.width<16?1:2).attr("width",m=>m.width).attr("height",2*i),w.filter(m=>g.has(m.data.f[0])).append("text").attr("x",m=>m.width/2).attr("dy",.5).text(m=>m.data.f[0]).style("opacity",m=>m.width<16?0:1),o.selectAll("path.link").data(s.links()).join("path").attr("class",m=>`link link-${m.source.data.f[0]}`).attr("id",m=>m.target.data.f[0]==="+"?`link-${m.source.data.f[0]}-p`:m.target.data.f[0]==="-"?`link-${m.source.data.f[0]}-n`:`link-${m.source.data.f[0]}-${m.target.data.f[0]}`).attr("d",m=>{const p=m.source,y=m.target;return R.line()([[p.x+p.width/2,p.y],[y.x+y.width/2,y.y-i]])})},Kr=new WeakSet,$c=function(){const t=this.svg.select("g.content"),n=R.hierarchy(this.pinnedTree.tree,f=>f.c),r=7,i=r*1,s=R.tree().size([this.width,this.height])(n),o=R.transition().duration(400).ease(R.easeCubicInOut);t.select(".link-group").selectAll("path.link").data(s.links()).join("path").transition(o).attr("d",f=>R.line()([[f.source.x,f.source.y],[f.target.x,f.target.y]]));const l=t.select(".node-group").selectAll("g.node").data(s.descendants()).join("g");l.transition(o).attr("transform",f=>`translate(${f.x}, ${f.y})`);const u=new Set(["-","+"]);l.filter(f=>!u.has(f.data.f[0])).select("rect.node-rect").classed("sankey",!1).transition(o).attr("x",-i).attr("y",-i).attr("rx",r).attr("ry",r).attr("width",2*i).attr("height",2*i),l.filter(f=>u.has(f.data.f[0])).select("rect.leaf-rect").attr("class","leaf-rect").transition(o).attr("x",-i).attr("y",-i).attr("rx",2).attr("ry",2).attr("width",2*i).attr("height",2*i),l.filter(f=>u.has(f.data.f[0])).select("text").transition(o).attr("x",0).attr("dy",.5).style("opacity",1),t.select(".label-group").style("display","unset").style("opacity",0).transition(o).style("opacity",1)},$r=new WeakSet,eu=function(){const t=this.svg.select(".content"),n=R.hierarchy(this.pinnedTree.tree,p=>p.c),i=7*1,s=R.tree().size([this.width,this.height])(n),o=t.select(".link-group"),a=t.select(".node-group"),c={top:this.padding.top,bottom:this.padding.bottom,left:20,right:20},l=s.data.f[1],u=R.scaleLinear().domain([0,l]).range([0,this.width+this.padding.left+this.padding.right-c.left-c.right]),f=[];let h=0,d=-1;s.descendants().forEach(p=>{const y=Object.assign(p);y.depth!==d&&(h=y.parent===null?c.left:y.parent.x,d=y.depth),y.x=h,y.width=u(y.data.f[1]),h+=y.width,f.push(y)});const w=R.transition().duration(400).ease(R.easeCubicInOut),g=a.selectAll("g.node").data(f).join("g");g.transition(w).attr("transform",p=>`translate(${p.x}, ${p.y})`);const m=new Set(["-","+"]);g.filter(p=>!m.has(p.data.f[0])).select("rect.node-rect").classed("sankey",!0).transition(w).attr("x",0).attr("y",-i).attr("width",p=>p.width).attr("height",2*i).attr("rx",p=>p.width<16?1:2).attr("ry",p=>p.width<16?1:2),g.filter(p=>m.has(p.data.f[0])).select("rect.leaf-rect").transition(w).attr("x",0).attr("y",-i).attr("rx",p=>p.width<16?1:2).attr("ry",p=>p.width<16?1:2).attr("width",p=>p.width).attr("height",2*i),g.filter(p=>m.has(p.data.f[0])).select("text").transition(w).attr("x",p=>p.width/2).attr("dy",.5).text(p=>p.data.f[0]).style("opacity",p=>p.width<16?0:1),o.selectAll("path.link").data(s.links()).join("path").transition(w).attr("d",p=>{const y=p.source,b=p.target;return R.line()([[y.x+y.width/2,y.y],[b.x+b.width/2,b.y-i]])}),t.select(".label-group").transition(w).style("opacity",0)};var tu='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.343 13.657A8 8 0 1113.657 2.343 8 8 0 012.343 13.657zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z"></path></svg>',yi='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 16A8 8 0 108 0a8 8 0 000 16zm2.33-11.5c-1.22 0-1.83.5-2.323 1.136C7.513 5 6.903 4.5 5.682 4.5c-1.028 0-2.169.784-2.169 2.5 0 1.499 1.493 3.433 3.246 4.517.52.321.89.479 1.248.484.357-.005.728-.163 1.247-.484C11.007 10.433 12.5 8.5 12.5 7c0-1.716-1.14-2.5-2.17-2.5z"></path></svg>',nu='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 16A8 8 0 108 0a8 8 0 000 16zM4 5a1 1 0 011-1h6a1 1 0 011 1v5a1 1 0 01-1 1H8.707l-1.853 1.854A.5.5 0 016 12.5V11H5a1 1 0 01-1-1V5z"></path></svg>',ru=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-3641,-31)">
        <g transform="matrix(1,0,0,1,-0.831706,0)">
            <g id="icon-heart-circle-clicked">
                <g transform="matrix(3.03726,0,0,3.03726,3642.35,31.6476)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16Z" style="fill:rgb(244,67,54);"/>
                </g>
                <g transform="matrix(3.03726,0,0,3.03726,3642.35,31.6476)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16ZM10.33,4.5C9.11,4.5 8.5,5 8.007,5.636C7.513,5 6.903,4.5 5.682,4.5C4.654,4.5 3.513,5.284 3.513,7C3.513,8.499 5.006,10.433 6.759,11.517C7.279,11.838 7.649,11.996 8.007,12.001C8.364,11.996 8.735,11.838 9.254,11.517C11.007,10.433 12.5,8.5 12.5,7C12.5,5.284 11.36,4.5 10.33,4.5Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,iu=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-3843,-44)">
        <g transform="matrix(1,0,0,1,-0.831706,0)">
            <g id="icon-note-circle-clicked" transform="matrix(1,0,0,1,-0.0850173,-0.438976)">
                <g transform="matrix(1,0,0,1,3843.92,44.439)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16Z" style="fill:hsl(123,46.2%,33.53%);"/>
                </g>
                <g transform="matrix(1,0,0,1,3843.92,44.439)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16ZM4,5C4,4.451 4.451,4 5,4L11,4C11.549,4 12,4.451 12,5L12,10C12,10.549 11.549,11 11,11L8.707,11L6.854,12.854C6.76,12.948 6.633,13.001 6.5,13.001C6.226,13.001 6,12.775 6,12.501L6,11L5,11C4.451,11 4,10.549 4,10L4,5Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`;const _e="src/components/tree-window/PinnedTreeWindow.svelte";function su(e){let t;const n={c:function(){t=N("div"),S(t,"class","svg-icon s-YWFeNV-ftNdK"),F(t,_e,336,10,9341)},m:function(i,s){he(i,t,s),t.innerHTML=yi},p:ce,d:function(i){i&&le(t)}};return te("SvelteRegisterBlock",{block:n,id:su.name,type:"else",source:"(336:8) {:else}",ctx:e}),n}function ou(e){let t;const n={c:function(){t=N("div"),S(t,"class","svg-icon icon-heart s-YWFeNV-ftNdK"),ye(t,"play-animation",!1),F(t,_e,332,10,9192)},m:function(i,s){he(i,t,s),t.innerHTML=ru},p:ce,d:function(i){i&&le(t)}};return te("SvelteRegisterBlock",{block:n,id:ou.name,type:"if",source:"(332:8) {#if pinnedTreeWindow?.pinnedTree.isFav}",ctx:e}),n}function au(e){let t;const n={c:function(){t=N("div"),S(t,"class","svg-icon s-YWFeNV-ftNdK"),F(t,_e,355,10,9819)},m:function(i,s){he(i,t,s),t.innerHTML=iu},p:ce,d:function(i){i&&le(t)}};return te("SvelteRegisterBlock",{block:n,id:au.name,type:"else",source:"(355:8) {:else}",ctx:e}),n}function lu(e){let t;const n={c:function(){t=N("div"),S(t,"class","svg-icon s-YWFeNV-ftNdK"),F(t,_e,351,10,9718)},m:function(i,s){he(i,t,s),t.innerHTML=nu},p:ce,d:function(i){i&&le(t)}};return te("SvelteRegisterBlock",{block:n,id:lu.name,type:"if",source:"(351:8) {#if pinnedTreeWindow?.pinnedTree.note === ''}",ctx:e}),n}function Ds(e){let t,n,r;const i={c:function(){t=N("textarea"),S(t,"class","note-window-input s-YWFeNV-ftNdK"),S(t,"name","note-input"),S(t,"placeholder","Leave a comment."),F(t,_e,366,14,10158)},m:function(o,a){he(o,t,a),Sr(t,e[1].pinnedTree.note),n||(r=[ae(t,"input",e[10],!1,!1,!1),ae(t,"input",e[11])],n=!0)},p:function(o,a){a&2&&Sr(t,o[1].pinnedTree.note)},d:function(o){o&&le(t),n=!1,We(r)}};return te("SvelteRegisterBlock",{block:i,id:Ds.name,type:"if",source:"(366:12) {#if pinnedTreeWindow !== null}",ctx:e}),i}function As(e){var de,oe;let t,n,r,i,s,o=((de=e[1])==null?void 0:de.pinnedTree.treeID)+"",a,c,l,u,f=((oe=e[1])==null?void 0:oe.pinnedTree.treeMetric)+"",h,d,w,g,m,p,y,b,x,M,T,I,V,E,Y,k,L,D,v,H,C,P,O,z,B,j,U,se,$;function q(ve,ne){var X;return(X=ve[1])!=null&&X.pinnedTree.isFav?ou:su}let J=q(e),K=J(e);function pe(ve,ne){var X;return((X=ve[1])==null?void 0:X.pinnedTree.note)===""?lu:au}let G=pe(e),Z=G(e),ee=e[1]!==null&&Ds(e);const W={c:function(){var ne,X,ue,He,Ce,Oe;t=N("div"),n=N("div"),r=N("div"),i=N("span"),s=me("Tree "),a=me(o),c=Q(),l=N("span"),u=me("("),h=me(f),d=me(")"),g=Q(),m=N("div"),p=N("div"),K.c(),y=Q(),b=N("div"),Z.c(),x=Q(),M=N("div"),T=N("div"),ee&&ee.c(),I=Q(),V=N("div"),E=N("div"),Y=Q(),k=N("div"),L=tn("svg"),D=Q(),v=N("div"),H=N("button"),C=N("label"),P=me("Scaled by sample size"),z=Q(),B=N("div"),S(i,"class","tree-name s-YWFeNV-ftNdK"),F(i,_e,315,6,8698),S(l,"class","tree-acc s-YWFeNV-ftNdK"),F(l,_e,319,6,8795),S(r,"class","tree-info s-YWFeNV-ftNdK"),S(r,"title",w=`Tree ${(ne=e[1])==null?void 0:ne.pinnedTree.treeID} - Accuracy ${(X=e[1])==null?void 0:X.pinnedTree.treeMetric}`),F(r,_e,311,4,8543),S(p,"class","control-fav s-YWFeNV-ftNdK"),S(p,"title","Add to my favorites"),F(p,_e,325,6,8937),S(T,"class","input-wrapper s-YWFeNV-ftNdK"),F(T,_e,361,10,9988),S(M,"class","note-window s-YWFeNV-ftNdK"),S(M,"title",""),ye(M,"show",!1),F(M,_e,360,8,9924),S(b,"class","control-note s-YWFeNV-ftNdK"),S(b,"title","Leave a comment"),F(b,_e,342,6,9451),S(E,"class","svg-icon s-YWFeNV-ftNdK"),F(E,_e,384,8,10690),S(V,"class","control-close s-YWFeNV-ftNdK"),S(V,"title","Close the window"),F(V,_e,378,6,10487),S(m,"class","control-buttons s-YWFeNV-ftNdK"),F(m,_e,324,4,8901),S(n,"class","tree-header s-YWFeNV-ftNdK"),F(n,_e,306,2,8385),S(L,"class","tree-svg s-YWFeNV-ftNdK"),F(L,_e,395,4,10900),S(k,"class","content s-YWFeNV-ftNdK"),F(k,_e,391,2,10798),S(C,"class","switch-label s-YWFeNV-ftNdK"),S(C,"for",O=`switch-${(ue=e[1])==null?void 0:ue.pinnedTree.treeID}`),F(C,_e,405,6,11155),S(B,"class","switch-track s-YWFeNV-ftNdK"),S(B,"id",j=`switch-${(He=e[1])==null?void 0:He.pinnedTree.treeID}`),F(B,_e,410,6,11305),S(H,"class","switch s-YWFeNV-ftNdK"),S(H,"aria-checked","false"),S(H,"title","Toggle to visualize sample size as node width"),F(H,_e,399,4,10970),S(v,"class","control-footer s-YWFeNV-ftNdK"),F(v,_e,398,2,10937),S(t,"class","pinned-tree-window s-YWFeNV-ftNdK"),S(t,"style",U=(Ce=e[1])==null?void 0:Ce.getStyle()),ye(t,"hidden",(Oe=e[1])==null?void 0:Oe.hidden),ye(t,"jiggle",!1),F(t,_e,299,0,8219)},l:function(ne){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(ne,X){he(ne,t,X),_(t,n),_(n,r),_(r,i),_(i,s),_(i,a),_(r,c),_(r,l),_(l,u),_(l,h),_(l,d),_(n,g),_(n,m),_(m,p),K.m(p,null),_(m,y),_(m,b),Z.m(b,null),_(b,x),_(b,M),_(M,T),ee&&ee.m(T,null),_(m,I),_(m,V),_(V,E),E.innerHTML=tu,_(t,Y),_(t,k),_(k,L),_(t,D),_(t,v),_(v,H),_(H,C),_(C,P),_(H,z),_(H,B),e[20](t),se||($=[ae(p,"click",e[8],!1,!1,!1),ae(p,"mousedown",e[9],!1,!1,!1),ae(T,"click",e[12],!1,!1,!1),ae(b,"click",e[13],!1,!1,!1),ae(b,"mousedown",c6,!1,!1,!1),ae(V,"click",e[14],!1,!1,!1),ae(V,"mousedown",e[15],!1,!1,!1),ae(n,"mousedown",e[16],!1,!1,!1),ae(n,"click",e[17],!1,!1,!1),ae(k,"mousedown",e[18],!1,!1,!1),ae(H,"click",e[19],!1,!1,!1)],se=!0)},p:function(ne,[X]){var ue,He,Ce,Oe,Ve,fn,dn,pn;X&2&&o!==(o=((ue=ne[1])==null?void 0:ue.pinnedTree.treeID)+"")&&Ye(a,o),X&2&&f!==(f=((He=ne[1])==null?void 0:He.pinnedTree.treeMetric)+"")&&Ye(h,f),X&2&&w!==(w=`Tree ${(Ce=ne[1])==null?void 0:Ce.pinnedTree.treeID} - Accuracy ${(Oe=ne[1])==null?void 0:Oe.pinnedTree.treeMetric}`)&&S(r,"title",w),J===(J=q(ne))&&K?K.p(ne,X):(K.d(1),K=J(ne),K&&(K.c(),K.m(p,null))),G===(G=pe(ne))&&Z?Z.p(ne,X):(Z.d(1),Z=G(ne),Z&&(Z.c(),Z.m(b,x))),ne[1]!==null?ee?ee.p(ne,X):(ee=Ds(ne),ee.c(),ee.m(T,null)):ee&&(ee.d(1),ee=null),X&2&&O!==(O=`switch-${(Ve=ne[1])==null?void 0:Ve.pinnedTree.treeID}`)&&S(C,"for",O),X&2&&j!==(j=`switch-${(fn=ne[1])==null?void 0:fn.pinnedTree.treeID}`)&&S(B,"id",j),X&2&&U!==(U=(dn=ne[1])==null?void 0:dn.getStyle())&&S(t,"style",U),X&2&&ye(t,"hidden",(pn=ne[1])==null?void 0:pn.hidden)},i:ce,o:ce,d:function(ne){ne&&le(t),K.d(),Z.d(),ee&&ee.d(),e[20](null),se=!1,We($)}};return te("SvelteRegisterBlock",{block:W,id:As.name,type:"component",source:"",ctx:e}),W}const c6=e=>{e.stopPropagation()};function u6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("PinnedTreeWindow",r,[]);let{pinnedTree:s=null}=t,{pinnedTreeStore:o=null}=t,{favoritesStore:a=null}=t,c=null,l=!1,u=null,f=!1;xe(()=>{n(6,l=!0)}),kr(()=>{u==null||u.pinnedTreeStoreUnsubscriber(),u==null||u.favoritesStoreUnsubscriber()});const h=()=>{n(1,u)},d=()=>{n(7,f=!0),c&&s&&o&&a&&n(1,u=new Ua({component:c,pinnedTree:s,pinnedTreeStore:o,favoritesStore:a,pinnedTreeWindowUpdated:h}))},w=D=>{D.stopPropagation(),a==null||a.update(v=>v)},g=["pinnedTree","pinnedTreeStore","favoritesStore"];Object.keys(t).forEach(D=>{!~g.indexOf(D)&&D.slice(0,2)!=="$$"&&D!=="slot"&&console.warn(`<PinnedTreeWindow> was created with unknown prop '${D}'`)});const m=D=>u==null?void 0:u.heartClicked(D),p=D=>u==null?void 0:u.cancelEvent(D),y=D=>w(D);function b(){u.pinnedTree.note=this.value,n(1,u)}const x=D=>u==null?void 0:u.cancelEvent(D),M=D=>u==null?void 0:u.noteClicked(D),T=D=>u==null?void 0:u.closeClicked(D),I=D=>u==null?void 0:u.cancelEvent(D),V=D=>u==null?void 0:u.headerMousedownHandler(D),E=D=>u==null?void 0:u.cancelEvent(D),Y=D=>u==null?void 0:u.contentMousedownHandler(D),k=D=>u==null?void 0:u.switchToggled(D);function L(D){Ee[D?"unshift":"push"](()=>{c=D,n(0,c)})}return e.$$set=D=>{"pinnedTree"in D&&n(3,s=D.pinnedTree),"pinnedTreeStore"in D&&n(4,o=D.pinnedTreeStore),"favoritesStore"in D&&n(5,a=D.favoritesStore)},e.$capture_state=()=>({onMount:xe,onDestroy:kr,PinnedTreeWindow:Ua,iconCloseCircle:tu,iconHeartCircle:yi,iconNoteCircle:nu,iconHeartCircleClicked:ru,iconNoteCircleClicked:iu,pinnedTree:s,pinnedTreeStore:o,favoritesStore:a,component:c,mounted:l,pinnedTreeWindow:u,initialized:f,pinnedTreeWindowUpdated:h,initView:d,noteChanged:w}),e.$inject_state=D=>{"pinnedTree"in D&&n(3,s=D.pinnedTree),"pinnedTreeStore"in D&&n(4,o=D.pinnedTreeStore),"favoritesStore"in D&&n(5,a=D.favoritesStore),"component"in D&&n(0,c=D.component),"mounted"in D&&n(6,l=D.mounted),"pinnedTreeWindow"in D&&n(1,u=D.pinnedTreeWindow),"initialized"in D&&n(7,f=D.initialized)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&249&&s&&l&&c&&o&&a&&!f&&d()},[c,u,w,s,o,a,l,f,m,p,y,b,x,M,T,I,V,E,Y,k,L]}class cu extends $e{constructor(t){super(t);Je(this,t,u6,As,Be,{pinnedTree:3,pinnedTreeStore:4,favoritesStore:5}),te("SvelteRegisterComponent",{component:this,tagName:"PinnedTreeWindow_1",options:t,id:As.name})}get pinnedTree(){throw new Error("<PinnedTreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTree(t){throw new Error("<PinnedTreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<PinnedTreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<PinnedTreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get favoritesStore(){throw new Error("<PinnedTreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<PinnedTreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var ei,uu;class Ga{constructor({favTree:t,component:n,textAreaNode:r,favoritesStore:i,pinnedTreeStore:s}){ge(this,ei);A(this,"favTree");A(this,"textAreaNode");A(this,"favoritesStore");A(this,"favoritesStoreValue");A(this,"favoritesStoreUnsubscriber");A(this,"pinnedTreeStore");A(this,"pinnedTreeStoreValue");A(this,"PinnedTreeStoreValueUnsubscriber");A(this,"svg");A(this,"padding");A(this,"width");A(this,"height");A(this,"adjustTextAreaHeight",async()=>{await $s(),this.textAreaNode.style.removeProperty("height"),this.textAreaNode.style.height=`${this.textAreaNode.scrollHeight}px`});A(this,"noteChanged",t=>{t.stopPropagation(),this.favTree.pinnedTreeUpdated(),this.adjustTextAreaHeight()});A(this,"deleteClicked",t=>{t.preventDefault(),t.stopPropagation();let n=-1;for(let o=0;o<this.pinnedTreeStoreValue.pinnedTrees.length;o++)if(this.pinnedTreeStoreValue.pinnedTrees[o].treeID===this.favTree.pinnedTree.treeID){n=o;break}const r=this.pinnedTreeStoreValue.pinnedTrees[n];r.isPinned?r.isFav=!1:this.pinnedTreeStoreValue.pinnedTrees.splice(n,1),this.pinnedTreeStore.set(this.pinnedTreeStoreValue);const s=[...this.favoritesStoreValue.favTrees.map(o=>o.pinnedTree.treeID)].indexOf(this.favTree.pinnedTree.treeID);s>-1&&this.favoritesStoreValue.favTrees.splice(s,1),this.favoritesStore.set(this.favoritesStoreValue)});A(this,"thumbnailClicked",t=>{t.preventDefault(),t.stopPropagation();for(let n=0;n<this.pinnedTreeStoreValue.pinnedTrees.length;n++){const r=this.pinnedTreeStoreValue.pinnedTrees[n];if(r.treeID===this.favTree.pinnedTree.treeID){if(r.isPinned)r.jiggle();else{const i=this.svg.node().getBoundingClientRect(),s={x:i.left,y:i.top,width:i.width,height:i.height};r.startPos=s,r.isPinned=!0,this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}break}}});this.favTree=t,this.textAreaNode=r,this.favoritesStore=i,this.favoritesStoreValue=nn(),this.favoritesStoreUnsubscriber=this.favoritesStore.subscribe(c=>{this.favoritesStoreValue=c,this.favoritesStoreValue.shown&&this.adjustTextAreaHeight()}),this.pinnedTreeStore=s,this.pinnedTreeStoreValue=sn(),this.PinnedTreeStoreValueUnsubscriber=this.pinnedTreeStore.subscribe(c=>{this.pinnedTreeStoreValue=c});const o=70,a=70;this.svg=R.select(n).select("svg.tree-svg").attr("width",o).attr("height",a).attr("viewbox",`0 0 ${o} ${a}`).attr("preserveAspectRatio","none"),this.padding={top:10,bottom:10,left:0,right:0},this.width=o-this.padding.left-this.padding.right,this.height=a-this.padding.top-this.padding.bottom,re(this,ei,uu).call(this)}}ei=new WeakSet,uu=function(){const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=R.hierarchy(this.favTree.pinnedTree.tree,u=>u.c),r=4,i=4,s=R.tree().size([this.width,this.height])(n);t.append("g").attr("class","link-group").selectAll("path.link").data(s.links()).join("path").attr("class",u=>`link link-${u.source.data.f[0]}`).attr("id",u=>{const f=u.source.ancestors().length>1?u.source.ancestors()[1].data.f[0]:"r",h=u.source.data.f[0],d=u.target.data.f[0];return u.target.data.f[0]==="+"?`link-${f}-${h}-p`:u.target.data.f[0]==="-"?`link-${f}-${h}-n`:`link-${f}-${h}-${d}`}).attr("d",u=>R.line()([[u.source.x,u.source.y],[u.target.x,u.target.y]]));const c=t.append("g").attr("class","node-group").selectAll("g").data(s.descendants()).join("g").attr("class","node").attr("transform",u=>`translate(${u.x}, ${u.y})`),l=new Set(["-","+"]);c.filter(u=>!l.has(u.data.f[0])).append("circle").attr("r",r).style("fill",u=>this.favTree.getFeatureColor(u.data.f[0])),c.filter(u=>l.has(u.data.f[0])).append("rect").attr("x",-i).attr("y",-i).attr("rx",1).attr("ry",1).attr("width",2*i).attr("height",2*i),c.filter(u=>l.has(u.data.f[0])).append("text").attr("dy",.5).text(u=>u.data.f[0])};var hu='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="40"/><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="40" d="M80 112h352"/><path d="M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="40"/></svg>';const Xe="src/components/favorites-panel/FavoritesRow.svelte";function Fs(e){let t,n,r;const i={c:function(){t=N("textarea"),S(t,"class","note-window-input s-Su409VPrjAJA"),S(t,"name","note-input"),S(t,"placeholder","Leave a comment."),F(t,Xe,161,8,4362)},m:function(o,a){he(o,t,a),e[10](t),Sr(t,e[0].pinnedTree.note),n||(r=[ae(t,"input",e[11],!1,!1,!1),ae(t,"input",e[12])],n=!0)},p:function(o,a){a&1&&Sr(t,o[0].pinnedTree.note)},d:function(o){o&&le(t),e[10](null),n=!1,We(r)}};return te("SvelteRegisterBlock",{block:i,id:Fs.name,type:"if",source:"(161:6) {#if favTree !== null}",ctx:e}),i}function Ns(e){var k,L;let t,n,r,i,s,o,a,c,l,u=((k=e[3])==null?void 0:k.favTree.pinnedTree.treeID)+"",f,h,d,w,g=((L=e[3])==null?void 0:L.favTree.pinnedTree.treeMetric)+"",m,p,y,b,x,M,T,I,V,E=e[0]!==null&&Fs(e);const Y={c:function(){t=N("div"),n=N("div"),r=tn("svg"),i=Q(),s=N("div"),o=N("div"),a=N("div"),c=N("span"),l=me("Tree "),f=me(u),h=Q(),d=N("span"),w=me("("),m=me(g),p=me(")"),y=Q(),b=N("div"),x=N("div"),M=Q(),T=N("div"),E&&E.c(),S(r,"class","tree-svg s-Su409VPrjAJA"),F(r,Xe,138,4,3714),S(n,"class","tree-left s-Su409VPrjAJA"),F(n,Xe,137,2,3686),S(c,"class","tree-name s-Su409VPrjAJA"),F(c,Xe,144,8,3896),S(d,"class","tree-metric s-Su409VPrjAJA"),F(d,Xe,147,8,4001),S(a,"class","tree-info-left s-Su409VPrjAJA"),F(a,Xe,143,6,3859),S(x,"class","svg-icon s-Su409VPrjAJA"),F(x,Xe,153,8,4159),S(b,"class","tree-info-right s-Su409VPrjAJA"),F(b,Xe,152,6,4121),S(o,"class","tree-info s-Su409VPrjAJA"),F(o,Xe,142,4,3829),S(T,"class","tree-note s-Su409VPrjAJA"),F(T,Xe,159,4,4301),S(s,"class","tree-right s-Su409VPrjAJA"),F(s,Xe,141,2,3800),S(t,"class","tree s-Su409VPrjAJA"),F(t,Xe,136,0,3643)},l:function(v){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(v,H){he(v,t,H),_(t,n),_(n,r),_(t,i),_(t,s),_(s,o),_(o,a),_(a,c),_(c,l),_(c,f),_(a,h),_(a,d),_(d,w),_(d,m),_(d,p),_(o,y),_(o,b),_(b,x),x.innerHTML=hu,_(s,M),_(s,T),E&&E.m(T,null),e[13](t),I||(V=[ae(r,"click",e[8],!1,!1,!1),ae(x,"click",e[9],!1,!1,!1)],I=!0)},p:function(v,[H]){var C,P;H&8&&u!==(u=((C=v[3])==null?void 0:C.favTree.pinnedTree.treeID)+"")&&Ye(f,u),H&8&&g!==(g=((P=v[3])==null?void 0:P.favTree.pinnedTree.treeMetric)+"")&&Ye(m,g),v[0]!==null?E?E.p(v,H):(E=Fs(v),E.c(),E.m(T,null)):E&&(E.d(1),E=null)},i:ce,o:ce,d:function(v){v&&le(t),E&&E.d(),e[13](null),I=!1,We(V)}};return te("SvelteRegisterBlock",{block:Y,id:Ns.name,type:"component",source:"",ctx:e}),Y}function h6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("FavoritesRow",r,[]);let{favTree:s=null}=t,{favoritesStore:o=null}=t,{pinnedTreeStore:a=null}=t,c=null,l=null,u=!1,f=!1,h=null;xe(()=>{n(6,u=!0)}),kr(()=>{h==null||h.favoritesStoreUnsubscriber(),h==null||h.PinnedTreeStoreValueUnsubscriber()});const d=()=>{s&&l&&c&&o&&a&&n(3,h=new Ga({favTree:s,component:c,textAreaNode:l,favoritesStore:o,pinnedTreeStore:a})),n(7,f=!0)},w=["favTree","favoritesStore","pinnedTreeStore"];Object.keys(t).forEach(M=>{!~w.indexOf(M)&&M.slice(0,2)!=="$$"&&M!=="slot"&&console.warn(`<FavoritesRow> was created with unknown prop '${M}'`)});const g=M=>h==null?void 0:h.thumbnailClicked(M),m=M=>h==null?void 0:h.deleteClicked(M);function p(M){Ee[M?"unshift":"push"](()=>{l=M,n(2,l)})}const y=M=>h.noteChanged(M);function b(){s.pinnedTree.note=this.value,n(0,s)}function x(M){Ee[M?"unshift":"push"](()=>{c=M,n(1,c)})}return e.$$set=M=>{"favTree"in M&&n(0,s=M.favTree),"favoritesStore"in M&&n(4,o=M.favoritesStore),"pinnedTreeStore"in M&&n(5,a=M.pinnedTreeStore)},e.$capture_state=()=>({FavoritesRow:Ga,onMount:xe,onDestroy:kr,deleteIcon:hu,favTree:s,favoritesStore:o,pinnedTreeStore:a,component:c,textAreaNode:l,mounted:u,initialized:f,favoriteRow:h,initView:d}),e.$inject_state=M=>{"favTree"in M&&n(0,s=M.favTree),"favoritesStore"in M&&n(4,o=M.favoritesStore),"pinnedTreeStore"in M&&n(5,a=M.pinnedTreeStore),"component"in M&&n(1,c=M.component),"textAreaNode"in M&&n(2,l=M.textAreaNode),"mounted"in M&&n(6,u=M.mounted),"initialized"in M&&n(7,f=M.initialized),"favoriteRow"in M&&n(3,h=M.favoriteRow)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&247&&s&&l&&c&&o&&a&&u&&!f&&d()},[s,c,l,h,o,a,u,f,g,m,p,y,b,x]}class fu extends $e{constructor(t){super(t);Je(this,t,h6,Ns,Be,{favTree:0,favoritesStore:4,pinnedTreeStore:5}),te("SvelteRegisterComponent",{component:this,tagName:"FavoritesRow_1",options:t,id:Ns.name})}get favTree(){throw new Error("<FavoritesRow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favTree(t){throw new Error("<FavoritesRow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get favoritesStore(){throw new Error("<FavoritesRow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<FavoritesRow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<FavoritesRow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<FavoritesRow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ba=(e,t)=>{e.stopPropagation(),e.preventDefault();const n=JSON.parse(JSON.stringify(t.favTrees)),r=[];n.forEach(i=>{delete i.getFeatureColor,delete i.pinnedTreeUpdated,delete i.pinnedTree.isPinned,delete i.pinnedTree.isFav,delete i.pinnedTree.jiggle,delete i.pinnedTree.x,delete i.pinnedTree.y,delete i.pinnedTree.startPos,r.push(i.pinnedTree)}),Fm(r,null,"favorite-trees.json")};function du(e,{from:t,to:n},r={}){const i=getComputedStyle(e),s=i.transform==="none"?"":i.transform,[o,a]=i.transformOrigin.split(" ").map(parseFloat),c=t.left+t.width*o/n.width-(n.left+o),l=t.top+t.height*a/n.height-(n.top+a),{delay:u=0,duration:f=d=>Math.sqrt(d)*120,easing:h=lh}=r;return{delay:u,duration:Qs(f)?f(Math.sqrt(c*c+l*l)):f,easing:h,css:(d,w)=>{const g=w*c,m=w*l,p=d+w*t.width/n.width,y=d+w*t.height/n.height;return`transform: ${s} translate(${g}px, ${m}px) scale(${p}, ${y});`}}}var vi='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path></svg>',pu='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z"></path></svg>';const qe="src/components/favorites-panel/FavoritesPanel.svelte";function ur(e,t,n){const r=e.slice();return r[11]=t[n],r}function Ls(e){let t,n,r,i;const s=[mu,gu],o=[];function a(l,u){return l[5].favTrees.length===0?0:1}t=a(e),n=o[t]=s[t](e);const c={c:function(){n.c(),r=$i()},m:function(u,f){o[t].m(u,f),he(u,r,f),i=!0},p:function(u,f){let h=t;t=a(u),t===h?o[t].p(u,f):(It(),be(o[h],1,1,()=>{o[h]=null}),Et(),n=o[t],n?n.p(u,f):(n=o[t]=s[t](u),n.c()),we(n,1),n.m(r.parentNode,r))},i:function(u){i||(we(n),i=!0)},o:function(u){be(n),i=!1},d:function(u){o[t].d(u),u&&le(r)}};return te("SvelteRegisterBlock",{block:c,id:Ls.name,type:"if",source:"(166:2) {#if initialized}",ctx:e}),c}function gu(e){let t,n=[],r=new Map,i,s=e[5].favTrees;lt(s);const o=c=>c[11].pinnedTree.treeID;Cr(e,s,ur,o);for(let c=0;c<s.length;c+=1){let l=ur(e,s,c),u=o(l);r.set(u,n[c]=Hs(u,l))}const a={c:function(){t=N("div");for(let l=0;l<n.length;l+=1)n[l].c();S(t,"class","tree-list s-3FYkPUvX2_k2"),F(t,qe,175,6,4710)},m:function(l,u){he(l,t,u);for(let f=0;f<n.length;f+=1)n[f].m(t,null);i=!0},p:function(l,u){if(u&35){s=l[5].favTrees,lt(s),It();for(let f=0;f<n.length;f+=1)n[f].r();Cr(l,s,ur,o),n=yl(n,u,o,1,l,s,r,t,ih,Hs,null,ur);for(let f=0;f<n.length;f+=1)n[f].a();Et()}},i:function(l){if(!i){for(let u=0;u<s.length;u+=1)we(n[u]);i=!0}},o:function(l){for(let u=0;u<n.length;u+=1)be(n[u]);i=!1},d:function(l){l&&le(t);for(let u=0;u<n.length;u+=1)n[u].d()}};return te("SvelteRegisterBlock",{block:a,id:gu.name,type:"else",source:"(175:4) {:else}",ctx:e}),a}function mu(e){let t,n,r,i,s;const o={c:function(){t=N("div"),n=N("div"),r=me("Click the heart button "),i=N("span"),s=me(" on tree windows to add favorite trees."),S(i,"class","svg-icon s-3FYkPUvX2_k2"),F(i,qe,169,33,4549),S(n,"class","tree-placeholder-text s-3FYkPUvX2_k2"),F(n,qe,168,8,4480),S(t,"class","tree-placeholder s-3FYkPUvX2_k2"),F(t,qe,167,6,4441)},m:function(c,l){he(c,t,l),_(t,n),_(n,r),_(n,i),i.innerHTML=yi,_(n,s)},p:ce,i:ce,o:ce,d:function(c){c&&le(t)}};return te("SvelteRegisterBlock",{block:o,id:mu.name,type:"if",source:"(167:4) {#if favoritesStoreValue.favTrees.length === 0}",ctx:e}),o}function Hs(e,t){let n,r,i,s,o,a=ce,c;r=new fu({props:{favTree:t[11],favoritesStore:t[0],pinnedTreeStore:t[1]},$$inline:!0});const l={key:e,first:null,c:function(){n=N("div"),Qe(r.$$.fragment),i=Q(),S(n,"class","tree-wrapper s-3FYkPUvX2_k2"),F(n,qe,177,10,4828),this.first=n},m:function(f,h){he(f,n,h),Ue(r,n,null),_(n,i),c=!0},p:function(f,h){t=f;const d={};h&32&&(d.favTree=t[11]),h&1&&(d.favoritesStore=t[0]),h&2&&(d.pinnedTreeStore=t[1]),r.$set(d)},r:function(){o=n.getBoundingClientRect()},f:function(){eh(n),a(),hl(n,o)},a:function(){a(),a=$u(n,o,du,{duration:300})},i:function(f){c||(we(r.$$.fragment,f),s&&s.end(1),c=!0)},o:function(f){be(r.$$.fragment,f),s=ml(n,ui,{duration:200}),c=!1},d:function(f){f&&le(n),Ge(r),f&&s&&s.end()}};return te("SvelteRegisterBlock",{block:l,id:Hs.name,type:"each",source:"(177:8) {#each favoritesStoreValue.favTrees as favTree (favTree.pinnedTree.treeID)}",ctx:t}),l}function Ps(e){let t,n,r,i,s,o,a,c,l,u,f,h,d,w,g=e[3]&&Ls(e);const m={c:function(){t=N("div"),n=N("div"),r=N("div"),i=N("div"),i.textContent="My Favorite Trees",s=Q(),o=N("div"),a=N("div"),c=Q(),l=N("div"),u=Q(),g&&g.c(),S(i,"class","title s-3FYkPUvX2_k2"),F(i,qe,150,6,3989),S(a,"class","svg-icon s-3FYkPUvX2_k2"),F(a,qe,152,8,4066),S(l,"class","svg-icon close-icon s-3FYkPUvX2_k2"),F(l,qe,158,8,4228),S(o,"class","icons s-3FYkPUvX2_k2"),F(o,qe,151,6,4038),S(r,"class","header-title s-3FYkPUvX2_k2"),F(r,qe,149,4,3956),S(n,"class","header s-3FYkPUvX2_k2"),F(n,qe,148,2,3931),S(t,"class","favorites-panel s-3FYkPUvX2_k2"),S(t,"style",f=`max-height: ${e[2]}px;`),ye(t,"shown",e[5].shown),F(t,qe,142,0,3794)},l:function(y){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(y,b){he(y,t,b),_(t,n),_(n,r),_(r,i),_(r,s),_(r,o),_(o,a),a.innerHTML=pu,_(o,c),_(o,l),l.innerHTML=vi,_(t,u),g&&g.m(t,null),e[9](t),h=!0,d||(w=[ae(a,"click",e[8],!1,!1,!1),ae(l,"click",e[6],!1,!1,!1)],d=!0)},p:function(y,[b]){y[3]?g?(g.p(y,b),b&8&&we(g,1)):(g=Ls(y),g.c(),we(g,1),g.m(t,null)):g&&(It(),be(g,1,1,()=>{g=null}),Et()),(!h||b&4&&f!==(f=`max-height: ${y[2]}px;`))&&S(t,"style",f),b&32&&ye(t,"shown",y[5].shown)},i:function(y){h||(we(g),h=!0)},o:function(y){be(g),h=!1},d:function(y){y&&le(t),g&&g.d(),e[9](null),d=!1,We(w)}};return te("SvelteRegisterBlock",{block:m,id:Ps.name,type:"component",source:"",ctx:e}),m}function f6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("FavoritesPanel",r,[]);let{favoritesStore:s=null}=t,{pinnedTreeStore:o=null}=t,{width:a=650}=t,c=null,l=!1,u=!1,f=nn();xe(()=>{n(7,l=!0)});const h=()=>{s&&o&&s.subscribe(p=>{n(5,f=p)}),n(3,u=!0)},d=p=>{p.stopPropagation(),p.preventDefault(),n(5,f.shown=!1,f),s==null||s.set(f)},w=["favoritesStore","pinnedTreeStore","width"];Object.keys(t).forEach(p=>{!~w.indexOf(p)&&p.slice(0,2)!=="$$"&&p!=="slot"&&console.warn(`<FavoritesPanel> was created with unknown prop '${p}'`)});const g=p=>Ba(p,f);function m(p){Ee[p?"unshift":"push"](()=>{c=p,n(4,c)})}return e.$$set=p=>{"favoritesStore"in p&&n(0,s=p.favoritesStore),"pinnedTreeStore"in p&&n(1,o=p.pinnedTreeStore),"width"in p&&n(2,a=p.width)},e.$capture_state=()=>({FavoritesRow:fu,downloadClicked:Ba,getFavoritesStoreDefaultValue:nn,onMount:xe,flip:du,fade:ui,closeIcon:vi,downloadIcon:pu,heartDemoIcon:yi,favoritesStore:s,pinnedTreeStore:o,width:a,component:c,mounted:l,initialized:u,favoritesStoreValue:f,initView:h,closeClicked:d}),e.$inject_state=p=>{"favoritesStore"in p&&n(0,s=p.favoritesStore),"pinnedTreeStore"in p&&n(1,o=p.pinnedTreeStore),"width"in p&&n(2,a=p.width),"component"in p&&n(4,c=p.component),"mounted"in p&&n(7,l=p.mounted),"initialized"in p&&n(3,u=p.initialized),"favoritesStoreValue"in p&&n(5,f=p.favoritesStoreValue)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&139&&s&&o&&l&&!u&&h()},[s,o,a,u,c,f,d,l,g,m]}class wu extends $e{constructor(t){super(t);Je(this,t,f6,Ps,Be,{favoritesStore:0,pinnedTreeStore:1,width:2}),te("SvelteRegisterComponent",{component:this,tagName:"FavoritesPanel",options:t,id:Ps.name})}get favoritesStore(){throw new Error("<FavoritesPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<FavoritesPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<FavoritesPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<FavoritesPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<FavoritesPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(t){throw new Error("<FavoritesPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ja=R.format(",.3~f"),Xa="slider-left-thumb",qa="slider-right-thumb",Zi=268,Qi=16,at=8,Ji={default:6,original:6*1.8};var ti,yu,ni,vu,ri,bu,St,Xt,Un,Is,Gn,Es,Bn,Rs,ii,_u,si,Su,oi,xu,ai,Tu,li,ku,ci,Mu;class Za{constructor(t,n,r,i){ge(this,ti);ge(this,ni);ge(this,ri);ge(this,St);ge(this,Un);ge(this,Gn);ge(this,Bn);ge(this,ii);ge(this,si);ge(this,oi);ge(this,ai);ge(this,li);ge(this,ci);A(this,"component");A(this,"accuracyRow");A(this,"accuracySVG",null);A(this,"heightRow");A(this,"heightSVG",null);A(this,"data");A(this,"treeMapMap");A(this,"accuracyDensities");A(this,"heightDensities");A(this,"accuracyXScale");A(this,"accuracyYScale");A(this,"densityClip");A(this,"heightXScale");A(this,"heightYScale");A(this,"searchStore");A(this,"searchStoreValue");A(this,"curAccuracyLow");A(this,"curAccuracyHigh");A(this,"accuracyLow");A(this,"accuracyHigh");A(this,"searchUpdated");A(this,"refreshAccuracy",()=>{re(this,St,Xt).call(this,"slider-left-thumb",this.accuracyLow),re(this,St,Xt).call(this,"slider-right-thumb",this.accuracyHigh)});A(this,"refreshHeight",()=>{var t;console.log("refreshing height");for(const n of this.heightXScale.domain()){const r=R.select(this.component).select(`#height-checkbox-${n}`);r.property("checked")||((t=this.heightSVG)==null||t.select(`#bar-${n}`).classed("selected",!0),r.property("checked",!0),this.searchStoreValue.curHeightRange.add(n))}this.searchStore.set(this.searchStoreValue)});A(this,"refreshDepth",t=>{const n=R.select(this.component).select(`#level-row-${t} .level-content`),r=this.searchStoreValue.curDepthFeatures.get(t);if(r===void 0){console.warn(`Unknown depth ${t}`);return}for(const i of this.searchStoreValue.featureOrder){const s=n.select(`#depth-check-box-label-${t}-${i}`).select(".depth-checkbox");s.property("checked")||(s.property("checked",!0),r.add(i))}this.searchStoreValue.curDepthFeatures.set(t,r),this.searchStore.set(this.searchStoreValue)});this.component=t,this.searchUpdated=r,this.searchStore=i,this.searchStoreValue=rn(),this.searchStore.subscribe(o=>{this.searchStoreValue=o,this.searchUpdated()}),this.accuracyRow=R.select(t).select(".accuracy-row"),this.heightRow=R.select(t).select(".height-row"),this.curAccuracyLow=0,this.curAccuracyHigh=1,this.accuracyLow=0,this.accuracyHigh=1,this.data=n,this.treeMapMap=new Map,Object.keys(n.treeMap).forEach(o=>{this.treeMapMap.set(+o,n.treeMap[+o])});const s=re(this,ti,yu).call(this);this.accuracyDensities=s.accuracyDensities,this.heightDensities=s.heightDensities,this.accuracyXScale=R.scaleLinear(),this.accuracyYScale=R.scaleLinear(),this.densityClip=null,this.accuracySVG=re(this,ni,vu).call(this),re(this,ri,bu).call(this),this.heightXScale=R.scaleBand(),this.heightYScale=R.scaleLinear(),this.heightSVG=re(this,ii,_u).call(this),re(this,si,Su).call(this),re(this,ai,Tu).call(this)}}ti=new WeakSet,yu=function(){const t=[];for(const h in this.data.treeMap)t.push(this.data.treeMap[h][2]);const n=t.length,r=50,i=R.bin().thresholds(r)(t),s=[];i.forEach(h=>{s.push({x:h.x0===void 0?0:h.x0,y:h.length/n})});const o=s[1].x-s[0].x;s.unshift({x:s[0].x-o,y:0}),s.push({x:s.slice(-1)[0].x+o,y:0}),this.curAccuracyLow=s[0].x,this.curAccuracyHigh=s.slice(-1)[0].x,this.accuracyLow=this.curAccuracyLow,this.accuracyHigh=this.curAccuracyHigh;const a=new Map;R.hierarchy(this.data.trie,h=>h.c).eachBefore(h=>{if(h.data.t!==void 0){const d=h.data.t;a.has(d)?a.set(d,Math.max(a.get(d),h.depth)):a.set(d,h.depth)}});const l=new Map;for(const[h,d]of this.treeMapMap){const w=new Map;R.hierarchy(d[0],m=>m.c).each(m=>{m.data.f[0]!=="+"&&m.data.f[0]!=="-"&&(w.has(m.depth+1)?w.get(m.depth+1).add(parseInt(m.data.f[0])):w.set(m.depth+1,new Set([parseInt(m.data.f[0])])))}),l.set(h,w)}const u=new Map;Array.from(a.values()).forEach(h=>{u.has(h)?u.set(h,u.get(h)+1):u.set(h,1)});const f=[];return u.forEach((h,d)=>{f.push({x:d,y:h/n})}),f.sort((h,d)=>h.x-d.x),this.searchStoreValue.treeHeightMap=a,this.searchStoreValue.treeDepthFeaturesMap=l,this.searchStore.set(this.searchStoreValue),{accuracyDensities:s,heightDensities:f}},ni=new WeakSet,vu=function(){const t=Zi-Qi*2,n=30,r=55,i=15,s=r+i+n,o=this.accuracyRow.select(".svg-accuracy").attr("width",t).attr("height",s),a={top:0,left:at,right:at,bottom:0,histTop:2},c=t-a.left-a.right;o.append("g").attr("class","border-group").attr("transform",`translate(${0}, ${a.top})`).append("rect").attr("width",t).attr("height",r-a.top).style("fill","none").style("stroke",Se.colors["gray-300"]);const l=o.append("g").attr("class","hist-group").attr("transform",`translate(${at}, ${a.top})`);this.accuracyXScale=R.scaleLinear().domain([this.accuracyDensities[0].x,this.accuracyDensities.slice(-1)[0].x]).range([0,c]);const u=Math.max(...this.accuracyDensities.map(T=>T.y));this.accuracyYScale=R.scaleLinear().domain([0,u]).range([r-a.bottom-a.top,a.histTop]);const f=R.line().curve(R.curveBasis).x(T=>this.accuracyXScale(T.x)).y(T=>this.accuracyYScale(T.y)),d=l.append("path").attr("class","area-path").datum(this.accuracyDensities).attr("d",f).clone(!0).classed("selected",!0);this.densityClip=l.append("clipPath").attr("id","accuracy-density-clip").append("rect").style("fill","hsla(100, 50%, 50%, 0.1)").attr("x",this.accuracyXScale(this.curAccuracyLow)).attr("width",this.accuracyXScale(this.curAccuracyHigh)-this.accuracyXScale(this.curAccuracyLow)).attr("height",r),d.attr("clip-path","url(#accuracy-density-clip)");const w=o.append("g").attr("class","tick-group").attr("transform",`translate(${at}, ${r+i})`),g=w.append("g").attr("class","tick-back-group"),m=w.append("g").attr("class","tick-top-group"),p=30,y=[],b=this.accuracyDensities[1].x-this.accuracyDensities[0].x,x=this.accuracyLow+b,M=this.accuracyHigh;for(let T=0;T<=p;T++)y.push(x+(M-x)*T/p);return m.selectAll("g.tick").data(y).join("g").attr("class","tick").attr("transform",T=>`translate(${this.accuracyXScale(T)}, 0)`).append("line").attr("y2",Ji.default),re(this,Bn,Rs).call(this),g.append("text").attr("class","label-min-value").attr("x",-4).attr("y",Ji.default*2.2).style("text-anchor","start").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",Se.colors["gray-500"]).text(ja(this.accuracyLow)),g.append("text").attr("class","label-max-value").attr("x",c+4).attr("y",Ji.default*2.2).style("text-anchor","end").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",Se.colors["gray-500"]).text(ja(this.accuracyHigh)),o},ri=new WeakSet,bu=function(){re(this,St,Xt).call(this,Xa,this.curAccuracyLow),re(this,St,Xt).call(this,qa,this.curAccuracyHigh),this.accuracyRow.select(`#${Xa}`).on("mousedown",t=>re(this,Un,Is).call(this,t)),this.accuracyRow.select(`#${qa}`).on("mousedown",t=>re(this,Un,Is).call(this,t)),re(this,Gn,Es).call(this)},St=new WeakSet,Xt=function(t,n){switch(n=Math.min(Math.max(n,this.accuracyLow),this.accuracyHigh),n=wi(n,3),t){case"slider-left-thumb":n=Math.min(this.curAccuracyHigh,n);break;case"slider-right-thumb":n=Math.max(this.curAccuracyLow,n);break;default:console.warn("Unknown thumb type in moveThumb()");break}const r=this.accuracyRow.select(`#${t}`).attr("data-curValue",n),i=Zi-2*Qi-2*at;let s=(n-this.accuracyLow)/(this.accuracyHigh-this.accuracyLow)*i;switch(t){case"slider-left-thumb":s-=at,this.curAccuracyLow=n,this.searchStoreValue.curAccuracyLow=this.curAccuracyLow;break;case"slider-right-thumb":this.curAccuracyHigh=n,this.searchStoreValue.curAccuracyHigh=this.curAccuracyHigh;break;default:console.warn("Unknown thumb type in moveThumb()");break}this.searchStore.set(this.searchStoreValue),r.style("left",`${s}px`),re(this,Gn,Es).call(this),re(this,Bn,Rs).call(this),this.searchUpdated()},Un=new WeakSet,Is=function(t){t.preventDefault(),t.stopPropagation();const n=t.target;if(n===null||!n.id.includes("thumb"))return;const r=n.parentNode,i=r.getBoundingClientRect().width;n.focus();const s=a=>{a.preventDefault(),a.stopPropagation();const c=a.pageX-r.getBoundingClientRect().x,l=this.accuracyLow+(this.accuracyHigh-this.accuracyLow)*c/i;re(this,St,Xt).call(this,n.id,l)},o=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",o),document.body.style.cursor="default",n.blur()};document.addEventListener("mousemove",s),document.addEventListener("mouseup",o),document.body.style.cursor="grabbing"},Gn=new WeakSet,Es=function(){const t=this.accuracyRow.select("#slider-left-thumb"),n=this.accuracyRow.select("#slider-right-thumb"),r=parseFloat(t.style("left")),s=parseFloat(n.style("left"))-r;this.accuracyRow.select(".track .range-track").style("left",`${r+at}px`).style("width",`${s}px`),this.densityClip!==null&&this.densityClip.attr("x",this.accuracyXScale(this.curAccuracyLow)).attr("width",this.accuracyXScale(this.curAccuracyHigh)-this.accuracyXScale(this.curAccuracyLow))},Bn=new WeakSet,Rs=function(){if(this.accuracySVG===null)return;const t=this.accuracySVG.select("g.tick-top-group").selectAll("g.tick");t.filter(n=>n>=this.curAccuracyLow&&n<=this.curAccuracyHigh).classed("out-range",!1),t.filter(n=>n<this.curAccuracyLow||n>this.curAccuracyHigh).classed("out-range",!0),this.curAccuracyHigh===this.curAccuracyLow&&this.accuracySVG.select("g.tick-top-group").selectAll("g.tick").classed("out-range",!0)},ii=new WeakSet,_u=function(){const t=Zi-Qi*2,n=0,r=55,s=r+0+n,o=this.heightRow.select(".svg-height").attr("width",t).attr("height",s),a={top:0,left:at,right:at,bottom:0,histTop:20},c=t-a.left-a.right;o.append("g").attr("class","border-group").attr("transform",`translate(${0}, ${a.top})`).append("rect").attr("width",t).attr("height",r-a.top).style("fill","none").style("stroke",Se.colors["gray-300"]);const l=o.append("g").attr("class","hist-group").attr("transform",`translate(${at}, ${a.top})`);this.heightXScale=R.scaleBand().domain(this.heightDensities.map(d=>d.x)).range([0,c]).paddingInner(.35);const u=Math.max(...this.heightDensities.map(d=>d.y));this.heightYScale=R.scaleLinear().domain([0,u]).range([r-a.bottom-a.top,a.histTop]);const f=l.selectAll("g.bar").data(this.heightDensities).join("g").attr("class","bar selected").attr("id",d=>`bar-${d.x}`).attr("transform",d=>`translate(${this.heightXScale(d.x)}, ${0})`);return f.append("rect").attr("x",0).attr("y",d=>this.heightYScale(d.y)).attr("width",this.heightXScale.bandwidth()).attr("height",d=>this.heightYScale(0)-this.heightYScale(d.y)),f.append("text").attr("x",this.heightXScale.bandwidth()/2).attr("y",d=>this.heightYScale(d.y)-5).append("tspan").text(d=>`(${R.format(".0%")(d.y)})`),f.append("title").text(d=>`Height: ${d.x} (${R.format(".4%")(d.y)})`),this.searchStoreValue.curHeightRange=new Set(this.heightXScale.domain()),this.searchStore.set(this.searchStoreValue),o},si=new WeakSet,Su=function(){const t=R.select(this.component).select(".height-checkboxes");this.heightDensities.forEach(n=>{t.append("label").attr("class","height-checkbox-label").attr("for",`height-checkbox-${n.x}`).text(n.x).style("left",`${this.heightXScale(n.x)+this.heightXScale.bandwidth()/2+13}px`),t.append("input").attr("type","checkbox").property("checked",!0).attr("class","height-checkbox").attr("id",`height-checkbox-${n.x}`).style("left",`${this.heightXScale(n.x)+this.heightXScale.bandwidth()/2-4}px`).on("change",i=>re(this,oi,xu).call(this,i,n.x))})},oi=new WeakSet,xu=function(t,n){var i;t.preventDefault();const r=t.target;(i=this.heightSVG)==null||i.select(`#bar-${n}`).classed("selected",r.checked),r.checked?this.searchStoreValue.curHeightRange.add(n):this.searchStoreValue.curHeightRange.delete(n),this.searchStore.set(this.searchStoreValue)},ai=new WeakSet,Tu=async function(){await $s();for(const t of this.searchStoreValue.curDepthFeatures.keys())re(this,ci,Mu).call(this,t)},li=new WeakSet,ku=function(t,n,r){t.preventDefault();const i=t.target,s=this.searchStoreValue.curDepthFeatures.get(n);if(s===void 0){console.error(`Unknown depth ${n}`);return}i.checked?s.add(r):s.delete(r),this.searchStoreValue.curDepthFeatures.set(n,s),this.searchStore.set(this.searchStoreValue)},ci=new WeakSet,Mu=function(t){const n=R.select(this.component).select(`#level-row-${t} .level-content`);this.searchStoreValue.featureOrder.forEach(r=>{var l,u;const i=n.append("label").attr("class","depth-checkbox-label").attr("id",`depth-check-box-label-${t}-${r}`),s=i.append("input").attr("type","checkbox").property("checked",!0).attr("class","depth-checkbox");let o=this.searchStoreValue.featureMap.get(r);o===void 0&&(o=["","",""],console.error(`Cannot find feature ${r} in featureMap`)),i.append("span").text(`${o[2]} ${o[1]}`),i.attr("title",`Show/hide trees using "${o[0]} ${o[1]}" at depth ${t}`);let a="initial";const c=(u=(l=this.searchStoreValue).getFeatureColor)==null?void 0:u.call(l,String(r));c!==void 0&&(a=c),s.style("accent-color",a),s.on("change",f=>re(this,li,ku).call(this,f,t,r))})};var Cu=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 75 131" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-907,-4228)">
        <g transform="matrix(1,0,0,1.4297,0,4061.32)">
            <g transform="matrix(1.93064,0,0,1.35038,-2646,-5771.08)">
                <g id="range-thumb-right">
                    <path d="M1840.41,4360.03L1878.97,4360.03L1878.97,4427.36L1840.41,4403.12L1840.41,4360.03Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,Vu=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 76 131" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-808,-4228)">
        <g transform="matrix(1,0,0,1.4297,0,4061.32)">
            <g transform="matrix(1.93064,0,0,1.35038,-2744.28,-5771.08)">
                <g id="range-thumb-left">
                    <path d="M1840.41,4360.03L1878.97,4360.03L1878.97,4403.12L1840.41,4427.36L1840.41,4360.03Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,Du='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"/></svg>',Or='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M256 48C141.31 48 48 141.32 48 256c0 114.86 93.14 208 208 208 114.69 0 208-93.31 208-208 0-114.87-93.13-208-208-208zm0 313a94 94 0 010-188h4.21l-14.11-14.1a14 14 0 0119.8-19.8l40 40a14 14 0 010 19.8l-40 40a14 14 0 01-19.8-19.8l18-18c-2.38-.1-5.1-.1-8.1-.1a66 66 0 1066 66 14 14 0 0128 0 94.11 94.11 0 01-94 94z"/></svg>';const{Object:d6,console:p6}=eo,ie="src/components/search-panel/SearchPanel.svelte";function Qa(e,t,n){const r=e.slice();return r[21]=t[n],r}function Ws(e){var V,E,Y,k;let t,n,r,i=`Depth ${e[21]}`,s,o,a,c,l,u,f,h,d=((V=e[4].curDepthFeatures.get(e[21]))==null?void 0:V.size)===Object.keys((E=e[0])==null?void 0:E.featureMap).length?"Include all features":`Include ${(Y=e[4].curDepthFeatures.get(e[21]))==null?void 0:Y.size} out of ${Object.keys((k=e[0])==null?void 0:k.featureMap).length} features`,w,g,m,p,y,b,x;function M(...L){return e[16](e[21],...L)}function T(...L){return e[17](e[21],...L)}const I={c:function(){t=N("div"),n=N("div"),r=N("span"),s=me(i),o=Q(),a=N("div"),c=N("span"),l=Q(),u=N("span"),f=Q(),h=N("div"),w=me(d),g=Q(),m=N("div"),p=Q(),S(r,"class","s-H0d2FahnGNOH"),F(r,ie,515,10,14130),S(c,"class","title-icon refresh-button s-H0d2FahnGNOH"),S(c,"title","Reset the filter"),F(c,ie,517,12,14210),S(u,"class","title-icon detail-button s-H0d2FahnGNOH"),S(u,"title","Show details"),S(u,"data-detail","false"),F(u,ie,525,12,14462),S(a,"class","title-icons s-H0d2FahnGNOH"),F(a,ie,516,10,14172),S(n,"class","row-title s-H0d2FahnGNOH"),F(n,ie,514,8,14096),S(h,"class","level-summary s-H0d2FahnGNOH"),F(h,ie,535,8,14743),S(m,"class","level-content s-H0d2FahnGNOH"),F(m,ie,543,8,15111),S(t,"class","row level-row s-H0d2FahnGNOH"),S(t,"id",y=`level-row-${e[21]}`),ye(t,"show-detail",e[5].has(e[21])),F(t,ie,509,6,13955)},m:function(D,v){he(D,t,v),_(t,n),_(n,r),_(r,s),_(n,o),_(n,a),_(a,c),c.innerHTML=Or,_(a,l),_(a,u),u.innerHTML=Du,_(t,f),_(t,h),_(h,w),_(t,g),_(t,m),_(t,p),b||(x=[ae(c,"click",M,!1,!1,!1),ae(u,"click",T,!1,!1,!1)],b=!0)},p:function(D,v){var H,C,P,O;e=D,v&16&&i!==(i=`Depth ${e[21]}`)&&Ye(s,i),v&17&&d!==(d=((H=e[4].curDepthFeatures.get(e[21]))==null?void 0:H.size)===Object.keys((C=e[0])==null?void 0:C.featureMap).length?"Include all features":`Include ${(P=e[4].curDepthFeatures.get(e[21]))==null?void 0:P.size} out of ${Object.keys((O=e[0])==null?void 0:O.featureMap).length} features`)&&Ye(w,d),v&16&&y!==(y=`level-row-${e[21]}`)&&S(t,"id",y),v&48&&ye(t,"show-detail",e[5].has(e[21]))},d:function(D){D&&le(t),b=!1,We(x)}};return te("SvelteRegisterBlock",{block:I,id:Ws.name,type:"each",source:"(509:4) {#each [...searchStoreValue.curDepthFeatures.keys()] as depth}",ctx:e}),I}function Os(e){var dn,pn;let t,n,r,i,s,o,a,c,l,u,f,h,d,w,g,m,p,y,b,x,M,T,I,V,E,Y,k=e[7]((dn=e[3])==null?void 0:dn.curAccuracyLow)+"",L,D,v,H,C,P,O,z=e[7]((pn=e[3])==null?void 0:pn.curAccuracyHigh)+"",B,j,U,se,$,q,J,K,pe,G,Z,ee,W,de,oe,ve,ne,X,ue,He,Ce,Oe=[...e[4].curDepthFeatures.keys()];lt(Oe);let Ve=[];for(let pt=0;pt<Oe.length;pt+=1)Ve[pt]=Ws(Qa(e,Oe,pt));const fn={c:function(){t=N("div"),n=N("div"),r=N("div"),i=N("div"),i.textContent="Search Trees",s=Q(),o=N("div"),a=N("div"),c=Q(),l=N("div"),u=N("div"),f=N("div"),h=N("span"),h.textContent="Accuracy",d=Q(),w=N("div"),g=N("span"),m=Q(),p=N("div"),y=N("div"),b=N("div"),x=N("div"),M=Q(),T=N("div"),I=new ts,V=Q(),E=N("div"),Y=N("span"),L=me(k),D=Q(),v=N("div"),H=new ts,C=Q(),P=N("div"),O=N("span"),B=me(z),j=Q(),U=N("div"),se=tn("svg"),$=Q(),q=N("div"),J=N("div"),K=N("span"),K.textContent="Height",pe=Q(),G=N("div"),Z=N("span"),ee=Q(),W=N("div"),de=N("div"),oe=tn("svg"),ve=Q(),ne=N("div"),X=Q();for(let Te=0;Te<Ve.length;Te+=1)Ve[Te].c();S(i,"class","title s-H0d2FahnGNOH"),F(i,ie,419,6,11362),S(a,"class","svg-icon close-icon s-H0d2FahnGNOH"),F(a,ie,421,8,11434),S(o,"class","icons s-H0d2FahnGNOH"),F(o,ie,420,6,11406),S(r,"class","header-title s-H0d2FahnGNOH"),F(r,ie,418,4,11329),S(n,"class","header s-H0d2FahnGNOH"),F(n,ie,417,2,11304),S(h,"class","s-H0d2FahnGNOH"),F(h,ie,431,8,11670),S(g,"class","title-icon refresh-button s-H0d2FahnGNOH"),S(g,"title","Reset the filter"),F(g,ie,433,10,11736),S(w,"class","title-icons s-H0d2FahnGNOH"),F(w,ie,432,8,11700),S(f,"class","row-title s-H0d2FahnGNOH"),F(f,ie,430,6,11638),S(x,"class","range-track s-H0d2FahnGNOH"),F(x,ie,451,12,12227),I.a=V,S(Y,"class","thumb-label-span s-H0d2FahnGNOH"),F(Y,ie,460,16,12551),S(E,"class","thumb-label thumb-label-left s-H0d2FahnGNOH"),F(E,ie,459,14,12492),S(T,"id","slider-left-thumb"),S(T,"tabindex","-1"),es(T,"left","0px"),S(T,"class","svg-icon icon-range-thumb-left thumb s-H0d2FahnGNOH"),F(T,ie,452,12,12267),H.a=C,S(O,"class","thumb-label-span s-H0d2FahnGNOH"),F(O,ie,473,16,13006),S(P,"class","thumb-label thumb-label-right s-H0d2FahnGNOH"),F(P,ie,472,14,12946),S(v,"id","slider-right-thumb"),S(v,"tabindex","-1"),es(v,"left","0px"),S(v,"class","svg-icon icon-range-thumb-right thumb s-H0d2FahnGNOH"),F(v,ie,465,12,12718),S(b,"class","track s-H0d2FahnGNOH"),F(b,ie,450,10,12195),S(y,"class","feature-slider s-H0d2FahnGNOH"),F(y,ie,443,8,12032),S(se,"class","svg-accuracy s-H0d2FahnGNOH"),F(se,ie,482,10,13240),S(U,"class","feature-hist s-H0d2FahnGNOH"),F(U,ie,481,8,13203),S(p,"class","accuracy-content s-H0d2FahnGNOH"),F(p,ie,442,6,11993),S(u,"class","row accuracy-row s-H0d2FahnGNOH"),F(u,ie,429,4,11601),S(K,"class","s-H0d2FahnGNOH"),F(K,ie,489,8,13380),S(Z,"class","title-icon refresh-button s-H0d2FahnGNOH"),S(Z,"title","Reset the filter"),F(Z,ie,491,10,13444),S(G,"class","title-icons s-H0d2FahnGNOH"),F(G,ie,490,8,13408),S(J,"class","row-title s-H0d2FahnGNOH"),F(J,ie,488,6,13348),S(oe,"class","svg-height s-H0d2FahnGNOH"),F(oe,ie,502,10,13773),S(de,"class","feature-hist s-H0d2FahnGNOH"),F(de,ie,501,8,13736),S(ne,"class","height-checkboxes s-H0d2FahnGNOH"),F(ne,ie,504,8,13823),S(W,"class","height-content s-H0d2FahnGNOH"),F(W,ie,500,6,13699),S(q,"class","row height-row s-H0d2FahnGNOH"),F(q,ie,487,4,13313),S(l,"class","search-list s-H0d2FahnGNOH"),F(l,ie,428,2,11571),S(t,"class","search-panel s-H0d2FahnGNOH"),S(t,"style",ue=`max-height: ${e[1]}px;`),ye(t,"shown",e[4].shown),F(t,ie,411,0,11173)},l:function(Te){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(Te,bt){he(Te,t,bt),_(t,n),_(n,r),_(r,i),_(r,s),_(r,o),_(o,a),a.innerHTML=vi,_(t,c),_(t,l),_(l,u),_(u,f),_(f,h),_(f,d),_(f,w),_(w,g),g.innerHTML=Or,_(u,m),_(u,p),_(p,y),_(y,b),_(b,x),_(b,M),_(b,T),I.m(Cu,T),_(T,V),_(T,E),_(E,Y),_(Y,L),_(b,D),_(b,v),H.m(Vu,v),_(v,C),_(v,P),_(P,O),_(O,B),_(p,j),_(p,U),_(U,se),_(l,$),_(l,q),_(q,J),_(J,K),_(J,pe),_(J,G),_(G,Z),Z.innerHTML=Or,_(q,ee),_(q,W),_(W,de),_(de,oe),_(W,ve),_(W,ne),_(l,X);for(let Yt=0;Yt<Ve.length;Yt+=1)Ve[Yt].m(l,null);e[18](t),He||(Ce=[ae(a,"click",e[8],!1,!1,!1),ae(g,"click",e[14],!1,!1,!1),ae(y,"click",g6,!1,!1,!1),ae(Z,"click",e[15],!1,!1,!1)],He=!0)},p:function(Te,[bt]){var Yt,Mo;if(bt&8&&k!==(k=Te[7]((Yt=Te[3])==null?void 0:Yt.curAccuracyLow)+"")&&Ye(L,k),bt&8&&z!==(z=Te[7]((Mo=Te[3])==null?void 0:Mo.curAccuracyHigh)+"")&&Ye(B,z),bt&1649){Oe=[...Te[4].curDepthFeatures.keys()],lt(Oe);let je;for(je=0;je<Oe.length;je+=1){const Co=Qa(Te,Oe,je);Ve[je]?Ve[je].p(Co,bt):(Ve[je]=Ws(Co),Ve[je].c(),Ve[je].m(l,null))}for(;je<Ve.length;je+=1)Ve[je].d(1);Ve.length=Oe.length}bt&2&&ue!==(ue=`max-height: ${Te[1]}px;`)&&S(t,"style",ue),bt&16&&ye(t,"shown",Te[4].shown)},i:ce,o:ce,d:function(Te){Te&&le(t),Ki(Ve,Te),e[18](null),He=!1,We(Ce)}};return te("SvelteRegisterBlock",{block:fn,id:Os.name,type:"component",source:"",ctx:e}),fn}const g6=e=>{e.preventDefault(),e.stopPropagation()};function m6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("SearchPanel",r,[]);let{data:s=null}=t,{searchStore:o=null}=t,{width:a=650}=t,c=null,l=!1,u=!1,f=null,h=rn(),d=new Set;var w;(function(k){k[k.Accuracy=0]="Accuracy",k[k.Height=1]="Height",k[k.Depth=2]="Depth"})(w||(w={}));const g=R.format(",.3f");xe(()=>{n(12,l=!0)});const m=()=>{n(3,f)},p=k=>{k.stopPropagation(),k.preventDefault(),n(4,h.shown=!1,h),o==null||o.set(h)},y=(k,L)=>{k.stopPropagation(),k.preventDefault();const D=k.currentTarget;D.dataset.detail==="false"?(D.dataset.detail="true",d.add(L)):(D.dataset.detail="false",d.delete(L)),n(5,d)},b=(k,L,D=null)=>{if(f!==null)switch(k.preventDefault(),L){case w.Accuracy:{f.refreshAccuracy();break}case w.Depth:{D!==null&&f.refreshDepth(D);break}case w.Height:{f.refreshHeight();break}default:console.warn("Unexpected case for refreshClicked()")}},x=()=>{n(13,u=!0),o&&c&&s&&(o.subscribe(k=>{n(4,h=k)}),n(3,f=new Za(c,s,m,o)))},M=["data","searchStore","width"];d6.keys(t).forEach(k=>{!~M.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&p6.warn(`<SearchPanel> was created with unknown prop '${k}'`)});const T=k=>b(k,w.Accuracy),I=k=>b(k,w.Height),V=(k,L)=>b(L,w.Depth,k),E=(k,L)=>y(L,k);function Y(k){Ee[k?"unshift":"push"](()=>{c=k,n(2,c)})}return e.$$set=k=>{"data"in k&&n(0,s=k.data),"searchStore"in k&&n(11,o=k.searchStore),"width"in k&&n(1,a=k.width)},e.$capture_state=()=>({d3:R,getSearchStoreDefaultValue:rn,onMount:xe,SearchPanel:Za,closeIcon:vi,thumbLeftIcon:Cu,thumbRightIcon:Vu,downIcon:Du,refreshIcon:Or,data:s,searchStore:o,width:a,component:c,mounted:l,initialized:u,searchPanel:f,searchStoreValue:h,depthWithDetails:d,RefreshLocation:w,formatter:g,searchUpdated:m,closeClicked:p,detailClicked:y,refreshClicked:b,initView:x}),e.$inject_state=k=>{"data"in k&&n(0,s=k.data),"searchStore"in k&&n(11,o=k.searchStore),"width"in k&&n(1,a=k.width),"component"in k&&n(2,c=k.component),"mounted"in k&&n(12,l=k.mounted),"initialized"in k&&n(13,u=k.initialized),"searchPanel"in k&&n(3,f=k.searchPanel),"searchStoreValue"in k&&n(4,h=k.searchStoreValue),"depthWithDetails"in k&&n(5,d=k.depthWithDetails),"RefreshLocation"in k&&n(6,w=k.RefreshLocation)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&14341&&s&&o&&l&&!u&&c&&x()},[s,a,c,f,h,d,w,g,p,y,b,o,l,u,T,I,V,E,Y]}class Au extends $e{constructor(t){super(t);Je(this,t,m6,Os,Be,{data:0,searchStore:11,width:1}),te("SvelteRegisterComponent",{component:this,tagName:"SearchPanel_1",options:t,id:Os.name})}get data(){throw new Error("<SearchPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<SearchPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get searchStore(){throw new Error("<SearchPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set searchStore(t){throw new Error("<SearchPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<SearchPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(t){throw new Error("<SearchPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class Ja{constructor(t,n,r,i){A(this,"component");A(this,"inputElem");A(this,"dropzoneUpdated");A(this,"initDataFromDropzone");A(this,"isDragging",!1);A(this,"dragElement",null);A(this,"errorMessage"," ");A(this,"clickHandler",()=>{var t;(t=this.inputElem)==null||t.click()});A(this,"dragEnterHandler",t=>{t.preventDefault(),this.isDragging=!0,this.dragElement=t.target,this.dropzoneUpdated()});A(this,"dragOverHandler",t=>{t.preventDefault()});A(this,"dragLeaveHandler",t=>{t.preventDefault(),this.dragElement===t.target&&(this.isDragging=!1,this.dropzoneUpdated())});A(this,"dropHandler",async t=>{var i;t.preventDefault();let n=null,r=null;(i=t.dataTransfer)!=null&&i.items?t.dataTransfer.items[0].kind==="file"&&(r=t.dataTransfer.items[0].getAsFile(),n=await this.validateFile(r)):(r=t.dataTransfer.files[0],n=await this.validateFile(r)),this.isDragging=!1,this.dropzoneUpdated(),n&&this.initDataFromDropzone(n)});A(this,"inputChanged",async t=>{t.preventDefault();let n=null;const r=t.target.files;if(r!==null){const i=r[0];n=await this.validateFile(i),console.log(n)}!n||this.initDataFromDropzone(n)});A(this,"inputClicked",()=>{});A(this,"readJSON",t=>new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{i.result?n(JSON.parse(i.result)):n(null)},i.onerror=r,i.readAsText(t)}));A(this,"validateFile",async t=>t.type!=="application/json"?(this.errorMessage="It is not a JSON file",this.dropzoneUpdated(),null):await this.readJSON(t));this.component=t,this.inputElem=n,this.dropzoneUpdated=r,this.initDataFromDropzone=i}}var bi=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 346 346" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-5570,-6461)">
        <g transform="matrix(1.49616,0,0,1,-2856.48,922)">
            <g id="timbertrek-logo">
                <g transform="matrix(0.660497,0,0,0.988207,1497.7,1465.12)">
                    <circle cx="6434.56" cy="4297.56" r="174.558" style="fill:rgb(66,66,66);"/>
                    <path d="M6434.56,4123C6530.9,4123 6609.12,4201.22 6609.12,4297.56C6609.12,4393.9 6530.9,4472.12 6434.56,4472.12C6338.22,4472.12 6260,4393.9 6260,4297.56C6260,4201.22 6338.22,4123 6434.56,4123ZM6434.56,4131.31C6526.31,4131.31 6600.81,4205.81 6600.81,4297.56C6600.81,4389.31 6526.31,4463.81 6434.56,4463.81C6342.81,4463.81 6268.31,4389.31 6268.31,4297.56C6268.31,4205.81 6342.81,4131.31 6434.56,4131.31Z" style="fill:rgb(123,123,123);"/>
                </g>
                <g transform="matrix(0.628201,0,0,0.939888,2139.91,-523.818)">
                    <path d="M5691.27,6656.44L5660.64,6656.44L5742.98,6526.8L5823.36,6656.44L5792.72,6656.44L5820.76,6721.2L5742.66,6679.85L5663.24,6721.12L5691.27,6656.44ZM5742.89,6571.51L5742.89,6652.51L5790.28,6676.11L5742.89,6571.51Z" style="fill:white;"/>
                </g>
                <g>
                    <g transform="matrix(-0.445586,6.73401e-17,-1.13133e-16,-1.66667,8499.43,14925.7)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                    <g transform="matrix(1.15018e-15,-0.666667,1.11396,4.44089e-15,-410.51,9829)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                    <g transform="matrix(0.445586,3.52496e-15,-6.0106e-15,1.66667,2996,-3501.67)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                    <g transform="matrix(-3.52474e-15,0.666667,-1.11396,-1.33227e-14,11905.9,1595)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                </g>
                <g transform="matrix(0.668379,0,0,1,1554.3,-396)">
                    <g transform="matrix(-0.61592,-0.255122,0.637806,-1.5398,6551.69,16195.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.471405,-0.471405,1.17851,-1.17851,2670.11,15534.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.255122,-0.61592,1.5398,-0.637806,-662.81,13437.5)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.255122,-0.61592,1.5398,0.637806,-3813.83,6385.69)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.471405,-0.471405,1.17851,1.17851,-3152.2,2504.11)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.61592,-0.255122,0.637806,1.5398,-1055.53,-828.81)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.61592,0.255122,-0.637806,1.5398,5996.31,-3979.83)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.471405,0.471405,-1.17851,1.17851,9877.89,-3318.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.255122,0.61592,-1.5398,0.637806,13210.8,-1221.53)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.255122,0.61592,-1.5398,-0.637806,16361.8,5830.31)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.471405,0.471405,-1.17851,-1.17851,15700.2,9711.89)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.61592,0.255122,-0.637806,-1.5398,13603.5,13044.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                </g>
                <g transform="matrix(0.660497,0,0,0.988207,1497.7,1465.12)">
                    <path d="M6434.56,4123C6530.9,4123 6609.12,4201.22 6609.12,4297.56C6609.12,4393.9 6530.9,4472.12 6434.56,4472.12C6338.22,4472.12 6260,4393.9 6260,4297.56C6260,4201.22 6338.22,4123 6434.56,4123ZM6434.56,4135.65C6523.92,4135.65 6596.47,4208.2 6596.47,4297.56C6596.47,4386.92 6523.92,4459.47 6434.56,4459.47C6345.2,4459.47 6272.65,4386.92 6272.65,4297.56C6272.65,4208.2 6345.2,4135.65 6434.56,4135.65Z" style="fill:rgb(128,128,128);"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`;const _t="src/components/dropzone/Dropzone.svelte";function zs(e){var b;let t,n,r,i,s,o,a,c,l,u,f=((b=e[3])==null?void 0:b.errorMessage)+"",h,d,w,g,m,p;const y={c:function(){var M;t=N("div"),n=N("div"),r=N("div"),i=Q(),s=N("div"),s.textContent="Drop a Rashomon trie file (.json) here to start",o=Q(),a=N("div"),c=N("a"),c.textContent="How to generate this file?",l=Q(),u=N("span"),h=me(f),d=Q(),w=N("input"),S(r,"class","svg-icon s-5AsLhRYgdrVb"),F(r,_t,112,4,2708),S(s,"class","drop-message s-5AsLhRYgdrVb"),F(s,_t,115,4,2769),S(c,"href","https://gist.github.com/xiaohk/875b5374840c66689eb42a4b8820c3b5"),S(c,"target","_blank"),S(c,"class","s-5AsLhRYgdrVb"),F(c,_t,125,6,2971),S(a,"class","help-message s-5AsLhRYgdrVb"),F(a,_t,119,4,2866),S(u,"class","error-message s-5AsLhRYgdrVb"),F(u,_t,131,4,3131),S(w,"accept","json"),S(w,"type","file"),S(w,"autocomplete","off"),es(w,"display","none"),S(w,"class","s-5AsLhRYgdrVb"),F(w,_t,135,4,3208),S(n,"class","dropzone s-5AsLhRYgdrVb"),ye(n,"drag-over",(M=e[3])==null?void 0:M.isDragging),F(n,_t,103,2,2382),S(t,"class","dropzone-tab s-5AsLhRYgdrVb"),S(t,"style",g=`width: ${e[0]}px; height: ${e[0]+Se.layout.toolbarHeight}px;`),F(t,_t,98,0,2245)},l:function(M){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(M,T){he(M,t,T),_(t,n),_(n,r),r.innerHTML=bi,_(n,i),_(n,s),_(n,o),_(n,a),_(a,c),_(n,l),_(n,u),_(u,h),_(n,d),_(n,w),e[9](w),e[15](t),m||(p=[ae(a,"click",w6,!1,!1,!1),ae(w,"change",e[7],!1,!1,!1),ae(w,"click",e[8],!1,!1,!1),ae(n,"click",e[10],!1,!1,!1),ae(n,"dragenter",e[11],!1,!1,!1),ae(n,"dragover",e[12],!1,!1,!1),ae(n,"dragleave",e[13],!1,!1,!1),ae(n,"drop",e[14],!1,!1,!1)],m=!0)},p:function(M,[T]){var I,V;T&8&&f!==(f=((I=M[3])==null?void 0:I.errorMessage)+"")&&Ye(h,f),T&8&&ye(n,"drag-over",(V=M[3])==null?void 0:V.isDragging),T&1&&g!==(g=`width: ${M[0]}px; height: ${M[0]+Se.layout.toolbarHeight}px;`)&&S(t,"style",g)},i:ce,o:ce,d:function(M){M&&le(t),e[9](null),e[15](null),m=!1,We(p)}};return te("SvelteRegisterBlock",{block:y,id:zs.name,type:"component",source:"",ctx:e}),y}const w6=e=>{e.stopPropagation()};function y6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("Dropzone",r,[]);let{initDataFromDropzone:s}=t,{width:o=650}=t,a=null,c=null,l=null,u=!1,f=!1;xe(()=>{n(5,u=!0)});const h=()=>{n(3,l)},d=()=>{u&&a&&c&&(n(3,l=new Ja(a,c,h,s)),n(6,f=!0))},w=["initDataFromDropzone","width"];Object.keys(t).forEach(V=>{!~w.indexOf(V)&&V.slice(0,2)!=="$$"&&V!=="slot"&&console.warn(`<Dropzone> was created with unknown prop '${V}'`)});const g=V=>l==null?void 0:l.inputChanged(V),m=V=>l==null?void 0:l.inputClicked();function p(V){Ee[V?"unshift":"push"](()=>{c=V,n(2,c)})}const y=V=>l==null?void 0:l.clickHandler(),b=V=>l==null?void 0:l.dragEnterHandler(V),x=V=>l==null?void 0:l.dragOverHandler(V),M=V=>l==null?void 0:l.dragLeaveHandler(V),T=V=>l==null?void 0:l.dropHandler(V);function I(V){Ee[V?"unshift":"push"](()=>{a=V,n(1,a)})}return e.$$set=V=>{"initDataFromDropzone"in V&&n(4,s=V.initDataFromDropzone),"width"in V&&n(0,o=V.width)},e.$capture_state=()=>({onMount:xe,Dropzone:Ja,config:Se,logoIcon:bi,initDataFromDropzone:s,width:o,component:a,inputElem:c,dropzone:l,mounted:u,initialized:f,dropzoneUpdated:h,initView:d}),e.$inject_state=V=>{"initDataFromDropzone"in V&&n(4,s=V.initDataFromDropzone),"width"in V&&n(0,o=V.width),"component"in V&&n(1,a=V.component),"inputElem"in V&&n(2,c=V.inputElem),"dropzone"in V&&n(3,l=V.dropzone),"mounted"in V&&n(5,u=V.mounted),"initialized"in V&&n(6,f=V.initialized)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&118&&u&&a&&c&&s&&!f&&d()},[o,a,c,l,s,u,f,g,m,p,y,b,x,M,T,I]}class Fu extends $e{constructor(t){super(t);Je(this,t,y6,zs,Be,{initDataFromDropzone:4,width:0}),te("SvelteRegisterComponent",{component:this,tagName:"Dropzone_1",options:t,id:zs.name});const{ctx:n}=this.$$,r=t.props||{};n[4]===void 0&&!("initDataFromDropzone"in r)&&console.warn("<Dropzone> was created without expected prop 'initDataFromDropzone'")}get initDataFromDropzone(){throw new Error("<Dropzone>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set initDataFromDropzone(t){throw new Error("<Dropzone>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<Dropzone>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(t){throw new Error("<Dropzone>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var Nu='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>',Lu=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 66 82" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-3896,-24)">
        <g transform="matrix(1,0,0,1,-0.831706,0)">
            <g id="icon-file" transform="matrix(1,0,0,0.996062,3887.07,100.115)">
                <path d="M27.49,-23.779C26.644,-23.779 25.944,-24.048 25.391,-24.585C24.837,-25.122 24.561,-25.781 24.561,-26.563C24.561,-27.376 24.837,-28.052 25.391,-28.589C25.944,-29.126 26.644,-29.395 27.49,-29.395L57.129,-29.395C57.975,-29.395 58.675,-29.126 59.228,-28.589C59.782,-28.052 60.059,-27.376 60.059,-26.563C60.059,-25.781 59.782,-25.122 59.228,-24.585C58.675,-24.048 57.975,-23.779 57.129,-23.779L27.49,-23.779ZM27.49,-9.082C26.644,-9.082 25.944,-9.351 25.391,-9.888C24.837,-10.425 24.561,-11.1 24.561,-11.914C24.561,-12.695 24.837,-13.363 25.391,-13.916C25.944,-14.469 26.644,-14.746 27.49,-14.746L57.129,-14.746C57.975,-14.746 58.675,-14.469 59.228,-13.916C59.782,-13.363 60.059,-12.695 60.059,-11.914C60.059,-11.1 59.782,-10.425 59.228,-9.888C58.675,-9.351 57.975,-9.082 57.129,-9.082L27.49,-9.082ZM22.022,5.908L62.5,5.908C66.602,5.908 69.678,4.867 71.729,2.783C73.779,0.7 74.805,-2.409 74.805,-6.543L74.805,-40.43L46.875,-40.43C41.797,-40.43 39.258,-42.969 39.258,-48.047L39.258,-76.416L22.022,-76.416C17.92,-76.416 14.852,-75.374 12.817,-73.291C10.783,-71.208 9.766,-68.099 9.766,-63.965L9.766,-6.543C9.766,-2.376 10.783,0.741 12.817,2.808C14.852,4.875 17.92,5.908 22.022,5.908ZM46.875,-46.143L74.365,-46.143C74.235,-47.054 73.877,-47.957 73.291,-48.853C72.705,-49.748 71.891,-50.716 70.85,-51.758L50.586,-72.461C49.577,-73.503 48.617,-74.325 47.705,-74.927C46.794,-75.529 45.882,-75.911 44.971,-76.074L44.971,-48.047C44.971,-46.777 45.605,-46.143 46.875,-46.143Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`;const{Map:v6,Object:b6}=eo,De="src/components/timber/Timber.svelte";function hr(e,t,n){const r=e.slice();return r[16]=t[n],r}function Hu(e){let t,n,r,i,s,o;n=new Ic({props:{favoritesStore:e[6],sunburstStore:e[7],searchStore:e[10]},$$inline:!0}),s=new jc({props:{data:e[1],sunburstStore:e[7],treeWindowStore:e[8],pinnedTreeStore:e[9],searchStore:e[10]},$$inline:!0});const a={c:function(){t=N("div"),Qe(n.$$.fragment),r=Q(),i=N("div"),Qe(s.$$.fragment),S(t,"class","toolbar s-DgMWn4VSIQjZ"),F(t,De,273,8,7651),S(i,"class","sunburst-wrapper s-DgMWn4VSIQjZ"),F(i,De,277,8,7766)},m:function(l,u){he(l,t,u),Ue(n,t,null),he(l,r,u),he(l,i,u),Ue(s,i,null),o=!0},p:function(l,u){const f={};u&2&&(f.data=l[1]),s.$set(f)},i:function(l){o||(we(n.$$.fragment,l),we(s.$$.fragment,l),o=!0)},o:function(l){be(n.$$.fragment,l),be(s.$$.fragment,l),o=!1},d:function(l){l&&le(t),Ge(n),l&&le(r),l&&le(i),Ge(s)}};return te("SvelteRegisterBlock",{block:a,id:Hu.name,type:"else",source:"(273:6) {:else}",ctx:e}),a}function Pu(e){let t,n;t=new Fu({props:{initDataFromDropzone:e[5],width:e[3]},$$inline:!0});const r={c:function(){Qe(t.$$.fragment)},m:function(s,o){Ue(t,s,o),n=!0},p:function(s,o){const a={};o&8&&(a.width=s[3]),t.$set(a)},i:function(s){n||(we(t.$$.fragment,s),n=!0)},o:function(s){be(t.$$.fragment,s),n=!1},d:function(s){Ge(t,s)}};return te("SvelteRegisterBlock",{block:r,id:Pu.name,type:"if",source:"(271:6) {#if data === null}",ctx:e}),r}function Ys(e){let t,n,r,i;n=new cu({props:{pinnedTree:e[16],pinnedTreeStore:e[9],favoritesStore:e[6]},$$inline:!0});const s={c:function(){t=N("div"),Qe(n.$$.fragment),S(t,"class","pinned-tree-window-wrapper s-DgMWn4VSIQjZ"),F(t,De,306,6,8433)},m:function(a,c){he(a,t,c),Ue(n,t,null),i=!0},p:function(a,c){const l={};c&16&&(l.pinnedTree=a[16]),n.$set(l)},i:function(a){i||(we(n.$$.fragment,a),r&&r.end(1),i=!0)},o:function(a){be(n.$$.fragment,a),r=ml(t,ui,{duration:100}),i=!1},d:function(a){a&&le(t),Ge(n),a&&r&&r.end()}};return te("SvelteRegisterBlock",{block:s,id:Ys.name,type:"if",source:"(306:4) {#if pinnedTree.isPinned}",ctx:e}),s}function Us(e,t){let n,r,i,s=t[16].isPinned&&Ys(t);const o={key:e,first:null,c:function(){n=$i(),s&&s.c(),r=$i(),this.first=n},m:function(c,l){he(c,n,l),s&&s.m(c,l),he(c,r,l),i=!0},p:function(c,l){t=c,t[16].isPinned?s?(s.p(t,l),l&16&&we(s,1)):(s=Ys(t),s.c(),we(s,1),s.m(r.parentNode,r)):s&&(It(),be(s,1,1,()=>{s=null}),Et())},i:function(c){i||(we(s),i=!0)},o:function(c){be(s),i=!1},d:function(c){c&&le(n),s&&s.d(c),c&&le(r)}};return te("SvelteRegisterBlock",{block:o,id:Us.name,type:"each",source:"(305:2) {#each pinnedTreeStoreValue.pinnedTrees as pinnedTree (pinnedTree.treeID)}",ctx:t}),o}function Gs(e){let t,n,r,i,s,o,a,c,l,u,f,h,d,w,g,m,p,y,b,x,M,T,I,V,E,Y,k,L,D,v=[],H=new v6,C,P;const O=[Pu,Hu],z=[];function B($,q){return $[1]===null?0:1}y=B(e),b=z[y]=O[y](e),T=new wu({props:{favoritesStore:e[6],pinnedTreeStore:e[9],width:e[3]},$$inline:!0}),E=new Au({props:{data:e[1],searchStore:e[10],width:e[3]},$$inline:!0}),L=new Jc({props:{data:e[1],featureMap:e[2],treeWindowStore:e[8]},$$inline:!0});let j=e[4].pinnedTrees;lt(j);const U=$=>$[16].treeID;Cr(e,j,hr,U);for(let $=0;$<j.length;$+=1){let q=hr(e,j,$),J=U(q);H.set(J,v[$]=Us(J,q))}const se={c:function(){t=N("div"),n=N("div"),r=N("div"),i=N("div"),s=N("div"),o=Q(),a=N("div"),c=N("div"),c.textContent="TimberTrek",l=Q(),u=N("div"),u.textContent="Curating decision trees that align with human knowledge",f=Q(),h=N("div"),d=N("a"),w=Q(),g=N("a"),m=Q(),p=N("div"),b.c(),x=Q(),M=N("div"),Qe(T.$$.fragment),I=Q(),V=N("div"),Qe(E.$$.fragment),k=Q(),Qe(L.$$.fragment),D=Q();for(let q=0;q<v.length;q+=1)v[q].c();C=Q(),S(s,"class","svg-icon s-DgMWn4VSIQjZ"),F(s,De,234,8,6650),S(c,"class","logo-icon s-DgMWn4VSIQjZ"),F(c,De,238,10,6757),S(u,"class","logo-tag s-DgMWn4VSIQjZ"),S(u,"title","Curating decision trees that align with human knowledge"),F(u,De,239,10,6807),S(a,"class","logo-text s-DgMWn4VSIQjZ"),F(a,De,237,8,6723),S(i,"class","logo s-DgMWn4VSIQjZ"),F(i,De,233,6,6623),S(d,"class","svg-icon paper-icon s-DgMWn4VSIQjZ"),S(d,"title","Research paper"),S(d,"target","_blank"),S(d,"href","https://arxiv.org/abs/1908.01755"),F(d,De,249,8,7083),S(g,"class","svg-icon s-DgMWn4VSIQjZ"),S(g,"title","Open-source code"),S(g,"target","_blank"),S(g,"href","https://arxiv.org/abs/1908.01755"),F(g,De,258,8,7293),S(h,"class","right-icons s-DgMWn4VSIQjZ"),F(h,De,248,6,7049),S(r,"class","header s-DgMWn4VSIQjZ"),F(r,De,232,4,6596),S(p,"class","content s-DgMWn4VSIQjZ"),F(p,De,269,4,7515),S(M,"class","sidebar s-DgMWn4VSIQjZ"),F(M,De,289,4,8006),S(V,"class","sidebar s-DgMWn4VSIQjZ"),F(V,De,297,4,8156),S(n,"class","timbertrek s-DgMWn4VSIQjZ"),S(n,"style",Y=`width: ${e[3]}px;`),F(n,De,231,2,6530),S(t,"class","timbertrek-page s-DgMWn4VSIQjZ"),F(t,De,230,0,6476)},l:function(q){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(q,J){he(q,t,J),_(t,n),_(n,r),_(r,i),_(i,s),s.innerHTML=bi,_(i,o),_(i,a),_(a,c),_(a,l),_(a,u),_(r,f),_(r,h),_(h,d),d.innerHTML=Lu,_(h,w),_(h,g),g.innerHTML=Nu,_(n,m),_(n,p),z[y].m(p,null),_(n,x),_(n,M),Ue(T,M,null),_(n,I),_(n,V),Ue(E,V,null),_(t,k),Ue(L,t,null),_(t,D);for(let K=0;K<v.length;K+=1)v[K].m(t,null);_(t,C),e[13](t),P=!0},p:function(q,[J]){let K=y;y=B(q),y===K?z[y].p(q,J):(It(),be(z[K],1,1,()=>{z[K]=null}),Et(),b=z[y],b?b.p(q,J):(b=z[y]=O[y](q),b.c()),we(b,1),b.m(p,null));const pe={};J&8&&(pe.width=q[3]),T.$set(pe);const G={};J&2&&(G.data=q[1]),J&8&&(G.width=q[3]),E.$set(G),(!P||J&8&&Y!==(Y=`width: ${q[3]}px;`))&&S(n,"style",Y);const Z={};J&2&&(Z.data=q[1]),J&4&&(Z.featureMap=q[2]),L.$set(Z),J&592&&(j=q[4].pinnedTrees,lt(j),It(),Cr(q,j,hr,U),v=yl(v,J,U,1,q,j,H,t,wl,Us,C,hr),Et())},i:function(q){if(!P){we(b),we(T.$$.fragment,q),we(E.$$.fragment,q),we(L.$$.fragment,q);for(let J=0;J<j.length;J+=1)we(v[J]);P=!0}},o:function(q){be(b),be(T.$$.fragment,q),be(E.$$.fragment,q),be(L.$$.fragment,q);for(let J=0;J<v.length;J+=1)be(v[J]);P=!1},d:function(q){q&&le(t),z[y].d(),Ge(T),Ge(E),Ge(L);for(let J=0;J<v.length;J+=1)v[J].d();e[13](null)}};return te("SvelteRegisterBlock",{block:se,id:Gs.name,type:"component",source:"",ctx:e}),se}const _6=!1;function S6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("Timber",r,[]);let{notebookMode:s=!1}=t,o=null,a=null,c=null,l=s?500:650;const u=T=>{n(1,a=T),n(2,c=new Map);for(const[I,V]of Object.entries(a.featureMap))c.set(parseInt(I),V)},f=async()=>{const T="compas-rules-mul_0.05-reg_0.01-min_10.json",I=await R.json(`/timbertrek/data/${T}`);u(I)},h=T=>{n(1,a=T),n(2,c=new Map);for(const[I,V]of Object.entries(a.featureMap))c.set(parseInt(I),V)};f();const d=Fo(),w=No(),g=Lo(),m=Ho(),p=Po();let y=sn();m.subscribe(T=>{n(4,y=T)}),xe(()=>{s&&document.addEventListener("timbertrekData",T=>{const I=T,V=I.data;n(3,l=I.width),u(V)})});const b=["notebookMode"];b6.keys(t).forEach(T=>{!~b.indexOf(T)&&T.slice(0,2)!=="$$"&&T!=="slot"&&console.warn(`<Timber> was created with unknown prop '${T}'`)});const x=()=>{localStorage.clear()};function M(T){Ee[T?"unshift":"push"](()=>{o=T,n(0,o)})}return e.$$set=T=>{"notebookMode"in T&&n(11,s=T.notebookMode)},e.$capture_state=()=>({onMount:xe,fade:ui,cubicInOut:ah,getFavoritesStore:Fo,getSunburstStore:No,getTreeWindowStore:Lo,getPinnedTreeStore:Ho,getPinnedTreeStoreDefaultValue:sn,getSearchStore:Po,Toolbar:Ic,Sunburst:jc,TreeWindow:Jc,PinnedTreeWindow:cu,FavoritesPanel:wu,SearchPanel:Au,Dropzone:Fu,d3:R,logoIcon:bi,githubIcon:Nu,paperIcon:Lu,notebookMode:s,component:o,data:a,featureMap:c,sunburstWidth:l,devMode:_6,initData:u,readDataFromFile:f,initDataFromDropzone:h,favoritesStore:d,sunburstStore:w,treeWindowStore:g,pinnedTreeStore:m,searchStore:p,pinnedTreeStoreValue:y}),e.$inject_state=T=>{"notebookMode"in T&&n(11,s=T.notebookMode),"component"in T&&n(0,o=T.component),"data"in T&&n(1,a=T.data),"featureMap"in T&&n(2,c=T.featureMap),"sunburstWidth"in T&&n(3,l=T.sunburstWidth),"pinnedTreeStoreValue"in T&&n(4,y=T.pinnedTreeStoreValue)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[o,a,c,l,y,h,d,w,g,m,p,s,x,M]}class _i extends $e{constructor(t){super(t);Je(this,t,S6,Gs,Be,{notebookMode:11}),te("SvelteRegisterComponent",{component:this,tagName:"Timber",options:t,id:Gs.name})}get notebookMode(){throw new Error("<Timber>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set notebookMode(t){throw new Error("<Timber>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ka="src/components/article/Article.svelte";function Bs(e){let t,n,r,i;r=new _i({$$inline:!0});const s={c:function(){t=N("div"),n=N("div"),Qe(r.$$.fragment),S(n,"class","main-app s-NAp586LyR7ay"),F(n,Ka,26,2,536),S(t,"class","article-page s-NAp586LyR7ay"),F(t,Ka,25,0,507)},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){he(a,t,c),_(t,n),Ue(r,n,null),e[1](n),i=!0},p:ce,i:function(a){i||(we(r.$$.fragment,a),i=!0)},o:function(a){be(r.$$.fragment,a),i=!1},d:function(a){a&&le(t),Ge(r),e[1](null)}};return te("SvelteRegisterBlock",{block:s,id:Bs.name,type:"component",source:"",ctx:e}),s}function x6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("Article",r,[]);let s=null;xe(()=>{});const o=[];Object.keys(t).forEach(c=>{!~o.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<Article> was created with unknown prop '${c}'`)});function a(c){Ee[c?"unshift":"push"](()=>{s=c,n(0,s)})}return e.$capture_state=()=>({onMount:xe,TimberTrek:_i,component:s}),e.$inject_state=c=>{"component"in c&&n(0,s=c.component)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,a]}class Iu extends $e{constructor(t){super(t);Je(this,t,x6,Bs,Be,{}),te("SvelteRegisterComponent",{component:this,tagName:"Article",options:t,id:Bs.name})}}const $a="src/components/notebook/Notebook.svelte";function js(e){let t,n,r,i;r=new _i({props:{notebookMode:!0},$$inline:!0});const s={c:function(){t=N("div"),n=N("div"),Qe(r.$$.fragment),S(n,"class","main-app s-G67tNxa3tjK8"),F(n,$a,22,2,453),S(t,"class","notebook-page s-G67tNxa3tjK8"),F(t,$a,21,0,423)},l:function(a){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(a,c){he(a,t,c),_(t,n),Ue(r,n,null),e[1](n),i=!0},p:ce,i:function(a){i||(we(r.$$.fragment,a),i=!0)},o:function(a){be(r.$$.fragment,a),i=!1},d:function(a){a&&le(t),Ge(r),e[1](null)}};return te("SvelteRegisterBlock",{block:s,id:js.name,type:"component",source:"",ctx:e}),s}function T6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("Notebook",r,[]);let s=null;const o=[];Object.keys(t).forEach(c=>{!~o.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<Notebook> was created with unknown prop '${c}'`)});function a(c){Ee[c?"unshift":"push"](()=>{s=c,n(0,s)})}return e.$capture_state=()=>({onMount:xe,TimberTrek:_i,component:s}),e.$inject_state=c=>{"component"in c&&n(0,s=c.component)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,a]}class Eu extends $e{constructor(t){super(t);Je(this,t,T6,js,Be,{}),te("SvelteRegisterComponent",{component:this,tagName:"Notebook",options:t,id:js.name})}}const fr="src/App.svelte";function Ru(e){let t,n;t=new Eu({$$inline:!0});const r={c:function(){Qe(t.$$.fragment)},m:function(s,o){Ue(t,s,o),n=!0},i:function(s){n||(we(t.$$.fragment,s),n=!0)},o:function(s){be(t.$$.fragment,s),n=!1},d:function(s){Ge(t,s)}};return te("SvelteRegisterBlock",{block:r,id:Ru.name,type:"else",source:"(20:2) {:else}",ctx:e}),r}function Wu(e){let t,n;t=new Iu({$$inline:!0});const r={c:function(){Qe(t.$$.fragment)},m:function(s,o){Ue(t,s,o),n=!0},i:function(s){n||(we(t.$$.fragment,s),n=!0)},o:function(s){be(t.$$.fragment,s),n=!1},d:function(s){Ge(t,s)}};return te("SvelteRegisterBlock",{block:r,id:Wu.name,type:"if",source:"(18:2) {#if mode === 'article'}",ctx:e}),r}function Xs(e){let t,n,r,i,s,o,a,c;const l=[Wu,Ru],u=[];function f(d,w){return d[0]==="article"?0:1}o=f(e),a=u[o]=l[o](e);const h={c:function(){t=N("link"),n=N("link"),r=N("link"),i=Q(),s=N("div"),a.c(),S(t,"rel","preconnect"),S(t,"href","https://fonts.googleapis.com"),S(t,"class","s-XsEmFtvddWTw"),F(t,fr,8,2,228),S(n,"rel","preconnect"),S(n,"href","https://fonts.gstatic.com"),S(n,"crossorigin",""),S(n,"class","s-XsEmFtvddWTw"),F(n,fr,9,2,292),S(r,"href","https://fonts.googleapis.com/css2?family=Lato&display=swap"),S(r,"rel","stylesheet"),S(r,"class","s-XsEmFtvddWTw"),F(r,fr,10,2,365),S(s,"class","stand-alone-page s-XsEmFtvddWTw"),F(s,fr,16,0,483)},l:function(w){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(w,g){_(document.head,t),_(document.head,n),_(document.head,r),he(w,i,g),he(w,s,g),u[o].m(s,null),c=!0},p:function(w,[g]){let m=o;o=f(w),o!==m&&(It(),be(u[m],1,1,()=>{u[m]=null}),Et(),a=u[o],a||(a=u[o]=l[o](w),a.c()),we(a,1),a.m(s,null))},i:function(w){c||(we(a),c=!0)},o:function(w){be(a),c=!1},d:function(w){le(t),le(n),le(r),w&&le(i),w&&le(s),u[o].d()}};return te("SvelteRegisterBlock",{block:h,id:Xs.name,type:"component",source:"",ctx:e}),h}function k6(e,t,n){let{$$slots:r={},$$scope:i}=t;Ke("App",r,[]);let{mode:s="article"}=t;const o=["mode"];return Object.keys(t).forEach(a=>{!~o.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<App> was created with unknown prop '${a}'`)}),e.$$set=a=>{"mode"in a&&n(0,s=a.mode)},e.$capture_state=()=>({Article:Iu,Notebook:Eu,mode:s}),e.$inject_state=a=>{"mode"in a&&n(0,s=a.mode)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s]}class M6 extends $e{constructor(t){super(t);Je(this,t,k6,Xs,Be,{mode:0}),te("SvelteRegisterComponent",{component:this,tagName:"App",options:t,id:Xs.name})}get mode(){throw new Error("<App>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(t){throw new Error("<App>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}new M6({target:document.body,props:{mode:"article"}});
