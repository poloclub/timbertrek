var gf=Object.defineProperty;var mf=(e,t,n)=>t in e?gf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var L=(e,t,n)=>(mf(e,typeof t!="symbol"?t+"":t,n),n),Ko=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var Ms=(e,t,n)=>(Ko(e,t,"read from private field"),n?n.call(e):t.get(e)),ce=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};var te=(e,t,n)=>(Ko(e,t,"access private method"),n);const yf=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};yf();function de(){}const us=e=>e;function C(e,t,n,r,i){e.__svelte_meta={loc:{file:t,line:n,column:r,char:i}}}function xc(e){return e()}function $o(){return Object.create(null)}function He(e){e.forEach(xc)}function hs(e){return typeof e=="function"}function Xe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Or;function wf(e,t){return Or||(Or=document.createElement("a")),Or.href=t,e===Or.href}function vf(e){return Object.keys(e).length===0}const kc=typeof window!="undefined";let no=kc?()=>window.performance.now():()=>Date.now(),ro=kc?e=>requestAnimationFrame(e):de;const mn=new Set;function Tc(e){mn.forEach(t=>{t.c(e)||(mn.delete(t),t.f())}),mn.size!==0&&ro(Tc)}function io(e){let t;return mn.size===0&&ro(Tc),{promise:new Promise(n=>{mn.add(t={c:e,f:n})}),abort(){mn.delete(t)}}}function Mc(e,t){e.appendChild(t)}function Cc(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function bf(e){const t=V("style");return Sf(Cc(e),t),t.sheet}function Sf(e,t){Mc(e.head||e,t)}function Vc(e,t,n){e.insertBefore(t,n||null)}function so(e){e.parentNode.removeChild(e)}function or(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function V(e){return document.createElement(e)}function Qt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function pe(e){return document.createTextNode(e)}function B(){return pe(" ")}function ea(){return pe("")}function _f(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function xf(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function kf(e){return Array.from(e.childNodes)}function mi(e,t){e.value=t==null?"":t}function Kn(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function he(e,t,n){e.classList[n?"add":"remove"](t)}function Dc(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}class $n{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,n,r=null){this.e||(this.e=V(n.nodeName),this.t=n,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)Vc(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(so)}}const yi=new Map;let wi=0;function Tf(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Mf(e,t){const n={stylesheet:bf(t),rules:{}};return yi.set(e,n),n}function ao(e,t,n,r,i,s,a,o=0){const u=16.666/r;let l=`{
`;for(let g=0;g<=1;g+=u){const m=t+(n-t)*s(g);l+=g*100+`%{${a(m,1-m)}}
`}const c=l+`100% {${a(n,1-n)}}
}`,h=`__svelte_${Tf(c)}_${o}`,f=Cc(e),{stylesheet:p,rules:y}=yi.get(f)||Mf(f,e);y[h]||(y[h]=!0,p.insertRule(`@keyframes ${h} ${c}`,p.cssRules.length));const d=e.style.animation||"";return e.style.animation=`${d?`${d}, `:""}${h} ${r}ms linear ${i}ms 1 both`,wi+=1,h}function vi(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),wi-=i,wi||Cf())}function Cf(){ro(()=>{wi||(yi.forEach(e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}}),yi.clear())})}function Vf(e,t,n,r){if(!t)return de;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return de;const{delay:s=0,duration:a=300,easing:o=us,start:u=no()+s,end:l=u+a,tick:c=de,css:h}=n(e,{from:t,to:i},r);let f=!0,p=!1,y;function d(){h&&(y=ao(e,0,1,a,s,o,h)),s||(p=!0)}function g(){h&&vi(e,y),f=!1}return io(m=>{if(!p&&m>=u&&(p=!0),p&&m>=l&&(c(1,0),g()),!f)return!1;if(p){const b=m-u,w=0+1*o(b/a);c(w,1-w)}return!0}),d(),c(0,1),g}function Df(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,Ac(e,i)}}function Ac(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i=r.transform==="none"?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let lr;function sr(e){lr=e}function Lc(){if(!lr)throw new Error("Function called outside component initialization");return lr}function ke(e){Lc().$$.on_mount.push(e)}function bi(e){Lc().$$.on_destroy.push(e)}const er=[],Oe=[],si=[],el=[],Hc=Promise.resolve();let ta=!1;function Fc(){ta||(ta=!0,Hc.then(Nc))}function oo(){return Fc(),Hc}function Tn(e){si.push(e)}const Cs=new Set;let zr=0;function Nc(){const e=lr;do{for(;zr<er.length;){const t=er[zr];zr++,sr(t),Af(t.$$)}for(sr(null),er.length=0,zr=0;Oe.length;)Oe.pop()();for(let t=0;t<si.length;t+=1){const n=si[t];Cs.has(n)||(Cs.add(n),n())}si.length=0}while(er.length);for(;el.length;)el.pop()();ta=!1,Cs.clear(),sr(e)}function Af(e){if(e.fragment!==null){e.update(),He(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Tn)}}let Un;function Pc(){return Un||(Un=Promise.resolve(),Un.then(()=>{Un=null})),Un}function Si(e,t,n){e.dispatchEvent(Dc(`${t?"intro":"outro"}${n}`))}const ai=new Set;let Ft;function It(){Ft={r:0,c:[],p:Ft}}function Rt(){Ft.r||He(Ft.c),Ft=Ft.p}function ye(e,t){e&&e.i&&(ai.delete(e),e.i(t))}function be(e,t,n,r){if(e&&e.o){if(ai.has(e))return;ai.add(e),Ft.c.push(()=>{ai.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const Ic={duration:0};function Lf(e,t,n){let r=t(e,n),i=!1,s,a,o=0;function u(){s&&vi(e,s)}function l(){const{delay:h=0,duration:f=300,easing:p=us,tick:y=de,css:d}=r||Ic;d&&(s=ao(e,0,1,f,h,p,d,o++)),y(0,1);const g=no()+h,m=g+f;a&&a.abort(),i=!0,Tn(()=>Si(e,!0,"start")),a=io(b=>{if(i){if(b>=m)return y(1,0),Si(e,!0,"end"),u(),i=!1;if(b>=g){const w=p((b-g)/f);y(w,1-w)}}return i})}let c=!1;return{start(){c||(c=!0,vi(e),hs(r)?(r=r(),Pc().then(l)):l())},invalidate(){c=!1},end(){i&&(u(),i=!1)}}}function lo(e,t,n){let r=t(e,n),i=!0,s;const a=Ft;a.r+=1;function o(){const{delay:u=0,duration:l=300,easing:c=us,tick:h=de,css:f}=r||Ic;f&&(s=ao(e,1,0,l,u,c,f));const p=no()+u,y=p+l;Tn(()=>Si(e,!1,"start")),io(d=>{if(i){if(d>=y)return h(0,1),Si(e,!1,"end"),--a.r||He(a.c),!1;if(d>=p){const g=c((d-p)/l);h(1-g,g)}}return i})}return hs(r)?Pc().then(()=>{r=r(),o()}):o(),{end(u){u&&r.tick&&r.tick(1,0),i&&(s&&vi(e,s),i=!1)}}}const co=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Rc(e,t){be(e,1,1,()=>{t.delete(e.key)})}function Hf(e,t){e.f(),Rc(e,t)}function Ec(e,t,n,r,i,s,a,o,u,l,c,h){let f=e.length,p=s.length,y=f;const d={};for(;y--;)d[e[y].key]=y;const g=[],m=new Map,b=new Map;for(y=p;y--;){const F=h(i,s,y),R=n(F);let A=a.get(R);A?r&&A.p(F,t):(A=l(R,F),A.c()),m.set(R,g[y]=A),R in d&&b.set(R,Math.abs(y-d[R]))}const w=new Set,S=new Set;function k(F){ye(F,1),F.m(o,c),a.set(F.key,F),c=F.first,p--}for(;f&&p;){const F=g[p-1],R=e[f-1],A=F.key,H=R.key;F===R?(c=F.first,f--,p--):m.has(H)?!a.has(A)||w.has(A)?k(F):S.has(H)?f--:b.get(A)>b.get(H)?(S.add(A),k(F)):(w.add(H),f--):(u(R,a),f--)}for(;f--;){const F=e[f];m.has(F.key)||u(F,a)}for(;p;)k(g[p-1]);return g}function _i(e,t,n,r){const i=new Set;for(let s=0;s<t.length;s++){const a=r(n(e,t,s));if(i.has(a))throw new Error("Cannot have duplicate keys in a keyed each");i.add(a)}}function rt(e){e&&e.c()}function Qe(e,t,n,r){const{fragment:i,on_mount:s,on_destroy:a,after_update:o}=e.$$;i&&i.m(t,n),r||Tn(()=>{const u=s.map(xc).filter(hs);a?a.push(...u):He(u),e.$$.on_mount=[]}),o.forEach(Tn)}function Ke(e,t){const n=e.$$;n.fragment!==null&&(He(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ff(e,t){e.$$.dirty[0]===-1&&(er.push(e),Fc(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function it(e,t,n,r,i,s,a,o=[-1]){const u=lr;sr(e);const l=e.$$={fragment:null,ctx:null,props:s,update:de,not_equal:i,bound:$o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:$o(),dirty:o,skip_bound:!1,root:t.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(h,f,...p)=>{const y=p.length?p[0]:f;return l.ctx&&i(l.ctx[h],l.ctx[h]=y)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](y),c&&Ff(e,h)),f}):[],l.update(),c=!0,He(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const h=kf(t.target);l.fragment&&l.fragment.l(h),h.forEach(so)}else l.fragment&&l.fragment.c();t.intro&&ye(e.$$.fragment),Qe(e,t.target,t.anchor,t.customElement),Nc()}sr(u)}class Nf{$destroy(){Ke(this,1),this.$destroy=de}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!vf(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function re(e,t){document.dispatchEvent(Dc(e,Object.assign({version:"3.46.6"},t),!0))}function _(e,t){re("SvelteDOMInsert",{target:e,node:t}),Mc(e,t)}function fe(e,t,n){re("SvelteDOMInsert",{target:e,node:t,anchor:n}),Vc(e,t,n)}function oe(e){re("SvelteDOMRemove",{node:e}),so(e)}function ae(e,t,n,r,i,s){const a=r===!0?["capture"]:r?Array.from(Object.keys(r)):[];i&&a.push("preventDefault"),s&&a.push("stopPropagation"),re("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:a});const o=_f(e,t,n,r);return()=>{re("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:a}),o()}}function x(e,t,n){xf(e,t,n),n==null?re("SvelteDOMRemoveAttribute",{node:e,attribute:t}):re("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function Ce(e,t){t=""+t,e.wholeText!==t&&(re("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function Be(e){if(typeof e!="string"&&!(e&&typeof e=="object"&&"length"in e)){let t="{#each} only iterates over array-like objects.";throw typeof Symbol=="function"&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function st(e,t,n){for(const r of Object.keys(t))~n.indexOf(r)||console.warn(`<${e}> received an unexpected slot "${r}".`)}class at extends Nf{constructor(t){if(!t||!t.target&&!t.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}function Pf(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function Wc(e){const t=e-1;return t*t*t+1}function Vr(e,{delay:t=0,duration:n=400,easing:r=us}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}function na(e,{delay:t=0,duration:n=400,easing:r=Wc,x:i=0,y:s=0,opacity:a=0}={}){const o=getComputedStyle(e),u=+o.opacity,l=o.transform==="none"?"":o.transform,c=u*(1-a);return{delay:t,duration:n,easing:r,css:(h,f)=>`
			transform: ${l} translate(${(1-h)*i}px, ${(1-h)*s}px);
			opacity: ${u-c*f}`}}const ln=[];function Dr(e,t=de){let n;const r=new Set;function i(o){if(Xe(e,o)&&(e=o,n)){const u=!ln.length;for(const l of r)l[1](),ln.push(l,e);if(u){for(let l=0;l<ln.length;l+=2)ln[l][0](ln[l+1]);ln.length=0}}}function s(o){i(o(e))}function a(o,u=de){const l=[o,u];return r.add(l),r.size===1&&(n=t(i)||de),o(e),()=>{r.delete(l),r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}var qt=(e=>(e[e.DepthChanged=0]="DepthChanged",e.None="",e))(qt||{});const Mn=()=>({shown:!1,favTrees:[]}),uo=()=>({depthMax:0,depthLow:0,depthHigh:0,depthColors:[],action:""}),ho=()=>({featureMap:new Map,treeMap:new Map,treeID:0,ancestorFs:[],show:!1,x:20,y:20,getFeatureColor:null}),Cn=()=>({shown:!1,curAccuracyLow:0,curAccuracyHigh:1,curMinSampleLow:0,curMinSampleHigh:100,curHeightRange:new Set([]),curDepthFeatures:new Map,curAllFeatures:new Set([]),treeDepthFeaturesMap:null,treeHeightMap:null,treeMinSampleMap:null,featureMap:new Map,getFeatureColor:null,featureOrder:[],updatePlots:null}),Vn=()=>({pinnedTrees:[],lastActiveTreeID:null,getFeatureColor:null,getFeatureInfo:null}),tl=()=>Dr(Mn()),nl=()=>Dr(uo()),rl=()=>Dr(ho()),il=()=>Dr(Vn()),sl=()=>Dr(Cn());var ra="http://www.w3.org/1999/xhtml",al={svg:"http://www.w3.org/2000/svg",xhtml:ra,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),al.hasOwnProperty(t)?{space:al[t],local:e}:e}function If(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ra&&t.documentElement.namespaceURI===ra?t.createElement(e):t.createElementNS(n,e)}}function Rf(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Oc(e){var t=fs(e);return(t.local?Rf:If)(t)}function Ef(){}function fo(e){return e==null?Ef:function(){return this.querySelector(e)}}function Wf(e){typeof e!="function"&&(e=fo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),u,l,c=0;c<a;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),o[c]=l);return new ze(r,this._parents)}function zc(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Of(){return[]}function Gc(e){return e==null?Of:function(){return this.querySelectorAll(e)}}function zf(e){return function(){return zc(e.apply(this,arguments))}}function Gf(e){typeof e=="function"?e=zf(e):e=Gc(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&(r.push(e.call(u,u.__data__,l,a)),i.push(u));return new ze(r,i)}function Yc(e){return function(){return this.matches(e)}}function Uc(e){return function(t){return t.matches(e)}}var Yf=Array.prototype.find;function Uf(e){return function(){return Yf.call(this.children,e)}}function Bf(){return this.firstElementChild}function jf(e){return this.select(e==null?Bf:Uf(typeof e=="function"?e:Uc(e)))}var Xf=Array.prototype.filter;function qf(){return Array.from(this.children)}function Zf(e){return function(){return Xf.call(this.children,e)}}function Jf(e){return this.selectAll(e==null?qf:Zf(typeof e=="function"?e:Uc(e)))}function Qf(e){typeof e!="function"&&(e=Yc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&o.push(u);return new ze(r,this._parents)}function Bc(e){return new Array(e.length)}function Kf(){return new ze(this._enter||this._groups.map(Bc),this._parents)}function xi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xi.prototype={constructor:xi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function $f(e){return function(){return e}}function e0(e,t,n,r,i,s){for(var a=0,o,u=t.length,l=s.length;a<l;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new xi(e,s[a]);for(;a<u;++a)(o=t[a])&&(i[a]=o)}function t0(e,t,n,r,i,s,a){var o,u,l=new Map,c=t.length,h=s.length,f=new Array(c),p;for(o=0;o<c;++o)(u=t[o])&&(f[o]=p=a.call(u,u.__data__,o,t)+"",l.has(p)?i[o]=u:l.set(p,u));for(o=0;o<h;++o)p=a.call(e,s[o],o,s)+"",(u=l.get(p))?(r[o]=u,u.__data__=s[o],l.delete(p)):n[o]=new xi(e,s[o]);for(o=0;o<c;++o)(u=t[o])&&l.get(f[o])===u&&(i[o]=u)}function n0(e){return e.__data__}function r0(e,t){if(!arguments.length)return Array.from(this,n0);var n=t?t0:e0,r=this._parents,i=this._groups;typeof e!="function"&&(e=$f(e));for(var s=i.length,a=new Array(s),o=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],h=i[l],f=h.length,p=i0(e.call(c,c&&c.__data__,l,r)),y=p.length,d=o[l]=new Array(y),g=a[l]=new Array(y),m=u[l]=new Array(f);n(c,h,d,g,m,p,t);for(var b=0,w=0,S,k;b<y;++b)if(S=d[b]){for(b>=w&&(w=b+1);!(k=g[w])&&++w<y;);S._next=k||null}}return a=new ze(a,r),a._enter=o,a._exit=u,a}function i0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function s0(){return new ze(this._exit||this._groups.map(Bc),this._parents)}function a0(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function o0(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),u=0;u<a;++u)for(var l=n[u],c=r[u],h=l.length,f=o[u]=new Array(h),p,y=0;y<h;++y)(p=l[y]||c[y])&&(f[y]=p);for(;u<i;++u)o[u]=n[u];return new ze(o,this._parents)}function l0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function c0(e){e||(e=u0);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,u=i[s]=new Array(o),l,c=0;c<o;++c)(l=a[c])&&(u[c]=l);u.sort(t)}return new ze(i,this._parents).order()}function u0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function h0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function f0(){return Array.from(this)}function d0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function p0(){let e=0;for(const t of this)++e;return e}function g0(){return!this.node()}function m0(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function y0(e){return function(){this.removeAttribute(e)}}function w0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function v0(e,t){return function(){this.setAttribute(e,t)}}function b0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function S0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function x0(e,t){var n=fs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?w0:y0:typeof t=="function"?n.local?_0:S0:n.local?b0:v0)(n,t))}function jc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function k0(e){return function(){this.style.removeProperty(e)}}function T0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function M0(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function C0(e,t,n){return arguments.length>1?this.each((t==null?k0:typeof t=="function"?M0:T0)(e,t,n==null?"":n)):Dn(this.node(),e)}function Dn(e,t){return e.style.getPropertyValue(t)||jc(e).getComputedStyle(e,null).getPropertyValue(t)}function V0(e){return function(){delete this[e]}}function D0(e,t){return function(){this[e]=t}}function A0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function L0(e,t){return arguments.length>1?this.each((t==null?V0:typeof t=="function"?A0:D0)(e,t)):this.node()[e]}function Xc(e){return e.trim().split(/^|\s+/)}function po(e){return e.classList||new qc(e)}function qc(e){this._node=e,this._names=Xc(e.getAttribute("class")||"")}qc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Zc(e,t){for(var n=po(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Jc(e,t){for(var n=po(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function H0(e){return function(){Zc(this,e)}}function F0(e){return function(){Jc(this,e)}}function N0(e,t){return function(){(t.apply(this,arguments)?Zc:Jc)(this,e)}}function P0(e,t){var n=Xc(e+"");if(arguments.length<2){for(var r=po(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?N0:t?H0:F0)(n,t))}function I0(){this.textContent=""}function R0(e){return function(){this.textContent=e}}function E0(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function W0(e){return arguments.length?this.each(e==null?I0:(typeof e=="function"?E0:R0)(e)):this.node().textContent}function O0(){this.innerHTML=""}function z0(e){return function(){this.innerHTML=e}}function G0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Y0(e){return arguments.length?this.each(e==null?O0:(typeof e=="function"?G0:z0)(e)):this.node().innerHTML}function U0(){this.nextSibling&&this.parentNode.appendChild(this)}function B0(){return this.each(U0)}function j0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function X0(){return this.each(j0)}function q0(e){var t=typeof e=="function"?e:Oc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Z0(){return null}function J0(e,t){var n=typeof e=="function"?e:Oc(e),r=t==null?Z0:typeof t=="function"?t:fo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Q0(){var e=this.parentNode;e&&e.removeChild(this)}function K0(){return this.each(Q0)}function $0(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function e1(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function t1(e){return this.select(e?e1:$0)}function n1(e){return arguments.length?this.property("__data__",e):this.node().__data__}function r1(e){return function(t){e.call(this,t,this.__data__)}}function i1(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function s1(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function a1(e,t,n){return function(){var r=this.__on,i,s=r1(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function o1(e,t,n){var r=i1(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,l=o.length,c;u<l;++u)for(i=0,c=o[u];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=t?a1:s1,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function Qc(e,t,n){var r=jc(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function l1(e,t){return function(){return Qc(this,e,t)}}function c1(e,t){return function(){return Qc(this,e,t.apply(this,arguments))}}function u1(e,t){return this.each((typeof t=="function"?c1:l1)(e,t))}function*h1(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var go=[null];function ze(e,t){this._groups=e,this._parents=t}function Pn(){return new ze([[document.documentElement]],go)}function f1(){return this}ze.prototype=Pn.prototype={constructor:ze,select:Wf,selectAll:Gf,selectChild:jf,selectChildren:Jf,filter:Qf,data:r0,enter:Kf,exit:s0,join:a0,merge:o0,selection:f1,order:l0,sort:c0,call:h0,nodes:f0,node:d0,size:p0,empty:g0,each:m0,attr:x0,style:C0,property:L0,classed:P0,text:W0,html:Y0,raise:B0,lower:X0,append:q0,insert:J0,remove:K0,clone:t1,datum:n1,on:o1,dispatch:u1,[Symbol.iterator]:h1};function We(e){return typeof e=="string"?new ze([[document.querySelector(e)]],[document.documentElement]):new ze([[e]],go)}function d1(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ct(e,t){if(e=d1(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function p1(e){return typeof e=="string"?new ze([document.querySelectorAll(e)],[document.documentElement]):new ze([zc(e)],go)}function g1(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function m1(e,t){return fetch(e,t).then(g1)}function ia(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kc(e){let t=e,n=e,r=e;e.length!==2&&(t=(o,u)=>e(o)-u,n=ia,r=(o,u)=>ia(e(o),u));function i(o,u,l=0,c=o.length){if(l<c){if(n(u,u)!==0)return c;do{const h=l+c>>>1;r(o[h],u)<0?l=h+1:c=h}while(l<c)}return l}function s(o,u,l=0,c=o.length){if(l<c){if(n(u,u)!==0)return c;do{const h=l+c>>>1;r(o[h],u)<=0?l=h+1:c=h}while(l<c)}return l}function a(o,u,l=0,c=o.length){const h=i(o,u,l,c-1);return h>l&&t(o[h-1],u)>-t(o[h],u)?h-1:h}return{left:i,center:a,right:s}}function y1(e){return e===null?NaN:+e}const w1=Kc(ia),v1=w1.right;Kc(y1).center;var $c=v1;function b1(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function oi(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class ol extends Map{constructor(t,n=x1){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ll(this,t))}has(t){return super.has(ll(this,t))}set(t,n){return super.set(S1(this,t),n)}delete(t){return super.delete(_1(this,t))}}function ll({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function S1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function _1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function x1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function k1(e){return e}var T1=Array.prototype,M1=T1.slice;function Gr(e){return()=>e}var sa=Math.sqrt(50),aa=Math.sqrt(10),oa=Math.sqrt(2);function ki(e,t,n){var r,i=-1,s,a,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(s=e,e=t,t=s),(o=cr(e,t,n))===0||!isFinite(o))return[];if(o>0){let u=Math.round(e/o),l=Math.round(t/o);for(u*o<e&&++u,l*o>t&&--l,a=new Array(s=l-u+1);++i<s;)a[i]=(u+i)*o}else{o=-o;let u=Math.round(e*o),l=Math.round(t*o);for(u/o<e&&++u,l/o>t&&--l,a=new Array(s=l-u+1);++i<s;)a[i]=(u+i)/o}return r&&a.reverse(),a}function cr(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=sa?10:s>=aa?5:s>=oa?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=sa?10:s>=aa?5:s>=oa?2:1)}function C1(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=sa?i*=10:s>=aa?i*=5:s>=oa&&(i*=2),t<e?-i:i}function V1(e,t,n){let r;for(;;){const i=cr(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function D1(e){return Math.ceil(Math.log(b1(e))/Math.LN2)+1}function A1(){var e=k1,t=oi,n=D1;function r(i){Array.isArray(i)||(i=Array.from(i));var s,a=i.length,o,u,l=new Array(a);for(s=0;s<a;++s)l[s]=e(i[s],s,i);var c=t(l),h=c[0],f=c[1],p=n(l,h,f);if(!Array.isArray(p)){const m=f,b=+p;if(t===oi&&([h,f]=V1(h,f,b)),p=ki(h,f,b),p[0]<=h&&(u=cr(h,f,b)),p[p.length-1]>=f)if(m>=f&&t===oi){const w=cr(h,f,b);isFinite(w)&&(w>0?f=(Math.floor(f/w)+1)*w:w<0&&(f=(Math.ceil(f*-w)+1)/-w))}else p.pop()}for(var y=p.length;p[0]<=h;)p.shift(),--y;for(;p[y-1]>f;)p.pop(),--y;var d=new Array(y+1),g;for(s=0;s<=y;++s)g=d[s]=[],g.x0=s>0?p[s-1]:h,g.x1=s<y?p[s]:f;if(isFinite(u)){if(u>0)for(s=0;s<a;++s)(o=l[s])!=null&&h<=o&&o<=f&&d[Math.floor((o-h)/u)].push(i[s]);else if(u<0)for(s=0;s<a;++s)(o=l[s])!=null&&h<=o&&o<=f&&d[Math.floor((h-o)*u)].push(i[s])}else for(s=0;s<a;++s)(o=l[s])!=null&&h<=o&&o<=f&&d[$c(p,o,0,y)].push(i[s]);return d}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:Gr(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:Gr([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Array.isArray(i)?Gr(M1.call(i)):Gr(i),r):n},r}function L1(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function H1(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function F1(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function N1(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function P1(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function I1(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Ar(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const cl=Symbol("implicit");function mo(){var e=new ol,t=[],n=[],r=cl;function i(s){let a=e.get(s);if(a===void 0){if(r!==cl)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ol;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return mo(t,n).unknown(r)},Ar.apply(i,arguments),i}function yo(){var e=mo().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,a,o=!1,u=0,l=0,c=.5;delete e.unknown;function h(){var f=t().length,p=i<r,y=p?i:r,d=p?r:i;s=(d-y)/Math.max(1,f-u+l*2),o&&(s=Math.floor(s)),y+=(d-y-s*(f-u))*c,a=s*(1-u),o&&(y=Math.round(y),a=Math.round(a));var g=P1(f).map(function(m){return y+s*m});return n(p?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,o=!0,h()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(f){return arguments.length?(o=!!f,h()):o},e.padding=function(f){return arguments.length?(u=Math.min(1,l=+f),h()):u},e.paddingInner=function(f){return arguments.length?(u=Math.min(1,f),h()):u},e.paddingOuter=function(f){return arguments.length?(l=+f,h()):l},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},e.copy=function(){return yo(t(),[r,i]).round(o).paddingInner(u).paddingOuter(l).align(c)},Ar.apply(h(),arguments)}function eu(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eu(t())},e}function R1(){return eu(yo.apply(null,arguments).paddingInner(1))}function In(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Lr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ot(){}var en=.7,An=1/en,yn="\\s*([+-]?\\d+)\\s*",ur="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",E1=/^#([0-9a-f]{3,8})$/,W1=new RegExp(`^rgb\\(${yn},${yn},${yn}\\)$`),O1=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),z1=new RegExp(`^rgba\\(${yn},${yn},${yn},${ur}\\)$`),G1=new RegExp(`^rgba\\(${vt},${vt},${vt},${ur}\\)$`),Y1=new RegExp(`^hsl\\(${ur},${vt},${vt}\\)$`),U1=new RegExp(`^hsla\\(${ur},${vt},${vt},${ur}\\)$`),ul={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};In(Ot,Et,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hl,formatHex:hl,formatHex8:B1,formatHsl:j1,formatRgb:fl,toString:fl});function hl(){return this.rgb().formatHex()}function B1(){return this.rgb().formatHex8()}function j1(){return tu(this).formatHsl()}function fl(){return this.rgb().formatRgb()}function Et(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=E1.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dl(t):n===3?new Ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=W1.exec(e))?new Ve(t[1],t[2],t[3],1):(t=O1.exec(e))?new Ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=z1.exec(e))?Yr(t[1],t[2],t[3],t[4]):(t=G1.exec(e))?Yr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Y1.exec(e))?ml(t[1],t[2]/100,t[3]/100,1):(t=U1.exec(e))?ml(t[1],t[2]/100,t[3]/100,t[4]):ul.hasOwnProperty(e)?dl(ul[e]):e==="transparent"?new Ve(NaN,NaN,NaN,0):null}function dl(e){return new Ve(e>>16&255,e>>8&255,e&255,1)}function Yr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ve(e,t,n,r)}function wo(e){return e instanceof Ot||(e=Et(e)),e?(e=e.rgb(),new Ve(e.r,e.g,e.b,e.opacity)):new Ve}function la(e,t,n,r){return arguments.length===1?wo(e):new Ve(e,t,n,r==null?1:r)}function Ve(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}In(Ve,la,Lr(Ot,{brighter(e){return e=e==null?An:Math.pow(An,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?en:Math.pow(en,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ve(Kt(this.r),Kt(this.g),Kt(this.b),Ti(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pl,formatHex:pl,formatHex8:X1,formatRgb:gl,toString:gl}));function pl(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}`}function X1(){return`#${Zt(this.r)}${Zt(this.g)}${Zt(this.b)}${Zt((isNaN(this.opacity)?1:this.opacity)*255)}`}function gl(){const e=Ti(this.opacity);return`${e===1?"rgb(":"rgba("}${Kt(this.r)}, ${Kt(this.g)}, ${Kt(this.b)}${e===1?")":`, ${e})`}`}function Ti(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Kt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zt(e){return e=Kt(e),(e<16?"0":"")+e.toString(16)}function ml(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ft(e,t,n,r)}function tu(e){if(e instanceof ft)return new ft(e.h,e.s,e.l,e.opacity);if(e instanceof Ot||(e=Et(e)),!e)return new ft;if(e instanceof ft)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,u=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=u<.5?s+i:2-s-i,a*=60):o=u>0&&u<1?0:a,new ft(a,o,u,e.opacity)}function nu(e,t,n,r){return arguments.length===1?tu(e):new ft(e,t,n,r==null?1:r)}function ft(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}In(ft,nu,Lr(Ot,{brighter(e){return e=e==null?An:Math.pow(An,e),new ft(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?en:Math.pow(en,e),new ft(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ve(Vs(e>=240?e-240:e+120,i,r),Vs(e,i,r),Vs(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ft(yl(this.h),Ur(this.s),Ur(this.l),Ti(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ti(this.opacity);return`${e===1?"hsl(":"hsla("}${yl(this.h)}, ${Ur(this.s)*100}%, ${Ur(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yl(e){return e=(e||0)%360,e<0?e+360:e}function Ur(e){return Math.max(0,Math.min(1,e||0))}function Vs(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ru=Math.PI/180,iu=180/Math.PI,Mi=18,su=.96422,au=1,ou=.82521,lu=4/29,wn=6/29,cu=3*wn*wn,q1=wn*wn*wn;function uu(e){if(e instanceof bt)return new bt(e.l,e.a,e.b,e.opacity);if(e instanceof yt)return fu(e);e instanceof Ve||(e=wo(e));var t=Hs(e.r),n=Hs(e.g),r=Hs(e.b),i=Ds((.2225045*t+.7168786*n+.0606169*r)/au),s,a;return t===n&&n===r?s=a=i:(s=Ds((.4360747*t+.3850649*n+.1430804*r)/su),a=Ds((.0139322*t+.0971045*n+.7141733*r)/ou)),new bt(116*i-16,500*(s-i),200*(i-a),e.opacity)}function Z1(e,t,n,r){return arguments.length===1?uu(e):new bt(e,t,n,r==null?1:r)}function bt(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}In(bt,Z1,Lr(Ot,{brighter(e){return new bt(this.l+Mi*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new bt(this.l-Mi*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=su*As(t),e=au*As(e),n=ou*As(n),new Ve(Ls(3.1338561*t-1.6168667*e-.4906146*n),Ls(-.9787684*t+1.9161415*e+.033454*n),Ls(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Ds(e){return e>q1?Math.pow(e,1/3):e/cu+lu}function As(e){return e>wn?e*e*e:cu*(e-lu)}function Ls(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Hs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hu(e){if(e instanceof yt)return new yt(e.h,e.c,e.l,e.opacity);if(e instanceof bt||(e=uu(e)),e.a===0&&e.b===0)return new yt(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*iu;return new yt(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function J1(e,t,n,r){return arguments.length===1?hu(e):new yt(n,t,e,r==null?1:r)}function Q1(e,t,n,r){return arguments.length===1?hu(e):new yt(e,t,n,r==null?1:r)}function yt(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function fu(e){if(isNaN(e.h))return new bt(e.l,0,0,e.opacity);var t=e.h*ru;return new bt(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}In(yt,Q1,Lr(Ot,{brighter(e){return new yt(this.h,this.c,this.l+Mi*(e==null?1:e),this.opacity)},darker(e){return new yt(this.h,this.c,this.l-Mi*(e==null?1:e),this.opacity)},rgb(){return fu(this).rgb()}}));var du=-.14861,vo=1.78277,bo=-.29227,ds=-.90649,hr=1.97294,wl=hr*ds,vl=hr*vo,bl=vo*bo-ds*du;function K1(e){if(e instanceof $t)return new $t(e.h,e.s,e.l,e.opacity);e instanceof Ve||(e=wo(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(bl*r+wl*t-vl*n)/(bl+wl-vl),s=r-i,a=(hr*(n-i)-bo*s)/ds,o=Math.sqrt(a*a+s*s)/(hr*i*(1-i)),u=o?Math.atan2(a,s)*iu-120:NaN;return new $t(u<0?u+360:u,o,i,e.opacity)}function Wt(e,t,n,r){return arguments.length===1?K1(e):new $t(e,t,n,r==null?1:r)}function $t(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}In($t,Wt,Lr(Ot,{brighter(e){return e=e==null?An:Math.pow(An,e),new $t(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?en:Math.pow(en,e),new $t(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*ru,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ve(255*(t+n*(du*r+vo*i)),255*(t+n*(bo*r+ds*i)),255*(t+n*(hr*r)),this.opacity)}}));var ps=e=>()=>e;function pu(e,t){return function(n){return e+n*t}}function $1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ed(e,t){var n=t-e;return n?pu(e,n>180||n<-180?n-360*Math.round(n/360):n):ps(isNaN(e)?t:e)}function td(e){return(e=+e)==1?vn:function(t,n){return n-t?$1(t,n,e):ps(isNaN(t)?n:t)}}function vn(e,t){var n=t-e;return n?pu(e,n):ps(isNaN(e)?t:e)}var Ci=function e(t){var n=td(t);function r(i,s){var a=n((i=la(i)).r,(s=la(s)).r),o=n(i.g,s.g),u=n(i.b,s.b),l=vn(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function nd(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function rd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function id(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Hr(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function sd(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ut(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ad(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Hr(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var ca=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fs=new RegExp(ca.source,"g");function od(e){return function(){return e}}function ld(e){return function(t){return e(t)+""}}function gu(e,t){var n=ca.lastIndex=Fs.lastIndex=0,r,i,s,a=-1,o=[],u=[];for(e=e+"",t=t+"";(r=ca.exec(e))&&(i=Fs.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,u.push({i:a,x:ut(r,i)})),n=Fs.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?ld(u[0].x):od(t):(t=u.length,function(l){for(var c=0,h;c<t;++c)o[(h=u[c]).i]=h.x(l);return o.join("")})}function Hr(e,t){var n=typeof t,r;return t==null||n==="boolean"?ps(t):(n==="number"?ut:n==="string"?(r=Et(t))?(t=r,Ci):gu:t instanceof Et?Ci:t instanceof Date?sd:rd(t)?nd:Array.isArray(t)?id:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ad:ut)(e,t)}function cd(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Sl=180/Math.PI,ua={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mu(e,t,n,r,i,s){var a,o,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,u/=o),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Sl,skewX:Math.atan(u)*Sl,scaleX:a,scaleY:o}}var Br;function ud(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ua:mu(t.a,t.b,t.c,t.d,t.e,t.f)}function hd(e){return e==null||(Br||(Br=document.createElementNS("http://www.w3.org/2000/svg","g")),Br.setAttribute("transform",e),!(e=Br.transform.baseVal.consolidate()))?ua:(e=e.matrix,mu(e.a,e.b,e.c,e.d,e.e,e.f))}function yu(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,h,f,p,y){if(l!==h||c!==f){var d=p.push("translate(",null,t,null,n);y.push({i:d-4,x:ut(l,h)},{i:d-2,x:ut(c,f)})}else(h||f)&&p.push("translate("+h+t+f+n)}function a(l,c,h,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:ut(l,c)})):c&&h.push(i(h)+"rotate("+c+r)}function o(l,c,h,f){l!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:ut(l,c)}):c&&h.push(i(h)+"skewX("+c+r)}function u(l,c,h,f,p,y){if(l!==h||c!==f){var d=p.push(i(p)+"scale(",null,",",null,")");y.push({i:d-4,x:ut(l,h)},{i:d-2,x:ut(c,f)})}else(h!==1||f!==1)&&p.push(i(p)+"scale("+h+","+f+")")}return function(l,c){var h=[],f=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,h,f),a(l.rotate,c.rotate,h,f),o(l.skewX,c.skewX,h,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,h,f),l=c=null,function(p){for(var y=-1,d=f.length,g;++y<d;)h[(g=f[y]).i]=g.x(p);return h.join("")}}}var fd=yu(ud,"px, ","px)","deg)"),dd=yu(hd,", ",")",")"),pd=1e-12;function _l(e){return((e=Math.exp(e))+1/e)/2}function gd(e){return((e=Math.exp(e))-1/e)/2}function md(e){return((e=Math.exp(2*e))-1)/(e+1)}var yd=function e(t,n,r){function i(s,a){var o=s[0],u=s[1],l=s[2],c=a[0],h=a[1],f=a[2],p=c-o,y=h-u,d=p*p+y*y,g,m;if(d<pd)m=Math.log(f/l)/t,g=function(R){return[o+R*p,u+R*y,l*Math.exp(t*R*m)]};else{var b=Math.sqrt(d),w=(f*f-l*l+r*d)/(2*l*n*b),S=(f*f-l*l-r*d)/(2*f*n*b),k=Math.log(Math.sqrt(w*w+1)-w),F=Math.log(Math.sqrt(S*S+1)-S);m=(F-k)/t,g=function(R){var A=R*m,H=_l(k),Y=l/(n*b)*(H*md(t*A+k)-gd(k));return[o+Y*p,u+Y*y,l*H/_l(t*A+k)]}}return g.duration=m*1e3*t/Math.SQRT2,g}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,u=o*o;return e(a,o,u)},i}(Math.SQRT2,2,4);function wu(e){return function t(n){n=+n;function r(i,s){var a=e((i=Wt(i)).h,(s=Wt(s)).h),o=vn(i.s,s.s),u=vn(i.l,s.l),l=vn(i.opacity,s.opacity);return function(c){return i.h=a(c),i.s=o(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}wu(ed);var vu=wu(vn);function wd(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function vd(e){return function(){return e}}function bd(e){return+e}var xl=[0,1];function wt(e){return e}function ha(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:vd(isNaN(t)?NaN:.5)}function Sd(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function _d(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=ha(i,r),s=n(a,s)):(r=ha(r,i),s=n(s,a)),function(o){return s(r(o))}}function xd(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=ha(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var u=$c(e,o,1,r)-1;return s[u](i[u](o))}}function So(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function _o(){var e=xl,t=xl,n=Hr,r,i,s,a=wt,o,u,l;function c(){var f=Math.min(e.length,t.length);return a!==wt&&(a=Sd(e[0],e[f-1])),o=f>2?xd:_d,u=l=null,h}function h(f){return f==null||isNaN(f=+f)?s:(u||(u=o(e.map(r),t,n)))(r(a(f)))}return h.invert=function(f){return a(i((l||(l=o(t,e.map(r),ut)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,bd),c()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=cd,c()},h.clamp=function(f){return arguments.length?(a=f?!0:wt,c()):a!==wt},h.interpolate=function(f){return arguments.length?(n=f,c()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,p){return r=f,i=p,c()}}function kd(){return _o()(wt,wt)}function Td(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Vi(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ln(e){return e=Vi(Math.abs(e)),e?e[1]:NaN}function Md(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],u=0;i>0&&o>0&&(u+o+1>r&&(o=Math.max(1,r-u)),s.push(n.substring(i-=o,i+o)),!((u+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function Cd(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Vd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fr(e){if(!(t=Vd.exec(e)))throw new Error("invalid format: "+e);var t;return new xo({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fr.prototype=xo.prototype;function xo(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dd(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var bu;function Ad(e,t){var n=Vi(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(bu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Vi(e,Math.max(0,t+s-1))[0]}function kl(e,t){var n=Vi(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var Tl={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Td,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kl(e*100,t),r:kl,s:Ad,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ml(e){return e}var Cl=Array.prototype.map,Vl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ld(e){var t=e.grouping===void 0||e.thousands===void 0?Ml:Md(Cl.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Ml:Cd(Cl.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(h){h=fr(h);var f=h.fill,p=h.align,y=h.sign,d=h.symbol,g=h.zero,m=h.width,b=h.comma,w=h.precision,S=h.trim,k=h.type;k==="n"?(b=!0,k="g"):Tl[k]||(w===void 0&&(w=12),S=!0,k="g"),(g||f==="0"&&p==="=")&&(g=!0,f="0",p="=");var F=d==="$"?n:d==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",R=d==="$"?r:/[%p]/.test(k)?a:"",A=Tl[k],H=/[defgprs%]/.test(k);w=w===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function Y(N){var D=F,E=R,v,T,M;if(k==="c")E=A(N)+E,N="";else{N=+N;var P=N<0||1/N<0;if(N=isNaN(N)?u:A(Math.abs(N),w),S&&(N=Dd(N)),P&&+N==0&&y!=="+"&&(P=!1),D=(P?y==="("?y:o:y==="-"||y==="("?"":y)+D,E=(k==="s"?Vl[8+bu/3]:"")+E+(P&&y==="("?")":""),H){for(v=-1,T=N.length;++v<T;)if(M=N.charCodeAt(v),48>M||M>57){E=(M===46?i+N.slice(v+1):N.slice(v))+E,N=N.slice(0,v);break}}}b&&!g&&(N=t(N,1/0));var W=D.length+N.length+E.length,z=W<m?new Array(m-W+1).join(f):"";switch(b&&g&&(N=t(z+N,z.length?m-E.length:1/0),z=""),p){case"<":N=D+N+E+z;break;case"=":N=D+z+N+E;break;case"^":N=z.slice(0,W=z.length>>1)+D+N+E+z.slice(W);break;default:N=z+D+N+E;break}return s(N)}return Y.toString=function(){return h+""},Y}function c(h,f){var p=l((h=fr(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(Ln(f)/3)))*3,d=Math.pow(10,-y),g=Vl[8+y/3];return function(m){return p(d*m)+g}}return{format:l,formatPrefix:c}}var jr,gs,Su;Hd({thousands:",",grouping:[3],currency:["$",""]});function Hd(e){return jr=Ld(e),gs=jr.format,Su=jr.formatPrefix,jr}function Fd(e){return Math.max(0,-Ln(Math.abs(e)))}function Nd(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ln(t)/3)))*3-Ln(Math.abs(e)))}function Pd(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ln(t)-Ln(e))+1}function Id(e,t,n,r){var i=C1(e,t,n),s;switch(r=fr(r==null?",f":r),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Nd(i,a))&&(r.precision=s),Su(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Pd(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Fd(i))&&(r.precision=s-(r.type==="%")*2);break}}return gs(r)}function _u(e){var t=e.domain;return e.ticks=function(n){var r=t();return ki(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Id(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],u,l,c=10;for(o<a&&(l=a,a=o,o=l,l=i,i=s,s=l);c-- >0;){if(l=cr(a,o,n),l===u)return r[i]=a,r[s]=o,t(r);if(l>0)a=Math.floor(a/l)*l,o=Math.ceil(o/l)*l;else if(l<0)a=Math.ceil(a*l)/l,o=Math.floor(o*l)/l;else break;u=l}return e},e}function xu(){var e=kd();return e.copy=function(){return So(e,xu())},Ar.apply(e,arguments),_u(e)}function Rd(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Dl(e){return Math.log(e)}function Al(e){return Math.exp(e)}function Ed(e){return-Math.log(-e)}function Wd(e){return-Math.exp(-e)}function Od(e){return isFinite(e)?+("1e"+e):e<0?0:e}function zd(e){return e===10?Od:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Gd(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Ll(e){return(t,n)=>-e(-t,n)}function Yd(e){const t=e(Dl,Al),n=t.domain;let r=10,i,s;function a(){return i=Gd(r),s=zd(r),n()[0]<0?(i=Ll(i),s=Ll(s),e(Ed,Wd)):e(Dl,Al),t}return t.base=function(o){return arguments.length?(r=+o,a()):r},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const u=n();let l=u[0],c=u[u.length-1];const h=c<l;h&&([l,c]=[c,l]);let f=i(l),p=i(c),y,d;const g=o==null?10:+o;let m=[];if(!(r%1)&&p-f<g){if(f=Math.floor(f),p=Math.ceil(p),l>0){for(;f<=p;++f)for(y=1;y<r;++y)if(d=f<0?y/s(-f):y*s(f),!(d<l)){if(d>c)break;m.push(d)}}else for(;f<=p;++f)for(y=r-1;y>=1;--y)if(d=f>0?y/s(-f):y*s(f),!(d<l)){if(d>c)break;m.push(d)}m.length*2<g&&(m=ki(l,c,g))}else m=ki(f,p,Math.min(p-f,g)).map(s);return h?m.reverse():m},t.tickFormat=(o,u)=>{if(o==null&&(o=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=fr(u)).precision==null&&(u.trim=!0),u=gs(u)),o===1/0)return u;const l=Math.max(1,r*o/t.ticks().length);return c=>{let h=c/s(Math.round(i(c)));return h*r<r-.5&&(h*=r),h<=l?u(c):""}},t.nice=()=>n(Rd(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function ku(){const e=Yd(_o()).domain([1,10]);return e.copy=()=>So(e,ku()).base(e.base()),Ar.apply(e,arguments),e}function Hl(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ud(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Bd(e){return e<0?-e*e:e*e}function jd(e){var t=e(wt,wt),n=1;function r(){return n===1?e(wt,wt):n===.5?e(Ud,Bd):e(Hl(n),Hl(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},_u(t)}function ko(){var e=jd(_o());return e.copy=function(){return So(e,ko()).exponent(e.exponent())},Ar.apply(e,arguments),e}function Xd(){return ko.apply(null,arguments).exponent(.5)}var Ns=new Date,Ps=new Date;function Vt(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return e(s=new Date(+s)),s},i.ceil=function(s){return e(s=new Date(s-1)),t(s,1),e(s),s},i.round=function(s){var a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=function(s,a){return t(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,o){var u=[],l;if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return u;do u.push(l=new Date(+s)),t(s,o),e(s);while(l<s&&s<a);return u},i.filter=function(s){return Vt(function(a){if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););})},n&&(i.count=function(s,a){return Ns.setTime(+s),Ps.setTime(+a),e(Ns),e(Ps),Math.floor(n(Ns,Ps))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(a){return r(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}const qd=1e3,To=qd*60,Zd=To*60,Mo=Zd*24,Tu=Mo*7;var Jd=Vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*To)/Mo,e=>e.getDate()-1),Mu=Jd;function nn(e){return Vt(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*To)/Tu})}var Qd=nn(0),fa=nn(1);nn(2);nn(3);var dr=nn(4);nn(5);nn(6);var Cu=Vt(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});Cu.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};var pr=Cu,Kd=Vt(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/Mo},function(e){return e.getUTCDate()-1}),Vu=Kd;function rn(e){return Vt(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/Tu})}var $d=rn(0),da=rn(1);rn(2);rn(3);var gr=rn(4);rn(5);rn(6);var Du=Vt(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Du.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Vt(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};var mr=Du;function Is(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Rs(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Bn(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function ep(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,u=e.shortMonths,l=jn(i),c=Xn(i),h=jn(s),f=Xn(s),p=jn(a),y=Xn(a),d=jn(o),g=Xn(o),m=jn(u),b=Xn(u),w={a:P,A:W,b:z,B:G,c:null,d:El,e:El,f:xp,g:Fp,G:Pp,H:bp,I:Sp,j:_p,L:Au,m:kp,M:Tp,p:U,q:Z,Q:zl,s:Gl,S:Mp,u:Cp,U:Vp,V:Dp,w:Ap,W:Lp,x:null,X:null,y:Hp,Y:Np,Z:Ip,"%":Ol},S={a:Q,A:K,b:J,B:j,c:null,d:Wl,e:Wl,f:Op,g:Jp,G:Kp,H:Rp,I:Ep,j:Wp,L:Hu,m:zp,M:Gp,p:ne,q:ue,Q:zl,s:Gl,S:Yp,u:Up,U:Bp,V:jp,w:Xp,W:qp,x:null,X:null,y:Zp,Y:Qp,Z:$p,"%":Ol},k={a:Y,A:N,b:D,B:E,c:v,d:Il,e:Il,f:mp,g:Pl,G:Nl,H:Rl,I:Rl,j:fp,L:gp,m:hp,M:dp,p:H,q:up,Q:wp,s:vp,S:pp,u:sp,U:ap,V:op,w:ip,W:lp,x:T,X:M,y:Pl,Y:Nl,Z:cp,"%":yp};w.x=F(n,w),w.X=F(r,w),w.c=F(t,w),S.x=F(n,S),S.X=F(r,S),S.c=F(t,S);function F(q,ee){return function(ie){var O=[],ge=-1,le=0,_e=q.length,ve,X,se;for(ie instanceof Date||(ie=new Date(+ie));++ge<_e;)q.charCodeAt(ge)===37&&(O.push(q.slice(le,ge)),(X=Fl[ve=q.charAt(++ge)])!=null?ve=q.charAt(++ge):X=ve==="e"?" ":"0",(se=ee[ve])&&(ve=se(ie,X)),O.push(ve),le=ge+1);return O.push(q.slice(le,ge)),O.join("")}}function R(q,ee){return function(ie){var O=Bn(1900,void 0,1),ge=A(O,q,ie+="",0),le,_e;if(ge!=ie.length)return null;if("Q"in O)return new Date(O.Q);if("s"in O)return new Date(O.s*1e3+("L"in O?O.L:0));if(ee&&!("Z"in O)&&(O.Z=0),"p"in O&&(O.H=O.H%12+O.p*12),O.m===void 0&&(O.m="q"in O?O.q:0),"V"in O){if(O.V<1||O.V>53)return null;"w"in O||(O.w=1),"Z"in O?(le=Rs(Bn(O.y,0,1)),_e=le.getUTCDay(),le=_e>4||_e===0?da.ceil(le):da(le),le=Vu.offset(le,(O.V-1)*7),O.y=le.getUTCFullYear(),O.m=le.getUTCMonth(),O.d=le.getUTCDate()+(O.w+6)%7):(le=Is(Bn(O.y,0,1)),_e=le.getDay(),le=_e>4||_e===0?fa.ceil(le):fa(le),le=Mu.offset(le,(O.V-1)*7),O.y=le.getFullYear(),O.m=le.getMonth(),O.d=le.getDate()+(O.w+6)%7)}else("W"in O||"U"in O)&&("w"in O||(O.w="u"in O?O.u%7:"W"in O?1:0),_e="Z"in O?Rs(Bn(O.y,0,1)).getUTCDay():Is(Bn(O.y,0,1)).getDay(),O.m=0,O.d="W"in O?(O.w+6)%7+O.W*7-(_e+5)%7:O.w+O.U*7-(_e+6)%7);return"Z"in O?(O.H+=O.Z/100|0,O.M+=O.Z%100,Rs(O)):Is(O)}}function A(q,ee,ie,O){for(var ge=0,le=ee.length,_e=ie.length,ve,X;ge<le;){if(O>=_e)return-1;if(ve=ee.charCodeAt(ge++),ve===37){if(ve=ee.charAt(ge++),X=k[ve in Fl?ee.charAt(ge++):ve],!X||(O=X(q,ie,O))<0)return-1}else if(ve!=ie.charCodeAt(O++))return-1}return O}function H(q,ee,ie){var O=l.exec(ee.slice(ie));return O?(q.p=c.get(O[0].toLowerCase()),ie+O[0].length):-1}function Y(q,ee,ie){var O=p.exec(ee.slice(ie));return O?(q.w=y.get(O[0].toLowerCase()),ie+O[0].length):-1}function N(q,ee,ie){var O=h.exec(ee.slice(ie));return O?(q.w=f.get(O[0].toLowerCase()),ie+O[0].length):-1}function D(q,ee,ie){var O=m.exec(ee.slice(ie));return O?(q.m=b.get(O[0].toLowerCase()),ie+O[0].length):-1}function E(q,ee,ie){var O=d.exec(ee.slice(ie));return O?(q.m=g.get(O[0].toLowerCase()),ie+O[0].length):-1}function v(q,ee,ie){return A(q,t,ee,ie)}function T(q,ee,ie){return A(q,n,ee,ie)}function M(q,ee,ie){return A(q,r,ee,ie)}function P(q){return a[q.getDay()]}function W(q){return s[q.getDay()]}function z(q){return u[q.getMonth()]}function G(q){return o[q.getMonth()]}function U(q){return i[+(q.getHours()>=12)]}function Z(q){return 1+~~(q.getMonth()/3)}function Q(q){return a[q.getUTCDay()]}function K(q){return s[q.getUTCDay()]}function J(q){return u[q.getUTCMonth()]}function j(q){return o[q.getUTCMonth()]}function ne(q){return i[+(q.getUTCHours()>=12)]}function ue(q){return 1+~~(q.getUTCMonth()/3)}return{format:function(q){var ee=F(q+="",w);return ee.toString=function(){return q},ee},parse:function(q){var ee=R(q+="",!1);return ee.toString=function(){return q},ee},utcFormat:function(q){var ee=F(q+="",S);return ee.toString=function(){return q},ee},utcParse:function(q){var ee=R(q+="",!0);return ee.toString=function(){return q},ee}}}var Fl={"-":"",_:" ","0":"0"},De=/^\s*\d+/,tp=/^%/,np=/[\\^$*+?|[\]().{}]/g;function me(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function rp(e){return e.replace(np,"\\$&")}function jn(e){return new RegExp("^(?:"+e.map(rp).join("|")+")","i")}function Xn(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ip(e,t,n){var r=De.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function sp(e,t,n){var r=De.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function ap(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function op(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function lp(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Nl(e,t,n){var r=De.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Pl(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function cp(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function up(e,t,n){var r=De.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function hp(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Il(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function fp(e,t,n){var r=De.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Rl(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function dp(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function pp(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function gp(e,t,n){var r=De.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function mp(e,t,n){var r=De.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function yp(e,t,n){var r=tp.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function wp(e,t,n){var r=De.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function vp(e,t,n){var r=De.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function El(e,t){return me(e.getDate(),t,2)}function bp(e,t){return me(e.getHours(),t,2)}function Sp(e,t){return me(e.getHours()%12||12,t,2)}function _p(e,t){return me(1+Mu.count(pr(e),e),t,3)}function Au(e,t){return me(e.getMilliseconds(),t,3)}function xp(e,t){return Au(e,t)+"000"}function kp(e,t){return me(e.getMonth()+1,t,2)}function Tp(e,t){return me(e.getMinutes(),t,2)}function Mp(e,t){return me(e.getSeconds(),t,2)}function Cp(e){var t=e.getDay();return t===0?7:t}function Vp(e,t){return me(Qd.count(pr(e)-1,e),t,2)}function Lu(e){var t=e.getDay();return t>=4||t===0?dr(e):dr.ceil(e)}function Dp(e,t){return e=Lu(e),me(dr.count(pr(e),e)+(pr(e).getDay()===4),t,2)}function Ap(e){return e.getDay()}function Lp(e,t){return me(fa.count(pr(e)-1,e),t,2)}function Hp(e,t){return me(e.getFullYear()%100,t,2)}function Fp(e,t){return e=Lu(e),me(e.getFullYear()%100,t,2)}function Np(e,t){return me(e.getFullYear()%1e4,t,4)}function Pp(e,t){var n=e.getDay();return e=n>=4||n===0?dr(e):dr.ceil(e),me(e.getFullYear()%1e4,t,4)}function Ip(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+me(t/60|0,"0",2)+me(t%60,"0",2)}function Wl(e,t){return me(e.getUTCDate(),t,2)}function Rp(e,t){return me(e.getUTCHours(),t,2)}function Ep(e,t){return me(e.getUTCHours()%12||12,t,2)}function Wp(e,t){return me(1+Vu.count(mr(e),e),t,3)}function Hu(e,t){return me(e.getUTCMilliseconds(),t,3)}function Op(e,t){return Hu(e,t)+"000"}function zp(e,t){return me(e.getUTCMonth()+1,t,2)}function Gp(e,t){return me(e.getUTCMinutes(),t,2)}function Yp(e,t){return me(e.getUTCSeconds(),t,2)}function Up(e){var t=e.getUTCDay();return t===0?7:t}function Bp(e,t){return me($d.count(mr(e)-1,e),t,2)}function Fu(e){var t=e.getUTCDay();return t>=4||t===0?gr(e):gr.ceil(e)}function jp(e,t){return e=Fu(e),me(gr.count(mr(e),e)+(mr(e).getUTCDay()===4),t,2)}function Xp(e){return e.getUTCDay()}function qp(e,t){return me(da.count(mr(e)-1,e),t,2)}function Zp(e,t){return me(e.getUTCFullYear()%100,t,2)}function Jp(e,t){return e=Fu(e),me(e.getUTCFullYear()%100,t,2)}function Qp(e,t){return me(e.getUTCFullYear()%1e4,t,4)}function Kp(e,t){var n=e.getUTCDay();return e=n>=4||n===0?gr(e):gr.ceil(e),me(e.getUTCFullYear()%1e4,t,4)}function $p(){return"+0000"}function Ol(){return"%"}function zl(e){return+e}function Gl(e){return Math.floor(+e/1e3)}var Es,Nu;e6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e6(e){return Es=ep(e),Nu=Es.format,Es}function t6(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var n6=t6("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");vu(Wt(-100,.75,.35),Wt(80,1.5,.8));vu(Wt(260,.75,.35),Wt(80,1.5,.8));var Xr=Wt();function r6(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Xr.h=360*e-100,Xr.s=1.5-1.5*t,Xr.l=.8-.9*t,Xr+""}var Hn=0,tr=0,qn=0,Pu=1e3,Di,nr,Ai=0,tn=0,ms=0,yr=typeof performance=="object"&&performance.now?performance:Date,Iu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Co(){return tn||(Iu(i6),tn=yr.now()+ms)}function i6(){tn=0}function Li(){this._call=this._time=this._next=null}Li.prototype=Ru.prototype={constructor:Li,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Co():+n)+(t==null?0:+t),!this._next&&nr!==this&&(nr?nr._next=this:Di=this,nr=this),this._call=e,this._time=n,pa()},stop:function(){this._call&&(this._call=null,this._time=1/0,pa())}};function Ru(e,t,n){var r=new Li;return r.restart(e,t,n),r}function s6(){Co(),++Hn;for(var e=Di,t;e;)(t=tn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Hn}function Yl(){tn=(Ai=yr.now())+ms,Hn=tr=0;try{s6()}finally{Hn=0,o6(),tn=0}}function a6(){var e=yr.now(),t=e-Ai;t>Pu&&(ms-=t,Ai=e)}function o6(){for(var e,t=Di,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Di=n);nr=e,pa(r)}function pa(e){if(!Hn){tr&&(tr=clearTimeout(tr));var t=e-tn;t>24?(e<1/0&&(tr=setTimeout(Yl,e-yr.now()-ms)),qn&&(qn=clearInterval(qn))):(qn||(Ai=yr.now(),qn=setInterval(a6,Pu)),Hn=1,Iu(Yl))}}function ga(e,t,n){var r=new Li;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var l6={value:()=>{}};function Fr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new li(n)}function li(e){this._=e}function c6(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}li.prototype=Fr.prototype={constructor:li,on:function(e,t){var n=this._,r=c6(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=u6(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=Ul(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Ul(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new li(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function u6(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Ul(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=l6,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var h6=Fr("start","end","cancel","interrupt"),f6=[],Eu=0,Bl=1,ma=2,ci=3,jl=4,ya=5,ui=6;function ys(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;d6(e,n,{name:t,index:r,group:i,on:h6,tween:f6,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Eu})}function Vo(e,t){var n=dt(e,t);if(n.state>Eu)throw new Error("too late; already scheduled");return n}function St(e,t){var n=dt(e,t);if(n.state>ci)throw new Error("too late; already running");return n}function dt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function d6(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ru(s,0,n.time);function s(l){n.state=Bl,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,h,f,p;if(n.state!==Bl)return u();for(c in r)if(p=r[c],p.name===n.name){if(p.state===ci)return ga(a);p.state===jl?(p.state=ui,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=ui,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(ga(function(){n.state===ci&&(n.state=jl,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=ma,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ma){for(n.state=ci,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=p);i.length=h+1}}function o(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=ya,1),h=-1,f=i.length;++h<f;)i[h].call(e,c);n.state===ya&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=ui,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function bn(e,t){var n=e.__transition,r,i,s=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>ma&&r.state<ya,r.state=ui,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function p6(e){return this.each(function(){bn(this,e)})}function g6(e,t){var n,r;return function(){var i=St(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function m6(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=St(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=o;break}u===l&&i.push(o)}s.tween=i}}function y6(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=dt(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?g6:m6)(n,e,t))}function Do(e,t,n){var r=e._id;return e.each(function(){var i=St(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return dt(i,r).value[t]}}function Wu(e,t){var n;return(typeof t=="number"?ut:t instanceof Et?Ci:(n=Et(t))?(t=n,Ci):gu)(e,t)}function w6(e){return function(){this.removeAttribute(e)}}function v6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function b6(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function S6(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function _6(e,t,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=t(r=a,o)))}}function x6(e,t,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=t(r=a,o)))}}function k6(e,t){var n=fs(e),r=n==="transform"?dd:Wu;return this.attrTween(e,typeof t=="function"?(n.local?x6:_6)(n,r,Do(this,"attr."+e,t)):t==null?(n.local?v6:w6)(n):(n.local?S6:b6)(n,r,t))}function T6(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function M6(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function C6(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&M6(e,s)),n}return i._value=t,i}function V6(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&T6(e,s)),n}return i._value=t,i}function D6(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=fs(e);return this.tween(n,(r.local?C6:V6)(r,t))}function A6(e,t){return function(){Vo(this,e).delay=+t.apply(this,arguments)}}function L6(e,t){return t=+t,function(){Vo(this,e).delay=t}}function H6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?A6:L6)(t,e)):dt(this.node(),t).delay}function F6(e,t){return function(){St(this,e).duration=+t.apply(this,arguments)}}function N6(e,t){return t=+t,function(){St(this,e).duration=t}}function P6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?F6:N6)(t,e)):dt(this.node(),t).duration}function I6(e,t){if(typeof t!="function")throw new Error;return function(){St(this,e).ease=t}}function R6(e){var t=this._id;return arguments.length?this.each(I6(t,e)):dt(this.node(),t).ease}function E6(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;St(this,e).ease=n}}function W6(e){if(typeof e!="function")throw new Error;return this.each(E6(this._id,e))}function O6(e){typeof e!="function"&&(e=Yc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&o.push(u);return new Ct(r,this._parents,this._name,this._id)}function z6(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var u=t[o],l=n[o],c=u.length,h=a[o]=new Array(c),f,p=0;p<c;++p)(f=u[p]||l[p])&&(h[p]=f);for(;o<r;++o)a[o]=t[o];return new Ct(a,this._parents,this._name,this._id)}function G6(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Y6(e,t,n){var r,i,s=G6(t)?Vo:St;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function U6(e,t){var n=this._id;return arguments.length<2?dt(this.node(),n).on.on(e):this.each(Y6(n,e,t))}function B6(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function j6(){return this.on("end.remove",B6(this._id))}function X6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fo(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],u=o.length,l=s[a]=new Array(u),c,h,f=0;f<u;++f)(c=o[f])&&(h=e.call(c,c.__data__,f,o))&&("__data__"in c&&(h.__data__=c.__data__),l[f]=h,ys(l[f],t,n,f,l,dt(c,n)));return new Ct(s,this._parents,t,n)}function q6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gc(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var u=r[o],l=u.length,c,h=0;h<l;++h)if(c=u[h]){for(var f=e.call(c,c.__data__,h,u),p,y=dt(c,n),d=0,g=f.length;d<g;++d)(p=f[d])&&ys(p,t,n,d,f,y);s.push(f),a.push(c)}return new Ct(s,a,t,n)}var Z6=Pn.prototype.constructor;function J6(){return new Z6(this._groups,this._parents)}function Q6(e,t){var n,r,i;return function(){var s=Dn(this,e),a=(this.style.removeProperty(e),Dn(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function Ou(e){return function(){this.style.removeProperty(e)}}function K6(e,t,n){var r,i=n+"",s;return function(){var a=Dn(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function $6(e,t,n){var r,i,s;return function(){var a=Dn(this,e),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(e),Dn(this,e))),a===u?null:a===r&&u===i?s:(i=u,s=t(r=a,o))}}function eg(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var u=St(this,e),l=u.on,c=u.value[s]==null?o||(o=Ou(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),u.on=r}}function tg(e,t,n){var r=(e+="")=="transform"?fd:Wu;return t==null?this.styleTween(e,Q6(e,r)).on("end.style."+e,Ou(e)):typeof t=="function"?this.styleTween(e,$6(e,r,Do(this,"style."+e,t))).each(eg(this._id,e)):this.styleTween(e,K6(e,r,t),n).on("end.style."+e,null)}function ng(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function rg(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&ng(e,a,n)),r}return s._value=t,s}function ig(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,rg(e,t,n==null?"":n))}function sg(e){return function(){this.textContent=e}}function ag(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function og(e){return this.tween("text",typeof e=="function"?ag(Do(this,"text",e)):sg(e==null?"":e+""))}function lg(e){return function(t){this.textContent=e.call(this,t)}}function cg(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&lg(i)),t}return r._value=e,r}function ug(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,cg(e))}function hg(){for(var e=this._name,t=this._id,n=Gu(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)if(u=a[l]){var c=dt(u,t);ys(u,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ct(r,this._parents,e,n)}function fg(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},u={value:function(){--i===0&&s()}};n.each(function(){var l=St(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(u)),l.on=t}),i===0&&s()})}var dg=0;function Ct(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zu(e){return Pn().transition(e)}function Gu(){return++dg}var xt=Pn.prototype;Ct.prototype=zu.prototype={constructor:Ct,select:X6,selectAll:q6,selectChild:xt.selectChild,selectChildren:xt.selectChildren,filter:O6,merge:z6,selection:J6,transition:hg,call:xt.call,nodes:xt.nodes,node:xt.node,size:xt.size,empty:xt.empty,each:xt.each,on:U6,attr:k6,attrTween:D6,style:tg,styleTween:ig,text:og,textTween:ug,remove:j6,tween:y6,delay:H6,duration:P6,ease:R6,easeVarying:W6,end:fg,[Symbol.iterator]:xt[Symbol.iterator]};const pg=e=>+e;function gg(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Yu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var mg=3,yg=function e(t){t=+t;function n(r){return((r*=2)<=1?Math.pow(r,t):2-Math.pow(2-r,t))/2}return n.exponent=e,n}(mg);function wg(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}var Xl=2*Math.PI,vg=1,bg=.3,Sg=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Xl);function i(s){return 1-t*wg(s=+s)*Math.sin((s+r)/n)}return i.amplitude=function(s){return e(s,n*Xl)},i.period=function(s){return e(t,s)},i}(vg,bg),_g={time:null,delay:0,duration:250,ease:Yu};function xg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function kg(e){var t,n;e instanceof Ct?(t=e._id,e=e._name):(t=Gu(),(n=_g).time=Co(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&ys(u,e,t,l,a,n||xg(u,t));return new Ct(r,this._parents,e,t)}Pn.prototype.interrupt=p6;Pn.prototype.transition=kg;function Tg(e){return e}var Ws=1,Os=2,wa=3,rr=4,ql=1e-6;function Mg(e){return"translate("+e+",0)"}function Cg(e){return"translate(0,"+e+")"}function Vg(e){return t=>+e(t)}function Dg(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Ag(){return!this.__axis}function Uu(e,t){var n=[],r=null,i=null,s=6,a=6,o=3,u=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,l=e===Ws||e===rr?-1:1,c=e===rr||e===Os?"x":"y",h=e===Ws||e===wa?Mg:Cg;function f(p){var y=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,d=i==null?t.tickFormat?t.tickFormat.apply(t,n):Tg:i,g=Math.max(s,0)+o,m=t.range(),b=+m[0]+u,w=+m[m.length-1]+u,S=(t.bandwidth?Dg:Vg)(t.copy(),u),k=p.selection?p.selection():p,F=k.selectAll(".domain").data([null]),R=k.selectAll(".tick").data(y,t).order(),A=R.exit(),H=R.enter().append("g").attr("class","tick"),Y=R.select("line"),N=R.select("text");F=F.merge(F.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),R=R.merge(H),Y=Y.merge(H.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),N=N.merge(H.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===Ws?"0em":e===wa?"0.71em":"0.32em")),p!==k&&(F=F.transition(p),R=R.transition(p),Y=Y.transition(p),N=N.transition(p),A=A.transition(p).attr("opacity",ql).attr("transform",function(D){return isFinite(D=S(D))?h(D+u):this.getAttribute("transform")}),H.attr("opacity",ql).attr("transform",function(D){var E=this.parentNode.__axis;return h((E&&isFinite(E=E(D))?E:S(D))+u)})),A.remove(),F.attr("d",e===rr||e===Os?a?"M"+l*a+","+b+"H"+u+"V"+w+"H"+l*a:"M"+u+","+b+"V"+w:a?"M"+b+","+l*a+"V"+u+"H"+w+"V"+l*a:"M"+b+","+u+"H"+w),R.attr("opacity",1).attr("transform",function(D){return h(S(D)+u)}),Y.attr(c+"2",l*s),N.attr(c,l*g).text(d),k.filter(Ag).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Os?"start":e===rr?"end":"middle"),k.each(function(){this.__axis=S})}return f.scale=function(p){return arguments.length?(t=p,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),f):n.slice()},f.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),f):r&&r.slice()},f.tickFormat=function(p){return arguments.length?(i=p,f):i},f.tickSize=function(p){return arguments.length?(s=a=+p,f):s},f.tickSizeInner=function(p){return arguments.length?(s=+p,f):s},f.tickSizeOuter=function(p){return arguments.length?(a=+p,f):a},f.tickPadding=function(p){return arguments.length?(o=+p,f):o},f.offset=function(p){return arguments.length?(u=+p,f):u},f}function Lg(e){return Uu(wa,e)}function Hg(e){return Uu(rr,e)}const va=Math.PI,ba=2*va,jt=1e-6,Fg=ba-jt;function Sa(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Nr(){return new Sa}Sa.prototype=Nr.prototype={constructor:Sa,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,o=n-e,u=r-t,l=s-e,c=a-t,h=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>jt)if(!(Math.abs(c*o-u*l)>jt)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var f=n-s,p=r-a,y=o*o+u*u,d=f*f+p*p,g=Math.sqrt(y),m=Math.sqrt(h),b=i*Math.tan((va-Math.acos((y+h-d)/(2*g*m)))/2),w=b/m,S=b/g;Math.abs(w-1)>jt&&(this._+="L"+(e+w*l)+","+(t+w*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>l*p)+","+(this._x1=e+S*o)+","+(this._y1=t+S*u)}},arc:function(e,t,n,r,i,s){e=+e,t=+t,n=+n,s=!!s;var a=n*Math.cos(r),o=n*Math.sin(r),u=e+a,l=t+o,c=1^s,h=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>jt||Math.abs(this._y1-l)>jt)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%ba+ba),h>Fg?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-o)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>jt&&(this._+="A"+n+","+n+",0,"+ +(h>=va)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Ie(e){return function(){return e}}const Zl=Math.abs,Fe=Math.atan2,Bt=Math.cos,Ng=Math.max,zs=Math.min,gt=Math.sin,gn=Math.sqrt,Ue=1e-12,wr=Math.PI,Hi=wr/2,Pg=2*wr;function Ig(e){return e>1?0:e<-1?wr:Math.acos(e)}function Jl(e){return e>=1?Hi:e<=-1?-Hi:Math.asin(e)}function Rg(e){return e.innerRadius}function Eg(e){return e.outerRadius}function Wg(e){return e.startAngle}function Og(e){return e.endAngle}function zg(e){return e&&e.padAngle}function Gg(e,t,n,r,i,s,a,o){var u=n-e,l=r-t,c=a-i,h=o-s,f=h*u-c*l;if(!(f*f<Ue))return f=(c*(t-s)-h*(e-i))/f,[e+f*u,t+f*l]}function qr(e,t,n,r,i,s,a){var o=e-n,u=t-r,l=(a?s:-s)/gn(o*o+u*u),c=l*u,h=-l*o,f=e+c,p=t+h,y=n+c,d=r+h,g=(f+y)/2,m=(p+d)/2,b=y-f,w=d-p,S=b*b+w*w,k=i-s,F=f*d-y*p,R=(w<0?-1:1)*gn(Ng(0,k*k*S-F*F)),A=(F*w-b*R)/S,H=(-F*b-w*R)/S,Y=(F*w+b*R)/S,N=(-F*b+w*R)/S,D=A-g,E=H-m,v=Y-g,T=N-m;return D*D+E*E>v*v+T*T&&(A=Y,H=N),{cx:A,cy:H,x01:-c,y01:-h,x11:A*(i/k-1),y11:H*(i/k-1)}}function Yg(){var e=Rg,t=Eg,n=Ie(0),r=null,i=Wg,s=Og,a=zg,o=null;function u(){var l,c,h=+e.apply(this,arguments),f=+t.apply(this,arguments),p=i.apply(this,arguments)-Hi,y=s.apply(this,arguments)-Hi,d=Zl(y-p),g=y>p;if(o||(o=l=Nr()),f<h&&(c=f,f=h,h=c),!(f>Ue))o.moveTo(0,0);else if(d>Pg-Ue)o.moveTo(f*Bt(p),f*gt(p)),o.arc(0,0,f,p,y,!g),h>Ue&&(o.moveTo(h*Bt(y),h*gt(y)),o.arc(0,0,h,y,p,g));else{var m=p,b=y,w=p,S=y,k=d,F=d,R=a.apply(this,arguments)/2,A=R>Ue&&(r?+r.apply(this,arguments):gn(h*h+f*f)),H=zs(Zl(f-h)/2,+n.apply(this,arguments)),Y=H,N=H,D,E;if(A>Ue){var v=Jl(A/h*gt(R)),T=Jl(A/f*gt(R));(k-=v*2)>Ue?(v*=g?1:-1,w+=v,S-=v):(k=0,w=S=(p+y)/2),(F-=T*2)>Ue?(T*=g?1:-1,m+=T,b-=T):(F=0,m=b=(p+y)/2)}var M=f*Bt(m),P=f*gt(m),W=h*Bt(S),z=h*gt(S);if(H>Ue){var G=f*Bt(b),U=f*gt(b),Z=h*Bt(w),Q=h*gt(w),K;if(d<wr&&(K=Gg(M,P,Z,Q,G,U,W,z))){var J=M-K[0],j=P-K[1],ne=G-K[0],ue=U-K[1],q=1/gt(Ig((J*ne+j*ue)/(gn(J*J+j*j)*gn(ne*ne+ue*ue)))/2),ee=gn(K[0]*K[0]+K[1]*K[1]);Y=zs(H,(h-ee)/(q-1)),N=zs(H,(f-ee)/(q+1))}}F>Ue?N>Ue?(D=qr(Z,Q,M,P,f,N,g),E=qr(G,U,W,z,f,N,g),o.moveTo(D.cx+D.x01,D.cy+D.y01),N<H?o.arc(D.cx,D.cy,N,Fe(D.y01,D.x01),Fe(E.y01,E.x01),!g):(o.arc(D.cx,D.cy,N,Fe(D.y01,D.x01),Fe(D.y11,D.x11),!g),o.arc(0,0,f,Fe(D.cy+D.y11,D.cx+D.x11),Fe(E.cy+E.y11,E.cx+E.x11),!g),o.arc(E.cx,E.cy,N,Fe(E.y11,E.x11),Fe(E.y01,E.x01),!g))):(o.moveTo(M,P),o.arc(0,0,f,m,b,!g)):o.moveTo(M,P),!(h>Ue)||!(k>Ue)?o.lineTo(W,z):Y>Ue?(D=qr(W,z,G,U,h,-Y,g),E=qr(M,P,Z,Q,h,-Y,g),o.lineTo(D.cx+D.x01,D.cy+D.y01),Y<H?o.arc(D.cx,D.cy,Y,Fe(D.y01,D.x01),Fe(E.y01,E.x01),!g):(o.arc(D.cx,D.cy,Y,Fe(D.y01,D.x01),Fe(D.y11,D.x11),!g),o.arc(0,0,h,Fe(D.cy+D.y11,D.cx+D.x11),Fe(E.cy+E.y11,E.cx+E.x11),g),o.arc(E.cx,E.cy,Y,Fe(E.y11,E.x11),Fe(E.y01,E.x01),!g))):o.arc(0,0,h,S,w,g)}if(o.closePath(),l)return o=null,l+""||null}return u.centroid=function(){var l=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-wr/2;return[Bt(c)*l,gt(c)*l]},u.innerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:Ie(+l),u):e},u.outerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:Ie(+l),u):t},u.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:Ie(+l),u):n},u.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:Ie(+l),u):r},u.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Ie(+l),u):i},u.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Ie(+l),u):s},u.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:Ie(+l),u):a},u.context=function(l){return arguments.length?(o=l==null?null:l,u):o},u}var Ug=Array.prototype.slice;function Bg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Bu(e){this._context=e}Bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function jg(e){return new Bu(e)}function ju(e){return e[0]}function Xu(e){return e[1]}function Xg(e,t){var n=Ie(!0),r=null,i=jg,s=null;e=typeof e=="function"?e:e===void 0?ju:Ie(e),t=typeof t=="function"?t:t===void 0?Xu:Ie(t);function a(o){var u,l=(o=Bg(o)).length,c,h=!1,f;for(r==null&&(s=i(f=Nr())),u=0;u<=l;++u)!(u<l&&n(c=o[u],u,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,u,o),+t(c,u,o));if(f)return s=null,f+""||null}return a.x=function(o){return arguments.length?(e=typeof o=="function"?o:Ie(+o),a):e},a.y=function(o){return arguments.length?(t=typeof o=="function"?o:Ie(+o),a):t},a.defined=function(o){return arguments.length?(n=typeof o=="function"?o:Ie(!!o),a):n},a.curve=function(o){return arguments.length?(i=o,r!=null&&(s=i(r)),a):i},a.context=function(o){return arguments.length?(o==null?r=s=null:s=i(r=o),a):r},a}class qu{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function qg(e){return new qu(e,!0)}function Zg(e){return new qu(e,!1)}function Jg(e){return e.source}function Qg(e){return e.target}function Zu(e){let t=Jg,n=Qg,r=ju,i=Xu,s=null,a=null;function o(){let u;const l=Ug.call(arguments),c=t.apply(this,l),h=n.apply(this,l);if(s==null&&(a=e(u=Nr())),a.lineStart(),l[0]=c,a.point(+r.apply(this,l),+i.apply(this,l)),l[0]=h,a.point(+r.apply(this,l),+i.apply(this,l)),a.lineEnd(),u)return a=null,u+""||null}return o.source=function(u){return arguments.length?(t=u,o):t},o.target=function(u){return arguments.length?(n=u,o):n},o.x=function(u){return arguments.length?(r=typeof u=="function"?u:Ie(+u),o):r},o.y=function(u){return arguments.length?(i=typeof u=="function"?u:Ie(+u),o):i},o.context=function(u){return arguments.length?(u==null?s=a=null:a=e(s=u),o):s},o}function Kg(){return Zu(qg)}function $g(){return Zu(Zg)}function Ql(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Ju(e){this._context=e}Ju.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ql(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ql(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function em(e){return new Ju(e)}function Kl(e){return e<0?-1:1}function $l(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(Kl(s)+Kl(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function ec(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Gs(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function Fi(e){this._context=e}Fi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Gs(this,this._t0,ec(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Gs(this,ec(this,n=$l(this,e,t)),n);break;default:Gs(this,this._t0,n=$l(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Qu(e){this._context=new Ku(e)}(Qu.prototype=Object.create(Fi.prototype)).point=function(e,t){Fi.prototype.point.call(this,t,e)};function Ku(e){this._context=e}Ku.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function tm(e){return new Fi(e)}function nm(e){return new Qu(e)}function $u(e,t){this._context=e,this._t=t}$u.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function rm(e){return new $u(e,1)}function im(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function sm(){return this.eachAfter(im)}function am(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function om(e,t){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function lm(e,t){for(var n=this,r=[n],i=[],s,a,o,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function cm(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function um(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function hm(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function fm(e){for(var t=this,n=dm(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function dm(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function pm(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function gm(){return Array.from(this)}function mm(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function ym(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*wm(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function Ao(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Sm)):t===void 0&&(t=bm);for(var n=new vr(e),r,i=[n],s,a,o,u;r=i.pop();)if((a=t(r.data))&&(u=(a=Array.from(a)).length))for(r.children=a,o=u-1;o>=0;--o)i.push(s=a[o]=new vr(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(xm)}function vm(){return Ao(this).eachBefore(_m)}function bm(e){return e.children}function Sm(e){return Array.isArray(e)?e[1]:null}function _m(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function xm(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function vr(e){this.data=e,this.depth=this.height=0,this.parent=null}vr.prototype=Ao.prototype={constructor:vr,count:sm,each:am,eachAfter:lm,eachBefore:om,find:cm,sum:um,sort:hm,path:fm,ancestors:pm,descendants:gm,leaves:mm,links:ym,copy:vm,[Symbol.iterator]:wm};function km(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Tm(e,t,n,r,i){for(var s=e.children,a,o=-1,u=s.length,l=e.value&&(r-t)/e.value;++o<u;)a=s[o],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function Mm(){var e=1,t=1,n=0,r=!1;function i(a){var o=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/o,a.eachBefore(s(t,o)),r&&a.eachBefore(km),a}function s(a,o){return function(u){u.children&&Tm(u,u.x0,a*(u.depth+1)/o,u.x1,a*(u.depth+2)/o);var l=u.x0,c=u.y0,h=u.x1-n,f=u.y1-n;h<l&&(l=h=(l+h)/2),f<c&&(c=f=(c+f)/2),u.x0=l,u.y0=c,u.x1=h,u.y1=f}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}function Cm(e,t){return e.parent===t.parent?1:2}function Ys(e){var t=e.children;return t?t[0]:e.t}function Us(e){var t=e.children;return t?t[t.length-1]:e.t}function Vm(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Dm(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Am(e,t,n){return e.a.parent===t.parent?e.a:n}function hi(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}hi.prototype=Object.create(vr.prototype);function Lm(e){for(var t=new hi(e,0),n,r=[t],i,s,a,o;n=r.pop();)if(s=n._.children)for(n.children=new Array(o=s.length),a=o-1;a>=0;--a)r.push(i=n.children[a]=new hi(s[a],a)),i.parent=n;return(t.parent=new hi(null,0)).children=[t],t}function Hm(){var e=Cm,t=1,n=1,r=null;function i(l){var c=Lm(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(a),r)l.eachBefore(u);else{var h=l,f=l,p=l;l.eachBefore(function(b){b.x<h.x&&(h=b),b.x>f.x&&(f=b),b.depth>p.depth&&(p=b)});var y=h===f?1:e(h,f)/2,d=y-h.x,g=t/(f.x+y+d),m=n/(p.depth||1);l.eachBefore(function(b){b.x=(b.x+d)*g,b.y=b.depth*m})}return l}function s(l){var c=l.children,h=l.parent.children,f=l.i?h[l.i-1]:null;if(c){Dm(l);var p=(c[0].z+c[c.length-1].z)/2;f?(l.z=f.z+e(l._,f._),l.m=l.z-p):l.z=p}else f&&(l.z=f.z+e(l._,f._));l.parent.A=o(l,f,l.parent.A||h[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function o(l,c,h){if(c){for(var f=l,p=l,y=c,d=f.parent.children[0],g=f.m,m=p.m,b=y.m,w=d.m,S;y=Us(y),f=Ys(f),y&&f;)d=Ys(d),p=Us(p),p.a=l,S=y.z+b-f.z-g+e(y._,f._),S>0&&(Vm(Am(y,l,h),l,S),g+=S,m+=S),b+=y.m,g+=f.m,w+=d.m,m+=p.m;y&&!Us(p)&&(p.t=y,p.m+=b-m),f&&!Ys(d)&&(d.t=f,d.m+=g-w,h=l)}return h}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}const Fm={passive:!1},br={capture:!0,passive:!1};function Bs(e){e.stopImmediatePropagation()}function Sn(e){e.preventDefault(),e.stopImmediatePropagation()}function Lo(e){var t=e.document.documentElement,n=We(e).on("dragstart.drag",Sn,br);"onselectstart"in t?n.on("selectstart.drag",Sn,br):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ho(e,t){var n=e.document.documentElement,r=We(e).on("dragstart.drag",null);t&&(r.on("click.drag",Sn,br),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Zr=e=>()=>e;function _a(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}_a.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Nm(e){return!e.ctrlKey&&!e.button}function Pm(){return this.parentNode}function Im(e,t){return t==null?{x:e.x,y:e.y}:t}function Rm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Em(){var e=Nm,t=Pm,n=Im,r=Rm,i={},s=Fr("start","drag","end"),a=0,o,u,l,c,h=0;function f(S){S.on("mousedown.drag",p).filter(r).on("touchstart.drag",g).on("touchmove.drag",m,Fm).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,k){if(!(c||!e.call(this,S,k))){var F=w(this,t.call(this,S,k),S,k,"mouse");!F||(We(S.view).on("mousemove.drag",y,br).on("mouseup.drag",d,br),Lo(S.view),Bs(S),l=!1,o=S.clientX,u=S.clientY,F("start",S))}}function y(S){if(Sn(S),!l){var k=S.clientX-o,F=S.clientY-u;l=k*k+F*F>h}i.mouse("drag",S)}function d(S){We(S.view).on("mousemove.drag mouseup.drag",null),Ho(S.view,l),Sn(S),i.mouse("end",S)}function g(S,k){if(!!e.call(this,S,k)){var F=S.changedTouches,R=t.call(this,S,k),A=F.length,H,Y;for(H=0;H<A;++H)(Y=w(this,R,S,k,F[H].identifier,F[H]))&&(Bs(S),Y("start",S,F[H]))}}function m(S){var k=S.changedTouches,F=k.length,R,A;for(R=0;R<F;++R)(A=i[k[R].identifier])&&(Sn(S),A("drag",S,k[R]))}function b(S){var k=S.changedTouches,F=k.length,R,A;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),R=0;R<F;++R)(A=i[k[R].identifier])&&(Bs(S),A("end",S,k[R]))}function w(S,k,F,R,A,H){var Y=s.copy(),N=ct(H||F,k),D,E,v;if((v=n.call(S,new _a("beforestart",{sourceEvent:F,target:f,identifier:A,active:a,x:N[0],y:N[1],dx:0,dy:0,dispatch:Y}),R))!=null)return D=v.x-N[0]||0,E=v.y-N[1]||0,function T(M,P,W){var z=N,G;switch(M){case"start":i[A]=T,G=a++;break;case"end":delete i[A],--a;case"drag":N=ct(W||P,k),G=a;break}Y.call(M,S,new _a(M,{sourceEvent:P,subject:v,target:f,identifier:A,active:G,x:N[0]+D,y:N[1]+E,dx:N[0]-z[0],dy:N[1]-z[1],dispatch:Y}),R)}}return f.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Zr(!!S),f):e},f.container=function(S){return arguments.length?(t=typeof S=="function"?S:Zr(S),f):t},f.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Zr(S),f):n},f.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:Zr(!!S),f):r},f.on=function(){var S=s.on.apply(s,arguments);return S===s?f:S},f.clickDistance=function(S){return arguments.length?(h=(S=+S)*S,f):Math.sqrt(h)},f}var js=e=>()=>e;function Wm(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Om(e){e.stopImmediatePropagation()}function Xs(e){e.preventDefault(),e.stopImmediatePropagation()}var tc={name:"drag"},qs={name:"space"},cn={name:"handle"},un={name:"center"};const{abs:nc,max:Ne,min:Pe}=Math;function rc(e){return[+e[0],+e[1]]}function xa(e){return[rc(e[0]),rc(e[1])]}var Zs={name:"x",handles:["w","e"].map(Sr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Js={name:"y",handles:["n","s"].map(Sr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},zm={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Sr),input:function(e){return e==null?null:xa(e)},output:function(e){return e}},kt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ic={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},sc={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Gm={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ym={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Sr(e){return{type:e}}function Um(e){return!e.ctrlKey&&!e.button}function Bm(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function jm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qs(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Xm(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function qm(){return Zm(zm)}function Zm(e){var t=Bm,n=Um,r=jm,i=!0,s=Fr("start","brush","end"),a=6,o;function u(g){var m=g.property("__brush",d).selectAll(".overlay").data([Sr("overlay")]);m.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",kt.overlay).merge(m).each(function(){var w=Qs(this).extent;We(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),g.selectAll(".selection").data([Sr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",kt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=g.selectAll(".handle").data(e.handles,function(w){return w.type});b.exit().remove(),b.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return kt[w.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,m,b){g.tween?g.on("start.brush",function(w){c(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){c(this,arguments).end(w)}).tween("brush",function(){var w=this,S=w.__brush,k=c(w,arguments),F=S.selection,R=e.input(typeof m=="function"?m.apply(this,arguments):m,S.extent),A=Hr(F,R);function H(Y){S.selection=Y===1&&R===null?null:A(Y),l.call(w),k.brush()}return F!==null&&R!==null?H:H(1)}):g.each(function(){var w=this,S=arguments,k=w.__brush,F=e.input(typeof m=="function"?m.apply(w,S):m,k.extent),R=c(w,S).beforestart();bn(w),k.selection=F===null?null:F,l.call(w),R.start(b).brush(b).end(b)})},u.clear=function(g,m){u.move(g,null,m)};function l(){var g=We(this),m=Qs(this).selection;m?(g.selectAll(".selection").style("display",null).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?m[1][0]-a/2:m[0][0]-a/2}).attr("y",function(b){return b.type[0]==="s"?m[1][1]-a/2:m[0][1]-a/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?m[1][0]-m[0][0]+a:a}).attr("height",function(b){return b.type==="e"||b.type==="w"?m[1][1]-m[0][1]+a:a})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,m,b){var w=g.__brush.emitter;return w&&(!b||!w.clean)?w:new h(g,m,b)}function h(g,m,b){this.that=g,this.args=m,this.state=g.__brush,this.active=0,this.clean=b}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,m){return this.starting?(this.starting=!1,this.emit("start",g,m)):this.emit("brush",g),this},brush:function(g,m){return this.emit("brush",g,m),this},end:function(g,m){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,m)),this},emit:function(g,m,b){var w=We(this.that).datum();s.call(g,this.that,new Wm(g,{sourceEvent:m,target:u,selection:e.output(this.state.selection),mode:b,dispatch:s}),w)}};function f(g){if(o&&!g.touches||!n.apply(this,arguments))return;var m=this,b=g.target.__data__.type,w=(i&&g.metaKey?b="overlay":b)==="selection"?tc:i&&g.altKey?un:cn,S=e===Js?null:Gm[b],k=e===Zs?null:Ym[b],F=Qs(m),R=F.extent,A=F.selection,H=R[0][0],Y,N,D=R[0][1],E,v,T=R[1][0],M,P,W=R[1][1],z,G,U=0,Z=0,Q,K=S&&k&&i&&g.shiftKey,J,j,ne=Array.from(g.touches||[g],X=>{const se=X.identifier;return X=ct(X,m),X.point0=X.slice(),X.identifier=se,X});bn(m);var ue=c(m,arguments,!0).beforestart();if(b==="overlay"){A&&(Q=!0);const X=[ne[0],ne[1]||ne[0]];F.selection=A=[[Y=e===Js?H:Pe(X[0][0],X[1][0]),E=e===Zs?D:Pe(X[0][1],X[1][1])],[M=e===Js?T:Ne(X[0][0],X[1][0]),z=e===Zs?W:Ne(X[0][1],X[1][1])]],ne.length>1&&ge(g)}else Y=A[0][0],E=A[0][1],M=A[1][0],z=A[1][1];N=Y,v=E,P=M,G=z;var q=We(m).attr("pointer-events","none"),ee=q.selectAll(".overlay").attr("cursor",kt[b]);if(g.touches)ue.moved=O,ue.ended=le;else{var ie=We(g.view).on("mousemove.brush",O,!0).on("mouseup.brush",le,!0);i&&ie.on("keydown.brush",_e,!0).on("keyup.brush",ve,!0),Lo(g.view)}l.call(m),ue.start(g,w.name);function O(X){for(const se of X.changedTouches||[X])for(const Re of ne)Re.identifier===se.identifier&&(Re.cur=ct(se,m));if(K&&!J&&!j&&ne.length===1){const se=ne[0];nc(se.cur[0]-se[0])>nc(se.cur[1]-se[1])?j=!0:J=!0}for(const se of ne)se.cur&&(se[0]=se.cur[0],se[1]=se.cur[1]);Q=!0,Xs(X),ge(X)}function ge(X){const se=ne[0],Re=se.point0;var Te;switch(U=se[0]-Re[0],Z=se[1]-Re[1],w){case qs:case tc:{S&&(U=Ne(H-Y,Pe(T-M,U)),N=Y+U,P=M+U),k&&(Z=Ne(D-E,Pe(W-z,Z)),v=E+Z,G=z+Z);break}case cn:{ne[1]?(S&&(N=Ne(H,Pe(T,ne[0][0])),P=Ne(H,Pe(T,ne[1][0])),S=1),k&&(v=Ne(D,Pe(W,ne[0][1])),G=Ne(D,Pe(W,ne[1][1])),k=1)):(S<0?(U=Ne(H-Y,Pe(T-Y,U)),N=Y+U,P=M):S>0&&(U=Ne(H-M,Pe(T-M,U)),N=Y,P=M+U),k<0?(Z=Ne(D-E,Pe(W-E,Z)),v=E+Z,G=z):k>0&&(Z=Ne(D-z,Pe(W-z,Z)),v=E,G=z+Z));break}case un:{S&&(N=Ne(H,Pe(T,Y-U*S)),P=Ne(H,Pe(T,M+U*S))),k&&(v=Ne(D,Pe(W,E-Z*k)),G=Ne(D,Pe(W,z+Z*k)));break}}P<N&&(S*=-1,Te=Y,Y=M,M=Te,Te=N,N=P,P=Te,b in ic&&ee.attr("cursor",kt[b=ic[b]])),G<v&&(k*=-1,Te=E,E=z,z=Te,Te=v,v=G,G=Te,b in sc&&ee.attr("cursor",kt[b=sc[b]])),F.selection&&(A=F.selection),J&&(N=A[0][0],P=A[1][0]),j&&(v=A[0][1],G=A[1][1]),(A[0][0]!==N||A[0][1]!==v||A[1][0]!==P||A[1][1]!==G)&&(F.selection=[[N,v],[P,G]],l.call(m),ue.brush(X,w.name))}function le(X){if(Om(X),X.touches){if(X.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else Ho(X.view,Q),ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);q.attr("pointer-events","all"),ee.attr("cursor",kt.overlay),F.selection&&(A=F.selection),Xm(A)&&(F.selection=null,l.call(m)),ue.end(X,w.name)}function _e(X){switch(X.keyCode){case 16:{K=S&&k;break}case 18:{w===cn&&(S&&(M=P-U*S,Y=N+U*S),k&&(z=G-Z*k,E=v+Z*k),w=un,ge(X));break}case 32:{(w===cn||w===un)&&(S<0?M=P-U:S>0&&(Y=N-U),k<0?z=G-Z:k>0&&(E=v-Z),w=qs,ee.attr("cursor",kt.selection),ge(X));break}default:return}Xs(X)}function ve(X){switch(X.keyCode){case 16:{K&&(J=j=K=!1,ge(X));break}case 18:{w===un&&(S<0?M=P:S>0&&(Y=N),k<0?z=G:k>0&&(E=v),w=cn,ge(X));break}case 32:{w===qs&&(X.altKey?(S&&(M=P-U*S,Y=N+U*S),k&&(z=G-Z*k,E=v+Z*k),w=un):(S<0?M=P:S>0&&(Y=N),k<0?z=G:k>0&&(E=v),w=cn),ee.attr("cursor",kt[b]),ge(X));break}default:return}Xs(X)}}function p(g){c(this,arguments).moved(g)}function y(g){c(this,arguments).ended(g)}function d(){var g=this.__brush||{selection:null};return g.extent=xa(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:js(xa(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:js(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:js(!!g),u):r},u.handleSize=function(g){return arguments.length?(a=+g,u):a},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}var Jr=e=>()=>e;function Jm(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Nt(e,t,n){this.k=e,this.x=t,this.y=n}Nt.prototype={constructor:Nt,scale:function(e){return e===1?this:new Nt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Nt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Fo=new Nt(1,0,0);function Ks(e){e.stopImmediatePropagation()}function Zn(e){e.preventDefault(),e.stopImmediatePropagation()}function Qm(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Km(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ac(){return this.__zoom||Fo}function $m(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function e2(){return navigator.maxTouchPoints||"ontouchstart"in this}function t2(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function n2(){var e=Qm,t=Km,n=t2,r=$m,i=e2,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,u=yd,l=Fr("start","zoom","end"),c,h,f,p=500,y=150,d=0,g=10;function m(v){v.property("__zoom",ac).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",Y).filter(i).on("touchstart.zoom",N).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(v,T,M,P){var W=v.selection?v.selection():v;W.property("__zoom",ac),v!==W?k(v,T,M,P):W.interrupt().each(function(){F(this,arguments).event(P).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},m.scaleBy=function(v,T,M,P){m.scaleTo(v,function(){var W=this.__zoom.k,z=typeof T=="function"?T.apply(this,arguments):T;return W*z},M,P)},m.scaleTo=function(v,T,M,P){m.transform(v,function(){var W=t.apply(this,arguments),z=this.__zoom,G=M==null?S(W):typeof M=="function"?M.apply(this,arguments):M,U=z.invert(G),Z=typeof T=="function"?T.apply(this,arguments):T;return n(w(b(z,Z),G,U),W,a)},M,P)},m.translateBy=function(v,T,M,P){m.transform(v,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof M=="function"?M.apply(this,arguments):M),t.apply(this,arguments),a)},null,P)},m.translateTo=function(v,T,M,P,W){m.transform(v,function(){var z=t.apply(this,arguments),G=this.__zoom,U=P==null?S(z):typeof P=="function"?P.apply(this,arguments):P;return n(Fo.translate(U[0],U[1]).scale(G.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof M=="function"?-M.apply(this,arguments):-M),z,a)},P,W)};function b(v,T){return T=Math.max(s[0],Math.min(s[1],T)),T===v.k?v:new Nt(T,v.x,v.y)}function w(v,T,M){var P=T[0]-M[0]*v.k,W=T[1]-M[1]*v.k;return P===v.x&&W===v.y?v:new Nt(v.k,P,W)}function S(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function k(v,T,M,P){v.on("start.zoom",function(){F(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(P).end()}).tween("zoom",function(){var W=this,z=arguments,G=F(W,z).event(P),U=t.apply(W,z),Z=M==null?S(U):typeof M=="function"?M.apply(W,z):M,Q=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),K=W.__zoom,J=typeof T=="function"?T.apply(W,z):T,j=u(K.invert(Z).concat(Q/K.k),J.invert(Z).concat(Q/J.k));return function(ne){if(ne===1)ne=J;else{var ue=j(ne),q=Q/ue[2];ne=new Nt(q,Z[0]-ue[0]*q,Z[1]-ue[1]*q)}G.zoom(null,ne)}})}function F(v,T,M){return!M&&v.__zooming||new R(v,T)}function R(v,T){this.that=v,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,T),this.taps=0}R.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,T){return this.mouse&&v!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var T=We(this.that).datum();l.call(v,this.that,new Jm(v,{sourceEvent:this.sourceEvent,target:m,type:v,transform:this.that.__zoom,dispatch:l}),T)}};function A(v,...T){if(!e.apply(this,arguments))return;var M=F(this,T).event(v),P=this.__zoom,W=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,r.apply(this,arguments)))),z=ct(v);if(M.wheel)(M.mouse[0][0]!==z[0]||M.mouse[0][1]!==z[1])&&(M.mouse[1]=P.invert(M.mouse[0]=z)),clearTimeout(M.wheel);else{if(P.k===W)return;M.mouse=[z,P.invert(z)],bn(this),M.start()}Zn(v),M.wheel=setTimeout(G,y),M.zoom("mouse",n(w(b(P,W),M.mouse[0],M.mouse[1]),M.extent,a));function G(){M.wheel=null,M.end()}}function H(v,...T){if(f||!e.apply(this,arguments))return;var M=v.currentTarget,P=F(this,T,!0).event(v),W=We(v.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",Q,!0),z=ct(v,M),G=v.clientX,U=v.clientY;Lo(v.view),Ks(v),P.mouse=[z,this.__zoom.invert(z)],bn(this),P.start();function Z(K){if(Zn(K),!P.moved){var J=K.clientX-G,j=K.clientY-U;P.moved=J*J+j*j>d}P.event(K).zoom("mouse",n(w(P.that.__zoom,P.mouse[0]=ct(K,M),P.mouse[1]),P.extent,a))}function Q(K){W.on("mousemove.zoom mouseup.zoom",null),Ho(K.view,P.moved),Zn(K),P.event(K).end()}}function Y(v,...T){if(!!e.apply(this,arguments)){var M=this.__zoom,P=ct(v.changedTouches?v.changedTouches[0]:v,this),W=M.invert(P),z=M.k*(v.shiftKey?.5:2),G=n(w(b(M,z),P,W),t.apply(this,T),a);Zn(v),o>0?We(this).transition().duration(o).call(k,G,P,v):We(this).call(m.transform,G,P,v)}}function N(v,...T){if(!!e.apply(this,arguments)){var M=v.touches,P=M.length,W=F(this,T,v.changedTouches.length===P).event(v),z,G,U,Z;for(Ks(v),G=0;G<P;++G)U=M[G],Z=ct(U,this),Z=[Z,this.__zoom.invert(Z),U.identifier],W.touch0?!W.touch1&&W.touch0[2]!==Z[2]&&(W.touch1=Z,W.taps=0):(W.touch0=Z,z=!0,W.taps=1+!!c);c&&(c=clearTimeout(c)),z&&(W.taps<2&&(h=Z[0],c=setTimeout(function(){c=null},p)),bn(this),W.start())}}function D(v,...T){if(!!this.__zooming){var M=F(this,T).event(v),P=v.changedTouches,W=P.length,z,G,U,Z;for(Zn(v),z=0;z<W;++z)G=P[z],U=ct(G,this),M.touch0&&M.touch0[2]===G.identifier?M.touch0[0]=U:M.touch1&&M.touch1[2]===G.identifier&&(M.touch1[0]=U);if(G=M.that.__zoom,M.touch1){var Q=M.touch0[0],K=M.touch0[1],J=M.touch1[0],j=M.touch1[1],ne=(ne=J[0]-Q[0])*ne+(ne=J[1]-Q[1])*ne,ue=(ue=j[0]-K[0])*ue+(ue=j[1]-K[1])*ue;G=b(G,Math.sqrt(ne/ue)),U=[(Q[0]+J[0])/2,(Q[1]+J[1])/2],Z=[(K[0]+j[0])/2,(K[1]+j[1])/2]}else if(M.touch0)U=M.touch0[0],Z=M.touch0[1];else return;M.zoom("touch",n(w(G,U,Z),M.extent,a))}}function E(v,...T){if(!!this.__zooming){var M=F(this,T).event(v),P=v.changedTouches,W=P.length,z,G;for(Ks(v),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),z=0;z<W;++z)G=P[z],M.touch0&&M.touch0[2]===G.identifier?delete M.touch0:M.touch1&&M.touch1[2]===G.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(G=ct(G,this),Math.hypot(h[0]-G[0],h[1]-G[1])<g)){var U=We(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return m.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:Jr(+v),m):r},m.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Jr(!!v),m):e},m.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Jr(!!v),m):i},m.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Jr([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),m):t},m.scaleExtent=function(v){return arguments.length?(s[0]=+v[0],s[1]=+v[1],m):[s[0],s[1]]},m.translateExtent=function(v){return arguments.length?(a[0][0]=+v[0][0],a[1][0]=+v[1][0],a[0][1]=+v[0][1],a[1][1]=+v[1][1],m):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},m.constrain=function(v){return arguments.length?(n=v,m):n},m.duration=function(v){return arguments.length?(o=+v,m):o},m.interpolate=function(v){return arguments.length?(u=v,m):u},m.on=function(){var v=l.on.apply(l,arguments);return v===l?m:v},m.clickDistance=function(v){return arguments.length?(d=(v=+v)*v,m):Math.sqrt(d)},m.tapDistance=function(v){return arguments.length?(g=+v,m):g},m}var I={select:We,selectAll:p1,json:m1,scaleLinear:xu,scaleSqrt:Xd,scalePoint:R1,scaleBand:yo,scalePow:ko,scaleOrdinal:mo,scaleLog:ku,schemeTableau10:n6,interpolateRainbow:r6,lch:J1,hsl:nu,color:Et,quantize:wd,interpolate:Hr,max:L1,maxIndex:F1,min:H1,minIndex:N1,extent:oi,sum:I1,bin:A1,timeout:ga,transition:zu,easeLinear:pg,easePolyInOut:yg,easeQuadInOut:gg,easeCubicInOut:Yu,easeElasticOut:Sg,axisLeft:Hg,axisBottom:Lg,line:Xg,curveStepAfter:rm,brush:qm,zoom:n2,zoomIdentity:Fo,drag:Em,format:gs,curveMonotoneX:tm,curveMonotoneY:nm,curveBasis:em,timeFormat:Nu,hierarchy:Ao,partition:Mm,tree:Hm,arc:Yg,linkHorizontal:Kg,linkVertical:$g,path:Nr};const Fn=(e,t)=>Math.round((e+Number.EPSILON)*10**t)/10**t,r2=(e,t=null,n="download.json")=>{const r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));let i=t,s=!1;t===null&&(i=document.createElement("a"),i.style.display="none",s=!0),i==null||i.setAttribute("href",r),i==null||i.setAttribute("download",`${n}`),i==null||i.click(),s&&(i==null||i.remove())},oc=e=>{const t=e[0],n=e[1],r=e[2],i=[t,n,r].map(s=>(s/=255,s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)));return i[0]*.2126+i[1]*.7152+i[2]*.0722},Nn=(e,t)=>{const n=oc(e),r=oc(t);return n>r?(r+.05)/(n+.05):(n+.05)/(r+.05)},lc=(e,t)=>e.size===t.size&&[...e].every(n=>t.has(n));class cc{constructor(t,n,r,i){L(this,"favoritesStore");L(this,"favoritesStoreValue");L(this,"searchStore");L(this,"searchStoreValue");L(this,"sunburstStore");L(this,"sunburstStoreValue");L(this,"handlerUpdated");L(this,"favoritesClicked",()=>{this.favoritesStoreValue.shown=!this.favoritesStoreValue.shown,this.favoritesStore.set(this.favoritesStoreValue),this.favoritesStoreValue.shown&&this.searchStoreValue.shown&&(this.searchStoreValue.shown=!1,this.searchStore.set(this.searchStoreValue))});L(this,"searchClicked",()=>{this.searchStoreValue.shown=!this.searchStoreValue.shown,this.searchStore.set(this.searchStoreValue),this.searchStoreValue.shown&&this.favoritesStoreValue.shown&&(this.favoritesStoreValue.shown=!1,this.favoritesStore.set(this.favoritesStoreValue))});L(this,"depthBoxClicked",t=>{t<this.sunburstStoreValue.depthLow||(t>this.sunburstStoreValue.depthHigh?(this.sunburstStoreValue.depthHigh=t,this.sunburstStoreValue.action=qt.DepthChanged,this.sunburstStore.set(this.sunburstStoreValue)):this.sunburstStoreValue.depthLow<t&&t<this.sunburstStoreValue.depthHigh?(this.sunburstStoreValue.depthHigh=t,this.sunburstStoreValue.action=qt.DepthChanged,this.sunburstStore.set(this.sunburstStoreValue)):this.sunburstStoreValue.depthLow===t||this.sunburstStoreValue.depthHigh===t||console.error("Unknown case in depthBoxClicked()"))});L(this,"getDepthBoxStyle",t=>{const n=this.sunburstStoreValue.depthColors[t-1];let r="inherit";if(n===null||n==="")return"";{const i=[252,252,252],s=[74,74,74],a=I.color(n).rgb(),o=[a.r,a.g,a.b];Nn(i,o)<Nn(s,o)&&(r="hsla(0, 0%, 99%, 1)")}return`
    background-color: ${n}; color: ${r}; border: none;
    `});this.handlerUpdated=t,this.favoritesStore=n,this.favoritesStoreValue=Mn(),this.favoritesStore.subscribe(s=>{this.favoritesStoreValue=s,this.handlerUpdated()}),this.sunburstStore=r,this.sunburstStoreValue=uo(),this.sunburstStore.subscribe(s=>{this.sunburstStoreValue=s,this.handlerUpdated()}),this.searchStore=i,this.searchStoreValue=Cn(),this.searchStore.subscribe(s=>{this.searchStoreValue=s,this.handlerUpdated()})}}var eh='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path></svg>',th='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z"></path></svg>',nh=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <path d="M8,14.25L7.655,14.916L7.647,14.912L7.629,14.902C7.524,14.848 7.421,14.791 7.319,14.732C6.1,14.038 4.95,13.23 3.885,12.318C2.045,10.731 0,8.35 0,5.5C0,2.836 2.086,1 4.25,1C5.797,1 7.153,1.802 8,3.02C8.847,1.802 10.203,1 11.75,1C13.914,1 16,2.836 16,5.5C16,8.35 13.955,10.731 12.115,12.318C10.959,13.306 9.705,14.172 8.371,14.902L8.353,14.912L8.347,14.915L8.345,14.915L8,14.25ZM8,14.25L8.345,14.916C8.129,15.028 7.871,15.028 7.655,14.916L8,14.25Z"/>
</svg>
`;const Ee="src/components/toolbar/Toolbar.svelte";function uc(e,t,n){const r=e.slice();return r[13]=t[n],r}function hc(e,t,n){const r=e.slice();return r[13]=t[n],r}function ka(e){let t;const n={c:function(){var i,s;t=V("div"),x(t,"class","depth-line s-JBVBfphpN2RX"),he(t,"in-range",e[13]+2<=((i=e[2])==null?void 0:i.sunburstStoreValue.depthHigh)&&e[13]+2>((s=e[2])==null?void 0:s.sunburstStoreValue.depthLow)),C(t,Ee,197,10,5374)},m:function(i,s){fe(i,t,s)},p:function(i,s){var a,o;s&4&&he(t,"in-range",i[13]+2<=((a=i[2])==null?void 0:a.sunburstStoreValue.depthHigh)&&i[13]+2>((o=i[2])==null?void 0:o.sunburstStoreValue.depthLow))},d:function(i){i&&oe(t)}};return re("SvelteRegisterBlock",{block:n,id:ka.name,type:"each",source:"(197:8) {#each [...Array(Math.max(handler?.sunburstStoreValue.depthMax - 1, 0)).keys()] as i}",ctx:e}),n}function Ta(e){let t,n=e[13]+1+"",r,i,s,a,o;function u(){return e[6](e[13])}const l={c:function(){var h,f,p,y;t=V("div"),r=pe(n),i=B(),x(t,"class","depth-box s-JBVBfphpN2RX"),x(t,"style",s=(h=e[2])==null?void 0:h.getDepthBoxStyle(e[13]+1)),he(t,"in-range",e[13]+1<=((f=e[2])==null?void 0:f.sunburstStoreValue.depthHigh)&&e[13]+1>=((p=e[2])==null?void 0:p.sunburstStoreValue.depthLow)),he(t,"no-hover",e[13]+1===((y=e[2])==null?void 0:y.sunburstStoreValue.depthHigh)),C(t,Ee,206,8,5674)},m:function(h,f){fe(h,t,f),_(t,r),_(t,i),a||(o=ae(t,"click",u,!1,!1,!1),a=!0)},p:function(h,f){var p,y,d,g;e=h,f&4&&n!==(n=e[13]+1+"")&&Ce(r,n),f&4&&s!==(s=(p=e[2])==null?void 0:p.getDepthBoxStyle(e[13]+1))&&x(t,"style",s),f&4&&he(t,"in-range",e[13]+1<=((y=e[2])==null?void 0:y.sunburstStoreValue.depthHigh)&&e[13]+1>=((d=e[2])==null?void 0:d.sunburstStoreValue.depthLow)),f&4&&he(t,"no-hover",e[13]+1===((g=e[2])==null?void 0:g.sunburstStoreValue.depthHigh))},d:function(h){h&&oe(t),a=!1,o()}};return re("SvelteRegisterBlock",{block:l,id:Ta.name,type:"each",source:"(206:6) {#each [...Array(handler?.sunburstStoreValue.depthMax).keys()] as i}",ctx:e}),l}function Ma(e){var T,M;let t,n,r,i=e[0]<600?"Depth":"Show Depth",s,a,o,u,l,c,h,f,p,y,d,g,m,b,w,S,k,F,R,A,H,Y=[...Array(Math.max(((T=e[2])==null?void 0:T.sunburstStoreValue.depthMax)-1,0)).keys()];Be(Y);let N=[];for(let P=0;P<Y.length;P+=1)N[P]=ka(hc(e,Y,P));let D=[...Array((M=e[2])==null?void 0:M.sunburstStoreValue.depthMax).keys()];Be(D);let E=[];for(let P=0;P<D.length;P+=1)E[P]=Ta(uc(e,D,P));const v={c:function(){var W,z,G,U;t=V("div"),n=V("div"),r=V("div"),s=pe(i),a=B(),o=V("div"),u=V("div");for(let Z=0;Z<N.length;Z+=1)N[Z].c();l=B();for(let Z=0;Z<E.length;Z+=1)E[Z].c();c=B(),h=V("div"),f=V("div"),p=V("span"),y=new $n,d=B(),g=V("div"),m=B(),b=V("span"),b.textContent="Favorites",w=B(),S=V("div"),k=V("span"),F=B(),R=V("span"),R.textContent="Search",x(r,"class","depth-label s-JBVBfphpN2RX"),C(r,Ee,190,4,5105),x(u,"class","depth-box-lines s-JBVBfphpN2RX"),C(u,Ee,195,6,5240),x(o,"class","depth-box-container s-JBVBfphpN2RX"),C(o,Ee,194,4,5200),x(n,"class","depths s-JBVBfphpN2RX"),C(n,Ee,189,2,5080),y.a=d,x(g,"class","hidden-heart s-JBVBfphpN2RX"),he(g,"pulse",!1),C(g,Ee,230,8,6357),x(p,"class","svg-icon s-JBVBfphpN2RX"),C(p,Ee,228,6,6299),x(b,"class","button-text s-JBVBfphpN2RX"),he(b,"no-display",((W=e[2])==null?void 0:W.sunburstStoreValue.depthMax)>8&&e[0]<650),C(b,Ee,234,6,6472),x(f,"class","tool-button s-JBVBfphpN2RX"),he(f,"shown",(z=e[2])==null?void 0:z.favoritesStoreValue.shown),C(f,Ee,221,4,6131),x(k,"class","svg-icon s-JBVBfphpN2RX"),C(k,Ee,250,6,6825),x(R,"class","button-text s-JBVBfphpN2RX"),he(R,"no-display",((G=e[2])==null?void 0:G.sunburstStoreValue.depthMax)>8&&e[0]<650),C(R,Ee,253,6,6896),x(S,"class","tool-button s-JBVBfphpN2RX"),he(S,"shown",(U=e[2])==null?void 0:U.searchStoreValue.shown),C(S,Ee,243,4,6663),x(h,"class","tools s-JBVBfphpN2RX"),C(h,Ee,220,2,6107),x(t,"class","toolbar s-JBVBfphpN2RX"),C(t,Ee,188,0,5034)},l:function(W){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(W,z){fe(W,t,z),_(t,n),_(n,r),_(r,s),_(n,a),_(n,o),_(o,u);for(let G=0;G<N.length;G+=1)N[G].m(u,null);_(o,l);for(let G=0;G<E.length;G+=1)E[G].m(o,null);_(t,c),_(t,h),_(h,f),_(f,p),y.m(th,p),_(p,d),_(p,g),g.innerHTML=nh,_(f,m),_(f,b),_(h,w),_(h,S),_(S,k),k.innerHTML=eh,_(S,F),_(S,R),e[9](t),A||(H=[ae(f,"click",e[7],!1,!1,!1),ae(S,"click",e[8],!1,!1,!1)],A=!0)},p:function(W,[z]){var G,U,Z,Q,K,J;if(z&1&&i!==(i=W[0]<600?"Depth":"Show Depth")&&Ce(s,i),z&4){Y=[...Array(Math.max(((G=W[2])==null?void 0:G.sunburstStoreValue.depthMax)-1,0)).keys()],Be(Y);let j;for(j=0;j<Y.length;j+=1){const ne=hc(W,Y,j);N[j]?N[j].p(ne,z):(N[j]=ka(ne),N[j].c(),N[j].m(u,null))}for(;j<N.length;j+=1)N[j].d(1);N.length=Y.length}if(z&4){D=[...Array((U=W[2])==null?void 0:U.sunburstStoreValue.depthMax).keys()],Be(D);let j;for(j=0;j<D.length;j+=1){const ne=uc(W,D,j);E[j]?E[j].p(ne,z):(E[j]=Ta(ne),E[j].c(),E[j].m(o,null))}for(;j<E.length;j+=1)E[j].d(1);E.length=D.length}z&5&&he(b,"no-display",((Z=W[2])==null?void 0:Z.sunburstStoreValue.depthMax)>8&&W[0]<650),z&4&&he(f,"shown",(Q=W[2])==null?void 0:Q.favoritesStoreValue.shown),z&5&&he(R,"no-display",((K=W[2])==null?void 0:K.sunburstStoreValue.depthMax)>8&&W[0]<650),z&4&&he(S,"shown",(J=W[2])==null?void 0:J.searchStoreValue.shown)},i:de,o:de,d:function(W){W&&oe(t),or(N,W),or(E,W),e[9](null),A=!1,He(H)}};return re("SvelteRegisterBlock",{block:v,id:Ma.name,type:"component",source:"",ctx:e}),v}function i2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("Toolbar",r,[]);let{favoritesStore:s=null}=t,{sunburstStore:a=null}=t,{searchStore:o=null}=t,{sunburstWidth:u=650}=t,l=null,c=!1,h=null;ke(()=>{c=!0});const f=()=>{n(2,h)},p=()=>{s&&a&&o&&n(2,h=new cc(f,s,a,o))},y=["favoritesStore","sunburstStore","searchStore","sunburstWidth"];Object.keys(t).forEach(w=>{!~y.indexOf(w)&&w.slice(0,2)!=="$$"&&w!=="slot"&&console.warn(`<Toolbar> was created with unknown prop '${w}'`)});const d=w=>h==null?void 0:h.depthBoxClicked(w+1),g=()=>{h==null||h.favoritesClicked()},m=()=>{h==null||h.searchClicked()};function b(w){Oe[w?"unshift":"push"](()=>{l=w,n(1,l)})}return e.$$set=w=>{"favoritesStore"in w&&n(3,s=w.favoritesStore),"sunburstStore"in w&&n(4,a=w.sunburstStore),"searchStore"in w&&n(5,o=w.searchStore),"sunburstWidth"in w&&n(0,u=w.sunburstWidth)},e.$capture_state=()=>({onMount:ke,ToolbarEventHandler:cc,iconSearch:eh,iconHeart:th,iconHeartSolid:nh,favoritesStore:s,sunburstStore:a,searchStore:o,sunburstWidth:u,component:l,mounted:c,handler:h,handlerUpdated:f,initView:p}),e.$inject_state=w=>{"favoritesStore"in w&&n(3,s=w.favoritesStore),"sunburstStore"in w&&n(4,a=w.sunburstStore),"searchStore"in w&&n(5,o=w.searchStore),"sunburstWidth"in w&&n(0,u=w.sunburstWidth),"component"in w&&n(1,l=w.component),"mounted"in w&&(c=w.mounted),"handler"in w&&n(2,h=w.handler)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&56&&s&&a&&o&&p()},[u,l,h,s,a,o,d,g,m,b]}class rh extends at{constructor(t){super(t);it(this,t,i2,Ma,Xe,{favoritesStore:3,sunburstStore:4,searchStore:5,sunburstWidth:0}),re("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:t,id:Ma.name})}get favoritesStore(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sunburstStore(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sunburstStore(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get searchStore(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set searchStore(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sunburstWidth(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sunburstWidth(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const fi={sunburstWidth:650,treeWindowWidth:150,treeWindowHeaderHeight:26,treeWindowHeight:0,toolbarHeight:36},s2={mouseenterDelay:300};fi.treeWindowHeight=fi.treeWindowHeaderHeight+fi.treeWindowWidth;const a2={"red-50":"hsl(350, 100.0%, 96.08%)","red-100":"hsl(354, 100.0%, 90.2%)","red-200":"hsl(0, 72.65%, 77.06%)","red-300":"hsl(0, 68.67%, 67.45%)","red-400":"hsl(1, 83.25%, 62.55%)","red-500":"hsl(4, 89.62%, 58.43%)","red-600":"hsl(1, 77.19%, 55.29%)","red-700":"hsl(0, 65.08%, 50.59%)","red-800":"hsl(0, 66.39%, 46.67%)","red-900":"hsl(0, 73.46%, 41.37%)","red-a100":"hsl(4, 100.0%, 75.1%)","red-a200":"hsl(0, 100.0%, 66.08%)","red-a400":"hsl(348, 100.0%, 54.51%)","red-a700":"hsl(0, 100.0%, 41.76%)","pink-50":"hsl(340, 80.0%, 94.12%)","pink-100":"hsl(339, 81.33%, 85.29%)","pink-200":"hsl(339, 82.11%, 75.88%)","pink-300":"hsl(339, 82.56%, 66.27%)","pink-400":"hsl(339, 81.9%, 58.82%)","pink-500":"hsl(339, 82.19%, 51.57%)","pink-600":"hsl(338, 77.78%, 47.65%)","pink-700":"hsl(336, 77.98%, 42.75%)","pink-800":"hsl(333, 79.27%, 37.84%)","pink-900":"hsl(328, 81.33%, 29.41%)","pink-a100":"hsl(339, 100.0%, 75.1%)","pink-a200":"hsl(339, 100.0%, 62.55%)","pink-a400":"hsl(338, 100.0%, 48.04%)","pink-a700":"hsl(333, 84.11%, 41.96%)","purple-50":"hsl(292, 44.44%, 92.94%)","purple-100":"hsl(291, 46.07%, 82.55%)","purple-200":"hsl(291, 46.94%, 71.18%)","purple-300":"hsl(291, 46.6%, 59.61%)","purple-400":"hsl(291, 46.61%, 50.78%)","purple-500":"hsl(291, 63.72%, 42.16%)","purple-600":"hsl(287, 65.05%, 40.39%)","purple-700":"hsl(282, 67.88%, 37.84%)","purple-800":"hsl(277, 70.17%, 35.49%)","purple-900":"hsl(267, 75.0%, 31.37%)","purple-a100":"hsl(291, 95.38%, 74.51%)","purple-a200":"hsl(291, 95.9%, 61.76%)","purple-a400":"hsl(291, 100.0%, 48.82%)","purple-a700":"hsl(280, 100.0%, 50.0%)","deep-purple-50":"hsl(264, 45.45%, 93.53%)","deep-purple-100":"hsl(261, 45.68%, 84.12%)","deep-purple-200":"hsl(261, 46.27%, 73.73%)","deep-purple-300":"hsl(261, 46.81%, 63.14%)","deep-purple-400":"hsl(261, 46.72%, 55.1%)","deep-purple-500":"hsl(261, 51.87%, 47.25%)","deep-purple-600":"hsl(259, 53.91%, 45.1%)","deep-purple-700":"hsl(257, 57.75%, 41.76%)","deep-purple-800":"hsl(254, 60.8%, 39.02%)","deep-purple-900":"hsl(251, 68.79%, 33.92%)","deep-purple-a100":"hsl(261, 100.0%, 76.67%)","deep-purple-a200":"hsl(255, 100.0%, 65.1%)","deep-purple-a400":"hsl(258, 100.0%, 56.08%)","deep-purple-a700":"hsl(265, 100.0%, 45.88%)","indigo-50":"hsl(231, 43.75%, 93.73%)","indigo-100":"hsl(231, 45.0%, 84.31%)","indigo-200":"hsl(230, 44.36%, 73.92%)","indigo-300":"hsl(230, 44.09%, 63.53%)","indigo-400":"hsl(230, 44.25%, 55.69%)","indigo-500":"hsl(230, 48.36%, 47.84%)","indigo-600":"hsl(231, 50.0%, 44.71%)","indigo-700":"hsl(231, 53.62%, 40.59%)","indigo-800":"hsl(232, 57.22%, 36.67%)","indigo-900":"hsl(234, 65.79%, 29.8%)","indigo-a100":"hsl(230, 100.0%, 77.45%)","indigo-a200":"hsl(230, 98.84%, 66.08%)","indigo-a400":"hsl(230, 98.97%, 61.76%)","indigo-a700":"hsl(230, 99.04%, 59.22%)","blue-50":"hsl(205, 86.67%, 94.12%)","blue-100":"hsl(207, 88.89%, 85.88%)","blue-200":"hsl(206, 89.74%, 77.06%)","blue-300":"hsl(206, 89.02%, 67.84%)","blue-400":"hsl(206, 89.95%, 60.98%)","blue-500":"hsl(206, 89.74%, 54.12%)","blue-600":"hsl(208, 79.28%, 50.78%)","blue-700":"hsl(209, 78.72%, 46.08%)","blue-800":"hsl(211, 80.28%, 41.76%)","blue-900":"hsl(216, 85.06%, 34.12%)","blue-a100":"hsl(217, 100.0%, 75.49%)","blue-a200":"hsl(217, 100.0%, 63.33%)","blue-a400":"hsl(217, 100.0%, 58.04%)","blue-a700":"hsl(224, 100.0%, 58.04%)","light-blue-50":"hsl(198, 93.55%, 93.92%)","light-blue-100":"hsl(198, 92.41%, 84.51%)","light-blue-200":"hsl(198, 92.37%, 74.31%)","light-blue-300":"hsl(198, 91.3%, 63.92%)","light-blue-400":"hsl(198, 91.93%, 56.27%)","light-blue-500":"hsl(198, 97.57%, 48.43%)","light-blue-600":"hsl(199, 97.41%, 45.49%)","light-blue-700":"hsl(201, 98.1%, 41.37%)","light-blue-800":"hsl(202, 97.91%, 37.45%)","light-blue-900":"hsl(206, 98.72%, 30.59%)","light-blue-a100":"hsl(198, 100.0%, 75.1%)","light-blue-a200":"hsl(198, 100.0%, 62.55%)","light-blue-a400":"hsl(198, 100.0%, 50.0%)","light-blue-a700":"hsl(202, 100.0%, 45.88%)","cyan-50":"hsl(186, 72.22%, 92.94%)","cyan-100":"hsl(186, 71.11%, 82.35%)","cyan-200":"hsl(186, 71.62%, 70.98%)","cyan-300":"hsl(186, 71.15%, 59.22%)","cyan-400":"hsl(186, 70.87%, 50.2%)","cyan-500":"hsl(186, 100.0%, 41.57%)","cyan-600":"hsl(186, 100.0%, 37.84%)","cyan-700":"hsl(185, 100.0%, 32.75%)","cyan-800":"hsl(185, 100.0%, 28.04%)","cyan-900":"hsl(182, 100.0%, 19.61%)","cyan-a100":"hsl(180, 100.0%, 75.88%)","cyan-a200":"hsl(180, 100.0%, 54.71%)","cyan-a400":"hsl(186, 100.0%, 50.0%)","cyan-a700":"hsl(187, 100.0%, 41.57%)","teal-50":"hsl(176, 40.91%, 91.37%)","teal-100":"hsl(174, 41.28%, 78.63%)","teal-200":"hsl(174, 41.9%, 64.9%)","teal-300":"hsl(174, 41.83%, 50.78%)","teal-400":"hsl(174, 62.75%, 40.0%)","teal-500":"hsl(174, 100.0%, 29.41%)","teal-600":"hsl(173, 100.0%, 26.86%)","teal-700":"hsl(173, 100.0%, 23.73%)","teal-800":"hsl(172, 100.0%, 20.59%)","teal-900":"hsl(169, 100.0%, 15.1%)","teal-a100":"hsl(166, 100.0%, 82.75%)","teal-a200":"hsl(165, 100.0%, 69.61%)","teal-a400":"hsl(165, 82.26%, 51.37%)","teal-a700":"hsl(171, 100.0%, 37.45%)","green-50":"hsl(124, 39.39%, 93.53%)","green-100":"hsl(121, 37.5%, 84.31%)","green-200":"hsl(122, 37.4%, 74.31%)","green-300":"hsl(122, 38.46%, 64.31%)","green-400":"hsl(122, 38.46%, 56.67%)","green-500":"hsl(122, 39.44%, 49.22%)","green-600":"hsl(122, 40.97%, 44.51%)","green-700":"hsl(122, 43.43%, 38.82%)","green-800":"hsl(123, 46.2%, 33.53%)","green-900":"hsl(124, 55.37%, 23.73%)","green-a100":"hsl(136, 77.22%, 84.51%)","green-a200":"hsl(150, 81.82%, 67.65%)","green-a400":"hsl(150, 100.0%, 45.1%)","green-a700":"hsl(144, 100.0%, 39.22%)","light-green-50":"hsl(88, 51.72%, 94.31%)","light-green-100":"hsl(87, 50.68%, 85.69%)","light-green-200":"hsl(88, 50.0%, 76.47%)","light-green-300":"hsl(87, 50.0%, 67.06%)","light-green-400":"hsl(87, 50.24%, 59.8%)","light-green-500":"hsl(87, 50.21%, 52.75%)","light-green-600":"hsl(89, 46.12%, 48.04%)","light-green-700":"hsl(92, 47.91%, 42.16%)","light-green-800":"hsl(95, 49.46%, 36.47%)","light-green-900":"hsl(103, 55.56%, 26.47%)","light-green-a100":"hsl(87, 100.0%, 78.24%)","light-green-a200":"hsl(87, 100.0%, 67.45%)","light-green-a400":"hsl(92, 100.0%, 50.59%)","light-green-a700":"hsl(96, 81.15%, 47.84%)","lime-50":"hsl(65, 71.43%, 94.51%)","lime-100":"hsl(64, 69.01%, 86.08%)","lime-200":"hsl(65, 70.69%, 77.25%)","lime-300":"hsl(65, 70.37%, 68.24%)","lime-400":"hsl(65, 69.7%, 61.18%)","lime-500":"hsl(65, 69.96%, 54.31%)","lime-600":"hsl(63, 59.68%, 49.61%)","lime-700":"hsl(62, 61.43%, 43.73%)","lime-800":"hsl(59, 62.89%, 38.04%)","lime-900":"hsl(53, 69.93%, 30.0%)","lime-a100":"hsl(65, 100.0%, 75.29%)","lime-a200":"hsl(65, 100.0%, 62.75%)","lime-a400":"hsl(73, 100.0%, 50.0%)","lime-a700":"hsl(75, 100.0%, 45.88%)","yellow-50":"hsl(55, 100.0%, 95.29%)","yellow-100":"hsl(53, 100.0%, 88.43%)","yellow-200":"hsl(53, 100.0%, 80.78%)","yellow-300":"hsl(53, 100.0%, 73.14%)","yellow-400":"hsl(53, 100.0%, 67.25%)","yellow-500":"hsl(53, 100.0%, 61.57%)","yellow-600":"hsl(48, 98.04%, 60.0%)","yellow-700":"hsl(42, 96.26%, 58.04%)","yellow-800":"hsl(37, 94.64%, 56.08%)","yellow-900":"hsl(28, 91.74%, 52.55%)","yellow-a100":"hsl(60, 100.0%, 77.65%)","yellow-a200":"hsl(60, 100.0%, 50.0%)","yellow-a400":"hsl(55, 100.0%, 50.0%)","yellow-a700":"hsl(50, 100.0%, 50.0%)","amber-50":"hsl(46, 100.0%, 94.12%)","amber-100":"hsl(45, 100.0%, 85.1%)","amber-200":"hsl(45, 100.0%, 75.49%)","amber-300":"hsl(45, 100.0%, 65.49%)","amber-400":"hsl(45, 100.0%, 57.84%)","amber-500":"hsl(45, 100.0%, 51.37%)","amber-600":"hsl(42, 100.0%, 50.0%)","amber-700":"hsl(37, 100.0%, 50.0%)","amber-800":"hsl(33, 100.0%, 50.0%)","amber-900":"hsl(26, 100.0%, 50.0%)","amber-a100":"hsl(47, 100.0%, 74.9%)","amber-a200":"hsl(47, 100.0%, 62.55%)","amber-a400":"hsl(46, 100.0%, 50.0%)","amber-a700":"hsl(40, 100.0%, 50.0%)","orange-50":"hsl(36, 100.0%, 93.92%)","orange-100":"hsl(35, 100.0%, 84.9%)","orange-200":"hsl(35, 100.0%, 75.1%)","orange-300":"hsl(35, 100.0%, 65.1%)","orange-400":"hsl(35, 100.0%, 57.45%)","orange-500":"hsl(35, 100.0%, 50.0%)","orange-600":"hsl(33, 100.0%, 49.22%)","orange-700":"hsl(30, 100.0%, 48.04%)","orange-800":"hsl(27, 100.0%, 46.86%)","orange-900":"hsl(21, 100.0%, 45.1%)","orange-a100":"hsl(38, 100.0%, 75.1%)","orange-a200":"hsl(33, 100.0%, 62.55%)","orange-a400":"hsl(34, 100.0%, 50.0%)","orange-a700":"hsl(25, 100.0%, 50.0%)","deep-orange-50":"hsl(5, 71.43%, 94.51%)","deep-orange-100":"hsl(14, 100.0%, 86.86%)","deep-orange-200":"hsl(14, 100.0%, 78.43%)","deep-orange-300":"hsl(14, 100.0%, 69.8%)","deep-orange-400":"hsl(14, 100.0%, 63.14%)","deep-orange-500":"hsl(14, 100.0%, 56.67%)","deep-orange-600":"hsl(14, 90.68%, 53.73%)","deep-orange-700":"hsl(14, 80.39%, 50.0%)","deep-orange-800":"hsl(14, 82.28%, 46.47%)","deep-orange-900":"hsl(14, 88.18%, 39.8%)","deep-orange-a100":"hsl(14, 100.0%, 75.1%)","deep-orange-a200":"hsl(14, 100.0%, 62.55%)","deep-orange-a400":"hsl(14, 100.0%, 50.0%)","deep-orange-a700":"hsl(11, 100.0%, 43.33%)","brown-50":"hsl(19, 15.79%, 92.55%)","brown-100":"hsl(16, 15.79%, 81.37%)","brown-200":"hsl(14, 15.19%, 69.02%)","brown-300":"hsl(15, 15.32%, 56.47%)","brown-400":"hsl(15, 17.5%, 47.06%)","brown-500":"hsl(15, 25.39%, 37.84%)","brown-600":"hsl(15, 25.29%, 34.12%)","brown-700":"hsl(14, 25.68%, 29.02%)","brown-800":"hsl(11, 25.81%, 24.31%)","brown-900":"hsl(8, 27.84%, 19.02%)","gray-50":"hsl(0, 0.0%, 98.04%)","gray-100":"hsl(0, 0.0%, 96.08%)","gray-200":"hsl(0, 0.0%, 93.33%)","gray-300":"hsl(0, 0.0%, 87.84%)","gray-400":"hsl(0, 0.0%, 74.12%)","gray-500":"hsl(0, 0.0%, 61.96%)","gray-600":"hsl(0, 0.0%, 45.88%)","gray-700":"hsl(0, 0.0%, 38.04%)","gray-800":"hsl(0, 0.0%, 25.88%)","gray-900":"hsl(0, 0.0%, 12.94%)","blue-gray-50":"hsl(204, 15.15%, 93.53%)","blue-gray-100":"hsl(198, 15.66%, 83.73%)","blue-gray-200":"hsl(199, 15.33%, 73.14%)","blue-gray-300":"hsl(199, 15.63%, 62.35%)","blue-gray-400":"hsl(200, 15.38%, 54.12%)","blue-gray-500":"hsl(199, 18.3%, 46.08%)","blue-gray-600":"hsl(198, 18.45%, 40.39%)","blue-gray-700":"hsl(199, 18.34%, 33.14%)","blue-gray-800":"hsl(199, 17.91%, 26.27%)","blue-gray-900":"hsl(199, 19.15%, 18.43%)","blue-gray-1000":"hsl(199, 20.93%, 8.43%)"},we={colors:a2,layout:fi,time:s2};var et=(e=>(e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e))(et||{}),fn=(e=>(e[e.First=0]="First",e[e.Second=1]="Second",e[e.Both=2]="Both",e))(fn||{}),ir=(e=>(e[e.PairArray=0]="PairArray",e[e.PairString=1]="PairString",e))(ir||{}),ht=(e=>(e[e.SectorArc=0]="SectorArc",e[e.MidLine=1]="MidLine",e))(ht||{});const o2=[[" ",19.3],["!",34.3],['"',39.7],["#",58],["$",58],["%",78.6],["&",70.3],["'",23],["(",30],[")",30],["*",40],["+",58],[",",21.2],["-",34.7],[".",21.2],["/",37.3],["0",58],["1",58],["2",58],["3",58],["4",58],["5",58],["6",58],["7",58],["8",58],["9",58],[":",25.2],[";",25.2],["<",58],["=",58],[">",58],["?",39.8],["@",82.2],["A",68],["B",64.7],["C",68.5],["D",75.3],["E",58.1],["F",56.6],["G",73.4],["H",75.6],["I",30.7],["J",44.4],["K",68.1],["L",51.4],["M",92],["N",75.6],["O",79.8],["P",61.1],["Q",79.8],["R",64.4],["S",53],["T",59],["U",73],["V",68],["W",101.9],["X",64.3],["Y",62.9],["Z",62.4],["[",30],["\\",37.5],["]",30],["^",58],["_",39.4],["`",30.7],["a",50.7],["b",55.9],["c",46.7],["d",55.9],["e",52.4],["f",33.7],["g",51.1],["h",55.6],["i",25.6],["j",25.4],["k",52.4],["l",25.6],["m",82.1],["n",55.6],["o",55.6],["p",55.2],["q",55.9],["r",40.3],["s",43.4],["t",37.3],["u",55.6],["v",51.2],["w",76.6],["x",50.4],["y",51.2],["z",46.2],["{",30],["|",30],["}",30],["~",58],["_median",55.9]],l2=[['"&',-9.1],['",',-11.4],['"-',-8.9],['".',-11.4],['"/',-9.1],['"@',-2.3],['"A',-9.1],['"C',-2.3],['"G',-2.3],['"O',-2.3],['"Q',-2.3],['"V',2.4],['"W',2.4],['"Y',1.5],['"\\',2.4],['"a',-3.2],['"c',-4.6],['"d',-4.6],['"e',-4.6],['"o',-4.6],['"q',-4.6],["'&",-9.1],["',",-11.4],["'-",-8.9],["'.",-11.4],["'/",-9.1],["'@",-2.3],["'A",-9.1],["'C",-2.3],["'G",-2.3],["'O",-2.3],["'Q",-2.3],["'V",2.4],["'W",2.4],["'Y",1.5],["'\\",2.4],["'a",-3.2],["'c",-4.6],["'d",-4.6],["'e",-4.6],["'o",-4.6],["'q",-4.6],["(@",-2],["(C",-2],["(G",-2],["(O",-2],["(Q",-2],["(c",-1.6],["(d",-1.6],["(e",-1.6],["(o",-1.6],["(q",-1.6],["*&",-9.1],["*,",-11.4],["*-",-8.9],["*.",-11.4],["*/",-9.1],["*@",-2.3],["*A",-9.1],["*C",-2.3],["*G",-2.3],["*O",-2.3],["*Q",-2.3],["*V",2.4],["*W",2.4],["*Y",1.5],["*\\",2.4],["*a",-3.2],["*c",-4.6],["*d",-4.6],["*e",-4.6],["*o",-4.6],["*q",-4.6],[',"',-11.4],[",'",-11.4],[",*",-11.4],[",-",-6.8],[",@",-2.8],[",C",-2.8],[",G",-2.8],[",O",-2.8],[",Q",-2.8],[",T",-9],[",V",-9],[",W",-6.1],[",Y",-7.6],[",\\",-9],[",v",-6.6],[",w",-3.1],[",y",-6.6],['-"',-8.9],["-&",-2.6],["-'",-8.9],["-*",-8.9],["-,",-6.8],["-.",-6.8],["-/",-2.6],["-A",-2.6],["-T",-9],["-V",-5.6],["-W",-1.6],["-X",-3.1],["-Y",-8],["-Z",-2.3],["-\\",-5.6],['."',-11.4],[".'",-11.4],[".*",-11.4],[".-",-6.8],[".@",-2.8],[".C",-2.8],[".G",-2.8],[".O",-2.8],[".Q",-2.8],[".T",-9],[".V",-9],[".W",-6.1],[".Y",-7.6],[".\\",-9],[".v",-6.6],[".w",-3.1],[".y",-6.6],['/"',2.4],["/&",-6.8],["/'",2.4],["/*",2.4],["/,",-9.6],["/-",-5.6],["/.",-9.6],["//",-6.8],["/:",-4.4],["/;",-4.4],["/?",2.4],["/@",-2.6],["/A",-6.8],["/C",-2.6],["/G",-2.6],["/J",-7.6],["/O",-2.6],["/Q",-2.6],["/a",-5.8],["/c",-5.8],["/d",-5.8],["/e",-5.8],["/f",-1.5],["/g",-6.8],["/m",-4.4],["/n",-4.4],["/o",-5.8],["/p",-4.4],["/q",-5.8],["/r",-4.4],["/s",-5.3],["/t",-2.1],["/u",-4.4],["/v",-2.4],["/x",-2.6],["/y",-2.4],["/z",-4.1],['@"',-2.3],["@&",-2.1],["@'",-2.3],["@)",-2],["@*",-2.3],["@,",-2.8],["@.",-2.8],["@/",-2.1],["@A",-2.1],["@T",-4.9],["@V",-2.6],["@X",-1.5],["@Y",-4],["@Z",-3.5],["@\\",-2.6],["@]",-2],["@}",-2],['A"',-9.1],["A'",-9.1],["A*",-9.1],["A-",-2.6],["A?",-2.8],["A@",-2.1],["AC",-2.1],["AG",-2.1],["AJ",2.5],["AO",-2.1],["AQ",-2.1],["AT",-6.6],["AU",-2.8],["AV",-6.8],["AW",-4.2],["AY",-8.2],["A\\",-6.8],["Av",-4.1],["Ay",-4.1],["C-",-7.5],['D"',-2.3],["D&",-2.1],["D'",-2.3],["D)",-2],["D*",-2.3],["D,",-2.8],["D.",-2.8],["D/",-2.1],["DA",-2.1],["DT",-4.9],["DV",-2.6],["DX",-1.5],["DY",-4],["DZ",-3.5],["D\\",-2.6],["D]",-2],["D}",-2],["F&",-6.6],["F,",-9],["F.",-9],["F/",-6.6],["F:",-3],["F;",-3],["F?",1.5],["FA",-6.6],["FJ",-9.9],["Fc",-3.5],["Fd",-3.5],["Fe",-3.5],["Fm",-3],["Fn",-3],["Fo",-3.5],["Fp",-3],["Fq",-3.5],["Fr",-3],["Fu",-3],["J&",-2.8],["J,",-2.5],["J.",-2.5],["J/",-2.8],["JA",-2.8],["K-",-3.1],["K@",-1.5],["KC",-1.5],["KG",-1.5],["KO",-1.5],["KQ",-1.5],["Kc",-1.8],["Kd",-1.8],["Ke",-1.8],["Kf",-2.6],["Ko",-1.8],["Kq",-1.8],["Kt",-4.1],["Kv",-3.3],["Kw",-2.8],["Ky",-3.3],['L"',-14.5],["L'",-14.5],["L*",-14.5],["L,",2.7],["L-",-9.9],["L.",2.7],["L?",-2.5],["L@",-4],["LC",-4],["LG",-4],["LO",-4],["LQ",-4],["LT",-8.6],["LV",-9.1],["LW",-7.6],["LY",-10.6],["L\\",-9.1],["Lc",-1.8],["Ld",-1.8],["Le",-1.8],["Lo",-1.8],["Lq",-1.8],["Lv",-5.4],["Lw",-4],["Ly",-5.4],['O"',-2.3],["O&",-2.1],["O'",-2.3],["O)",-2],["O*",-2.3],["O,",-2.8],["O.",-2.8],["O/",-2.1],["OA",-2.1],["OT",-4.9],["OV",-2.6],["OX",-1.5],["OY",-4],["OZ",-3.5],["O\\",-2.6],["O]",-2],["O}",-2],["P&",-6.9],["P,",-12.4],["P.",-12.4],["P/",-6.9],["PA",-6.9],["PJ",-9.1],["Pa",-2.5],["Pc",-1.5],["Pd",-1.5],["Pe",-1.5],["Po",-1.5],["Pq",-1.5],['Q"',-2.3],["Q&",-2.1],["Q'",-2.3],["Q)",-2],["Q*",-2.3],["Q,",-2.8],["Q.",-2.8],["Q/",-2.1],["QA",-2.1],["QT",-4.9],["QV",-2.6],["QX",-1.5],["QY",-4],["QZ",-3.5],["Q\\",-2.6],["Q]",-2],["Q}",-2],["R@",-2.3],["RC",-2.3],["RG",-2.3],["RO",-2.3],["RQ",-2.3],["RT",-2.6],["RU",-2.1],["T&",-6.6],["T,",-9],["T-",-9],["T.",-9],["T/",-6.6],["T:",-8],["T;",-8],["T@",-4.9],["TA",-6.6],["TC",-4.9],["TG",-4.9],["TJ",-10],["TO",-4.9],["TQ",-4.9],["Ta",-12.5],["Tc",-10.5],["Td",-10.5],["Te",-10.5],["Tg",-9.4],["Tm",-8],["Tn",-8],["To",-10.5],["Tp",-8],["Tq",-10.5],["Tr",-8],["Ts",-8.1],["Tu",-8],["Tv",-9],["Tw",-7],["Tx",-7.2],["Ty",-9],["Tz",-6],["U&",-2.8],["U,",-2.5],["U.",-2.5],["U/",-2.8],["UA",-2.8],['V"',2.4],["V&",-6.8],["V'",2.4],["V*",2.4],["V,",-9.6],["V-",-5.6],["V.",-9.6],["V/",-6.8],["V:",-4.4],["V;",-4.4],["V?",2.4],["V@",-2.6],["VA",-6.8],["VC",-2.6],["VG",-2.6],["VJ",-7.6],["VO",-2.6],["VQ",-2.6],["Va",-5.8],["Vc",-5.8],["Vd",-5.8],["Ve",-5.8],["Vf",-1.5],["Vg",-6.8],["Vm",-4.4],["Vn",-4.4],["Vo",-5.8],["Vp",-4.4],["Vq",-5.8],["Vr",-4.4],["Vs",-5.3],["Vt",-2.1],["Vu",-4.4],["Vv",-2.4],["Vx",-2.6],["Vy",-2.4],["Vz",-4.1],['W"',2.4],["W&",-4.7],["W'",2.4],["W*",2.4],["W,",-6.1],["W-",-1.6],["W.",-6.1],["W/",-4.7],["W?",1.7],["WA",-4.7],["WJ",-5.1],["Wa",-4.4],["Wc",-1.6],["Wd",-1.6],["We",-1.6],["Wg",-4.9],["Wo",-1.6],["Wq",-1.6],["Ws",-2.3],["X-",-3.1],["X@",-1.5],["XC",-1.5],["XG",-1.5],["XO",-1.5],["XQ",-1.5],["Xc",-1.8],["Xd",-1.8],["Xe",-1.8],["Xf",-2.6],["Xo",-1.8],["Xq",-1.8],["Xt",-4.1],["Xv",-3.3],["Xw",-2.8],["Xy",-3.3],['Y"',1.5],["Y&",-8.2],["Y'",1.5],["Y*",1.5],["Y,",-7.6],["Y-",-8],["Y.",-7.6],["Y/",-8.2],["Y:",-6.1],["Y;",-6.1],["Y?",1.7],["Y@",-4],["YA",-8.2],["YC",-4],["YG",-4],["YJ",-10],["YO",-4],["YQ",-4],["Ya",-6.4],["Yc",-8],["Yd",-8],["Ye",-8],["Yg",-8.6],["Ym",-6.1],["Yn",-6.1],["Yo",-8],["Yp",-6.1],["Yq",-8],["Yr",-6.1],["Ys",-6.4],["Yu",-6.1],["Yv",-5],["Yw",-4.6],["Yx",-6.6],["Yy",-5],["Z-",-3.5],["Z?",1.7],["Z@",-2.9],["ZC",-2.9],["ZG",-2.9],["ZO",-2.9],["ZQ",-2.9],["Zc",-1.9],["Zd",-1.9],["Ze",-1.9],["Zo",-1.9],["Zq",-1.9],["Zs",-1.4],["Zv",-2],["Zy",-2],["[@",-2],["[C",-2],["[G",-2],["[O",-2],["[Q",-2],["[c",-1.6],["[d",-1.6],["[e",-1.6],["[o",-1.6],["[q",-1.6],['\\"',-9.1],["\\'",-9.1],["\\*",-9.1],["\\-",-2.6],["\\?",-2.8],["\\@",-2.1],["\\C",-2.1],["\\G",-2.1],["\\J",2.5],["\\O",-2.1],["\\Q",-2.1],["\\T",-6.6],["\\U",-2.8],["\\V",-6.8],["\\W",-4.2],["\\Y",-8.2],["\\\\",-6.8],["\\v",-4.1],["\\y",-4.1],['a"',-3.6],["a'",-3.6],["a*",-3.6],["av",-1.6],["aw",-.8],["ay",-1.6],['b"',-4.6],["b'",-4.6],["b)",-1.6],["b*",-4.6],["bV",-5.8],["bW",-1.6],["b\\",-5.8],["b]",-1.6],["bv",-1.3],["bx",-3],["by",-1.3],["b}",-1.6],['e"',-4.6],["e'",-4.6],["e)",-1.6],["e*",-4.6],["eV",-5.8],["eW",-1.6],["e\\",-5.8],["e]",-1.6],["ev",-1.3],["ex",-3],["ey",-1.3],["e}",-1.6],['f"',3.4],["f'",3.4],["f*",3.4],["f,",-6.5],["f.",-6.5],["fi",-2.3],['h"',-3.6],["h'",-3.6],["h*",-3.6],["hv",-1.6],["hw",-.8],["hy",-1.6],["kc",-3],["kd",-3],["ke",-3],["ko",-3],["kq",-3],['m"',-3.6],["m'",-3.6],["m*",-3.6],["mv",-1.6],["mw",-.8],["my",-1.6],['n"',-3.6],["n'",-3.6],["n*",-3.6],["nv",-1.6],["nw",-.8],["ny",-1.6],['o"',-4.6],["o'",-4.6],["o)",-1.6],["o*",-4.6],["oV",-5.8],["oW",-1.6],["o\\",-5.8],["o]",-1.6],["ov",-1.3],["ox",-3],["oy",-1.3],["o}",-1.6],['p"',-4.6],["p'",-4.6],["p)",-1.6],["p*",-4.6],["pV",-5.8],["pW",-1.6],["p\\",-5.8],["p]",-1.6],["pv",-1.3],["px",-3],["py",-1.3],["p}",-1.6],["r,",-6.6],["r.",-6.6],["ra",-1.9],["v&",-4.1],["v,",-6.6],["v.",-6.6],["v/",-4.1],["vA",-4.1],["vc",-1.3],["vd",-1.3],["ve",-1.3],["vo",-1.3],["vq",-1.3],["w,",-3.1],["w.",-3.1],["xc",-3],["xd",-3],["xe",-3],["xo",-3],["xq",-3],["y&",-4.1],["y,",-6.6],["y.",-6.6],["y/",-4.1],["yA",-4.1],["yc",-1.3],["yd",-1.3],["ye",-1.3],["yo",-1.3],["yq",-1.3],["{@",-2],["{C",-2],["{G",-2],["{O",-2],["{Q",-2],["{c",-1.6],["{d",-1.6],["{e",-1.6],["{o",-1.6],["{q",-1.6]];var c2={textWidth:o2,kerningWidth:l2};const u2=(e,t,n=16)=>{const r=new Map(e.textWidth),i=new Map(e.kerningWidth),s=[...t];let a=0;for(const[o,u]of s.entries())a+=r.get(u)||r.get("_median"),o!==s.length-1&&(a+=i.get(`${u}${s[o+1]}`)||0);return a/(100/n)},je=(e,t=16)=>u2(c2,e,t),Qr=Math.PI/2,ih=20;function h2(e,t){switch(t){case ht.SectorArc:{const n=[this.xScale(e.x0)-Qr,this.xScale(e.x1)-Qr],r=Math.max(0,(this.yScale(e.y0)+this.yScale(e.y1))/2),i=(n[0]+n[1])/2,s=i>0&&i<Math.PI;s&&n.reverse();const a=I.path();return a.arc(0,0,r,n[0],n[1],s),a.toString()}case ht.MidLine:{const n=[this.xScale(e.x0)-Qr,this.xScale(e.x1)-Qr],r=(n[0]+n[1])/2,i=this.yScale(e.y0),s=this.yScale(e.y1),a=i*Math.cos(r),o=i*Math.sin(r),u=s*Math.cos(r),l=s*Math.sin(r),c=I.path();return r>=Math.PI/2&&r<=Math.PI*3/2?(c.moveTo(u,l),c.lineTo(a,o)):(c.moveTo(a,o),c.lineTo(u,l)),c.toString()}}}function f2(e,t=16,n=null,r=0){n==null&&(n=this.getFeatureInfo(e.data.f).nameValue);const i=je(n,t),s=this.xScale(e.x1)-this.xScale(e.x0),a=Math.max(0,(this.yScale(e.y0)+this.yScale(e.y1))/2),o=s*a;return i<=o-r}const No=(e,t)=>{const n=I.color(e(t.data.f));let r="currentcolor";if(n!==null){const i=[252,252,252],s=[74,74,74],a=I.color(n).rgb(),o=[a.r,a.g,a.b];Nn(i,o)<Nn(s,o)&&(r="hsla(0, 0%, 99%, 1)")}return r};function d2(){const t=this.svg.select("g.mid-circle-group").selectAll("g.mid-circle");if(t.size()===0)return;const n=this.svg.select(`g.arc-${this.sunburstStoreValue.depthLow}`).datum(),i=(this.yScale(n.y1)-this.yScale(n.y0))/t.size(),s=Math.PI*1.2,a=t.append("text").attr("class","feature-name").style("fill",l=>No(this.getFeatureColor,l)),o=this.textFontScale(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow),u=(l,c)=>{const h=this.getFeatureInfo(l.data.f);let f=h.nameValue,p=je(f,16*o);if(p>c)for(f=h.shortValue,p=je(f,16*o);p>c;)f=f.replace("...",""),f=f.slice(0,f.length-1),f=`${f}...`,p=je(f,16*o);return f};a.filter(l=>l.depth===1).style("font-size",`${o}rem`).text(l=>u(l,i*2-10)),a.filter(l=>l.depth!==1).style("font-size",`${o}rem`).append("textPath").attr("startOffset","50%").attr("xlink:href",l=>`#mid-circle-text-arc-${l.depth}`).text(l=>u(l,i*(l.depth-.5)*s))}function p2(){const e=this.svg.select("g.arc-group"),t=this.svg.select("g.text-group");let n=e.selectAll(`g.arc-${this.xScale.domain()[0]===0&&this.xScale.domain()[1]===1?this.sunburstStoreValue.depthLow:this.sunburstStoreValue.depthLow+1}`);n=n.sort((h,f)=>h.x0-f.x0),n=n.filter(h=>h.x0>=this.xScale.domain()[0]&&h.x1<=this.xScale.domain()[1]&&h.data.f!=="_");const r=t.selectAll("g.text-group").data(n.data()).join("g").attr("class","text-group");r.append("path").attr("class","text-arc").attr("id",(h,f)=>`text-arc-${f}`).attr("d",h=>this.textArc(h,ht.SectorArc)),r.append("path").attr("class","text-line").attr("id",(h,f)=>`text-line-${f}`).attr("d",h=>this.textArc(h,ht.MidLine));const i=r.append("text").attr("class","feature-name");i.style("fill",h=>No(this.getFeatureColor,h));const s=new Set,a=new Map;if(i.size()===0)return;const o=this.yScale(i.datum().y1)-this.yScale(i.datum().y0)-15,u=this.textFontScale(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow),l=i.style("font-size",`${u}rem`).append("textPath").attr("startOffset","50%").attr("xlink:href",(h,f)=>{const p=this.getFeatureInfo(h.data.f);let y=p.nameValue,d=!1;return s.has(p.name)&&(y=p.value,d=!0),s.add(p.name),je(y,16*u)<o?(a.set(f,ht.MidLine),`#text-line-${f}`):!d&&this.doesTextFitArc(h,16*u,y,10)?(a.set(f,ht.SectorArc),`#text-arc-${f}`):(a.set(f,ht.MidLine),`#text-line-${f}`)});s.clear(),l.text((h,f)=>{const p=this.getFeatureInfo(h.data.f);let y=p.nameValue,d=!1;if(s.has(p.name)&&(y=p.value,d=!0),a.get(f)===ht.MidLine){if(this.yScale(h.y1)*(this.xScale(h.x1)-this.xScale(h.x0))<ih)return"";let m=je(y,16*u);if(m>o&&!d)for(y=p.shortValue,m=je(y,16*u);m>o;)y=y.replace("...",""),y=y.slice(0,y.length-1),y=`${y}...`,m=je(y,16*u)}return s.add(p.name),y});const c=new Set;Array.from(this.featureMap.entries()).forEach(h=>{s.has(h[1][0])||c.add(h[0])}),this.drawSecondaryText(c)}function g2(e){const t=this.svg.select("g.arc-group"),n=this.svg.select("g.text-group");let r=t.selectAll(`g.arc-${this.xScale.domain()[0]===0&&this.xScale.domain()[1]===1?this.sunburstStoreValue.depthLow+1:this.sunburstStoreValue.depthLow+2}`);if(r=r.filter(h=>h.x0>=this.xScale.domain()[0]&&h.x1<=this.xScale.domain()[1]&&e.has(+h.data.f)),r.size()===0)return;r=r.sort((h,f)=>h.x0-f.x0);const i=n.selectAll("g.s-text-group").data(r.data()).join("g").attr("class","text-group");i.append("path").attr("class","text-arc").attr("id",(h,f)=>`s-text-arc-${f}`).attr("d",h=>this.textArc(h,ht.SectorArc)),i.append("path").attr("class","text-line").attr("id",(h,f)=>`s-text-line-${f}`).attr("d",h=>this.textArc(h,ht.MidLine));const s=i.append("text").attr("class","feature-name"),a=this.yScale(s.datum().y1)-this.yScale(s.datum().y0)-15,o=this.textFontScale(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow);s.style("fill",h=>No(this.getFeatureColor,h));const u=new Set([]),l=s.style("font-size",`${o}rem`).append("textPath").attr("startOffset","50%").attr("xlink:href",(h,f)=>{const y=this.getFeatureInfo(h.data.f).nameValue;return je(y,16*o)<a?`#s-text-line-${f}`:this.doesTextFitArc(h,16*o,y,10)?(u.add(f),`#s-text-arc-${f}`):`#s-text-line-${f}`}),c=new Set;l.text((h,f)=>{if(c.has(h.data.f))return"";const p=this.getFeatureInfo(h.data.f);let y=p.nameValue;if(this.yScale(h.y1)*(this.xScale(h.x1)-this.xScale(h.x0))<ih)return"";if(!u.has(f)){let g=je(y,16*o);if(g>a)for(y=p.shortValue,g=je(y,16*o);g>a;)y=y.replace("...",""),y=y.slice(0,y.length-1),y=`${y}...`,g=je(y,16*o)}return c.add(h.data.f),y})}function m2(){this.svg.select(".text-group").selectAll("*").remove(),this.svg.selectAll("text.feature-name").remove()}let ar=null,di=null,sh=new Date().getTime();function y2(e,t){if(e.stopPropagation(),e.preventDefault(),t!==null&&t.data.f==="_")return;let n={x0:0,x1:1,y0:0,y1:1},r=t;const i=this.xScale.domain(),s=this.yScale.domain(),a=this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow;if(t===null||t.x0==i[0]&&t.x1==i[1]){const l=this.arcDomainStack.pop();l!==void 0?(r=l.node,n=l,this.sunburstStoreValue.depthLow=r.depth===0?1:r.depth,this.sunburstStoreValue.depthHigh=Math.min(this.sunburstStoreValue.depthLow+l.depthGap,this.sunburstStoreValue.depthMax)):console.error("No more arc domain from the stack to pop!")}else{const l=1/(this.sunburstStoreValue.depthMax+1);this.sunburstStoreValue.depthLow=t.depth,this.sunburstStoreValue.depthHigh=Math.min(t.depth+a,this.sunburstStoreValue.depthMax),n={x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y0+l*(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow+1)};const c={x0:i[0],x1:i[1],y0:s[0],y1:s[1],node:this.curHeadNode,depthGap:a};this.arcDomainStack.push(c)}const o=new Array(this.sunburstStoreValue.depthMax).fill("");r.ancestors().forEach(l=>{if(l.depth>0){const c=this.getFeatureColor(l.data.f);o[l.depth-1]=c}}),this.sunburstStoreValue.depthColors=o,this.sunburstStore.set(this.sunburstStoreValue),this.curHeadNode=r,this.sunburstUpdated(),this.arcZoom(n)}function w2(e,t){if(e.currentTarget===null)return;t.ancestors().filter(r=>r.depth>0).forEach(r=>{const i=this.svg.select(`path#arc-${r.data.nid}`);I.select(i.node().parentElement).raise(),i.classed("highlighted",!0)})}function v2(e,t){if(e.currentTarget===null)return;t.ancestors().filter(r=>r.depth>0).forEach(r=>{this.svg.select(`path#arc-${r.data.nid}`).classed("highlighted",!1)})}function b2(e,t){e.preventDefault(),e.stopPropagation(),this.arcMouseenterHandler(e,t),di!==null&&(window.clearTimeout(di),di=null);const n=()=>{if(t.data.t===void 0)return;const r=t.data.t;this.treeWindowStoreValue.treeID=+r;const i=t.ancestors().filter(a=>a.depth!==0).map(a=>a.data.f).reverse();this.treeWindowStoreValue.ancestorFs=i;const s=this.getTreeWindowPos(t);this.treeWindowStoreValue.x=s.x,this.treeWindowStoreValue.y=s.y,this.treeWindowStoreValue.show=!0,this.treeWindowStore.set(this.treeWindowStoreValue),ar=null};this.treeWindowStoreValue.show||new Date().getTime()-sh<500?n():ar=window.setTimeout(n,we.time.mouseenterDelay)}function S2(e,t){t.data.t!==void 0&&(e.preventDefault(),e.stopPropagation(),this.arcMouseleaveHandler(e,t),ar!==null&&(window.clearTimeout(ar),ar=null),di=window.setTimeout(()=>{this.treeWindowStoreValue.show=!1,this.treeWindowStore.set(this.treeWindowStoreValue),sh=new Date().getTime()},100))}function _2(e){let t=(this.xScale(e.x0)+this.xScale(e.x1))/2-Math.PI/2;const n=this.yScale(e.y1)+8,r={x:Math.cos(t)*n,y:Math.sin(t)*n,quad:Math.floor(t/(Math.PI/2))+2};e.x0===this.xScale.domain()[0]&&e.x1===this.xScale.domain()[1]&&(r.x=Math.cos(-Math.PI/4)*n,r.y=Math.sin(-Math.PI/4)*n,r.quad=1);const i=c=>{const h={x:0,y:0};switch(c.quad){case 1:{h.x=c.x,h.y=c.y-we.layout.treeWindowHeight;break}case 2:{h.x=c.x,h.y=c.y;break}case 3:{h.x=c.x-we.layout.treeWindowWidth,h.y=c.y;break}case 4:{h.x=c.x-we.layout.treeWindowWidth,h.y=c.y-we.layout.treeWindowHeight;break}default:console.warn("Unknown quad!")}return h};let s=window.innerHeight;I.select(".timbertrek-page").size()>0&&(s=I.select(".timbertrek-page").node().getBoundingClientRect().height);const a=5,o=this.svg.node().getBoundingClientRect(),u={x:o.x+o.width/2,y:o.y+o.height/2};let l=i(r);if(l.y+u.y<a){const h=-(u.y-we.layout.treeWindowHeight-a);t=Math.asin(h/n),r.quad===4&&(t=Math.PI-t),r.x=Math.cos(t)*n,r.y=Math.sin(t)*n,r.quad=Math.floor(t/(Math.PI/2))+2,l=i(r)}if(l.y+u.y+we.layout.treeWindowHeight>s-a){const c=s-a-u.y-we.layout.treeWindowHeight;t=Math.asin(c/n),r.quad===3&&(t=Math.PI-t),r.x=Math.cos(t)*n,r.y=Math.sin(t)*n,r.quad=Math.floor(t/(Math.PI/2))+2,l=i(r)}return l.x=u.x+l.x,l.y=u.y+l.y,l}function x2(e,t){if(e.preventDefault(),e.stopPropagation(),localStorage.getItem("treeWindowPinnedOnce")!=="true"&&localStorage.setItem("treeWindowPinnedOnce","true"),t.data.t===void 0)return;const n=t.data.t,r=this.treeWindowStoreValue.treeMap.get(n);if(r===void 0)return;const i=this.getTreeWindowPos(t),s={x:i.x,y:i.y,width:we.layout.treeWindowWidth,height:we.layout.treeWindowHeight},a={x:20,y:20};if(this.pinnedTreeStoreValue.lastActiveTreeID!==null){const o=this.pinnedTreeStoreValue.pinnedTrees.filter(u=>u.treeID===this.pinnedTreeStoreValue.lastActiveTreeID)[0];a.x=o.x+20,a.y=o.y+30}if(this.pinnedTreeStoreValue.pinnedTrees.map(o=>o.treeID).includes(n)){let o=-1;for(let l=0;l<this.pinnedTreeStoreValue.pinnedTrees.length;l++)if(this.pinnedTreeStoreValue.pinnedTrees[l].treeID===n){o=l;break}if(o===-1){console.warn("Could not find the clicked tree in the pinnedTrees array!");return}const u=this.pinnedTreeStoreValue.pinnedTrees[o];u.isPinned?u.jiggle():(u.isPinned=!0,u.startPos=s,u.x=a.x,u.y=a.y),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}else{const o={tree:r[0],treeMetric:Fn(r[2],4),treeID:n,x:a.x,y:a.y,startPos:s,isFav:!1,isPinned:!0,note:"",jiggle:()=>{}};this.pinnedTreeStoreValue.pinnedTrees.push(o),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}}function k2(){const t=this.treeWindowStoreValue.treeMap.get(412);if(t!==void 0){const n={x:70,y:150};if(this.pinnedTreeStoreValue.lastActiveTreeID!==null){const i=this.pinnedTreeStoreValue.pinnedTrees.filter(s=>s.treeID===this.pinnedTreeStoreValue.lastActiveTreeID)[0];n.x=i.x+20,n.y=i.y+30}const r={tree:t[0],treeMetric:Fn(t[2],4),treeID:412,x:n.x,y:n.y,startPos:{x:0,y:0,width:0,height:0},isFav:!1,isPinned:!0,note:"",jiggle:()=>{}};this.pinnedTreeStoreValue.pinnedTrees.push(r),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}}let Pt=null;function T2(){this.treeMapMap.forEach((n,r)=>{n[2]>=this.localAccuracyLow&&n[2]<=this.localAccuracyHigh?this.selectedTrees.accuracy.add(r):this.selectedTrees.accuracy.delete(r)});const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=I.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburst(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!1)}function M2(){if(this.searchStoreValue.treeMinSampleMap===null)return;for(const[n,r]of this.searchStoreValue.treeMinSampleMap)r>=this.localMinSampleLow&&r<=this.localMinSampleHigh?this.selectedTrees.minSample.add(n):this.selectedTrees.minSample.delete(n);const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=I.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburst(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!1)}function C2(){if(this.searchStoreValue.treeHeightMap===null)return;this.searchStoreValue.treeHeightMap.forEach((n,r)=>{this.localHeightRange.has(n)?this.selectedTrees.height.add(r):this.selectedTrees.height.delete(r)});const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{const r=n;r.previous={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,data:r.data},n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=I.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburstWithAnimation(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!0)}function V2(){if(this.searchStoreValue.treeDepthFeaturesMap===null)return;for(const[n,r]of this.searchStoreValue.treeDepthFeaturesMap){let i=!0;e:for(const[s,a]of r)for(const o of a)if(!this.localDepthFeatures.get(s).has(o)){i=!1;break e}i?this.selectedTrees.depth.add(n):this.selectedTrees.depth.delete(n)}const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{const r=n;r.previous={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,data:r.data},n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=I.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburstWithAnimation(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!0)}function D2(){if(this.searchStoreValue.treeDepthFeaturesMap===null)return;for(const[n,r]of this.searchStoreValue.treeDepthFeaturesMap){let i=!0;e:for(const[s,a]of r)for(const o of a)if(!this.localAllFeatures.has(o)){i=!1;break e}i?this.selectedTrees.allFeature.add(n):this.selectedTrees.allFeature.delete(n)}const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{const r=n;r.previous={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,data:r.data},n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=I.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburstWithAnimation(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!0)}function A2(e=500){const t=this.svg.select(".content-group"),n=I.transition().duration(e).ease(I.easeLinear);this.removeText(),this.arcDomainStack.forEach(i=>{i.x0=i.node.x0,i.x1=i.node.x1}),t.select(".arc-group").selectAll("g.arc").data(this.partition.descendants().slice(1),i=>i.data.nid).select("path").transition(n).tween("data",i=>{const s={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1,data:i.data},a=I.interpolate(i.previous,s),o=I.interpolate(this.xScale.domain(),[this.curHeadNode.x0,this.curHeadNode.x1]);return u=>{this.xScale.domain(o(u)),i.previous=a(u)}}).style("display",i=>i.data.f===";"||i.depth>this.sunburstStoreValue.depthHigh+1?"none":(i.value!==void 0&&i.value===0,"initial")).attrTween("d",i=>()=>this.arc(i.previous)).on("end",(i,s,a)=>{const o=I.select(a[s]);let u="initial";i.data.f===";"||i.depth>this.sunburstStoreValue.depthHigh+1||i.value!==void 0&&i.value===0?u="none":u="initial",o.style("display",u)}),Pt!==null&&(window.clearTimeout(Pt),Pt=null),Pt=window.setTimeout(()=>{this.drawCenterText(),this.drawText()},700),this.sunburstUpdated()}function L2(){const e=this.svg.select(".content-group");this.removeText(),this.arcDomainStack.forEach(t=>{t.x0=t.node.x0,t.x1=t.node.x1}),this.xScale.domain([this.curHeadNode.x0,this.curHeadNode.x1]),e.select(".arc-group").selectAll("g.arc").data(this.partition.descendants().slice(1),t=>t.data.nid).select("path").attr("d",t=>this.arc(t)).style("display",t=>t.data.f===";"||t.depth>this.sunburstStoreValue.depthHigh+1||t.value!==void 0&&t.value===0?"none":"initial"),Pt!==null&&(window.clearTimeout(Pt),Pt=null),Pt=window.setTimeout(()=>{this.drawCenterText(),this.drawText()},500),this.sunburstUpdated()}const Kr=800;var Ni,ah,Pi,oh,Ii,lh,Ri,ch,Ei,uh,Wi,hh,Oi,fh;class fc{constructor({component:t,data:n,initDepthGap:r=2,sunburstStore:i,treeWindowStore:s,pinnedTreeStore:a,searchStore:o,sunburstUpdated:u}){ce(this,Ni);ce(this,Pi);ce(this,Ii);ce(this,Ri);ce(this,Ei);ce(this,Wi);ce(this,Oi);L(this,"svg");L(this,"sunburstStore");L(this,"sunburstStoreValue");L(this,"treeWindowStore");L(this,"treeWindowStoreValue");L(this,"pinnedTreeStore");L(this,"pinnedTreeStoreValue");L(this,"searchStore");L(this,"searchStoreValue");L(this,"sunburstUpdated");L(this,"padding");L(this,"width");L(this,"height");L(this,"maxRadius");L(this,"xScale");L(this,"yScale");L(this,"textFontScale");L(this,"data");L(this,"dataRoot");L(this,"treeMapMap");L(this,"partition");L(this,"totalPathNum");L(this,"totalTreeNum");L(this,"featureCount");L(this,"featureValueCount");L(this,"featureOrder");L(this,"arc");L(this,"featureMap");L(this,"colorScale");L(this,"arcDomainStack");L(this,"curHeadNode");L(this,"localAccuracyLow");L(this,"localAccuracyHigh");L(this,"localMinSampleLow");L(this,"localMinSampleHigh");L(this,"localHeightRange");L(this,"localDepthFeatures");L(this,"localAllFeatures");L(this,"viewInitialized",!1);L(this,"selectedTrees");L(this,"textArc",h2);L(this,"doesTextFitArc",f2);L(this,"removeText",m2);L(this,"drawText",p2);L(this,"drawSecondaryText",g2);L(this,"drawCenterText",d2);L(this,"arcClicked",y2);L(this,"arcMouseenterHandler",w2);L(this,"arcMouseleaveHandler",v2);L(this,"leafArcClickHandler",x2);L(this,"leafArcMouseenterHandler",b2);L(this,"leafArcMouseleaveHandler",S2);L(this,"getTreeWindowPos",_2);L(this,"tempShowPinnedTree",k2);L(this,"syncAccuracyRange",T2);L(this,"syncMinSampleRange",M2);L(this,"updateSunburst",L2);L(this,"updateSunburstWithAnimation",A2);L(this,"syncHeightRange",C2);L(this,"syncDepthFeatures",V2);L(this,"syncAllFeatures",D2);L(this,"getFeatureColor",t=>this.colorScale(this.getFeatureNameValue(t,fn.First,ir.PairString)));this.svg=I.select(t).select("svg").attr("width","100%").attr("height","100%").attr("viewbox","0 0 650 650").attr("preserveAspectRatio","none"),this.padding={top:10,bottom:10,left:10,right:10};const l=this.svg.node().getBoundingClientRect();this.width=l.width-this.padding.left-this.padding.right,this.height=l.height-this.padding.top-this.padding.bottom,this.data=n.trie,this.treeMapMap=new Map,Object.keys(n.treeMap).forEach(c=>{this.treeMapMap.set(+c,n.treeMap[+c])}),this.featureMap=new Map;for(const[c,h]of Object.entries(n.featureMap))this.featureMap.set(parseInt(c),h);this.featureCount=new Map,this.featureValueCount=new Map,this.colorScale=I.scaleOrdinal(),this.featureOrder=[],this.dataRoot=I.hierarchy(this.data,c=>c.c).sum(c=>c.f==="_"?1:0),this.partition=te(this,Ni,ah).call(this),this.curHeadNode=this.partition,this.totalTreeNum=this.partition.treeNum,this.totalPathNum=this.partition.value,this.sunburstStore=i,this.sunburstStoreValue=uo(),te(this,Ii,lh).call(this,r),this.treeWindowStore=s,this.treeWindowStoreValue=ho(),te(this,Ri,ch).call(this),this.pinnedTreeStore=a,this.pinnedTreeStoreValue=Vn(),te(this,Ei,uh).call(this),this.searchStore=o,this.searchStoreValue=Cn(),this.localAccuracyLow=this.searchStoreValue.curAccuracyLow,this.localAccuracyHigh=this.searchStoreValue.curAccuracyHigh,this.localMinSampleLow=this.searchStoreValue.curMinSampleLow,this.localMinSampleHigh=this.searchStoreValue.curMinSampleHigh,this.localHeightRange=new Set([...this.searchStoreValue.curHeightRange]),this.localDepthFeatures=$s(this.searchStoreValue.curDepthFeatures),this.localAllFeatures=new Set([...this.searchStoreValue.curAllFeatures]),this.selectedTrees={accuracy:new Set(this.treeMapMap.keys()),minSample:new Set(this.treeMapMap.keys()),height:new Set(this.treeMapMap.keys()),depth:new Set(this.treeMapMap.keys()),allFeature:new Set(this.treeMapMap.keys())},te(this,Wi,hh).call(this),this.sunburstUpdated=u,this.maxRadius=this.width/2,this.xScale=I.scaleLinear().domain([0,1]).range([0,2*Math.PI]).clamp(!0),this.yScale=I.scaleLinear().domain([0,1]).range([0,this.maxRadius]),this.textFontScale=I.scaleLinear().domain([1,this.sunburstStoreValue.depthMax-1]).range([.93,.7]),this.arcDomainStack=[],this.arc=I.arc().startAngle(c=>this.xScale(c.x0)).endAngle(c=>{const h=c;let f=h.x1;return h.x0===h.x1&&(f=h.x0+1e-6),this.xScale(f)}).padAngle(c=>{const h=c,f=this.xScale(c.x1)-this.xScale(c.x0);return h.data.f==="_"?f<.001?0:Math.min(f/2,.015):0}).padRadius(this.radius*1.5).innerRadius(c=>Math.max(0,this.yScale(c.y0))).outerRadius(c=>Math.max(this.yScale(c.y0),this.yScale(c.y1)-1)),console.time("Draw sunburst"),this.initView(),this.viewInitialized=!0,console.timeEnd("Draw sunburst")}get radius(){return this.width/(2*(this.sunburstStoreValue.depthMax-this.sunburstStoreValue.depthLow+1))}getFeatureInfo(t){const n={name:"",value:"",nameValue:"",short:"",shortValue:""},r=parseInt(t);if(!isNaN(r)){const i=this.featureMap.get(r);i!==void 0&&(n.name=i[0],n.value=i[1],n.short=i[2],n.nameValue=`${n.name} ${n.value}`,n.shortValue=`${n.short} ${n.value}`)}return n}getFeatureNameValue(t,n=fn.First,r=ir.PairArray){let i=-1;if(t.includes(" "))switch(n){case fn.First:i=+t.replace(/(.*)\s.*/,"$1");break;case fn.Second:i=+t.replace(/.*\s(.*)/,"$1");break;case fn.Both:i=+t.replace(/(.*)\s.*/,"$1");break;default:console.error("Unknown cases")}else i=+t;switch(r){case ir.PairArray:return isNaN(i)?["",""]:this.featureMap.get(i);case ir.PairString:{if(isNaN(i))return"";const s=this.featureMap.get(i);return s!==void 0?`${s[0]}:${s[1]}`:(console.error(`Encounter unrecorded key ${i}`),"")}}}initView(){const t=this.svg.append("g").attr("class","content-group").attr("transform",`translate(${this.padding.left+this.width/2}, ${this.padding.top+this.height/2})`);t.append("g").attr("class","mid-circle-group");const n=t.append("g").attr("class","arc-group");t.append("g").attr("class","text-group");const r=n.selectAll("g.arc").data(this.partition.descendants().slice(1),a=>a.data.nid).join("g").attr("class",a=>`arc arc-${a.depth}`).classed("leaf",a=>a.data.f==="_");r.append("path").attr("class","arc").classed("leaf",a=>a.data.f==="_").attr("id",a=>`arc-${a.data.nid}`).attr("d",a=>this.arc(a)).on("click",(a,o)=>this.arcClicked(a,o)).on("mouseenter",(a,o)=>this.arcMouseenterHandler(a,o)).on("mouseleave",(a,o)=>this.arcMouseleaveHandler(a,o)).style("fill",a=>a.data.f==="_"?"null":this.getFeatureColor(a.data.f)).style("display",a=>a.data.f===";"||a.depth>this.sunburstStoreValue.depthHigh+1?"none":"initial").filter(a=>a.data.f==="_").on("click",(a,o)=>this.leafArcClickHandler(a,o)).on("mouseenter",(a,o)=>this.leafArcMouseenterHandler(a,o)).on("mouseleave",(a,o)=>this.leafArcMouseleaveHandler(a,o)),r.append("title").text(a=>this.getFeatureInfo(a.data.f).nameValue);const s=1/(this.sunburstStoreValue.depthMax+1);this.arcZoom({x0:this.xScale.domain()[0],x1:this.xScale.domain()[1],y0:0,y1:(this.sunburstStoreValue.depthHigh+1)*s},500)}arcZoom(t,n=Kr){this.removeText(),te(this,Oi,fh).call(this,t),this.svg.select(".arc-group").transition().duration(n).ease(I.easeCubicInOut).tween("zoom",()=>{const i=I.interpolate(this.xScale.domain(),[t.x0,t.x1]),s=I.interpolate(this.yScale.domain(),[t.y0,t.y1]);return a=>{this.xScale.domain(i(a)),this.yScale.domain(s(a))}}).on("end",()=>{this.drawText(),this.drawCenterText()}).selectAll(".arc").attrTween("d",i=>()=>this.arc(i)).style("fill-opacity",i=>i.depth>this.sunburstStoreValue.depthHigh?.2:1).style("pointer-events",i=>i.depth>this.sunburstStoreValue.depthHigh?"none":"initial").style("display",i=>{const s=i;return s.data.f===";"||s.depth>this.sunburstStoreValue.depthHigh+1?"none":"initial"})}}Ni=new WeakSet,ah=function(){let t=0;this.dataRoot.eachBefore(r=>{r.data.f==="_"&&(r.data.u=!0),r.data.nid=t++});for(const[r,i]of this.featureMap){if(this.featureValueCount.has(i[0]))this.featureValueCount.get(i[0]).set(i[1],0);else{const s=new Map;s.set(i[1],0),this.featureValueCount.set(i[0],s)}this.featureCount.has(i[0])||this.featureCount.set(i[0],0)}this.dataRoot.children.forEach(r=>{const[i,s]=this.getFeatureNameValue(r.data.f);this.featureCount.set(i,this.featureCount.get(i)+r.value),this.featureValueCount.get(i).set(s,this.featureValueCount.get(i).get(s)+r.value)}),this.featureCount.set("",0),this.colorScale=te(this,Pi,oh).call(this),this.dataRoot=this.dataRoot.sort((r,i)=>{const s=this.getFeatureInfo(r.data.f).name,a=this.getFeatureInfo(i.data.f).name,o=this.featureCount.get(s),u=this.featureCount.get(a),l=I.lch(this.getFeatureColor(r.data.f)).l,c=I.lch(this.getFeatureColor(i.data.f)).l;return o!==void 0&&u!==void 0?u-o||s.localeCompare(a)||l-c:(console.warn(`Encountered unrecorded keys '${s}', '${a}'`),0)}),this.featureOrder=this.dataRoot.children.map(r=>parseInt(r.data.f)),this.featureMap.forEach((r,i)=>{if(!this.featureOrder.includes(i)){const s=[];this.featureMap.forEach((a,o)=>{a[0]===r[0]&&this.featureOrder.indexOf(o)!==-1&&s.push(this.featureOrder.indexOf(o))}),this.featureOrder.splice(Math.max(...s)+1,0,i)}});const n=I.partition()(this.dataRoot);return n.eachAfter(r=>{var i;if(r.data.f==="_")r.uniqueTreeIDs=new Set([r.data.t]);else{const s=new Set;(i=r.children)==null||i.forEach(a=>{var o;(o=a.uniqueTreeIDs)==null||o.forEach(u=>{s.add(u)})}),r.uniqueTreeIDs=s}}),n.each(r=>{var i;r.treeNum=((i=r.uniqueTreeIDs)==null?void 0:i.size)||0,r.uniqueTreeIDs=null}),n},Pi=new WeakSet,oh=function(){const t=[],n=[],s=[I.lch(49.184,30.07,260.445),I.lch(68.968,73.064,62.176),I.lch(56.278,61.87,27.615),I.lch(60.11,50.293,135.863),I.lch(82.442,65.798,87.008),I.lch(69.948,22.911,191.071),I.lch(57.703,28.677,334.556),I.lch(52.777,22.881,53.64)],a=new Map;for(const[l,c]of s.entries())a.set(l,[0,c]);return Array.from(this.featureCount.keys()).filter(l=>l!=="").sort((l,c)=>this.featureCount.get(c)-this.featureCount.get(l)).forEach((l,c)=>{let h,f;if(c>7){console.warn("Number of feature is greater than 8:",l);let m=-1,b=1/0;for(let w=0;w<s.length;w++)a.get(w)[0]<b&&(m=w,b=a.get(w)[0]);h=a.get(m)[1],f=m}else h=s[c],f=c;const p=Array.from(this.featureValueCount.get(l).keys()).sort((m,b)=>this.featureValueCount.get(l).get(b)-this.featureValueCount.get(l).get(m)),y=p.length;let d=h;if(h.l+y*20<=92)p.forEach((m,b)=>{const w=`${l}:${m}`;d=I.lch(h.l+b*20,h.c,h.h),t.push(w),n.push(d.formatHsl())});else{const m=(92-h.l)/y;p.forEach((b,w)=>{const S=`${l}:${b}`;d=I.lch(h.l+w*m,h.c,h.h),t.push(S),n.push(d.formatHsl())})}const g=I.lch(d.l+10,d.c,d.h);a.set(f,[a.get(f)[0]+y,g])}),I.scaleOrdinal(n).domain(t)},Ii=new WeakSet,lh=function(t){this.sunburstStore.subscribe(n=>{switch(this.sunburstStoreValue=n,this.sunburstStoreValue.action){case qt.DepthChanged:{this.sunburstStoreValue.action=qt.None;const r=1/(this.sunburstStoreValue.depthMax+1),i=this.arcDomainStack.length>0?this.yScale.domain()[0]:0;this.arcZoom({x0:this.xScale.domain()[0],x1:this.xScale.domain()[1],y0:i,y1:(this.sunburstStoreValue.depthHigh+1)*r},500),this.sunburstStore.set(this.sunburstStoreValue);break}case qt.None:break;default:console.error("Unknown case in sunburstStore action")}}),this.sunburstStoreValue.depthMax=this.partition.height,this.sunburstStoreValue.depthLow=1,this.sunburstStoreValue.depthHigh=this.sunburstStoreValue.depthLow+t,this.sunburstStoreValue.action=qt.None,this.sunburstStoreValue.depthColors=new Array(this.sunburstStoreValue.depthMax).fill(""),this.sunburstStore.set(this.sunburstStoreValue)},Ri=new WeakSet,ch=function(){this.treeWindowStore.subscribe(t=>{this.treeWindowStoreValue=t}),this.treeWindowStoreValue.getFeatureColor=this.getFeatureColor,this.treeWindowStore.set(this.treeWindowStoreValue)},Ei=new WeakSet,uh=function(){this.pinnedTreeStore.subscribe(t=>{this.pinnedTreeStoreValue=t}),this.pinnedTreeStoreValue.getFeatureColor=this.getFeatureColor,this.pinnedTreeStoreValue.getFeatureInfo=t=>this.getFeatureInfo(t),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)},Wi=new WeakSet,hh=function(){this.searchStore.subscribe(n=>{this.searchStoreValue=n,this.viewInitialized&&this.searchStoreValue.shown&&(this.searchStoreValue.curAccuracyHigh!==this.localAccuracyHigh||this.searchStoreValue.curAccuracyLow!==this.localAccuracyLow)?(this.localAccuracyHigh=this.searchStoreValue.curAccuracyHigh,this.localAccuracyLow=this.searchStoreValue.curAccuracyLow,this.syncAccuracyRange()):(this.localAccuracyHigh=this.searchStoreValue.curAccuracyHigh,this.localAccuracyLow=this.searchStoreValue.curAccuracyLow),this.viewInitialized&&this.searchStoreValue.shown&&(this.searchStoreValue.curMinSampleHigh!==this.localMinSampleHigh||this.searchStoreValue.curMinSampleLow!==this.localMinSampleLow)?(this.localMinSampleHigh=this.searchStoreValue.curMinSampleHigh,this.localMinSampleLow=this.searchStoreValue.curMinSampleLow,this.syncMinSampleRange()):(this.localMinSampleHigh=this.searchStoreValue.curMinSampleHigh,this.localMinSampleLow=this.searchStoreValue.curMinSampleLow);const r=[...this.localHeightRange].every(a=>this.searchStoreValue.curHeightRange.has(a))&&this.localHeightRange.size===this.searchStoreValue.curHeightRange.size;this.viewInitialized&&this.searchStoreValue.shown&&!r?(this.localHeightRange=new Set([...this.searchStoreValue.curHeightRange]),this.syncHeightRange()):this.localHeightRange=new Set([...this.searchStoreValue.curHeightRange]);const i=[...this.searchStoreValue.curDepthFeatures.entries()].every(a=>this.localDepthFeatures.has(a[0])?lc(this.localDepthFeatures.get(a[0]),a[1]):!1);this.viewInitialized&&this.searchStoreValue.shown&&!i?(this.localDepthFeatures=$s(this.searchStoreValue.curDepthFeatures),this.syncDepthFeatures()):this.localDepthFeatures=$s(this.searchStoreValue.curDepthFeatures);const s=lc(this.localAllFeatures,this.searchStoreValue.curAllFeatures);this.viewInitialized&&this.searchStoreValue.shown&&!s?(this.localAllFeatures=new Set([...this.searchStoreValue.curAllFeatures]),this.syncAllFeatures()):this.localAllFeatures=new Set([...this.searchStoreValue.curAllFeatures])}),this.searchStoreValue.getFeatureColor=this.getFeatureColor,this.searchStoreValue.featureMap=this.featureMap,this.searchStoreValue.featureOrder=this.featureOrder;for(let n=1;n<this.partition.height;n++){const r=new Set([...this.featureMap.keys()].map(i=>i));this.searchStoreValue.curDepthFeatures.set(n,r)}const t=new Set([...this.featureMap.keys()].map(n=>n));this.searchStoreValue.curAllFeatures=t,this.searchStore.set(this.searchStoreValue)},Oi=new WeakSet,fh=function(t){let n=!1;this.arcDomainStack.length>0&&(n=this.curHeadNode.depth-this.arcDomainStack[this.arcDomainStack.length-1].node.depth!==1);const r=this.svg.select("g.content-group").selectAll("g.mid-circle-group").data([0]).join("g").attr("class","mid-circle-group").raise(),i=this.curHeadNode.ancestors().filter(c=>c.depth!==0),s=I.scaleLinear().domain([t.y0,t.y1]).range([0,this.maxRadius]),a=s(this.curHeadNode.y1)-s(this.curHeadNode.y0),o=i.map(c=>c.depth),u=I.scaleLinear().domain([I.min(o)-1,I.max(o)]).range([0,a]),l=u(1);r.selectAll("g.mid-circle").data(i,c=>c.value).join(c=>{const h=c.append("g").attr("class","mid-circle").on("click",f=>this.arcClicked(f,null));return h.append("circle").attr("r",0).style("fill",f=>this.getFeatureColor(f.data.f)).call(f=>f.transition().duration(0).delay(n?Kr-100:Kr+100).attr("r",p=>u(p.depth))),h.append("path").attr("class","mid-circle-text-arc").attr("id",f=>`mid-circle-text-arc-${f.depth}`).attr("d",f=>{const p=[Math.PI*.5,Math.PI*2.5],y=l*(f.depth-.5),d=I.path();return d.arc(0,0,y,p[0],p[1],!1),d.toString()}),h.append("title").text(f=>this.getFeatureInfo(f.data.f).nameValue),h},c=>{const h=c;return h.select("circle").transition("zoom").duration(Kr).ease(I.easeCubicInOut).attr("r",f=>u(f.depth)),h.select("path").attr("d",f=>{const p=[Math.PI*.5,Math.PI*2.5],y=l*(f.depth-.5),d=I.path();return d.arc(0,0,y,p[0],p[1],!1),d.toString()}),h})};const $s=e=>{const t=new Map;return e.forEach((n,r)=>{t.set(r,new Set([...n]))}),t};const At="src/components/sunburst/Sunburst.svelte";function Ca(e){var k,F,R,A,H,Y,N,D,E,v;let t,n,r,i,s,a,o,u,l,c,h=((k=e[1])==null?void 0:k.curHeadNode.value)===((F=e[1])==null?void 0:F.totalPathNum)?`${((R=e[1])==null?void 0:R.curHeadNode.value)|0}`:`${((A=e[1])==null?void 0:A.curHeadNode.value)|0}/${(H=e[1])==null?void 0:H.totalPathNum}`,f,p,y,d,g=((Y=e[1])==null?void 0:Y.curHeadNode.treeNum)===((N=e[1])==null?void 0:N.totalTreeNum)?`${((D=e[1])==null?void 0:D.curHeadNode.treeNum)|0}`:`${((E=e[1])==null?void 0:E.curHeadNode.treeNum)|0}/${(v=e[1])==null?void 0:v.totalTreeNum}`,m,b,w;const S={c:function(){var M,P,W;t=V("div"),n=V("div"),r=V("span"),r.textContent="No tree meets the current constraints :(",i=B(),s=V("span"),s.textContent="Try to relax the filtering in the Search Panel",a=B(),o=Qt("svg"),u=B(),l=V("div"),c=V("span"),f=pe(h),p=pe(" paths"),y=B(),d=V("span"),m=pe(g),b=pe(" trees"),x(r,"class","s-_PkX202GTJ8Y"),C(r,At,150,4,3462),x(s,"class","s-_PkX202GTJ8Y"),C(s,At,153,4,3536),x(n,"class","no-tree-message s-_PkX202GTJ8Y"),he(n,"show",((M=e[1])==null?void 0:M.curHeadNode.treeNum)===0),C(n,At,149,2,3379),x(o,"class","sunburst-svg s-_PkX202GTJ8Y"),C(o,At,157,2,3623),x(c,"class","tree-stat s-_PkX202GTJ8Y"),C(c,At,164,4,3864),x(d,"class","tree-stat s-_PkX202GTJ8Y"),C(d,At,169,4,4094),x(l,"class","stat-overlay s-_PkX202GTJ8Y"),x(l,"title",w=`There are ${(P=e[1])==null?void 0:P.curHeadNode.value} decision paths `.concat(`and ${(W=e[1])==null?void 0:W.curHeadNode.treeNum} decisions trees in the current selection.`)),C(l,At,158,2,3654),x(t,"class","sunburst s-_PkX202GTJ8Y"),C(t,At,148,0,3332)},l:function(M){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(M,P){fe(M,t,P),_(t,n),_(n,r),_(n,i),_(n,s),_(t,a),_(t,o),_(t,u),_(t,l),_(l,c),_(c,f),_(c,p),_(l,y),_(l,d),_(d,m),_(d,b),e[9](t)},p:function(M,[P]){var W,z,G,U,Z,Q,K,J,j,ne,ue,q,ee;P&2&&he(n,"show",((W=M[1])==null?void 0:W.curHeadNode.treeNum)===0),P&2&&h!==(h=((z=M[1])==null?void 0:z.curHeadNode.value)===((G=M[1])==null?void 0:G.totalPathNum)?`${((U=M[1])==null?void 0:U.curHeadNode.value)|0}`:`${((Z=M[1])==null?void 0:Z.curHeadNode.value)|0}/${(Q=M[1])==null?void 0:Q.totalPathNum}`)&&Ce(f,h),P&2&&g!==(g=((K=M[1])==null?void 0:K.curHeadNode.treeNum)===((J=M[1])==null?void 0:J.totalTreeNum)?`${((j=M[1])==null?void 0:j.curHeadNode.treeNum)|0}`:`${((ne=M[1])==null?void 0:ne.curHeadNode.treeNum)|0}/${(ue=M[1])==null?void 0:ue.totalTreeNum}`)&&Ce(m,g),P&2&&w!==(w=`There are ${(q=M[1])==null?void 0:q.curHeadNode.value} decision paths `.concat(`and ${(ee=M[1])==null?void 0:ee.curHeadNode.treeNum} decisions trees in the current selection.`))&&x(l,"title",w)},i:de,o:de,d:function(M){M&&oe(t),e[9](null)}};return re("SvelteRegisterBlock",{block:S,id:Ca.name,type:"component",source:"",ctx:e}),S}function H2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("Sunburst",r,[]);let{data:s=null}=t,{sunburstStore:a=null}=t,{treeWindowStore:o=null}=t,{pinnedTreeStore:u=null}=t,{searchStore:l=null}=t,{initDepthGap:c=2}=t,h=null,f=!1,p=null;const y=()=>{n(1,p)};ke(()=>{n(8,f=!0)});const d=()=>{h&&s&&a&&o&&l&&u&&n(1,p=new fc({component:h,data:s,initDepthGap:c,sunburstStore:a,treeWindowStore:o,pinnedTreeStore:u,searchStore:l,sunburstUpdated:y}))},g=["data","sunburstStore","treeWindowStore","pinnedTreeStore","searchStore","initDepthGap"];Object.keys(t).forEach(b=>{!~g.indexOf(b)&&b.slice(0,2)!=="$$"&&b!=="slot"&&console.warn(`<Sunburst> was created with unknown prop '${b}'`)});function m(b){Oe[b?"unshift":"push"](()=>{h=b,n(0,h)})}return e.$$set=b=>{"data"in b&&n(2,s=b.data),"sunburstStore"in b&&n(3,a=b.sunburstStore),"treeWindowStore"in b&&n(4,o=b.treeWindowStore),"pinnedTreeStore"in b&&n(5,u=b.pinnedTreeStore),"searchStore"in b&&n(6,l=b.searchStore),"initDepthGap"in b&&n(7,c=b.initDepthGap)},e.$capture_state=()=>({Sunburst:fc,onMount:ke,config:we,data:s,sunburstStore:a,treeWindowStore:o,pinnedTreeStore:u,searchStore:l,initDepthGap:c,component:h,mounted:f,sunburst:p,sunburstUpdated:y,initView:d}),e.$inject_state=b=>{"data"in b&&n(2,s=b.data),"sunburstStore"in b&&n(3,a=b.sunburstStore),"treeWindowStore"in b&&n(4,o=b.treeWindowStore),"pinnedTreeStore"in b&&n(5,u=b.pinnedTreeStore),"searchStore"in b&&n(6,l=b.searchStore),"initDepthGap"in b&&n(7,c=b.initDepthGap),"component"in b&&n(0,h=b.component),"mounted"in b&&n(8,f=b.mounted),"sunburst"in b&&n(1,p=b.sunburst)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&381&&s&&a&&o&&u&&l&&f&&h&&d()},[h,p,s,a,o,u,l,c,f,m]}class dh extends at{constructor(t){super(t);it(this,t,H2,Ca,Xe,{data:2,sunburstStore:3,treeWindowStore:4,pinnedTreeStore:5,searchStore:6,initDepthGap:7}),re("SvelteRegisterComponent",{component:this,tagName:"Sunburst_1",options:t,id:Ca.name})}get data(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sunburstStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sunburstStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get treeWindowStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set treeWindowStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get searchStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set searchStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get initDepthGap(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set initDepthGap(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var zi,ph,Gi,gh,Yi,mh;class dc{constructor({component:t,treeMapMap:n,featureMap:r,treeWindowStore:i,treeWindowUpdated:s,width:a=150,height:o=150}){ce(this,zi);ce(this,Gi);ce(this,Yi);L(this,"treeMap");L(this,"curTreeID");L(this,"curAncestorFs");L(this,"treeWindowStore");L(this,"treeWindowStoreValue");L(this,"treeWindowUpdated");L(this,"svg");L(this,"padding");L(this,"width");L(this,"height");L(this,"getStyle",()=>`left: ${this.treeWindowStoreValue.x}px;
      top: ${this.treeWindowStoreValue.y}px;`);L(this,"shouldHidePinLabel",()=>localStorage.getItem("treeWindowPinnedOnce")===null?(localStorage.setItem("treeWindowPinnedOnce","false"),!1):localStorage.getItem("treeWindowPinnedOnce")==="true");this.treeMap=n,this.curTreeID=0,this.curAncestorFs=[],this.treeWindowUpdated=s,this.treeWindowStore=i,this.treeWindowStoreValue=ho(),te(this,zi,ph).call(this,r),this.svg=I.select(t).select("svg.tree-svg").attr("width",a).attr("height",o).attr("viewbox",`0 0 ${a} ${o}`).attr("preserveAspectRatio","none"),this.padding={top:20,bottom:20,left:0,right:0},this.width=a-this.padding.left-this.padding.right,this.height=o-this.padding.top-this.padding.bottom}get tree(){const t=this.treeMap.get(this.curTreeID);return t!==void 0?t[0]:(console.warn(`No such tree on the record ${this.curTreeID}`),null)}get treeMetric(){const t=this.treeMap.get(this.curTreeID);return t!==void 0?Fn(t[2],4):null}}zi=new WeakSet,ph=function(t){this.treeWindowStore.subscribe(n=>{this.treeWindowStoreValue=n,this.svg!==void 0&&(this.treeWindowStoreValue.treeID!==this.curTreeID||this.treeWindowStoreValue.ancestorFs.length!==this.curAncestorFs.length||!this.treeWindowStoreValue.ancestorFs.every((r,i)=>r===this.curAncestorFs[i]))&&this.treeMap.get(this.treeWindowStoreValue.treeID)&&(this.curTreeID=this.treeWindowStoreValue.treeID,this.curAncestorFs=[...this.treeWindowStoreValue.ancestorFs],te(this,Gi,gh).call(this)),this.treeWindowUpdated()}),this.treeWindowStoreValue.featureMap=t,this.treeWindowStoreValue.treeMap=this.treeMap,this.treeWindowStore.set(this.treeWindowStoreValue)},Gi=new WeakSet,gh=function(){this.svg.selectAll("g.content").remove(),te(this,Yi,mh).call(this)},Yi=new WeakSet,mh=function(){if(this.tree===null){console.warn("Trying to draw a tree that does not exist");return}const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=I.hierarchy(this.tree,d=>d.c),r=7,i=r*1,s=I.tree().size([this.width,this.height])(n),a=t.append("g").attr("class","link-group");a.selectAll("path.link").data(s.links()).join("path").attr("class",d=>`link link-${d.source.data.f[0]}`).attr("id",d=>{const g=d.source.ancestors().length>1?d.source.ancestors()[1].data.f[0]:"r",m=d.source.data.f[0],b=d.target.data.f[0];return d.target.data.f[0]==="+"?`link-${g}-${m}-p`:d.target.data.f[0]==="-"?`link-${g}-${m}-n`:`link-${g}-${m}-${b}`}).attr("d",d=>I.line()([[d.source.x,d.source.y],[d.target.x,d.target.y]]));const u=t.append("g").attr("class","node-group").selectAll("g").data(s.descendants()).join("g").attr("class","node").attr("transform",d=>`translate(${d.x}, ${d.y})`),l=new Set(["-","+"]);u.filter(d=>!l.has(d.data.f[0])).append("circle").attr("r",r).style("fill",d=>this.treeWindowStoreValue.getFeatureColor?this.treeWindowStoreValue.getFeatureColor(d.data.f[0]):we.colors["gray-500"]),u.filter(d=>l.has(d.data.f[0])).append("rect").attr("x",-i).attr("y",-i).attr("rx",2).attr("ry",2).attr("width",2*i).attr("height",2*i),u.filter(d=>l.has(d.data.f[0])).append("text").attr("dy",.5).text(d=>d.data.f[0]);for(let d=0;d<this.curAncestorFs.length-1;d++){const g=d===0?"r":this.curAncestorFs[d-1],m=this.curAncestorFs[d],b=this.curAncestorFs[d+1];this.curAncestorFs[d+1]==="_"?(a.selectAll(`#link-${g}-${m}-p`).classed("highlighted",!0),a.selectAll(`#link-${g}-${m}-n`).classed("highlighted",!0)):a.selectAll(`#link-${g}-${m}-${b}`).classed("highlighted",!0)}const c=a.selectAll(`.link-${this.curAncestorFs[0]}`).data(),h=5,f=-1,p=[{x:(c[0].source.x+c[0].target.x)/2-h,y:(c[0].source.y+c[0].target.y)/2+f},{x:(c[1].source.x+c[1].target.x)/2+h,y:(c[1].source.y+c[1].target.y)/2+f}];t.append("g").attr("class","label-group").selectAll("text.split-label").data(p).join("text").attr("class","split-label").classed("split-label-left",(d,g)=>g===0).attr("x",d=>d.x).attr("y",d=>d.y).text((d,g)=>g===0?"true":"false")};var yh='<svg viewBox="0 0 48 63" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M45.606-7.813c-.033.782.309 1.278 1.025 1.49.716.211 1.351.073 1.904-.415l5.713-5.762 6.348 15.771c.162.391.431.668.805.831.375.162.741.179 1.099.048l4.102-1.709c.39-.162.642-.431.756-.805.114-.375.074-.757-.122-1.148l-6.738-15.527 8.008-.488c.781-.033 1.318-.35 1.611-.953.293-.602.163-1.212-.39-1.831L48.828-39.356c-.553-.553-1.131-.707-1.733-.463-.602.244-.904.74-.904 1.489l-.585 30.517Z" style="fill-rule:nonzero" transform="translate(-18.934 59.052) scale(.91051)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(1.43013 0 0 1.46942 -3373.023 -6348.854)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(1.01125 -1.01125 1.03904 1.03904 -6884.807 -2079.508)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(0 -1.43013 1.46942 0 -6348.578 3420.756)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(-1.01125 -1.01125 1.03904 -1.03904 -2079.243 6931.533)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(1.01125 1.01125 -1.03904 1.03904 2129.287 -6885.076)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(0 1.43013 -1.46942 0 6396.933 -3375.343)"/></svg>';const{Object:F2}=co,mt="src/components/tree-window/TreeWindow.svelte";function Va(e){var A,H;let t,n,r,i,s=((A=e[1])==null?void 0:A.treeWindowStoreValue.treeID)+"",a,o,u,l,c=((H=e[1])==null?void 0:H.treeMetric)+"",h,f,p,y,d,g,m,b,w,S,k,F;const R={c:function(){var N,D,E;t=V("div"),n=V("div"),r=V("span"),i=pe("Tree "),a=pe(s),o=B(),u=V("span"),l=pe("("),h=pe(c),f=pe(")"),p=B(),y=V("div"),d=V("div"),g=V("div"),m=V("div"),b=B(),w=V("span"),w.textContent="pin",S=B(),k=Qt("svg"),x(r,"class","tree-name s-cr5gyj4Gsmo-"),C(r,mt,156,4,3655),x(u,"class","tree-acc s-cr5gyj4Gsmo-"),C(u,mt,160,4,3750),x(n,"class","tree-header s-cr5gyj4Gsmo-"),C(n,mt,155,2,3625),x(m,"class","svg-icon s-cr5gyj4Gsmo-"),C(m,mt,169,8,3980),x(w,"class","s-cr5gyj4Gsmo-"),C(w,mt,172,8,4054),x(g,"class","label s-cr5gyj4Gsmo-"),C(g,mt,168,6,3952),x(d,"class","label-container s-cr5gyj4Gsmo-"),he(d,"no-display",(N=e[1])==null?void 0:N.shouldHidePinLabel()),C(d,mt,164,4,3847),x(k,"class","tree-svg s-cr5gyj4Gsmo-"),C(k,mt,176,4,4100),x(y,"class","content s-cr5gyj4Gsmo-"),C(y,mt,163,2,3821),x(t,"class","tree-window s-cr5gyj4Gsmo-"),x(t,"style",F=(D=e[1])==null?void 0:D.getStyle()),he(t,"show",(E=e[1])==null?void 0:E.treeWindowStoreValue.show),C(t,mt,149,0,3484)},l:function(N){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(N,D){fe(N,t,D),_(t,n),_(n,r),_(r,i),_(r,a),_(n,o),_(n,u),_(u,l),_(u,h),_(u,f),_(t,p),_(t,y),_(y,d),_(d,g),_(g,m),m.innerHTML=yh,_(g,b),_(g,w),_(y,S),_(y,k),e[6](t)},p:function(N,[D]){var E,v,T,M,P;D&2&&s!==(s=((E=N[1])==null?void 0:E.treeWindowStoreValue.treeID)+"")&&Ce(a,s),D&2&&c!==(c=((v=N[1])==null?void 0:v.treeMetric)+"")&&Ce(h,c),D&2&&he(d,"no-display",(T=N[1])==null?void 0:T.shouldHidePinLabel()),D&2&&F!==(F=(M=N[1])==null?void 0:M.getStyle())&&x(t,"style",F),D&2&&he(t,"show",(P=N[1])==null?void 0:P.treeWindowStoreValue.show)},i:de,o:de,d:function(N){N&&oe(t),e[6](null)}};return re("SvelteRegisterBlock",{block:R,id:Va.name,type:"component",source:"",ctx:e}),R}function N2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("TreeWindow",r,[]);let{data:s=null}=t,{featureMap:a=null}=t,{treeWindowStore:o=null}=t,u=null,l=!1,c=null;ke(()=>{n(5,l=!0)});const h=()=>{n(1,c)},f=()=>{if(u&&s&&a&&o){const d=s.treeMap,g=new Map;Object.keys(d).forEach(m=>{g.set(+m,d[+m])}),n(1,c=new dc({component:u,treeMapMap:g,featureMap:a,treeWindowStore:o,treeWindowUpdated:h}))}},p=["data","featureMap","treeWindowStore"];F2.keys(t).forEach(d=>{!~p.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<TreeWindow> was created with unknown prop '${d}'`)});function y(d){Oe[d?"unshift":"push"](()=>{u=d,n(0,u)})}return e.$$set=d=>{"data"in d&&n(2,s=d.data),"featureMap"in d&&n(3,a=d.featureMap),"treeWindowStore"in d&&n(4,o=d.treeWindowStore)},e.$capture_state=()=>({onMount:ke,TreeWindow:dc,iconClick:yh,data:s,featureMap:a,treeWindowStore:o,component:u,mounted:l,treeWindow:c,treeWindowUpdated:h,initView:f}),e.$inject_state=d=>{"data"in d&&n(2,s=d.data),"featureMap"in d&&n(3,a=d.featureMap),"treeWindowStore"in d&&n(4,o=d.treeWindowStore),"component"in d&&n(0,u=d.component),"mounted"in d&&n(5,l=d.mounted),"treeWindow"in d&&n(1,c=d.treeWindow)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&61&&s&&a&&o&&l&&u&&f()},[u,c,s,a,o,l,y]}class wh extends at{constructor(t){super(t);it(this,t,N2,Va,Xe,{data:2,featureMap:3,treeWindowStore:4}),re("SvelteRegisterComponent",{component:this,tagName:"TreeWindow_1",options:t,id:Va.name})}get data(){throw new Error("<TreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<TreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get featureMap(){throw new Error("<TreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set featureMap(t){throw new Error("<TreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get treeWindowStore(){throw new Error("<TreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set treeWindowStore(t){throw new Error("<TreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ze=8;var Tt,Xt,Ui,vh,_r,Da,Bi,bh,xr,ji,Sh,kr,Aa,Xi,_h,qi,xh,Zi,kh;class pc{constructor({component:t,pinnedTree:n,pinnedTreeStore:r,favoritesStore:i,pinnedTreeWindowUpdated:s,initSwitchChecked:a,width:o=200,height:u=200}){ce(this,Tt);ce(this,Ui);ce(this,_r);ce(this,Bi);ce(this,ji);ce(this,kr);ce(this,Xi);ce(this,qi);ce(this,Zi);L(this,"pinnedTree");L(this,"pinnedTreeWindowUpdated");L(this,"svg");L(this,"padding");L(this,"width");L(this,"height");L(this,"pinnedTreeStore");L(this,"pinnedTreeStoreValue");L(this,"pinnedTreeStoreUnsubscriber");L(this,"favoritesStore");L(this,"favoritesStoreValue");L(this,"favoritesStoreUnsubscriber");L(this,"sankey");L(this,"accuracyScale",null);L(this,"hidden",!0);L(this,"endPos");L(this,"node");L(this,"playLaunchingAnimation",()=>{const t=this.pinnedTree.startPos.width/this.endPos.width,n=this.pinnedTree.startPos.height/this.endPos.height,r=this.pinnedTree.startPos.x-this.endPos.x,i=this.pinnedTree.startPos.y-this.endPos.y;this.node.animate([{transformOrigin:"top left",opacity:0,transform:`
            translate(${r}px, ${i}px)
            scale(${t}, ${n})
          `},{transformOrigin:"top left",opacity:1,transform:"none"}],{duration:300,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)",fill:"none"})});ce(this,xr,t=>{const n=I.color(t);let r="currentcolor";if(n!==null){const i=[252,252,252],s=[74,74,74],a=I.color(n).rgb(),o=[a.r,a.g,a.b];Nn(i,o)<Nn(s,o)&&(r="hsla(0, 0%, 99%, 1)")}return r});L(this,"getStyle",()=>`
      left: ${this.pinnedTree.x}px;      top: ${this.pinnedTree.y}px;`);L(this,"alterLayout",()=>{this.sankey?(te(this,qi,xh).call(this),this.sankey=!1):(te(this,Zi,kh).call(this),this.sankey=!0)});L(this,"heartClicked",async t=>{if(t.preventDefault(),t.stopPropagation(),te(this,Tt,Xt).call(this),this.pinnedTree.isFav=!this.pinnedTree.isFav,this.pinnedTreeWindowUpdated(),this.pinnedTree.isFav){await oo();const n=I.select(".hidden-heart");n.transition().duration(400).ease(I.easeCubicInOut).style("transform","scale(1)").style("opacity",1).on("end",()=>{n.classed("pulse",!0),setTimeout(()=>{n.classed("pulse",!1).transition().duration(400).style("transform","scale(0)").style("opacity",0)},1500)});const r=I.select(this.node).select(".icon-heart").classed("play-animation",!0).on("animationend",()=>{r.classed("play-animation",!1)});new Set(this.favoritesStoreValue.favTrees.map(s=>s.pinnedTree.treeID)).has(this.pinnedTree.treeID)||this.favoritesStoreValue.favTrees.push({pinnedTree:this.pinnedTree,pinnedTreeUpdated:()=>{this.pinnedTreeWindowUpdated()},getFeatureColor:this.pinnedTreeStoreValue.getFeatureColor===null?()=>we.colors["gray-500"]:this.pinnedTreeStoreValue.getFeatureColor})}else{const r=[...this.favoritesStoreValue.favTrees.map(i=>i.pinnedTree.treeID)].indexOf(this.pinnedTree.treeID);r>-1&&this.favoritesStoreValue.favTrees.splice(r,1)}this.favoritesStore.set(this.favoritesStoreValue),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)});L(this,"noteClicked",t=>{t.preventDefault(),t.stopPropagation(),te(this,Tt,Xt).call(this);const n=I.select(this.node).select(".note-window");n.classed("show",!n.classed("show"))});L(this,"closeClicked",t=>{t.preventDefault(),t.stopPropagation();let n=!1;if(this.pinnedTreeStoreValue.lastActiveTreeID!==null&&(n=this.pinnedTreeStoreValue.lastActiveTreeID===this.pinnedTree.treeID),this.pinnedTree.isFav)this.pinnedTree.isPinned=!1;else{const r=this.pinnedTreeStoreValue.pinnedTrees.indexOf(this.pinnedTree);r>-1?this.pinnedTreeStoreValue.pinnedTrees.splice(r,1):console.warn("Trying to delete a tree that does not exist!")}if(n){let r=!1;for(let i=this.pinnedTreeStoreValue.pinnedTrees.length-1;i>=0;i--)if(this.pinnedTreeStoreValue.pinnedTrees[i].isPinned){this.pinnedTreeStoreValue.lastActiveTreeID=this.pinnedTreeStoreValue.pinnedTrees[i].treeID,r=!0;break}r||(this.pinnedTreeStoreValue.lastActiveTreeID=null)}this.pinnedTreeStore.set(this.pinnedTreeStoreValue)});L(this,"cancelEvent",t=>{t.preventDefault(),t.stopPropagation()});L(this,"headerMousedownHandler",t=>{t.preventDefault(),t.stopPropagation(),te(this,Tt,Xt).call(this);const n={x:t.pageX,y:t.pageY},r=s=>{s.preventDefault(),s.stopPropagation();const a=this.node.offsetLeft+s.pageX-n.x,o=this.node.offsetTop+s.pageY-n.y;n.x=s.pageX,n.y=s.pageY,this.node.style.left=`${a}px`,this.node.style.top=`${o}px`},i=()=>{document.removeEventListener("mousemove",r,!0),document.removeEventListener("mouseup",i,!0),document.body.style.cursor="default",this.pinnedTree.x=parseFloat(this.node.style.left),this.pinnedTree.y=parseFloat(this.node.style.top)};document.addEventListener("mousemove",r,!0),document.addEventListener("mouseup",i,!0),document.body.style.cursor="move"});L(this,"contentMousedownHandler",t=>{te(this,Tt,Xt).call(this)});L(this,"switchToggled",t=>{t.stopPropagation(),t.preventDefault();const n=I.select(t.currentTarget);n.attr("aria-checked",n.attr("aria-checked")==="true"?"false":!0),this.alterLayout()});this.pinnedTree=n,this.pinnedTreeWindowUpdated=s,this.width=o,this.height=u,this.node=t,this.pinnedTree.jiggle=()=>{te(this,Tt,Xt).call(this),this.node.classList.add("jiggle"),this.node.onanimationend=()=>{this.node.classList.remove("jiggle")}},this.pinnedTreeStore=r,this.pinnedTreeStoreValue=Vn(),this.pinnedTreeStoreUnsubscriber=this.pinnedTreeStore.subscribe(c=>{this.pinnedTreeStoreValue=c}),this.favoritesStore=i,this.favoritesStoreValue=Mn(),this.favoritesStoreUnsubscriber=this.favoritesStore.subscribe(c=>{this.favoritesStoreValue=c}),te(this,Tt,Xt).call(this),this.svg=I.select(t).select("svg.tree-svg").attr("width",o).attr("height",u).attr("viewbox",`0 0 ${o} ${u}`).attr("preserveAspectRatio","none"),this.padding={top:20,bottom:20,left:0,right:0},this.width=o-this.padding.left-this.padding.right,this.height=u-this.padding.top-this.padding.bottom,a?(this.sankey=!0,te(this,ji,Sh).call(this)):(this.sankey=!1,te(this,Ui,vh).call(this));const l=I.select(t).node().getBoundingClientRect();this.endPos={x:this.pinnedTree.x,y:this.pinnedTree.y,width:l.width,height:l.height},this.hidden=!1,this.pinnedTreeWindowUpdated(),this.playLaunchingAnimation()}}Tt=new WeakSet,Xt=function(){var n;const t=this.node.parentNode;(n=t==null?void 0:t.parentNode)==null||n.appendChild(t),this.pinnedTreeStoreValue.lastActiveTreeID=this.pinnedTree.treeID},Ui=new WeakSet,vh=function(){const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=I.hierarchy(this.pinnedTree.tree,l=>l.c),r=Ze*1,i=I.tree().size([this.width,this.height])(n),s=t.append("g").attr("class","link-group");s.selectAll("path.link").data(i.links()).join("path").attr("class",l=>`link link-${l.source.data.f[0]}`).attr("id",l=>l.target.data.f[0]==="+"?`link-${l.source.data.f[0]}-p`:l.target.data.f[0]==="-"?`link-${l.source.data.f[0]}-n`:`link-${l.source.data.f[0]}-${l.target.data.f[0]}`).attr("d",l=>I.line()([[l.source.x,l.source.y],[l.target.x,l.target.y]]));const o=t.append("g").attr("class","node-group").selectAll("g").data(i.descendants()).join("g").attr("class","node").attr("transform",l=>`translate(${l.x}, ${l.y})`),u=new Set(["-","+"]);if(o.filter(l=>!u.has(l.data.f[0])).append("rect").attr("class","node-rect").attr("x",-r).attr("y",-r).attr("rx",Ze).attr("ry",Ze).attr("width",2*r).attr("height",2*r).style("fill",l=>this.pinnedTreeStoreValue.getFeatureColor?this.pinnedTreeStoreValue.getFeatureColor(l.data.f[0]):we.colors["gray-500"]),o.filter(l=>!u.has(l.data.f[0])).append("title").text(l=>this.pinnedTreeStoreValue.getFeatureInfo?this.pinnedTreeStoreValue.getFeatureInfo(l.data.f[0]).nameValue:""),o.filter(l=>u.has(l.data.f[0])).append("title").text(l=>{const c=l.data.f[0]==="+"?"yes":"no",h=`${Fn(l.data.f[2]/l.data.f[1],4)} (${l.data.f[2]} / ${l.data.f[1]})`;return`Predict: ${c} - Accuracy: ${h}`}),this.accuracyScale===null){const l=[];o.filter(c=>u.has(c.data.f[0])).each(c=>{l.push(c.data.f[2]/c.data.f[1])}),this.accuracyScale=I.scaleLinear().domain([Math.min(...l),Math.max(...l)]).range([.3,1])}o.filter(l=>u.has(l.data.f[0])).append("rect").attr("class","leaf-rect").attr("x",-r).attr("y",-r).attr("rx",2).attr("ry",2).attr("width",2*r).attr("height",2*r).style("stroke-opacity",l=>this.accuracyScale(l.data.f[2]/l.data.f[1])),o.filter(l=>u.has(l.data.f[0])).append("text").attr("dy",.5).text(l=>l.data.f[0]).style("opacity",l=>this.accuracyScale(l.data.f[2]/l.data.f[1])),te(this,_r,Da).call(this,s,t,i)},_r=new WeakSet,Da=function(t,n,r,i=null){const s=t.selectAll(`.link-${this.pinnedTree.tree.f[0]}`).data(),a=5,o=-1,u=[{x:(s[0].source.x+s[0].target.x)/2-a,y:(s[0].source.y+s[0].target.y)/2+o},{x:(s[1].source.x+s[1].target.x)/2+a,y:(s[1].source.y+s[1].target.y)/2+o}],l=n.append("g").attr("class","edge-label-group standard").style("opacity",i?0:1);l.selectAll("text.split-label").data(u).join("text").attr("class","split-label").classed("split-label-left",(y,d)=>d===0).attr("x",y=>y.x).attr("y",y=>y.y+3).text((y,d)=>d===0?"true":"false").style("display",s[0].source.height>6?"none":"unset");const c=te(this,Bi,bh).call(this,r,Ze),h=n.append("g").attr("class","node-label-group standard").style("opacity",i?0:1),f=h.selectAll("g.node-label").data(c).join("g").attr("class","node-label").classed("node-label-left",y=>y.pos===et.left).attr("transform",y=>`translate(${y.x}, ${y.y})`),p=f.append("text").text(y=>y.text).style("fill",y=>y.backTextColor);f.append("title").text(y=>y.textLong),p.each((y,d,g)=>{const m=I.select(g[d]);if(d+1<g.length){const b=I.select(g[d+1]),w=m.data()[0],S=b.data()[0];w.y===S.y&&w.pos===et.right&&S.pos===et.right&&S.index===w.index+1&&(w.width*=2)}}),p.each((y,d,g)=>{const m=g[d],b=I.select(m);let w=y.text,S=m.getBoundingClientRect().width;for(;S>y.width;){if(w==="..."){w=".";break}w=w.replace("...",""),w=w.slice(0,w.length-1),w=`${w}...`,S=je(w,16*.8)}b.text(w)}),i&&(l.transition(i).style("opacity",1),h.transition(i).style("opacity",1))},Bi=new WeakSet,bh=function(t,n){const r=[];let s=12,a=this.width-12;const o=5,u=t.descendants();for(const[l,c]of u.entries()){let h=!1;const f=this.pinnedTreeStoreValue.getFeatureInfo===null?"":this.pinnedTreeStoreValue.getFeatureInfo(c.data.f[0]).shortValue,p=this.pinnedTreeStoreValue.getFeatureInfo===null?"":this.pinnedTreeStoreValue.getFeatureInfo(c.data.f[0]).nameValue;let y=we.colors["gray-50"],d=we.colors["gray-700"];if(this.pinnedTreeStoreValue.getFeatureColor){const w=this.pinnedTreeStoreValue.getFeatureColor(c.data.f[0]);d=w,y=Ms(this,xr).call(this,w)}l+1<u.length&&c.depth===u[l+1].depth&&(h=!0,a=u[l+1].x-n-o);const g=c.x-n-s-o;let m=a-c.x-n-o;h&&u[l+1].data.f[0]!=="+"&&u[l+1].data.f[0]!=="-"&&(m=(a-c.x-n)/2-o);let b;g>m?(b={x:c.x-n-o,y:c.y,pos:et.left,featureName:c.data.f[0],width:g,text:f,textLong:p,frontTextColor:y,backTextColor:d,index:l},s=c.x+n,a=this.width-12):(b={x:c.x+n+o,y:c.y,pos:et.right,featureName:c.data.f[0],width:m,text:f,textLong:p,frontTextColor:y,backTextColor:d,index:l},c.data.f[0]!=="+"&&c.data.f[0]!=="-"?s=c.x+n+o+m:s=c.x+n+o,a=this.width-12),c.data.f[0]!=="+"&&c.data.f[0]!=="-"&&r.push(b),l+1<u.length&&c.depth!==u[l+1].depth&&(s=12,a=this.width-12)}return r},xr=new WeakMap,ji=new WeakSet,Sh=function(){const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=I.hierarchy(this.pinnedTree.tree,d=>d.c),r=Ze*1,i=I.tree().size([this.width,this.height])(n),s=t.append("g").attr("class","link-group"),a=t.append("g").attr("class","node-group"),o={top:this.padding.top,bottom:this.padding.bottom,left:20,right:20},u=i.data.f[1],l=I.scaleLinear().domain([0,u]).range([0,this.width+this.padding.left+this.padding.right-o.left-o.right]),c=[];let h=0,f=-1;i.descendants().forEach(d=>{const g=Object.assign(d);g.depth!==f&&(h=g.parent===null?o.left:g.parent.x,f=g.depth),g.x=h,g.width=l(g.data.f[1]),h+=g.width,c.push(g)});const p=a.selectAll("g").data(c).join("g").attr("class","node").attr("transform",d=>`translate(${d.x}, ${d.y})`);p.filter(d=>d.data.f[0]!=="+"&&d.data.f[0]!=="-").append("title").text(d=>this.pinnedTreeStoreValue.getFeatureInfo?this.pinnedTreeStoreValue.getFeatureInfo(d.data.f[0]).nameValue:""),p.filter(d=>d.data.f[0]==="+"||d.data.f[0]==="-").append("title").text(d=>{const g=d.data.f[0]==="+"?"yes":"no",m=`${Fn(d.data.f[2]/d.data.f[1],4)} (${d.data.f[2]} / ${d.data.f[1]})`;return`Predict: ${g} - Accuracy: ${m}`});const y=new Set(["-","+"]);if(p.filter(d=>!y.has(d.data.f[0])).append("rect").attr("class","node-rect sankey").attr("x",0).attr("y",-r).attr("width",d=>d.width).attr("height",2*r).attr("rx",d=>d.width<16?1:2).attr("ry",d=>d.width<16?1:2).style("fill",d=>this.pinnedTreeStoreValue.getFeatureColor?this.pinnedTreeStoreValue.getFeatureColor(d.data.f[0]):we.colors["gray-500"]),this.accuracyScale===null){const d=[];p.filter(g=>y.has(g.data.f[0])).each(g=>{d.push(g.data.f[2]/g.data.f[1])}),this.accuracyScale=I.scaleLinear().domain([Math.min(...d),Math.max(...d)]).range([.3,1])}p.filter(d=>y.has(d.data.f[0])).append("rect").attr("class","leaf-rect").attr("x",0).attr("y",-r).attr("rx",d=>d.width<16?1:2).attr("ry",d=>d.width<16?1:2).attr("width",d=>d.width).attr("height",2*r).style("stroke-opacity",d=>this.accuracyScale(d.data.f[2]/d.data.f[1])),p.filter(d=>y.has(d.data.f[0])).append("text").attr("x",d=>d.width/2).attr("dy",.5).text(d=>d.data.f[0]).style("opacity",d=>d.width<16?0:this.accuracyScale(d.data.f[2]/d.data.f[1])),s.selectAll("path.link").data(i.links()).join("path").attr("class",d=>`link link-${d.source.data.f[0]}`).attr("id",d=>d.target.data.f[0]==="+"?`link-${d.source.data.f[0]}-p`:d.target.data.f[0]==="-"?`link-${d.source.data.f[0]}-n`:`link-${d.source.data.f[0]}-${d.target.data.f[0]}`).attr("d",d=>{const g=d.source,m=d.target;return I.line()([[g.x+g.width/2,g.y],[m.x+m.width/2,m.y-r]])}),te(this,kr,Aa).call(this,s,t,c,r)},kr=new WeakSet,Aa=function(t,n,r,i,s=null){const a=t.selectAll(`.link-${this.pinnedTree.tree.f[0]}`).data(),o=5,u=-.5,l=[];for(const d of[0,1]){const g=a[d].source,m=a[d].target,b=g.x+g.width/2,w=m.x+m.width/2,S=g.y,k=m.y-i,F=r[1].y-r[0].y-2*Ze,R=Ze/(F+Ze)*Math.abs(b-w),A=d===0?b-R:b+R,H=S+Ze;l.push({x:d===0?(A+w)/2-o:(A+w)/2+o,y:(H+k)/2+u})}const c=n.append("g").attr("class","edge-label-group sankey").style("opacity",s?0:1);c.selectAll("text.split-label").data(l).join("text").attr("class","split-label").classed("split-label-left",(d,g)=>g===0).attr("x",d=>d.x).attr("y",d=>d.y+3).text((d,g)=>g===0?"true":"false").style("display",a[0].source.height>6?"none":"unset");const h=te(this,Xi,_h).call(this,r),f=n.append("g").attr("class","node-label-group sankey").style("opacity",s?0:1),p=f.selectAll("g.node-label").data(h).join("g").attr("class","node-label").classed("node-label-left",d=>d.pos===et.left).classed("node-label-middle",d=>d.pos===et.middle).attr("transform",d=>`translate(${d.x}, ${d.y})`),y=p.append("text").text(d=>d.text).style("fill",d=>d.pos===et.middle?d.frontTextColor:d.backTextColor);p.append("title").text(d=>d.textLong),y.each((d,g,m)=>{const b=m[g],w=I.select(b);let S=d.text,k=b.getBoundingClientRect().width;for(;k>d.width;){if(S==="..."){S=".";break}S=S.replace("...",""),S=S.slice(0,S.length-1),S=`${S}...`,k=je(S,16*.8)}w.text(S)}),s&&(c.transition(s).style("opacity",1),f.transition(s).style("opacity",1))},Xi=new WeakSet,_h=function(t){const n=[];let s=20,a=this.width-20;const o=5;for(const[u,l]of t.entries()){let c=!1;const h=this.pinnedTreeStoreValue.getFeatureInfo===null?"":this.pinnedTreeStoreValue.getFeatureInfo(l.data.f[0]).shortValue,f=this.pinnedTreeStoreValue.getFeatureInfo===null?"":this.pinnedTreeStoreValue.getFeatureInfo(l.data.f[0]).nameValue;let p=we.colors["gray-50"],y=we.colors["gray-700"];if(this.pinnedTreeStoreValue.getFeatureColor){const w=this.pinnedTreeStoreValue.getFeatureColor(l.data.f[0]);y=w,p=Ms(this,xr).call(this,w)}u+1<t.length&&l.depth===t[u+1].depth&&(c=!0,a=t[u+1].x-o);const d=l.x-s-o,g=c?0:a-l.x-l.width-o,m=l.width-2*o;let b;d>g&&d>m?(b={x:l.x-o,y:l.y+1,pos:et.left,featureName:l.data.f[0],width:d,text:h,textLong:f,frontTextColor:p,backTextColor:y,index:u},s=l.x+l.width,a=this.width-20):m>=d&&m>=g?(b={x:l.x+l.width/2,y:l.y+1,pos:et.middle,featureName:l.data.f[0],width:m,text:h,textLong:f,frontTextColor:p,backTextColor:y,index:u},s=l.x+l.width,a=this.width-20):(b={x:l.x+l.width+o,y:l.y+1,pos:et.right,featureName:l.data.f[0],width:g,text:h,textLong:f,frontTextColor:p,backTextColor:y,index:u},s=l.x+l.width,a=this.width-20),l.data.f[0]!=="+"&&l.data.f[0]!=="-"&&n.push(b),u+1<t.length&&l.depth!==t[u+1].depth&&(s=20,a=this.width-20)}return n},qi=new WeakSet,xh=function(){const t=this.svg.select("g.content"),n=I.hierarchy(this.pinnedTree.tree,c=>c.c),r=Ze*1,i=I.tree().size([this.width,this.height])(n),s=I.transition().duration(400).ease(I.easeCubicInOut),a=t.select(".link-group");a.selectAll("path.link").data(i.links()).join("path").transition(s).attr("d",c=>I.line()([[c.source.x,c.source.y],[c.target.x,c.target.y]]));const u=t.select(".node-group").selectAll("g.node").data(i.descendants()).join("g");u.transition(s).attr("transform",c=>`translate(${c.x}, ${c.y})`);const l=new Set(["-","+"]);u.filter(c=>!l.has(c.data.f[0])).select("rect.node-rect").classed("sankey",!1).transition(s).attr("x",-r).attr("y",-r).attr("rx",Ze).attr("ry",Ze).attr("width",2*r).attr("height",2*r),u.filter(c=>l.has(c.data.f[0])).select("rect.leaf-rect").attr("class","leaf-rect").transition(s).attr("x",-r).attr("y",-r).attr("rx",2).attr("ry",2).attr("width",2*r).attr("height",2*r),u.filter(c=>l.has(c.data.f[0])).select("text").transition(s).attr("x",0).attr("dy",.5).style("opacity",c=>this.accuracyScale(c.data.f[2]/c.data.f[1])),t.select(".node-label-group.sankey").transition(s).style("opacity",0).style("pointer-events","none"),t.select(".edge-label-group.sankey").transition(s).style("opacity",0).style("pointer-events","none"),t.select(".node-label-group.standard").size()===0?te(this,_r,Da).call(this,a,t,i,s):(t.select(".node-label-group.standard").transition(s).style("opacity",1).style("pointer-events","unset"),t.select(".edge-label-group.standard").transition(s).style("opacity",1).style("pointer-events","unset")),localStorage.setItem("initSwitchChecked","false")},Zi=new WeakSet,kh=function(){const t=this.svg.select(".content"),n=I.hierarchy(this.pinnedTree.tree,g=>g.c),r=Ze*1,i=I.tree().size([this.width,this.height])(n),s=t.select(".link-group"),a=t.select(".node-group"),o={top:this.padding.top,bottom:this.padding.bottom,left:20,right:20},u=i.data.f[1],l=I.scaleLinear().domain([0,u]).range([0,this.width+this.padding.left+this.padding.right-o.left-o.right]),c=[];let h=0,f=-1;i.descendants().forEach(g=>{const m=Object.assign(g);m.depth!==f&&(h=m.parent===null?o.left:m.parent.x,f=m.depth),m.x=h,m.width=l(m.data.f[1]),h+=m.width,c.push(m)});const p=I.transition().duration(400).ease(I.easeCubicInOut),y=a.selectAll("g.node").data(c).join("g");y.transition(p).attr("transform",g=>`translate(${g.x}, ${g.y})`);const d=new Set(["-","+"]);y.filter(g=>!d.has(g.data.f[0])).select("rect.node-rect").classed("sankey",!0).transition(p).attr("x",0).attr("y",-r).attr("width",g=>g.width).attr("height",2*r).attr("rx",g=>g.width<16?1:2).attr("ry",g=>g.width<16?1:2),y.filter(g=>d.has(g.data.f[0])).select("rect.leaf-rect").transition(p).attr("x",0).attr("y",-r).attr("rx",g=>g.width<16?1:2).attr("ry",g=>g.width<16?1:2).attr("width",g=>g.width).attr("height",2*r),y.filter(g=>d.has(g.data.f[0])).select("text").transition(p).attr("x",g=>g.width/2).attr("dy",.5).text(g=>g.data.f[0]).style("opacity",g=>g.width<16?0:this.accuracyScale(g.data.f[2]/g.data.f[1])),s.selectAll("path.link").data(i.links()).join("path").transition(p).attr("d",g=>{const m=g.source,b=g.target;return I.line()([[m.x+m.width/2,m.y],[b.x+b.width/2,b.y-r]])}),t.select(".node-label-group.standard").transition(p).style("opacity",0).style("pointer-events","none"),t.select(".edge-label-group.standard").transition(p).style("opacity",0).style("pointer-events","none"),t.select(".node-label-group.sankey").size()===0?te(this,kr,Aa).call(this,s,t,c,r,p):(t.select(".node-label-group.sankey").transition(p).style("opacity",1).style("pointer-events","unset"),t.select(".edge-label-group.sankey").transition(p).style("opacity",1).style("pointer-events","unset")),localStorage.setItem("initSwitchChecked","true")};var Th='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.343 13.657A8 8 0 1113.657 2.343 8 8 0 012.343 13.657zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z"></path></svg>',ws='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 16A8 8 0 108 0a8 8 0 000 16zm2.33-11.5c-1.22 0-1.83.5-2.323 1.136C7.513 5 6.903 4.5 5.682 4.5c-1.028 0-2.169.784-2.169 2.5 0 1.499 1.493 3.433 3.246 4.517.52.321.89.479 1.248.484.357-.005.728-.163 1.247-.484C11.007 10.433 12.5 8.5 12.5 7c0-1.716-1.14-2.5-2.17-2.5z"></path></svg>',Mh='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 16A8 8 0 108 0a8 8 0 000 16zM4 5a1 1 0 011-1h6a1 1 0 011 1v5a1 1 0 01-1 1H8.707l-1.853 1.854A.5.5 0 016 12.5V11H5a1 1 0 01-1-1V5z"></path></svg>',Ch=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-3641,-31)">
        <g transform="matrix(1,0,0,1,-0.831706,0)">
            <g id="icon-heart-circle-clicked">
                <g transform="matrix(3.03726,0,0,3.03726,3642.35,31.6476)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16Z" style="fill:rgb(244,67,54);"/>
                </g>
                <g transform="matrix(3.03726,0,0,3.03726,3642.35,31.6476)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16ZM10.33,4.5C9.11,4.5 8.5,5 8.007,5.636C7.513,5 6.903,4.5 5.682,4.5C4.654,4.5 3.513,5.284 3.513,7C3.513,8.499 5.006,10.433 6.759,11.517C7.279,11.838 7.649,11.996 8.007,12.001C8.364,11.996 8.735,11.838 9.254,11.517C11.007,10.433 12.5,8.5 12.5,7C12.5,5.284 11.36,4.5 10.33,4.5Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,Vh=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-3843,-44)">
        <g transform="matrix(1,0,0,1,-0.831706,0)">
            <g id="icon-note-circle-clicked" transform="matrix(1,0,0,1,-0.0850173,-0.438976)">
                <g transform="matrix(1,0,0,1,3843.92,44.439)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16Z" style="fill:hsl(123,46.2%,33.53%);"/>
                </g>
                <g transform="matrix(1,0,0,1,3843.92,44.439)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16ZM4,5C4,4.451 4.451,4 5,4L11,4C11.549,4 12,4.451 12,5L12,10C12,10.549 11.549,11 11,11L8.707,11L6.854,12.854C6.76,12.948 6.633,13.001 6.5,13.001C6.226,13.001 6,12.775 6,12.501L6,11L5,11C4.451,11 4,10.549 4,10L4,5Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`;const xe="src/components/tree-window/PinnedTreeWindow.svelte";function Dh(e){let t;const n={c:function(){t=V("div"),x(t,"class","svg-icon s-YWFeNV-ftNdK"),C(t,xe,363,10,10147)},m:function(i,s){fe(i,t,s),t.innerHTML=ws},p:de,d:function(i){i&&oe(t)}};return re("SvelteRegisterBlock",{block:n,id:Dh.name,type:"else",source:"(363:8) {:else}",ctx:e}),n}function Ah(e){let t;const n={c:function(){t=V("div"),x(t,"class","svg-icon icon-heart s-YWFeNV-ftNdK"),he(t,"play-animation",!1),C(t,xe,359,10,9998)},m:function(i,s){fe(i,t,s),t.innerHTML=Ch},p:de,d:function(i){i&&oe(t)}};return re("SvelteRegisterBlock",{block:n,id:Ah.name,type:"if",source:"(359:8) {#if pinnedTreeWindow?.pinnedTree.isFav}",ctx:e}),n}function Lh(e){let t;const n={c:function(){t=V("div"),x(t,"class","svg-icon s-YWFeNV-ftNdK"),C(t,xe,382,10,10625)},m:function(i,s){fe(i,t,s),t.innerHTML=Vh},p:de,d:function(i){i&&oe(t)}};return re("SvelteRegisterBlock",{block:n,id:Lh.name,type:"else",source:"(382:8) {:else}",ctx:e}),n}function Hh(e){let t;const n={c:function(){t=V("div"),x(t,"class","svg-icon s-YWFeNV-ftNdK"),C(t,xe,378,10,10524)},m:function(i,s){fe(i,t,s),t.innerHTML=Mh},p:de,d:function(i){i&&oe(t)}};return re("SvelteRegisterBlock",{block:n,id:Hh.name,type:"if",source:"(378:8) {#if pinnedTreeWindow?.pinnedTree.note === ''}",ctx:e}),n}function La(e){let t,n,r;const i={c:function(){t=V("textarea"),x(t,"class","note-window-input s-YWFeNV-ftNdK"),x(t,"name","note-input"),x(t,"placeholder","Leave a comment."),C(t,xe,393,14,10964)},m:function(a,o){fe(a,t,o),mi(t,e[1].pinnedTree.note),n||(r=[ae(t,"input",e[11],!1,!1,!1),ae(t,"input",e[12])],n=!0)},p:function(a,o){o&2&&mi(t,a[1].pinnedTree.note)},d:function(a){a&&oe(t),n=!1,He(r)}};return re("SvelteRegisterBlock",{block:i,id:La.name,type:"if",source:"(393:12) {#if pinnedTreeWindow !== null}",ctx:e}),i}function Ha(e){var le,_e;let t,n,r,i,s,a=((le=e[1])==null?void 0:le.pinnedTree.treeID)+"",o,u,l,c,h=((_e=e[1])==null?void 0:_e.pinnedTree.treeMetric)+"",f,p,y,d,g,m,b,w,S,k,F,R,A,H,Y,N,D,E,v,T,M,P,W,z,G,U,Z,Q,K,J;function j(ve,X){var se;return(se=ve[1])!=null&&se.pinnedTree.isFav?Ah:Dh}let ne=j(e),ue=ne(e);function q(ve,X){var se;return((se=ve[1])==null?void 0:se.pinnedTree.note)===""?Hh:Lh}let ee=q(e),ie=ee(e),O=e[1]!==null&&La(e);const ge={c:function(){var X,se,Re,Te,ot,pt;t=V("div"),n=V("div"),r=V("div"),i=V("span"),s=pe("Tree "),o=pe(a),u=B(),l=V("span"),c=pe("("),f=pe(h),p=pe(")"),d=B(),g=V("div"),m=V("div"),ue.c(),b=B(),w=V("div"),ie.c(),S=B(),k=V("div"),F=V("div"),O&&O.c(),R=B(),A=V("div"),H=V("div"),Y=B(),N=V("div"),D=Qt("svg"),E=B(),v=V("div"),T=V("button"),M=V("label"),P=pe("Scaled by sample size"),z=B(),G=V("div"),x(i,"class","tree-name s-YWFeNV-ftNdK"),C(i,xe,342,6,9504),x(l,"class","tree-acc s-YWFeNV-ftNdK"),C(l,xe,346,6,9601),x(r,"class","tree-info s-YWFeNV-ftNdK"),x(r,"title",y=`Tree ${(X=e[1])==null?void 0:X.pinnedTree.treeID} - Accuracy ${(se=e[1])==null?void 0:se.pinnedTree.treeMetric}`),C(r,xe,338,4,9349),x(m,"class","control-fav s-YWFeNV-ftNdK"),x(m,"title","Add to my favorites"),C(m,xe,352,6,9743),x(F,"class","input-wrapper s-YWFeNV-ftNdK"),C(F,xe,388,10,10794),x(k,"class","note-window s-YWFeNV-ftNdK"),x(k,"title",""),he(k,"show",!1),C(k,xe,387,8,10730),x(w,"class","control-note s-YWFeNV-ftNdK"),x(w,"title","Leave a comment"),C(w,xe,369,6,10257),x(H,"class","svg-icon s-YWFeNV-ftNdK"),C(H,xe,411,8,11496),x(A,"class","control-close s-YWFeNV-ftNdK"),x(A,"title","Close the window"),C(A,xe,405,6,11293),x(g,"class","control-buttons s-YWFeNV-ftNdK"),C(g,xe,351,4,9707),x(n,"class","tree-header s-YWFeNV-ftNdK"),C(n,xe,333,2,9191),x(D,"class","tree-svg s-YWFeNV-ftNdK"),C(D,xe,422,4,11706),x(N,"class","content s-YWFeNV-ftNdK"),C(N,xe,418,2,11604),x(M,"class","switch-label s-YWFeNV-ftNdK"),x(M,"for",W=`switch-${(Re=e[1])==null?void 0:Re.pinnedTree.treeID}`),C(M,xe,432,6,11992),x(G,"class","switch-track s-YWFeNV-ftNdK"),x(G,"id",U=`switch-${(Te=e[1])==null?void 0:Te.pinnedTree.treeID}`),C(G,xe,437,6,12142),x(T,"class","switch s-YWFeNV-ftNdK"),x(T,"aria-checked",Z=e[2]?"true":"false"),x(T,"title","Toggle to visualize sample size as node width"),C(T,xe,426,4,11776),x(v,"class","control-footer s-YWFeNV-ftNdK"),C(v,xe,425,2,11743),x(t,"class","pinned-tree-window s-YWFeNV-ftNdK"),x(t,"style",Q=(ot=e[1])==null?void 0:ot.getStyle()),he(t,"hidden",(pt=e[1])==null?void 0:pt.hidden),he(t,"jiggle",!1),C(t,xe,326,0,9025)},l:function(X){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(X,se){fe(X,t,se),_(t,n),_(n,r),_(r,i),_(i,s),_(i,o),_(r,u),_(r,l),_(l,c),_(l,f),_(l,p),_(n,d),_(n,g),_(g,m),ue.m(m,null),_(g,b),_(g,w),ie.m(w,null),_(w,S),_(w,k),_(k,F),O&&O.m(F,null),_(g,R),_(g,A),_(A,H),H.innerHTML=Th,_(t,Y),_(t,N),_(N,D),_(t,E),_(t,v),_(v,T),_(T,M),_(M,P),_(T,z),_(T,G),e[21](t),K||(J=[ae(m,"click",e[9],!1,!1,!1),ae(m,"mousedown",e[10],!1,!1,!1),ae(F,"click",e[13],!1,!1,!1),ae(w,"click",e[14],!1,!1,!1),ae(w,"mousedown",P2,!1,!1,!1),ae(A,"click",e[15],!1,!1,!1),ae(A,"mousedown",e[16],!1,!1,!1),ae(n,"mousedown",e[17],!1,!1,!1),ae(n,"click",e[18],!1,!1,!1),ae(N,"mousedown",e[19],!1,!1,!1),ae(T,"click",e[20],!1,!1,!1)],K=!0)},p:function(X,[se]){var Re,Te,ot,pt,sn,Rn,qe,an;se&2&&a!==(a=((Re=X[1])==null?void 0:Re.pinnedTree.treeID)+"")&&Ce(o,a),se&2&&h!==(h=((Te=X[1])==null?void 0:Te.pinnedTree.treeMetric)+"")&&Ce(f,h),se&2&&y!==(y=`Tree ${(ot=X[1])==null?void 0:ot.pinnedTree.treeID} - Accuracy ${(pt=X[1])==null?void 0:pt.pinnedTree.treeMetric}`)&&x(r,"title",y),ne===(ne=j(X))&&ue?ue.p(X,se):(ue.d(1),ue=ne(X),ue&&(ue.c(),ue.m(m,null))),ee===(ee=q(X))&&ie?ie.p(X,se):(ie.d(1),ie=ee(X),ie&&(ie.c(),ie.m(w,S))),X[1]!==null?O?O.p(X,se):(O=La(X),O.c(),O.m(F,null)):O&&(O.d(1),O=null),se&2&&W!==(W=`switch-${(sn=X[1])==null?void 0:sn.pinnedTree.treeID}`)&&x(M,"for",W),se&2&&U!==(U=`switch-${(Rn=X[1])==null?void 0:Rn.pinnedTree.treeID}`)&&x(G,"id",U),se&4&&Z!==(Z=X[2]?"true":"false")&&x(T,"aria-checked",Z),se&2&&Q!==(Q=(qe=X[1])==null?void 0:qe.getStyle())&&x(t,"style",Q),se&2&&he(t,"hidden",(an=X[1])==null?void 0:an.hidden)},i:de,o:de,d:function(X){X&&oe(t),ue.d(),ie.d(),O&&O.d(),e[21](null),K=!1,He(J)}};return re("SvelteRegisterBlock",{block:ge,id:Ha.name,type:"component",source:"",ctx:e}),ge}const P2=e=>{e.stopPropagation()};function I2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("PinnedTreeWindow",r,[]);let{pinnedTree:s=null}=t,{pinnedTreeStore:a=null}=t,{favoritesStore:o=null}=t,u=null,l=!1,c=null,h=!1,f=!1;localStorage.getItem("initSwitchChecked")==="true"&&(f=!0),ke(()=>{n(7,l=!0)}),bi(()=>{c==null||c.pinnedTreeStoreUnsubscriber(),c==null||c.favoritesStoreUnsubscriber()});const p=()=>{n(1,c)},y=()=>{n(8,h=!0),u&&s&&a&&o&&n(1,c=new pc({component:u,pinnedTree:s,pinnedTreeStore:a,favoritesStore:o,pinnedTreeWindowUpdated:p,initSwitchChecked:f}))},d=v=>{v.stopPropagation(),o==null||o.update(T=>T)},g=["pinnedTree","pinnedTreeStore","favoritesStore"];Object.keys(t).forEach(v=>{!~g.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&console.warn(`<PinnedTreeWindow> was created with unknown prop '${v}'`)});const m=v=>c==null?void 0:c.heartClicked(v),b=v=>c==null?void 0:c.cancelEvent(v),w=v=>d(v);function S(){c.pinnedTree.note=this.value,n(1,c)}const k=v=>c==null?void 0:c.cancelEvent(v),F=v=>c==null?void 0:c.noteClicked(v),R=v=>c==null?void 0:c.closeClicked(v),A=v=>c==null?void 0:c.cancelEvent(v),H=v=>c==null?void 0:c.headerMousedownHandler(v),Y=v=>c==null?void 0:c.cancelEvent(v),N=v=>c==null?void 0:c.contentMousedownHandler(v),D=v=>c==null?void 0:c.switchToggled(v);function E(v){Oe[v?"unshift":"push"](()=>{u=v,n(0,u)})}return e.$$set=v=>{"pinnedTree"in v&&n(4,s=v.pinnedTree),"pinnedTreeStore"in v&&n(5,a=v.pinnedTreeStore),"favoritesStore"in v&&n(6,o=v.favoritesStore)},e.$capture_state=()=>({onMount:ke,onDestroy:bi,PinnedTreeWindow:pc,iconCloseCircle:Th,iconHeartCircle:ws,iconNoteCircle:Mh,iconHeartCircleClicked:Ch,iconNoteCircleClicked:Vh,pinnedTree:s,pinnedTreeStore:a,favoritesStore:o,component:u,mounted:l,pinnedTreeWindow:c,initialized:h,initSwitchChecked:f,pinnedTreeWindowUpdated:p,initView:y,noteChanged:d}),e.$inject_state=v=>{"pinnedTree"in v&&n(4,s=v.pinnedTree),"pinnedTreeStore"in v&&n(5,a=v.pinnedTreeStore),"favoritesStore"in v&&n(6,o=v.favoritesStore),"component"in v&&n(0,u=v.component),"mounted"in v&&n(7,l=v.mounted),"pinnedTreeWindow"in v&&n(1,c=v.pinnedTreeWindow),"initialized"in v&&n(8,h=v.initialized),"initSwitchChecked"in v&&n(2,f=v.initSwitchChecked)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&497&&s&&l&&u&&a&&o&&!h&&y()},[u,c,f,d,s,a,o,l,h,m,b,w,S,k,F,R,A,H,Y,N,D,E]}class Fh extends at{constructor(t){super(t);it(this,t,I2,Ha,Xe,{pinnedTree:4,pinnedTreeStore:5,favoritesStore:6}),re("SvelteRegisterComponent",{component:this,tagName:"PinnedTreeWindow_1",options:t,id:Ha.name})}get pinnedTree(){throw new Error("<PinnedTreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTree(t){throw new Error("<PinnedTreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<PinnedTreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<PinnedTreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get favoritesStore(){throw new Error("<PinnedTreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<PinnedTreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var Ji,Nh;class gc{constructor({favTree:t,component:n,textAreaNode:r,favoritesStore:i,pinnedTreeStore:s}){ce(this,Ji);L(this,"favTree");L(this,"textAreaNode");L(this,"favoritesStore");L(this,"favoritesStoreValue");L(this,"favoritesStoreUnsubscriber");L(this,"pinnedTreeStore");L(this,"pinnedTreeStoreValue");L(this,"PinnedTreeStoreValueUnsubscriber");L(this,"svg");L(this,"padding");L(this,"width");L(this,"height");L(this,"adjustTextAreaHeight",async()=>{await oo(),this.textAreaNode.style.removeProperty("height"),this.textAreaNode.style.height=`${this.textAreaNode.scrollHeight}px`});L(this,"noteChanged",t=>{t.stopPropagation(),this.favTree.pinnedTreeUpdated(),this.adjustTextAreaHeight()});L(this,"deleteClicked",t=>{t.preventDefault(),t.stopPropagation();let n=-1;for(let a=0;a<this.pinnedTreeStoreValue.pinnedTrees.length;a++)if(this.pinnedTreeStoreValue.pinnedTrees[a].treeID===this.favTree.pinnedTree.treeID){n=a;break}const r=this.pinnedTreeStoreValue.pinnedTrees[n];r.isPinned?r.isFav=!1:this.pinnedTreeStoreValue.pinnedTrees.splice(n,1),this.pinnedTreeStore.set(this.pinnedTreeStoreValue);const s=[...this.favoritesStoreValue.favTrees.map(a=>a.pinnedTree.treeID)].indexOf(this.favTree.pinnedTree.treeID);s>-1&&this.favoritesStoreValue.favTrees.splice(s,1),this.favoritesStore.set(this.favoritesStoreValue)});L(this,"thumbnailClicked",t=>{t.preventDefault(),t.stopPropagation();for(let n=0;n<this.pinnedTreeStoreValue.pinnedTrees.length;n++){const r=this.pinnedTreeStoreValue.pinnedTrees[n];if(r.treeID===this.favTree.pinnedTree.treeID){if(r.isPinned)r.jiggle();else{const i=this.svg.node().getBoundingClientRect(),s={x:i.left,y:i.top,width:i.width,height:i.height};r.startPos=s,r.isPinned=!0,this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}break}}});this.favTree=t,this.textAreaNode=r,this.favoritesStore=i,this.favoritesStoreValue=Mn(),this.favoritesStoreUnsubscriber=this.favoritesStore.subscribe(u=>{this.favoritesStoreValue=u,this.favoritesStoreValue.shown&&this.adjustTextAreaHeight()}),this.pinnedTreeStore=s,this.pinnedTreeStoreValue=Vn(),this.PinnedTreeStoreValueUnsubscriber=this.pinnedTreeStore.subscribe(u=>{this.pinnedTreeStoreValue=u});const a=70,o=70;this.svg=I.select(n).select("svg.tree-svg").attr("width",a).attr("height",o).attr("viewbox",`0 0 ${a} ${o}`).attr("preserveAspectRatio","none"),this.padding={top:10,bottom:10,left:0,right:0},this.width=a-this.padding.left-this.padding.right,this.height=o-this.padding.top-this.padding.bottom,te(this,Ji,Nh).call(this)}}Ji=new WeakSet,Nh=function(){const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=I.hierarchy(this.favTree.pinnedTree.tree,c=>c.c),r=4,i=4,s=I.tree().size([this.width,this.height])(n);t.append("g").attr("class","link-group").selectAll("path.link").data(s.links()).join("path").attr("class",c=>`link link-${c.source.data.f[0]}`).attr("id",c=>{const h=c.source.ancestors().length>1?c.source.ancestors()[1].data.f[0]:"r",f=c.source.data.f[0],p=c.target.data.f[0];return c.target.data.f[0]==="+"?`link-${h}-${f}-p`:c.target.data.f[0]==="-"?`link-${h}-${f}-n`:`link-${h}-${f}-${p}`}).attr("d",c=>I.line()([[c.source.x,c.source.y],[c.target.x,c.target.y]]));const u=t.append("g").attr("class","node-group").selectAll("g").data(s.descendants()).join("g").attr("class","node").attr("transform",c=>`translate(${c.x}, ${c.y})`),l=new Set(["-","+"]);u.filter(c=>!l.has(c.data.f[0])).append("circle").attr("r",r).style("fill",c=>this.favTree.getFeatureColor(c.data.f[0])),u.filter(c=>l.has(c.data.f[0])).append("rect").attr("x",-i).attr("y",-i).attr("rx",1).attr("ry",1).attr("width",2*i).attr("height",2*i),u.filter(c=>l.has(c.data.f[0])).append("text").attr("dy",.5).text(c=>c.data.f[0])};var Ph='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="40"/><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="40" d="M80 112h352"/><path d="M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="40"/></svg>';const tt="src/components/favorites-panel/FavoritesRow.svelte";function Fa(e){let t,n,r;const i={c:function(){t=V("textarea"),x(t,"class","note-window-input s-Su409VPrjAJA"),x(t,"name","note-input"),x(t,"placeholder","Leave a comment."),C(t,tt,161,8,4362)},m:function(a,o){fe(a,t,o),e[10](t),mi(t,e[0].pinnedTree.note),n||(r=[ae(t,"input",e[11],!1,!1,!1),ae(t,"input",e[12])],n=!0)},p:function(a,o){o&1&&mi(t,a[0].pinnedTree.note)},d:function(a){a&&oe(t),e[10](null),n=!1,He(r)}};return re("SvelteRegisterBlock",{block:i,id:Fa.name,type:"if",source:"(161:6) {#if favTree !== null}",ctx:e}),i}function Na(e){var N,D;let t,n,r,i,s,a,o,u,l,c=((N=e[3])==null?void 0:N.favTree.pinnedTree.treeID)+"",h,f,p,y,d=((D=e[3])==null?void 0:D.favTree.pinnedTree.treeMetric)+"",g,m,b,w,S,k,F,R,A,H=e[0]!==null&&Fa(e);const Y={c:function(){t=V("div"),n=V("div"),r=Qt("svg"),i=B(),s=V("div"),a=V("div"),o=V("div"),u=V("span"),l=pe("Tree "),h=pe(c),f=B(),p=V("span"),y=pe("("),g=pe(d),m=pe(")"),b=B(),w=V("div"),S=V("div"),k=B(),F=V("div"),H&&H.c(),x(r,"class","tree-svg s-Su409VPrjAJA"),C(r,tt,138,4,3714),x(n,"class","tree-left s-Su409VPrjAJA"),C(n,tt,137,2,3686),x(u,"class","tree-name s-Su409VPrjAJA"),C(u,tt,144,8,3896),x(p,"class","tree-metric s-Su409VPrjAJA"),C(p,tt,147,8,4001),x(o,"class","tree-info-left s-Su409VPrjAJA"),C(o,tt,143,6,3859),x(S,"class","svg-icon s-Su409VPrjAJA"),C(S,tt,153,8,4159),x(w,"class","tree-info-right s-Su409VPrjAJA"),C(w,tt,152,6,4121),x(a,"class","tree-info s-Su409VPrjAJA"),C(a,tt,142,4,3829),x(F,"class","tree-note s-Su409VPrjAJA"),C(F,tt,159,4,4301),x(s,"class","tree-right s-Su409VPrjAJA"),C(s,tt,141,2,3800),x(t,"class","tree s-Su409VPrjAJA"),C(t,tt,136,0,3643)},l:function(v){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(v,T){fe(v,t,T),_(t,n),_(n,r),_(t,i),_(t,s),_(s,a),_(a,o),_(o,u),_(u,l),_(u,h),_(o,f),_(o,p),_(p,y),_(p,g),_(p,m),_(a,b),_(a,w),_(w,S),S.innerHTML=Ph,_(s,k),_(s,F),H&&H.m(F,null),e[13](t),R||(A=[ae(r,"click",e[8],!1,!1,!1),ae(S,"click",e[9],!1,!1,!1)],R=!0)},p:function(v,[T]){var M,P;T&8&&c!==(c=((M=v[3])==null?void 0:M.favTree.pinnedTree.treeID)+"")&&Ce(h,c),T&8&&d!==(d=((P=v[3])==null?void 0:P.favTree.pinnedTree.treeMetric)+"")&&Ce(g,d),v[0]!==null?H?H.p(v,T):(H=Fa(v),H.c(),H.m(F,null)):H&&(H.d(1),H=null)},i:de,o:de,d:function(v){v&&oe(t),H&&H.d(),e[13](null),R=!1,He(A)}};return re("SvelteRegisterBlock",{block:Y,id:Na.name,type:"component",source:"",ctx:e}),Y}function R2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("FavoritesRow",r,[]);let{favTree:s=null}=t,{favoritesStore:a=null}=t,{pinnedTreeStore:o=null}=t,u=null,l=null,c=!1,h=!1,f=null;ke(()=>{n(6,c=!0)}),bi(()=>{f==null||f.favoritesStoreUnsubscriber(),f==null||f.PinnedTreeStoreValueUnsubscriber()});const p=()=>{s&&l&&u&&a&&o&&n(3,f=new gc({favTree:s,component:u,textAreaNode:l,favoritesStore:a,pinnedTreeStore:o})),n(7,h=!0)},y=["favTree","favoritesStore","pinnedTreeStore"];Object.keys(t).forEach(k=>{!~y.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&console.warn(`<FavoritesRow> was created with unknown prop '${k}'`)});const d=k=>f==null?void 0:f.thumbnailClicked(k),g=k=>f==null?void 0:f.deleteClicked(k);function m(k){Oe[k?"unshift":"push"](()=>{l=k,n(2,l)})}const b=k=>f.noteChanged(k);function w(){s.pinnedTree.note=this.value,n(0,s)}function S(k){Oe[k?"unshift":"push"](()=>{u=k,n(1,u)})}return e.$$set=k=>{"favTree"in k&&n(0,s=k.favTree),"favoritesStore"in k&&n(4,a=k.favoritesStore),"pinnedTreeStore"in k&&n(5,o=k.pinnedTreeStore)},e.$capture_state=()=>({FavoritesRow:gc,onMount:ke,onDestroy:bi,deleteIcon:Ph,favTree:s,favoritesStore:a,pinnedTreeStore:o,component:u,textAreaNode:l,mounted:c,initialized:h,favoriteRow:f,initView:p}),e.$inject_state=k=>{"favTree"in k&&n(0,s=k.favTree),"favoritesStore"in k&&n(4,a=k.favoritesStore),"pinnedTreeStore"in k&&n(5,o=k.pinnedTreeStore),"component"in k&&n(1,u=k.component),"textAreaNode"in k&&n(2,l=k.textAreaNode),"mounted"in k&&n(6,c=k.mounted),"initialized"in k&&n(7,h=k.initialized),"favoriteRow"in k&&n(3,f=k.favoriteRow)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&247&&s&&l&&u&&a&&o&&c&&!h&&p()},[s,u,l,f,a,o,c,h,d,g,m,b,w,S]}class Ih extends at{constructor(t){super(t);it(this,t,R2,Na,Xe,{favTree:0,favoritesStore:4,pinnedTreeStore:5}),re("SvelteRegisterComponent",{component:this,tagName:"FavoritesRow_1",options:t,id:Na.name})}get favTree(){throw new Error("<FavoritesRow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favTree(t){throw new Error("<FavoritesRow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get favoritesStore(){throw new Error("<FavoritesRow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<FavoritesRow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<FavoritesRow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<FavoritesRow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const mc=(e,t)=>{e.stopPropagation(),e.preventDefault();const n=JSON.parse(JSON.stringify(t.favTrees)),r=[];n.forEach(i=>{delete i.getFeatureColor,delete i.pinnedTreeUpdated,delete i.pinnedTree.isPinned,delete i.pinnedTree.isFav,delete i.pinnedTree.jiggle,delete i.pinnedTree.x,delete i.pinnedTree.y,delete i.pinnedTree.startPos,r.push(i.pinnedTree)}),r2(r,null,"favorite-trees.json")};function Rh(e,{from:t,to:n},r={}){const i=getComputedStyle(e),s=i.transform==="none"?"":i.transform,[a,o]=i.transformOrigin.split(" ").map(parseFloat),u=t.left+t.width*a/n.width-(n.left+a),l=t.top+t.height*o/n.height-(n.top+o),{delay:c=0,duration:h=p=>Math.sqrt(p)*120,easing:f=Wc}=r;return{delay:c,duration:hs(h)?h(Math.sqrt(u*u+l*l)):h,easing:f,css:(p,y)=>{const d=y*u,g=y*l,m=p+y*t.width/n.width,b=p+y*t.height/n.height;return`transform: ${s} translate(${d}px, ${g}px) scale(${m}, ${b});`}}}var vs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path></svg>',Eh='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z"></path></svg>';const nt="src/components/favorites-panel/FavoritesPanel.svelte";function $r(e,t,n){const r=e.slice();return r[11]=t[n],r}function Pa(e){let t,n,r,i;const s=[Oh,Wh],a=[];function o(l,c){return l[5].favTrees.length===0?0:1}t=o(e),n=a[t]=s[t](e);const u={c:function(){n.c(),r=ea()},m:function(c,h){a[t].m(c,h),fe(c,r,h),i=!0},p:function(c,h){let f=t;t=o(c),t===f?a[t].p(c,h):(It(),be(a[f],1,1,()=>{a[f]=null}),Rt(),n=a[t],n?n.p(c,h):(n=a[t]=s[t](c),n.c()),ye(n,1),n.m(r.parentNode,r))},i:function(c){i||(ye(n),i=!0)},o:function(c){be(n),i=!1},d:function(c){a[t].d(c),c&&oe(r)}};return re("SvelteRegisterBlock",{block:u,id:Pa.name,type:"if",source:"(166:2) {#if initialized}",ctx:e}),u}function Wh(e){let t,n=[],r=new Map,i,s=e[5].favTrees;Be(s);const a=u=>u[11].pinnedTree.treeID;_i(e,s,$r,a);for(let u=0;u<s.length;u+=1){let l=$r(e,s,u),c=a(l);r.set(c,n[u]=Ia(c,l))}const o={c:function(){t=V("div");for(let l=0;l<n.length;l+=1)n[l].c();x(t,"class","tree-list s-3FYkPUvX2_k2"),C(t,nt,175,6,4710)},m:function(l,c){fe(l,t,c);for(let h=0;h<n.length;h+=1)n[h].m(t,null);i=!0},p:function(l,c){if(c&35){s=l[5].favTrees,Be(s),It();for(let h=0;h<n.length;h+=1)n[h].r();_i(l,s,$r,a),n=Ec(n,c,a,1,l,s,r,t,Hf,Ia,null,$r);for(let h=0;h<n.length;h+=1)n[h].a();Rt()}},i:function(l){if(!i){for(let c=0;c<s.length;c+=1)ye(n[c]);i=!0}},o:function(l){for(let c=0;c<n.length;c+=1)be(n[c]);i=!1},d:function(l){l&&oe(t);for(let c=0;c<n.length;c+=1)n[c].d()}};return re("SvelteRegisterBlock",{block:o,id:Wh.name,type:"else",source:"(175:4) {:else}",ctx:e}),o}function Oh(e){let t,n,r,i,s;const a={c:function(){t=V("div"),n=V("div"),r=pe("Click the heart button "),i=V("span"),s=pe(" on tree windows to add favorite trees."),x(i,"class","svg-icon s-3FYkPUvX2_k2"),C(i,nt,169,33,4549),x(n,"class","tree-placeholder-text s-3FYkPUvX2_k2"),C(n,nt,168,8,4480),x(t,"class","tree-placeholder s-3FYkPUvX2_k2"),C(t,nt,167,6,4441)},m:function(u,l){fe(u,t,l),_(t,n),_(n,r),_(n,i),i.innerHTML=ws,_(n,s)},p:de,i:de,o:de,d:function(u){u&&oe(t)}};return re("SvelteRegisterBlock",{block:a,id:Oh.name,type:"if",source:"(167:4) {#if favoritesStoreValue.favTrees.length === 0}",ctx:e}),a}function Ia(e,t){let n,r,i,s,a,o=de,u;r=new Ih({props:{favTree:t[11],favoritesStore:t[0],pinnedTreeStore:t[1]},$$inline:!0});const l={key:e,first:null,c:function(){n=V("div"),rt(r.$$.fragment),i=B(),x(n,"class","tree-wrapper s-3FYkPUvX2_k2"),C(n,nt,177,10,4828),this.first=n},m:function(h,f){fe(h,n,f),Qe(r,n,null),_(n,i),u=!0},p:function(h,f){t=h;const p={};f&32&&(p.favTree=t[11]),f&1&&(p.favoritesStore=t[0]),f&2&&(p.pinnedTreeStore=t[1]),r.$set(p)},r:function(){a=n.getBoundingClientRect()},f:function(){Df(n),o(),Ac(n,a)},a:function(){o(),o=Vf(n,a,Rh,{duration:300})},i:function(h){u||(ye(r.$$.fragment,h),s&&s.end(1),u=!0)},o:function(h){be(r.$$.fragment,h),s=lo(n,Vr,{duration:200}),u=!1},d:function(h){h&&oe(n),Ke(r),h&&s&&s.end()}};return re("SvelteRegisterBlock",{block:l,id:Ia.name,type:"each",source:"(177:8) {#each favoritesStoreValue.favTrees as favTree (favTree.pinnedTree.treeID)}",ctx:t}),l}function Ra(e){let t,n,r,i,s,a,o,u,l,c,h,f,p,y,d=e[3]&&Pa(e);const g={c:function(){t=V("div"),n=V("div"),r=V("div"),i=V("div"),i.textContent="My Favorite Trees",s=B(),a=V("div"),o=V("div"),u=B(),l=V("div"),c=B(),d&&d.c(),x(i,"class","title s-3FYkPUvX2_k2"),C(i,nt,150,6,3989),x(o,"class","svg-icon s-3FYkPUvX2_k2"),C(o,nt,152,8,4066),x(l,"class","svg-icon close-icon s-3FYkPUvX2_k2"),C(l,nt,158,8,4228),x(a,"class","icons s-3FYkPUvX2_k2"),C(a,nt,151,6,4038),x(r,"class","header-title s-3FYkPUvX2_k2"),C(r,nt,149,4,3956),x(n,"class","header s-3FYkPUvX2_k2"),C(n,nt,148,2,3931),x(t,"class","favorites-panel s-3FYkPUvX2_k2"),x(t,"style",h=`max-height: ${e[2]}px;`),he(t,"shown",e[5].shown),C(t,nt,142,0,3794)},l:function(b){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(b,w){fe(b,t,w),_(t,n),_(n,r),_(r,i),_(r,s),_(r,a),_(a,o),o.innerHTML=Eh,_(a,u),_(a,l),l.innerHTML=vs,_(t,c),d&&d.m(t,null),e[9](t),f=!0,p||(y=[ae(o,"click",e[8],!1,!1,!1),ae(l,"click",e[6],!1,!1,!1)],p=!0)},p:function(b,[w]){b[3]?d?(d.p(b,w),w&8&&ye(d,1)):(d=Pa(b),d.c(),ye(d,1),d.m(t,null)):d&&(It(),be(d,1,1,()=>{d=null}),Rt()),(!f||w&4&&h!==(h=`max-height: ${b[2]}px;`))&&x(t,"style",h),w&32&&he(t,"shown",b[5].shown)},i:function(b){f||(ye(d),f=!0)},o:function(b){be(d),f=!1},d:function(b){b&&oe(t),d&&d.d(),e[9](null),p=!1,He(y)}};return re("SvelteRegisterBlock",{block:g,id:Ra.name,type:"component",source:"",ctx:e}),g}function E2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("FavoritesPanel",r,[]);let{favoritesStore:s=null}=t,{pinnedTreeStore:a=null}=t,{width:o=650}=t,u=null,l=!1,c=!1,h=Mn();ke(()=>{n(7,l=!0)});const f=()=>{s&&a&&s.subscribe(m=>{n(5,h=m)}),n(3,c=!0)},p=m=>{m.stopPropagation(),m.preventDefault(),n(5,h.shown=!1,h),s==null||s.set(h)},y=["favoritesStore","pinnedTreeStore","width"];Object.keys(t).forEach(m=>{!~y.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<FavoritesPanel> was created with unknown prop '${m}'`)});const d=m=>mc(m,h);function g(m){Oe[m?"unshift":"push"](()=>{u=m,n(4,u)})}return e.$$set=m=>{"favoritesStore"in m&&n(0,s=m.favoritesStore),"pinnedTreeStore"in m&&n(1,a=m.pinnedTreeStore),"width"in m&&n(2,o=m.width)},e.$capture_state=()=>({FavoritesRow:Ih,downloadClicked:mc,getFavoritesStoreDefaultValue:Mn,onMount:ke,flip:Rh,fade:Vr,closeIcon:vs,downloadIcon:Eh,heartDemoIcon:ws,favoritesStore:s,pinnedTreeStore:a,width:o,component:u,mounted:l,initialized:c,favoritesStoreValue:h,initView:f,closeClicked:p}),e.$inject_state=m=>{"favoritesStore"in m&&n(0,s=m.favoritesStore),"pinnedTreeStore"in m&&n(1,a=m.pinnedTreeStore),"width"in m&&n(2,o=m.width),"component"in m&&n(4,u=m.component),"mounted"in m&&n(7,l=m.mounted),"initialized"in m&&n(3,c=m.initialized),"favoritesStoreValue"in m&&n(5,h=m.favoritesStoreValue)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&139&&s&&a&&l&&!c&&f()},[s,a,o,c,u,h,p,l,d,g]}class zh extends at{constructor(t){super(t);it(this,t,E2,Ra,Xe,{favoritesStore:0,pinnedTreeStore:1,width:2}),re("SvelteRegisterComponent",{component:this,tagName:"FavoritesPanel",options:t,id:Ra.name})}get favoritesStore(){throw new Error("<FavoritesPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<FavoritesPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<FavoritesPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<FavoritesPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<FavoritesPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(t){throw new Error("<FavoritesPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const ei=I.format(",.3~f"),Je=45,ti="slider-left-thumb",ni="slider-right-thumb",Jn=268,Qn=16,Ae=8,hn={default:6,original:6*1.8};var Qi,Gh,Ki,Yh,$i,Uh,Lt,dn,Tr,Ea,xn,pi,kn,gi,es,Bh,ts,jh,Ht,pn,Mr,Wa,ns,Xh,rs,qh,is,Zh,ss,Jh,as,Qh,os,Kh,ls,$h,cs,ef,Cr,Oa;class yc{constructor(t,n,r,i){ce(this,Qi);ce(this,Ki);ce(this,$i);ce(this,Lt);ce(this,Tr);ce(this,xn);ce(this,kn);ce(this,es);ce(this,ts);ce(this,Ht);ce(this,Mr);ce(this,ns);ce(this,rs);ce(this,is);ce(this,ss);ce(this,as);ce(this,os);ce(this,ls);ce(this,cs);ce(this,Cr);L(this,"component");L(this,"accuracyRow");L(this,"accuracySVG",null);L(this,"minSampleRow");L(this,"minSampleSVG",null);L(this,"heightRow");L(this,"heightSVG",null);L(this,"data");L(this,"treeMapMap");L(this,"accuracyDensities");L(this,"heightDensities");L(this,"minSampleDensities");L(this,"accuracyXScale");L(this,"accuracyYScale");L(this,"densityClip");L(this,"minSampleXScale");L(this,"minSampleYScale");L(this,"minSampleDensityClip");L(this,"heightXScale");L(this,"heightYScale");L(this,"searchStore");L(this,"searchStoreValue");L(this,"curAccuracyLow");L(this,"curAccuracyHigh");L(this,"accuracyLow");L(this,"accuracyHigh");L(this,"curMinSampleLow");L(this,"curMinSampleHigh");L(this,"minSampleLow");L(this,"minSampleHigh");L(this,"searchUpdated");L(this,"refreshAccuracy",()=>{te(this,Lt,dn).call(this,"slider-left-thumb",this.accuracyLow),te(this,Lt,dn).call(this,"slider-right-thumb",this.accuracyHigh)});L(this,"refreshMinSample",()=>{te(this,Ht,pn).call(this,"slider-left-thumb",this.minSampleLow),te(this,Ht,pn).call(this,"slider-right-thumb",this.minSampleHigh)});L(this,"refreshHeight",()=>{var t;for(const n of this.heightXScale.domain()){const r=I.select(this.component).select(`#height-checkbox-${n}`);r.property("checked")||((t=this.heightSVG)==null||t.select(`#bar-${n}`).classed("selected",!0),r.property("checked",!0),this.searchStoreValue.curHeightRange.add(n))}this.searchStore.set(this.searchStoreValue)});L(this,"refreshDepth",t=>{const n=I.select(this.component).select(`#level-row-${t} .level-content`),r=this.searchStoreValue.curDepthFeatures.get(t);if(r===void 0){console.warn(`Unknown depth ${t}`);return}for(const i of this.searchStoreValue.featureOrder){const s=n.select(`#depth-check-box-label-${t}-${i}`);s.property("checked")||(s.property("checked",!0),r.add(i))}this.searchStoreValue.curDepthFeatures.set(t,r),this.searchStore.set(this.searchStoreValue)});L(this,"refreshAllFeatures",()=>{const t=I.select(this.component).select("#level-row-0 .level-content"),n=this.searchStoreValue.curAllFeatures;for(const r of this.searchStoreValue.featureOrder){const i=t.select(`#depth-check-box-label-0-${r}`);i.property("checked")||(i.property("checked",!0),n.add(r))}this.searchStoreValue.curAllFeatures=n,this.searchStore.set(this.searchStoreValue)});L(this,"updatePlots",(t,n=!1)=>{var k,F,R;const r=[],i=[],s=new Map;if(this.searchStoreValue.treeHeightMap)for(const[A,H]of this.searchStoreValue.treeHeightMap)s.set(A,0);let a=1;this.searchStoreValue.treeHeightMap&&(a=this.searchStoreValue.treeHeightMap.size);const o=I.transition("updatePlot").duration(500);for(const A in this.data.treeMap){const H=parseInt(A);if(t.allFeature.has(H)&&t.depth.has(H)&&t.height.has(H)&&t.minSample.has(H)&&r.push(this.data.treeMap[A][2]),t.allFeature.has(H)&&t.depth.has(H)&&t.height.has(H)&&t.accuracy.has(H)&&this.searchStoreValue.treeMinSampleMap!==null&&i.push(this.searchStoreValue.treeMinSampleMap.get(H)),t.allFeature.has(H)&&t.depth.has(H)&&t.minSample.has(H)&&t.accuracy.has(H)&&this.searchStoreValue.treeHeightMap!==null){const Y=this.searchStoreValue.treeHeightMap.get(H),N=s.get(Y);s.set(Y,N+1)}}const u=50,l=I.bin().thresholds(u),c=l(r),h=[];if(c.forEach(A=>{h.push({x:A.x0===void 0?0:A.x0,y:A.length/a})}),h.length>2){const A=h[1].x-h[0].x;h.unshift({x:h[0].x-A,y:0}),h.push({x:h.slice(-1)[0].x+A,y:0})}const f=[];if(l(i).forEach(A=>{f.push({x:A.x0===void 0?0:A.x0,y:A.length/a})}),f.length>2){const A=f[1].x-f[0].x;f.unshift({x:Math.max(0,f[0].x-A),y:0}),f.push({x:f.slice(-1)[0].x+A,y:0})}const y=[];s.forEach((A,H)=>{y.push({x:H,y:A/a})}),y.sort((A,H)=>A.x-H.x);const d=(k=this.accuracySVG)==null?void 0:k.select("g.hist-group"),g=I.line().curve(I.curveBasis).x(A=>this.accuracyXScale(A.x)).y(A=>this.accuracyYScale(A.y));n?(d==null||d.select("path.area-path").datum(h).transition(o).attr("d",g),d==null||d.select("path.area-path.selected").datum(h).transition(o).attr("d",g)):(d==null||d.select("path.area-path").datum(h).attr("d",g),d==null||d.select("path.area-path.selected").datum(h).attr("d",g));const m=(F=this.minSampleSVG)==null?void 0:F.select("g.hist-group"),b=I.line().curve(I.curveBasis).x(A=>this.minSampleXScale(A.x)).y(A=>this.minSampleYScale(A.y));n?(m==null||m.select("path.area-path").datum(f).transition(o).attr("d",b),m==null||m.select("path.area-path.selected").datum(f).transition(o).attr("d",b)):(m==null||m.select("path.area-path").datum(f).attr("d",b),m==null||m.select("path.area-path.selected").datum(f).attr("d",b));const w=(R=this.heightSVG)==null?void 0:R.select("g.hist-group"),S=w==null?void 0:w.selectAll("g.bar").data(y);n?(S==null||S.select("rect").transition(o).attr("y",A=>this.heightYScale(A.y)).attr("height",A=>this.heightYScale(0)-this.heightYScale(A.y)),S==null||S.select("text").transition(o).attr("y",A=>this.heightYScale(A.y)-5)):(S==null||S.select("rect").attr("y",A=>this.heightYScale(A.y)).attr("height",A=>this.heightYScale(0)-this.heightYScale(A.y)),S==null||S.select("text").attr("y",A=>this.heightYScale(A.y)-5)),S==null||S.select("tspan").text(A=>`(${I.format(".0%")(A.y)})`),S==null||S.select("title").text(A=>`Height: ${A.x} (${I.format(".4%")(A.y)})`)});this.component=t,this.searchUpdated=r,this.searchStore=i,this.searchStoreValue=Cn(),this.searchStore.subscribe(a=>{this.searchStoreValue=a,this.searchUpdated()}),this.accuracyRow=I.select(t).select(".accuracy-row"),this.minSampleRow=I.select(t).select(".min-sample-row"),this.heightRow=I.select(t).select(".height-row"),this.curAccuracyLow=0,this.curAccuracyHigh=1,this.accuracyLow=0,this.accuracyHigh=1,this.curMinSampleLow=0,this.curMinSampleHigh=1,this.minSampleLow=0,this.minSampleHigh=1,this.data=n,this.treeMapMap=new Map,Object.keys(n.treeMap).forEach(a=>{this.treeMapMap.set(+a,n.treeMap[+a])});const s=te(this,Qi,Gh).call(this);this.accuracyDensities=s.accuracyDensities,this.heightDensities=s.heightDensities,this.minSampleDensities=s.minSampleDensities,this.accuracyXScale=I.scaleLinear(),this.accuracyYScale=I.scaleLinear(),this.densityClip=null,this.accuracySVG=te(this,Ki,Yh).call(this),te(this,$i,Uh).call(this),this.minSampleXScale=I.scaleLinear(),this.minSampleYScale=I.scaleLinear(),this.minSampleDensityClip=null,this.minSampleSVG=te(this,es,Bh).call(this),te(this,ts,jh).call(this),this.heightXScale=I.scaleBand(),this.heightYScale=I.scaleLinear(),this.heightSVG=te(this,is,Zh).call(this),te(this,ss,Jh).call(this),te(this,os,Kh).call(this),this.searchStoreValue.updatePlots=(a,o)=>{this.updatePlots(a,o)},this.searchStore.set(this.searchStoreValue)}}Qi=new WeakSet,Gh=function(){const t=[];for(const w in this.data.treeMap)t.push(this.data.treeMap[w][2]);const n=t.length,r=50,s=I.bin().thresholds(r)(t),a=[];s.forEach(w=>{a.push({x:w.x0===void 0?0:w.x0,y:w.length/n})});const o=a[1].x-a[0].x;a.unshift({x:a[0].x-o,y:0}),a.push({x:a.slice(-1)[0].x+o,y:0}),this.curAccuracyLow=a[0].x,this.curAccuracyHigh=a.slice(-1)[0].x,this.accuracyLow=this.curAccuracyLow,this.accuracyHigh=this.curAccuracyHigh;const u=new Map;I.hierarchy(this.data.trie,w=>w.c).eachBefore(w=>{if(w.data.t!==void 0){const S=w.data.t;u.has(S)?u.set(S,Math.max(u.get(S),w.depth)):u.set(S,w.depth)}});const c=new Map,h=new Map,f=[];for(const[w,S]of this.treeMapMap){const k=new Map,F=I.hierarchy(S[0],A=>A.c);let R=1/0;F.each(A=>{A.data.f[0]!=="+"&&A.data.f[0]!=="-"?k.has(A.depth+1)?k.get(A.depth+1).add(parseInt(A.data.f[0])):k.set(A.depth+1,new Set([parseInt(A.data.f[0])])):R=Math.min(R,A.data.f[1])}),c.set(w,k),h.set(w,R),f.push(R)}const p=new Map;Array.from(u.values()).forEach(w=>{p.has(w)?p.set(w,p.get(w)+1):p.set(w,1)});const y=[];p.forEach((w,S)=>{y.push({x:S,y:w/n})}),y.sort((w,S)=>w.x-S.x);const d=50,g=I.bin().thresholds(d)(f),m=[];g.forEach(w=>{m.push({x:w.x0===void 0?0:w.x0,y:w.length/n})});const b=m[1].x-m[0].x;return m.unshift({x:Math.max(0,m[0].x-b),y:0}),m.push({x:m.slice(-1)[0].x+b,y:0}),this.curMinSampleLow=m[0].x,this.curMinSampleHigh=m.slice(-1)[0].x,this.minSampleLow=this.curMinSampleLow,this.minSampleHigh=this.curMinSampleHigh,this.searchStoreValue.treeHeightMap=u,this.searchStoreValue.treeMinSampleMap=h,this.searchStoreValue.treeDepthFeaturesMap=c,this.searchStore.set(this.searchStoreValue),{accuracyDensities:a,heightDensities:y,minSampleDensities:m}},Ki=new WeakSet,Yh=function(){const t=Jn-Qn*2,n=30,r=15,i=Je+r+n,s=this.accuracyRow.select(".svg-accuracy").attr("width",t).attr("height",i),a={top:0,left:Ae,right:Ae,bottom:0,histTop:2},o=t-a.left-a.right;s.append("g").attr("class","border-group").attr("transform",`translate(${0}, ${a.top})`).append("rect").attr("width",t).attr("height",Je-a.top).style("fill","none").style("stroke",we.colors["gray-300"]);const u=s.append("g").attr("class","hist-group").attr("transform",`translate(${Ae}, ${a.top})`);this.accuracyXScale=I.scaleLinear().domain([this.accuracyDensities[0].x,this.accuracyDensities.slice(-1)[0].x]).range([0,o]);const l=Math.max(...this.accuracyDensities.map(k=>k.y));this.accuracyYScale=I.scaleLinear().domain([0,l]).range([Je-a.bottom-a.top,a.histTop]);const c=I.line().curve(I.curveBasis).x(k=>this.accuracyXScale(k.x)).y(k=>this.accuracyYScale(k.y)),f=u.append("path").attr("class","area-path").datum(this.accuracyDensities).attr("d",c).clone(!0).classed("selected",!0);this.densityClip=u.append("clipPath").attr("id","accuracy-density-clip").append("rect").style("fill","hsla(100, 50%, 50%, 0.1)").attr("x",this.accuracyXScale(this.curAccuracyLow)).attr("width",this.accuracyXScale(this.curAccuracyHigh)-this.accuracyXScale(this.curAccuracyLow)).attr("height",Je),f.attr("clip-path","url(#accuracy-density-clip)");const p=s.append("g").attr("class","tick-group").attr("transform",`translate(${Ae}, ${Je+r})`),y=p.append("g").attr("class","tick-back-group"),d=p.append("g").attr("class","tick-top-group"),g=30,m=[],b=this.accuracyDensities[1].x-this.accuracyDensities[0].x,w=this.accuracyLow+b,S=this.accuracyHigh;for(let k=0;k<=g;k++)m.push(w+(S-w)*k/g);return d.selectAll("g.tick").data(m).join("g").attr("class","tick").attr("transform",k=>`translate(${this.accuracyXScale(k)}, 0)`).append("line").attr("y2",hn.default),te(this,kn,gi).call(this),y.append("text").attr("class","label-min-value").attr("x",-4).attr("y",hn.default*2.2).style("text-anchor","start").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",we.colors["gray-500"]).text(ei(this.accuracyLow)),y.append("text").attr("class","label-max-value").attr("x",o+4).attr("y",hn.default*2.2).style("text-anchor","end").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",we.colors["gray-500"]).text(ei(this.accuracyHigh)),s},$i=new WeakSet,Uh=function(){te(this,Lt,dn).call(this,ti,this.curAccuracyLow),te(this,Lt,dn).call(this,ni,this.curAccuracyHigh),this.accuracyRow.select(`#${ti}`).on("mousedown",t=>te(this,Tr,Ea).call(this,t)),this.accuracyRow.select(`#${ni}`).on("mousedown",t=>te(this,Tr,Ea).call(this,t)),te(this,xn,pi).call(this)},Lt=new WeakSet,dn=function(t,n){switch(n=Math.min(Math.max(n,this.accuracyLow),this.accuracyHigh),t){case"slider-left-thumb":n=Math.min(this.curAccuracyHigh,n);break;case"slider-right-thumb":n=Math.max(this.curAccuracyLow,n);break;default:console.warn("Unknown thumb type in moveThumb()");break}const r=this.accuracyRow.select(`#${t}`).attr("data-curValue",n),i=Jn-2*Qn-2*Ae;let s=(n-this.accuracyLow)/(this.accuracyHigh-this.accuracyLow)*i;switch(t){case"slider-left-thumb":s-=Ae,this.curAccuracyLow=n,this.searchStoreValue.curAccuracyLow=this.curAccuracyLow;break;case"slider-right-thumb":this.curAccuracyHigh=n,this.searchStoreValue.curAccuracyHigh=this.curAccuracyHigh;break;default:console.warn("Unknown thumb type in moveThumb()");break}this.searchStore.set(this.searchStoreValue),r.style("left",`${s}px`),te(this,xn,pi).call(this),te(this,kn,gi).call(this),this.searchUpdated()},Tr=new WeakSet,Ea=function(t){t.preventDefault(),t.stopPropagation();const n=t.target;if(n===null||!n.id.includes("thumb"))return;const r=n.parentNode,i=r.getBoundingClientRect().width;n.focus();const s=o=>{o.preventDefault(),o.stopPropagation();const u=o.pageX-r.getBoundingClientRect().x,l=this.accuracyLow+(this.accuracyHigh-this.accuracyLow)*u/i;te(this,Lt,dn).call(this,n.id,l)},a=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a),document.body.style.cursor="default",n.blur()};document.addEventListener("mousemove",s),document.addEventListener("mouseup",a),document.body.style.cursor="grabbing"},xn=new WeakSet,pi=function(){const t=this.accuracyRow.select("#slider-left-thumb"),n=this.accuracyRow.select("#slider-right-thumb"),r=parseFloat(t.style("left")),s=parseFloat(n.style("left"))-r;this.accuracyRow.select(".track .range-track").style("left",`${r+Ae}px`).style("width",`${s}px`),this.densityClip!==null&&this.densityClip.attr("x",this.accuracyXScale(this.curAccuracyLow)).attr("width",this.accuracyXScale(this.curAccuracyHigh)-this.accuracyXScale(this.curAccuracyLow))},kn=new WeakSet,gi=function(){if(this.accuracySVG===null)return;const t=this.accuracySVG.select("g.tick-top-group").selectAll("g.tick");t.filter(n=>n>=this.curAccuracyLow&&n<=this.curAccuracyHigh).classed("out-range",!1),t.filter(n=>n<this.curAccuracyLow||n>this.curAccuracyHigh).classed("out-range",!0),this.curAccuracyHigh===this.curAccuracyLow&&this.accuracySVG.select("g.tick-top-group").selectAll("g.tick").classed("out-range",!0)},es=new WeakSet,Bh=function(){const t=Jn-Qn*2,n=30,r=15,i=Je+r+n,s=this.minSampleRow.select(".svg-min-sample").attr("width",t).attr("height",i),a={top:0,left:Ae,right:Ae,bottom:0,histTop:2},o=t-a.left-a.right;s.append("g").attr("class","border-group").attr("transform",`translate(${0}, ${a.top})`).append("rect").attr("width",t).attr("height",Je-a.top).style("fill","none").style("stroke",we.colors["gray-300"]);const u=s.append("g").attr("class","hist-group").attr("transform",`translate(${Ae}, ${a.top})`);this.minSampleXScale=I.scaleLinear().domain([this.minSampleDensities[0].x,this.minSampleDensities.slice(-1)[0].x]).range([0,o]);const l=Math.max(...this.minSampleDensities.map(k=>k.y));this.minSampleYScale=I.scaleLinear().domain([0,l]).range([Je-a.bottom-a.top,a.histTop]);const c=I.line().curve(I.curveBasis).x(k=>this.minSampleXScale(k.x)).y(k=>this.minSampleYScale(k.y)),f=u.append("path").attr("class","area-path").datum(this.minSampleDensities).attr("d",c).clone(!0).classed("selected",!0);this.minSampleDensityClip=u.append("clipPath").attr("id","min-sample-density-clip").append("rect").style("fill","hsla(100, 50%, 50%, 0.1)").attr("x",this.minSampleXScale(this.curMinSampleLow)).attr("width",this.minSampleXScale(this.curMinSampleHigh)-this.minSampleXScale(this.curMinSampleLow)).attr("height",Je),f.attr("clip-path","url(#min-sample-density-clip)");const p=s.append("g").attr("class","tick-group").attr("transform",`translate(${Ae}, ${Je+r})`),y=p.append("g").attr("class","tick-back-group"),d=p.append("g").attr("class","tick-top-group"),g=30,m=[],b=this.minSampleDensities[1].x-this.minSampleDensities[0].x,w=this.minSampleLow+b,S=this.minSampleHigh;for(let k=0;k<=g;k++)m.push(w+(S-w)*k/g);return d.selectAll("g.tick").data(m).join("g").attr("class","tick").attr("transform",k=>`translate(${this.minSampleXScale(k)}, 0)`).append("line").attr("y2",hn.default),te(this,kn,gi).call(this),y.append("text").attr("class","label-min-value").attr("x",-4).attr("y",hn.default*2.2).style("text-anchor","start").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",we.colors["gray-500"]).text(ei(this.minSampleLow)),y.append("text").attr("class","label-max-value").attr("x",o+4).attr("y",hn.default*2.2).style("text-anchor","end").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",we.colors["gray-500"]).text(ei(this.minSampleHigh)),s},ts=new WeakSet,jh=function(){te(this,Ht,pn).call(this,ti,this.curMinSampleLow),te(this,Ht,pn).call(this,ni,this.curMinSampleHigh),this.minSampleRow.select(`#${ti}`).on("mousedown",t=>te(this,Mr,Wa).call(this,t)),this.minSampleRow.select(`#${ni}`).on("mousedown",t=>te(this,Mr,Wa).call(this,t)),te(this,xn,pi).call(this)},Ht=new WeakSet,pn=function(t,n){switch(n=Math.min(Math.max(n,this.minSampleLow),this.minSampleHigh),t){case"slider-left-thumb":n=Math.min(this.curMinSampleHigh,n);break;case"slider-right-thumb":n=Math.max(this.curMinSampleLow,n);break;default:console.warn("Unknown thumb type in moveThumb()");break}const r=this.minSampleRow.select(`#${t}`).attr("data-curValue",n),i=Jn-2*Qn-2*Ae;let s=(n-this.minSampleLow)/(this.minSampleHigh-this.minSampleLow)*i;switch(t){case"slider-left-thumb":s-=Ae,this.curMinSampleLow=n,this.searchStoreValue.curMinSampleLow=this.curMinSampleLow;break;case"slider-right-thumb":this.curMinSampleHigh=n,this.searchStoreValue.curMinSampleHigh=this.curMinSampleHigh;break;default:console.warn("Unknown thumb type in moveThumb()");break}this.searchStore.set(this.searchStoreValue),r.style("left",`${s}px`),te(this,ns,Xh).call(this),te(this,rs,qh).call(this),this.searchUpdated()},Mr=new WeakSet,Wa=function(t){t.preventDefault(),t.stopPropagation();const n=t.target;if(n===null||!n.id.includes("thumb"))return;const r=n.parentNode,i=r.getBoundingClientRect().width;n.focus();const s=o=>{o.preventDefault(),o.stopPropagation();const u=o.pageX-r.getBoundingClientRect().x;let l=this.minSampleLow+(this.minSampleHigh-this.minSampleLow)*u/i;l=Fn(l,0),te(this,Ht,pn).call(this,n.id,l)},a=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a),document.body.style.cursor="default",n.blur()};document.addEventListener("mousemove",s),document.addEventListener("mouseup",a),document.body.style.cursor="grabbing"},ns=new WeakSet,Xh=function(){const t=this.minSampleRow.select("#slider-left-thumb"),n=this.minSampleRow.select("#slider-right-thumb"),r=parseFloat(t.style("left")),s=parseFloat(n.style("left"))-r;this.minSampleRow.select(".track .range-track").style("left",`${r+Ae}px`).style("width",`${s}px`),this.minSampleDensityClip!==null&&this.minSampleDensityClip.attr("x",this.minSampleXScale(this.curMinSampleLow)).attr("width",this.minSampleXScale(this.curMinSampleHigh)-this.minSampleXScale(this.curMinSampleLow))},rs=new WeakSet,qh=function(){if(this.minSampleSVG===null)return;const t=this.minSampleSVG.select("g.tick-top-group").selectAll("g.tick");t.filter(n=>n>=this.curMinSampleLow&&n<=this.curMinSampleHigh).classed("out-range",!1),t.filter(n=>n<this.curMinSampleLow||n>this.curMinSampleHigh).classed("out-range",!0),this.curMinSampleHigh===this.curMinSampleLow&&this.minSampleSVG.select("g.tick-top-group").selectAll("g.tick").classed("out-range",!0)},is=new WeakSet,Zh=function(){const t=Jn-Qn*2,n=0,i=Je+0+n,s=this.heightRow.select(".svg-height").attr("width",t).attr("height",i),a={top:0,left:Ae,right:Ae,bottom:0,histTop:20},o=t-a.left-a.right;s.append("g").attr("class","border-group").attr("transform",`translate(${0}, ${a.top})`).append("rect").attr("width",t).attr("height",Je-a.top).style("fill","none").style("stroke",we.colors["gray-300"]);const u=s.append("g").attr("class","hist-group").attr("transform",`translate(${Ae}, ${a.top})`);this.heightXScale=I.scaleBand().domain(this.heightDensities.map(f=>f.x)).range([0,o]).paddingInner(.35);const l=Math.max(...this.heightDensities.map(f=>f.y));this.heightYScale=I.scaleLinear().domain([0,l]).range([Je-a.bottom-a.top,a.histTop]);const c=u.selectAll("g.bar").data(this.heightDensities).join("g").attr("class","bar selected").attr("id",f=>`bar-${f.x}`).attr("transform",f=>`translate(${this.heightXScale(f.x)}, ${0})`);return c.append("rect").attr("x",0).attr("y",f=>this.heightYScale(f.y)).attr("width",this.heightXScale.bandwidth()).attr("height",f=>this.heightYScale(0)-this.heightYScale(f.y)),c.append("text").attr("x",this.heightXScale.bandwidth()/2).attr("y",f=>this.heightYScale(f.y)-5).append("tspan").text(f=>`(${I.format(".0%")(f.y)})`),c.append("title").text(f=>`Height: ${f.x} (${I.format(".4%")(f.y)})`),this.searchStoreValue.curHeightRange=new Set(this.heightXScale.domain()),this.searchStore.set(this.searchStoreValue),s},ss=new WeakSet,Jh=function(){const t=I.select(this.component).select(".height-checkboxes");this.heightDensities.forEach(n=>{t.append("label").attr("class","height-checkbox-label").attr("for",`height-checkbox-${n.x}`).text(n.x).style("left",`${this.heightXScale(n.x)+this.heightXScale.bandwidth()/2+13}px`),t.append("input").attr("type","checkbox").property("checked",!0).attr("class","height-checkbox").attr("id",`height-checkbox-${n.x}`).style("left",`${this.heightXScale(n.x)+this.heightXScale.bandwidth()/2-4}px`).on("change",i=>te(this,as,Qh).call(this,i,n.x))})},as=new WeakSet,Qh=function(t,n){var i;t.preventDefault();const r=t.target;(i=this.heightSVG)==null||i.select(`#bar-${n}`).classed("selected",r.checked),r.checked?this.searchStoreValue.curHeightRange.add(n):this.searchStoreValue.curHeightRange.delete(n),this.searchStore.set(this.searchStoreValue)},os=new WeakSet,Kh=async function(){await oo();for(const t of this.searchStoreValue.curDepthFeatures.keys())te(this,Cr,Oa).call(this,t);te(this,Cr,Oa).call(this,0)},ls=new WeakSet,$h=function(t,n,r){t.preventDefault();const i=t.target,s=this.searchStoreValue.curDepthFeatures.get(n);if(s===void 0){console.error(`Unknown depth ${n}`);return}i.checked?s.add(r):s.delete(r),this.searchStoreValue.curDepthFeatures.set(n,s),this.searchStore.set(this.searchStoreValue)},cs=new WeakSet,ef=function(t,n){t.preventDefault();const r=t.target,i=this.searchStoreValue.curAllFeatures;r.checked?i.add(n):i.delete(n),this.searchStoreValue.curAllFeatures=i,this.searchStore.set(this.searchStoreValue)},Cr=new WeakSet,Oa=function(t){var o,u;const n=I.select(this.component).select(`#level-row-${t} .level-content`),r=new Set([]),i=new Set([]);for(const l of this.searchStoreValue.featureOrder){let c=this.searchStoreValue.featureMap.get(l);c===void 0&&(c=["","",""],console.error(`Cannot find feature ${l} in featureMap`)),i.has(c[2])?r.add(c[2]):i.add(c[2])}let s=null,a=null;for(const l of this.searchStoreValue.featureOrder){let c=this.searchStoreValue.featureMap.get(l);c===void 0&&(c=["","",""],console.error(`Cannot find feature ${l} in featureMap`));let h=n;if(s!==null&&c[2]!==a&&(a=null,s=null),r.has(c[2])){if(s===null){const m=n.append("div").attr("class","depth-checkbox-row");m.append("div").attr("class","depth-checkbox-row-title").text(c[2]),s=m.append("div").attr("class","depth-checkbox-row-checkboxes"),a=c[2]}h=s.append("div").attr("class","checkbox-wrapper")}else h=n.append("div").attr("class","depth-checkbox-single-row").append("div").attr("class","checkbox-wrapper");const f=h.append("input").attr("type","checkbox").property("checked",!0).attr("class","depth-checkbox").attr("id",`depth-check-box-label-${t}-${l}`),p=h.append("label").attr("class","depth-checkbox-label").attr("for",`depth-check-box-label-${t}-${l}`);let y=`${c[2]} ${c[1]}`;c[2]===a&&(y=`${c[1]}`),p.append("span").text(y),p.attr("title",t===0?`Show/hide trees using "${c[0]} ${c[1]}"`:`Show/hide trees using "${c[0]} ${c[1]}" at depth ${t}`);let d="initial";const g=(u=(o=this.searchStoreValue).getFeatureColor)==null?void 0:u.call(o,String(l));g!==void 0&&(d=g),f.style("accent-color",d),f.on("change",m=>{t===0?te(this,cs,ef).call(this,m,l):te(this,ls,$h).call(this,m,t,l)})}};var za=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 75 131" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-907,-4228)">
        <g transform="matrix(1,0,0,1.4297,0,4061.32)">
            <g transform="matrix(1.93064,0,0,1.35038,-2646,-5771.08)">
                <g id="range-thumb-right">
                    <path d="M1840.41,4360.03L1878.97,4360.03L1878.97,4427.36L1840.41,4403.12L1840.41,4360.03Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,Ga=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 76 131" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-808,-4228)">
        <g transform="matrix(1,0,0,1.4297,0,4061.32)">
            <g transform="matrix(1.93064,0,0,1.35038,-2744.28,-5771.08)">
                <g id="range-thumb-left">
                    <path d="M1840.41,4360.03L1878.97,4360.03L1878.97,4403.12L1840.41,4427.36L1840.41,4360.03Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,Po='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"/></svg>',_n='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M256 48C141.31 48 48 141.32 48 256c0 114.86 93.14 208 208 208 114.69 0 208-93.31 208-208 0-114.87-93.13-208-208-208zm0 313a94 94 0 010-188h4.21l-14.11-14.1a14 14 0 0119.8-19.8l40 40a14 14 0 010 19.8l-40 40a14 14 0 01-19.8-19.8l18-18c-2.38-.1-5.1-.1-8.1-.1a66 66 0 1066 66 14 14 0 0128 0 94.11 94.11 0 01-94 94z"/></svg>';const{Object:W2,console:O2}=co,$="src/components/search-panel/SearchPanel.svelte";function wc(e,t,n){const r=e.slice();return r[25]=t[n],r}function Ya(e){var b,w;let t,n,r,i,s,a,o,u,l,c,h=e[4].curAllFeatures.size===Object.keys((b=e[0])==null?void 0:b.featureMap).length?"Include all features":`Include ${e[4].curAllFeatures.size} out of ${Object.keys((w=e[0])==null?void 0:w.featureMap).length} features`,f,p,y,d,g;const m={c:function(){t=V("div"),n=V("div"),r=V("span"),r.textContent="Features",i=B(),s=V("div"),a=V("span"),o=B(),u=V("span"),l=B(),c=V("div"),f=pe(h),p=B(),y=V("div"),x(r,"class","s-H0d2FahnGNOH"),C(r,$,622,10,17385),x(a,"class","title-icon refresh-button s-H0d2FahnGNOH"),x(a,"title","Reset the filter"),C(a,$,624,12,17455),x(u,"class","title-icon detail-button s-H0d2FahnGNOH"),x(u,"title","Show details"),x(u,"data-detail","false"),C(u,$,632,12,17706),x(s,"class","title-icons s-H0d2FahnGNOH"),C(s,$,623,10,17417),x(n,"class","row-title s-H0d2FahnGNOH"),C(n,$,621,8,17351),x(c,"class","level-summary s-H0d2FahnGNOH"),C(c,$,642,8,17983),x(y,"class","level-content s-H0d2FahnGNOH"),C(y,$,650,8,18323),x(t,"class","row level-row level-row-all s-H0d2FahnGNOH"),x(t,"id","level-row-0"),he(t,"show-detail",e[5].has(0)),C(t,$,616,6,17209)},m:function(k,F){fe(k,t,F),_(t,n),_(n,r),_(n,i),_(n,s),_(s,a),a.innerHTML=_n,_(s,o),_(s,u),u.innerHTML=Po,_(t,l),_(t,c),_(c,f),_(t,p),_(t,y),d||(g=[ae(a,"click",e[18],!1,!1,!1),ae(u,"click",e[19],!1,!1,!1)],d=!0)},p:function(k,F){var R,A;F&17&&h!==(h=k[4].curAllFeatures.size===Object.keys((R=k[0])==null?void 0:R.featureMap).length?"Include all features":`Include ${k[4].curAllFeatures.size} out of ${Object.keys((A=k[0])==null?void 0:A.featureMap).length} features`)&&Ce(f,h),F&32&&he(t,"show-detail",k[5].has(0))},d:function(k){k&&oe(t),d=!1,He(g)}};return re("SvelteRegisterBlock",{block:m,id:Ya.name,type:"if",source:"(616:4) {#if data}",ctx:e}),m}function Ua(e){var A,H,Y,N;let t,n,r,i=`Depth ${e[25]}`,s,a,o,u,l,c,h,f,p=((A=e[4].curDepthFeatures.get(e[25]))==null?void 0:A.size)===Object.keys((H=e[0])==null?void 0:H.featureMap).length?"Include all features":`Include ${(Y=e[4].curDepthFeatures.get(e[25]))==null?void 0:Y.size} out of ${Object.keys((N=e[0])==null?void 0:N.featureMap).length} features`,y,d,g,m,b,w,S;function k(...D){return e[20](e[25],...D)}function F(...D){return e[21](e[25],...D)}const R={c:function(){t=V("div"),n=V("div"),r=V("span"),s=pe(i),a=B(),o=V("div"),u=V("span"),l=B(),c=V("span"),h=B(),f=V("div"),y=pe(p),d=B(),g=V("div"),m=B(),x(r,"class","s-H0d2FahnGNOH"),C(r,$,661,10,18625),x(u,"class","title-icon refresh-button s-H0d2FahnGNOH"),x(u,"title","Reset the filter"),C(u,$,663,12,18705),x(c,"class","title-icon detail-button s-H0d2FahnGNOH"),x(c,"title","Show details"),x(c,"data-detail","false"),C(c,$,671,12,18957),x(o,"class","title-icons s-H0d2FahnGNOH"),C(o,$,662,10,18667),x(n,"class","row-title s-H0d2FahnGNOH"),C(n,$,660,8,18591),x(f,"class","level-summary s-H0d2FahnGNOH"),C(f,$,681,8,19238),x(g,"class","level-content s-H0d2FahnGNOH"),C(g,$,689,8,19606),x(t,"class","row level-row s-H0d2FahnGNOH"),x(t,"id",b=`level-row-${e[25]}`),he(t,"show-detail",e[5].has(e[25])),C(t,$,655,6,18450)},m:function(E,v){fe(E,t,v),_(t,n),_(n,r),_(r,s),_(n,a),_(n,o),_(o,u),u.innerHTML=_n,_(o,l),_(o,c),c.innerHTML=Po,_(t,h),_(t,f),_(f,y),_(t,d),_(t,g),_(t,m),w||(S=[ae(u,"click",k,!1,!1,!1),ae(c,"click",F,!1,!1,!1)],w=!0)},p:function(E,v){var T,M,P,W;e=E,v&16&&i!==(i=`Depth ${e[25]}`)&&Ce(s,i),v&17&&p!==(p=((T=e[4].curDepthFeatures.get(e[25]))==null?void 0:T.size)===Object.keys((M=e[0])==null?void 0:M.featureMap).length?"Include all features":`Include ${(P=e[4].curDepthFeatures.get(e[25]))==null?void 0:P.size} out of ${Object.keys((W=e[0])==null?void 0:W.featureMap).length} features`)&&Ce(y,p),v&16&&b!==(b=`level-row-${e[25]}`)&&x(t,"id",b),v&48&&he(t,"show-detail",e[5].has(e[25]))},d:function(E){E&&oe(t),w=!1,He(S)}};return re("SvelteRegisterBlock",{block:R,id:Ua.name,type:"each",source:"(655:4) {#each [...searchStoreValue.curDepthFeatures.keys()] as depth}",ctx:e}),R}function Ba(e){var Uo,Bo,jo,Xo;let t,n,r,i,s,a,o,u,l,c,h,f,p,y,d,g,m,b,w,S,k,F,R,A,H,Y,N=e[7]((Uo=e[3])==null?void 0:Uo.curAccuracyLow)+"",D,E,v,T,M,P,W,z=e[7]((Bo=e[3])==null?void 0:Bo.curAccuracyHigh)+"",G,U,Z,Q,K,J,j,ne,ue,q,ee,ie,O,ge,le,_e,ve,X,se,Re,Te,ot,pt=e[8]((jo=e[3])==null?void 0:jo.curMinSampleLow)+"",sn,Rn,qe,an,_s,En,Wn,Pr=e[8]((Xo=e[3])==null?void 0:Xo.curMinSampleHigh)+"",xs,Io,On,Ir,Ro,zt,Gt,zn,Eo,Gn,Yt,Wo,Ut,Yn,Rr,Oo,Er,zo,ks,Wr,Ts,Go,Ge=e[0]&&Ya(e),Dt=[...e[4].curDepthFeatures.keys()];Be(Dt);let Ye=[];for(let _t=0;_t<Dt.length;_t+=1)Ye[_t]=Ua(wc(e,Dt,_t));const Yo={c:function(){t=V("div"),n=V("div"),r=V("div"),i=V("div"),i.textContent="Search Trees",s=B(),a=V("div"),o=V("div"),u=B(),l=V("div"),c=V("div"),h=V("div"),f=V("span"),f.textContent="Accuracy",p=B(),y=V("div"),d=V("span"),g=B(),m=V("div"),b=V("div"),w=V("div"),S=V("div"),k=B(),F=V("div"),R=new $n,A=B(),H=V("div"),Y=V("span"),D=pe(N),E=B(),v=V("div"),T=new $n,M=B(),P=V("div"),W=V("span"),G=pe(z),U=B(),Z=V("div"),Q=Qt("svg"),K=B(),J=V("div"),j=V("div"),ne=V("span"),ne.textContent="Minimum Leaf Sample",ue=B(),q=V("div"),ee=V("span"),ie=B(),O=V("div"),ge=V("div"),le=V("div"),_e=V("div"),ve=B(),X=V("div"),se=new $n,Re=B(),Te=V("div"),ot=V("span"),sn=pe(pt),Rn=B(),qe=V("div"),an=new $n,_s=B(),En=V("div"),Wn=V("span"),xs=pe(Pr),Io=B(),On=V("div"),Ir=Qt("svg"),Ro=B(),zt=V("div"),Gt=V("div"),zn=V("span"),zn.textContent="Height",Eo=B(),Gn=V("div"),Yt=V("span"),Wo=B(),Ut=V("div"),Yn=V("div"),Rr=Qt("svg"),Oo=B(),Er=V("div"),zo=B(),Ge&&Ge.c(),ks=B();for(let Se=0;Se<Ye.length;Se+=1)Ye[Se].c();x(i,"class","title s-H0d2FahnGNOH"),C(i,$,468,6,12924),x(o,"class","svg-icon close-icon s-H0d2FahnGNOH"),C(o,$,470,8,12996),x(a,"class","icons s-H0d2FahnGNOH"),C(a,$,469,6,12968),x(r,"class","header-title s-H0d2FahnGNOH"),C(r,$,467,4,12891),x(n,"class","header s-H0d2FahnGNOH"),C(n,$,466,2,12866),x(f,"class","s-H0d2FahnGNOH"),C(f,$,480,8,13232),x(d,"class","title-icon refresh-button s-H0d2FahnGNOH"),x(d,"title","Reset the filter"),C(d,$,482,10,13298),x(y,"class","title-icons s-H0d2FahnGNOH"),C(y,$,481,8,13262),x(h,"class","row-title s-H0d2FahnGNOH"),C(h,$,479,6,13200),x(S,"class","range-track s-H0d2FahnGNOH"),C(S,$,500,12,13789),R.a=A,x(Y,"class","thumb-label-span s-H0d2FahnGNOH"),C(Y,$,509,16,14113),x(H,"class","thumb-label thumb-label-left s-H0d2FahnGNOH"),C(H,$,508,14,14054),x(F,"id","slider-left-thumb"),x(F,"tabindex","-1"),Kn(F,"left","0px"),x(F,"class","svg-icon icon-range-thumb-left thumb s-H0d2FahnGNOH"),C(F,$,501,12,13829),T.a=M,x(W,"class","thumb-label-span s-H0d2FahnGNOH"),C(W,$,522,16,14568),x(P,"class","thumb-label thumb-label-right s-H0d2FahnGNOH"),C(P,$,521,14,14508),x(v,"id","slider-right-thumb"),x(v,"tabindex","-1"),Kn(v,"left","0px"),x(v,"class","svg-icon icon-range-thumb-right thumb s-H0d2FahnGNOH"),C(v,$,514,12,14280),x(w,"class","track s-H0d2FahnGNOH"),C(w,$,499,10,13757),x(b,"class","feature-slider s-H0d2FahnGNOH"),C(b,$,492,8,13594),x(Q,"class","svg-accuracy s-H0d2FahnGNOH"),C(Q,$,531,10,14802),x(Z,"class","feature-hist s-H0d2FahnGNOH"),C(Z,$,530,8,14765),x(m,"class","accuracy-content s-H0d2FahnGNOH"),C(m,$,491,6,13555),x(c,"class","row accuracy-row s-H0d2FahnGNOH"),C(c,$,478,4,13163),x(ne,"class","s-H0d2FahnGNOH"),C(ne,$,538,8,14946),x(ee,"class","title-icon refresh-button s-H0d2FahnGNOH"),x(ee,"title","Reset the filter"),C(ee,$,540,10,15023),x(q,"class","title-icons s-H0d2FahnGNOH"),C(q,$,539,8,14987),x(j,"class","row-title s-H0d2FahnGNOH"),C(j,$,537,6,14914),x(_e,"class","range-track s-H0d2FahnGNOH"),C(_e,$,558,12,15517),se.a=Re,x(ot,"class","thumb-label-span s-H0d2FahnGNOH"),C(ot,$,567,16,15841),x(Te,"class","thumb-label thumb-label-left s-H0d2FahnGNOH"),C(Te,$,566,14,15782),x(X,"id","slider-left-thumb"),x(X,"tabindex","-1"),Kn(X,"left","0px"),x(X,"class","svg-icon icon-range-thumb-left thumb s-H0d2FahnGNOH"),C(X,$,559,12,15557),an.a=_s,x(Wn,"class","thumb-label-span s-H0d2FahnGNOH"),C(Wn,$,580,16,16303),x(En,"class","thumb-label thumb-label-right s-H0d2FahnGNOH"),C(En,$,579,14,16243),x(qe,"id","slider-right-thumb"),x(qe,"tabindex","-1"),Kn(qe,"left","0px"),x(qe,"class","svg-icon icon-range-thumb-right thumb s-H0d2FahnGNOH"),C(qe,$,572,12,16015),x(le,"class","track s-H0d2FahnGNOH"),C(le,$,557,10,15485),x(ge,"class","feature-slider s-H0d2FahnGNOH"),C(ge,$,550,8,15322),x(Ir,"class","svg-min-sample s-H0d2FahnGNOH"),C(Ir,$,589,10,16544),x(On,"class","feature-hist s-H0d2FahnGNOH"),C(On,$,588,8,16507),x(O,"class","min-sample-content s-H0d2FahnGNOH"),C(O,$,549,6,15281),x(J,"class","row min-sample-row s-H0d2FahnGNOH"),C(J,$,536,4,14875),x(zn,"class","s-H0d2FahnGNOH"),C(zn,$,596,8,16686),x(Yt,"class","title-icon refresh-button s-H0d2FahnGNOH"),x(Yt,"title","Reset the filter"),C(Yt,$,598,10,16750),x(Gn,"class","title-icons s-H0d2FahnGNOH"),C(Gn,$,597,8,16714),x(Gt,"class","row-title s-H0d2FahnGNOH"),C(Gt,$,595,6,16654),x(Rr,"class","svg-height s-H0d2FahnGNOH"),C(Rr,$,609,10,17079),x(Yn,"class","feature-hist s-H0d2FahnGNOH"),C(Yn,$,608,8,17042),x(Er,"class","height-checkboxes s-H0d2FahnGNOH"),C(Er,$,611,8,17129),x(Ut,"class","height-content s-H0d2FahnGNOH"),C(Ut,$,607,6,17005),x(zt,"class","row height-row s-H0d2FahnGNOH"),C(zt,$,594,4,16619),x(l,"class","search-list s-H0d2FahnGNOH"),C(l,$,477,2,13133),x(t,"class","search-panel s-H0d2FahnGNOH"),x(t,"style",Wr=`max-height: ${e[1]}px;`),he(t,"shown",e[4].shown),C(t,$,460,0,12735)},l:function(Se){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(Se,lt){fe(Se,t,lt),_(t,n),_(n,r),_(r,i),_(r,s),_(r,a),_(a,o),o.innerHTML=vs,_(t,u),_(t,l),_(l,c),_(c,h),_(h,f),_(h,p),_(h,y),_(y,d),d.innerHTML=_n,_(c,g),_(c,m),_(m,b),_(b,w),_(w,S),_(w,k),_(w,F),R.m(za,F),_(F,A),_(F,H),_(H,Y),_(Y,D),_(w,E),_(w,v),T.m(Ga,v),_(v,M),_(v,P),_(P,W),_(W,G),_(m,U),_(m,Z),_(Z,Q),_(l,K),_(l,J),_(J,j),_(j,ne),_(j,ue),_(j,q),_(q,ee),ee.innerHTML=_n,_(J,ie),_(J,O),_(O,ge),_(ge,le),_(le,_e),_(le,ve),_(le,X),se.m(za,X),_(X,Re),_(X,Te),_(Te,ot),_(ot,sn),_(le,Rn),_(le,qe),an.m(Ga,qe),_(qe,_s),_(qe,En),_(En,Wn),_(Wn,xs),_(O,Io),_(O,On),_(On,Ir),_(l,Ro),_(l,zt),_(zt,Gt),_(Gt,zn),_(Gt,Eo),_(Gt,Gn),_(Gn,Yt),Yt.innerHTML=_n,_(zt,Wo),_(zt,Ut),_(Ut,Yn),_(Yn,Rr),_(Ut,Oo),_(Ut,Er),_(l,zo),Ge&&Ge.m(l,null),_(l,ks);for(let on=0;on<Ye.length;on+=1)Ye[on].m(l,null);e[22](t),Ts||(Go=[ae(o,"click",e[9],!1,!1,!1),ae(d,"click",e[15],!1,!1,!1),ae(b,"click",z2,!1,!1,!1),ae(ee,"click",e[16],!1,!1,!1),ae(ge,"click",G2,!1,!1,!1),ae(Yt,"click",e[17],!1,!1,!1)],Ts=!0)},p:function(Se,[lt]){var on,qo,Zo,Jo;if(lt&8&&N!==(N=Se[7]((on=Se[3])==null?void 0:on.curAccuracyLow)+"")&&Ce(D,N),lt&8&&z!==(z=Se[7]((qo=Se[3])==null?void 0:qo.curAccuracyHigh)+"")&&Ce(G,z),lt&8&&pt!==(pt=Se[8]((Zo=Se[3])==null?void 0:Zo.curMinSampleLow)+"")&&Ce(sn,pt),lt&8&&Pr!==(Pr=Se[8]((Jo=Se[3])==null?void 0:Jo.curMinSampleHigh)+"")&&Ce(xs,Pr),Se[0]?Ge?Ge.p(Se,lt):(Ge=Ya(Se),Ge.c(),Ge.m(l,ks)):Ge&&(Ge.d(1),Ge=null),lt&3185){Dt=[...Se[4].curDepthFeatures.keys()],Be(Dt);let $e;for($e=0;$e<Dt.length;$e+=1){const Qo=wc(Se,Dt,$e);Ye[$e]?Ye[$e].p(Qo,lt):(Ye[$e]=Ua(Qo),Ye[$e].c(),Ye[$e].m(l,null))}for(;$e<Ye.length;$e+=1)Ye[$e].d(1);Ye.length=Dt.length}lt&2&&Wr!==(Wr=`max-height: ${Se[1]}px;`)&&x(t,"style",Wr),lt&16&&he(t,"shown",Se[4].shown)},i:de,o:de,d:function(Se){Se&&oe(t),Ge&&Ge.d(),or(Ye,Se),e[22](null),Ts=!1,He(Go)}};return re("SvelteRegisterBlock",{block:Yo,id:Ba.name,type:"component",source:"",ctx:e}),Yo}const z2=e=>{e.preventDefault(),e.stopPropagation()},G2=e=>{e.preventDefault(),e.stopPropagation()};function Y2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("SearchPanel",r,[]);let{data:s=null}=t,{searchStore:a=null}=t,{width:o=650}=t,u=null,l=!1,c=!1,h=null,f=Cn(),p=new Set([]);var y;(function(T){T[T.Accuracy=0]="Accuracy",T[T.Height=1]="Height",T[T.MinSample=2]="MinSample",T[T.Depth=3]="Depth",T[T.AllFeatures=4]="AllFeatures"})(y||(y={}));const d=I.format(",.3f"),g=I.format("d");ke(()=>{n(13,l=!0)});const m=()=>{n(3,h)},b=T=>{T.stopPropagation(),T.preventDefault(),n(4,f.shown=!1,f),a==null||a.set(f)},w=(T,M)=>{T.stopPropagation(),T.preventDefault();const P=T.currentTarget;P.dataset.detail==="false"?(P.dataset.detail="true",p.add(M)):(P.dataset.detail="false",p.delete(M)),n(5,p)},S=(T,M,P=null)=>{if(h!==null)switch(T.preventDefault(),M){case y.Accuracy:{h.refreshAccuracy();break}case y.MinSample:{h.refreshMinSample();break}case y.Depth:{P!==null&&h.refreshDepth(P);break}case y.AllFeatures:{h.refreshAllFeatures();break}case y.Height:{h.refreshHeight();break}default:console.warn("Unexpected case for refreshClicked()")}},k=()=>{n(14,c=!0),a&&u&&s&&(a.subscribe(T=>{n(4,f=T)}),n(3,h=new yc(u,s,m,a)))},F=["data","searchStore","width"];W2.keys(t).forEach(T=>{!~F.indexOf(T)&&T.slice(0,2)!=="$$"&&T!=="slot"&&O2.warn(`<SearchPanel> was created with unknown prop '${T}'`)});const R=T=>S(T,y.Accuracy),A=T=>S(T,y.MinSample),H=T=>S(T,y.Height),Y=T=>S(T,y.AllFeatures),N=T=>w(T,0),D=(T,M)=>S(M,y.Depth,T),E=(T,M)=>w(M,T);function v(T){Oe[T?"unshift":"push"](()=>{u=T,n(2,u)})}return e.$$set=T=>{"data"in T&&n(0,s=T.data),"searchStore"in T&&n(12,a=T.searchStore),"width"in T&&n(1,o=T.width)},e.$capture_state=()=>({d3:I,getSearchStoreDefaultValue:Cn,onMount:ke,SearchPanel:yc,closeIcon:vs,thumbLeftIcon:za,thumbRightIcon:Ga,downIcon:Po,refreshIcon:_n,data:s,searchStore:a,width:o,component:u,mounted:l,initialized:c,searchPanel:h,searchStoreValue:f,depthWithDetails:p,RefreshLocation:y,formatter:d,sampleFormatter:g,searchUpdated:m,closeClicked:b,detailClicked:w,refreshClicked:S,initView:k}),e.$inject_state=T=>{"data"in T&&n(0,s=T.data),"searchStore"in T&&n(12,a=T.searchStore),"width"in T&&n(1,o=T.width),"component"in T&&n(2,u=T.component),"mounted"in T&&n(13,l=T.mounted),"initialized"in T&&n(14,c=T.initialized),"searchPanel"in T&&n(3,h=T.searchPanel),"searchStoreValue"in T&&n(4,f=T.searchStoreValue),"depthWithDetails"in T&&n(5,p=T.depthWithDetails),"RefreshLocation"in T&&n(6,y=T.RefreshLocation)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&28677&&s&&a&&l&&!c&&u&&k()},[s,o,u,h,f,p,y,d,g,b,w,S,a,l,c,R,A,H,Y,N,D,E,v]}class tf extends at{constructor(t){super(t);it(this,t,Y2,Ba,Xe,{data:0,searchStore:12,width:1}),re("SvelteRegisterComponent",{component:this,tagName:"SearchPanel_1",options:t,id:Ba.name})}get data(){throw new Error("<SearchPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<SearchPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get searchStore(){throw new Error("<SearchPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set searchStore(t){throw new Error("<SearchPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<SearchPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(t){throw new Error("<SearchPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class vc{constructor(t,n,r,i){L(this,"component");L(this,"inputElem");L(this,"dropzoneUpdated");L(this,"initDataFromDropzone");L(this,"isDragging",!1);L(this,"dragElement",null);L(this,"errorMessage"," ");L(this,"clickHandler",()=>{var t;(t=this.inputElem)==null||t.click()});L(this,"dragEnterHandler",t=>{t.preventDefault(),this.isDragging=!0,this.dragElement=t.target,this.dropzoneUpdated()});L(this,"dragOverHandler",t=>{t.preventDefault()});L(this,"dragLeaveHandler",t=>{t.preventDefault(),this.dragElement===t.target&&(this.isDragging=!1,this.dropzoneUpdated())});L(this,"dropHandler",async t=>{var i;t.preventDefault();let n=null,r=null;(i=t.dataTransfer)!=null&&i.items?t.dataTransfer.items[0].kind==="file"&&(r=t.dataTransfer.items[0].getAsFile(),n=await this.validateFile(r)):(r=t.dataTransfer.files[0],n=await this.validateFile(r)),this.isDragging=!1,this.dropzoneUpdated(),n&&this.initDataFromDropzone(n)});L(this,"inputChanged",async t=>{t.preventDefault();let n=null;const r=t.target.files;if(r!==null){const i=r[0];n=await this.validateFile(i),console.log(n)}!n||this.initDataFromDropzone(n)});L(this,"inputClicked",()=>{});L(this,"readJSON",t=>new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{i.result?n(JSON.parse(i.result)):n(null)},i.onerror=r,i.readAsText(t)}));L(this,"validateFile",async t=>t.type!=="application/json"?(this.errorMessage="It is not a JSON file",this.dropzoneUpdated(),null):await this.readJSON(t));this.component=t,this.inputElem=n,this.dropzoneUpdated=r,this.initDataFromDropzone=i}}var bs=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 346 346" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-5570,-6461)">
        <g transform="matrix(1.49616,0,0,1,-2856.48,922)">
            <g id="timbertrek-logo">
                <g transform="matrix(0.660497,0,0,0.988207,1497.7,1465.12)">
                    <circle cx="6434.56" cy="4297.56" r="174.558" style="fill:rgb(66,66,66);"/>
                    <path d="M6434.56,4123C6530.9,4123 6609.12,4201.22 6609.12,4297.56C6609.12,4393.9 6530.9,4472.12 6434.56,4472.12C6338.22,4472.12 6260,4393.9 6260,4297.56C6260,4201.22 6338.22,4123 6434.56,4123ZM6434.56,4131.31C6526.31,4131.31 6600.81,4205.81 6600.81,4297.56C6600.81,4389.31 6526.31,4463.81 6434.56,4463.81C6342.81,4463.81 6268.31,4389.31 6268.31,4297.56C6268.31,4205.81 6342.81,4131.31 6434.56,4131.31Z" style="fill:rgb(123,123,123);"/>
                </g>
                <g transform="matrix(0.628201,0,0,0.939888,2139.91,-523.818)">
                    <path d="M5691.27,6656.44L5660.64,6656.44L5742.98,6526.8L5823.36,6656.44L5792.72,6656.44L5820.76,6721.2L5742.66,6679.85L5663.24,6721.12L5691.27,6656.44ZM5742.89,6571.51L5742.89,6652.51L5790.28,6676.11L5742.89,6571.51Z" style="fill:white;"/>
                </g>
                <g>
                    <g transform="matrix(-0.445586,6.73401e-17,-1.13133e-16,-1.66667,8499.43,14925.7)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                    <g transform="matrix(1.15018e-15,-0.666667,1.11396,4.44089e-15,-410.51,9829)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                    <g transform="matrix(0.445586,3.52496e-15,-6.0106e-15,1.66667,2996,-3501.67)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                    <g transform="matrix(-3.52474e-15,0.666667,-1.11396,-1.33227e-14,11905.9,1595)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                </g>
                <g transform="matrix(0.668379,0,0,1,1554.3,-396)">
                    <g transform="matrix(-0.61592,-0.255122,0.637806,-1.5398,6551.69,16195.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.471405,-0.471405,1.17851,-1.17851,2670.11,15534.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.255122,-0.61592,1.5398,-0.637806,-662.81,13437.5)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.255122,-0.61592,1.5398,0.637806,-3813.83,6385.69)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.471405,-0.471405,1.17851,1.17851,-3152.2,2504.11)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.61592,-0.255122,0.637806,1.5398,-1055.53,-828.81)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.61592,0.255122,-0.637806,1.5398,5996.31,-3979.83)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.471405,0.471405,-1.17851,1.17851,9877.89,-3318.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.255122,0.61592,-1.5398,0.637806,13210.8,-1221.53)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.255122,0.61592,-1.5398,-0.637806,16361.8,5830.31)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.471405,0.471405,-1.17851,-1.17851,15700.2,9711.89)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.61592,0.255122,-0.637806,-1.5398,13603.5,13044.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                </g>
                <g transform="matrix(0.660497,0,0,0.988207,1497.7,1465.12)">
                    <path d="M6434.56,4123C6530.9,4123 6609.12,4201.22 6609.12,4297.56C6609.12,4393.9 6530.9,4472.12 6434.56,4472.12C6338.22,4472.12 6260,4393.9 6260,4297.56C6260,4201.22 6338.22,4123 6434.56,4123ZM6434.56,4135.65C6523.92,4135.65 6596.47,4208.2 6596.47,4297.56C6596.47,4386.92 6523.92,4459.47 6434.56,4459.47C6345.2,4459.47 6272.65,4386.92 6272.65,4297.56C6272.65,4208.2 6345.2,4135.65 6434.56,4135.65Z" style="fill:rgb(128,128,128);"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`;const Mt="src/components/dropzone/Dropzone.svelte";function nf(e){let t;const n={c:function(){t=V("div"),t.textContent="Loading Rashomon set...",x(t,"class","drop-message s-5AsLhRYgdrVb"),C(t,Mt,134,6,3230)},m:function(i,s){fe(i,t,s)},d:function(i){i&&oe(t)}};return re("SvelteRegisterBlock",{block:n,id:nf.name,type:"else",source:"(134:4) {:else}",ctx:e}),n}function rf(e){let t,n,r,i,s,a;const o={c:function(){t=V("div"),t.textContent="Drop a Rashomon trie file (.json) here to start",n=B(),r=V("div"),i=V("a"),i.textContent="How to generate this file?",x(t,"class","drop-message s-5AsLhRYgdrVb"),C(t,Mt,118,6,2829),x(i,"href","https://gist.github.com/xiaohk/875b5374840c66689eb42a4b8820c3b5"),x(i,"target","_blank"),x(i,"class","s-5AsLhRYgdrVb"),C(i,Mt,128,8,3049),x(r,"class","help-message s-5AsLhRYgdrVb"),C(r,Mt,122,6,2932)},m:function(l,c){fe(l,t,c),fe(l,n,c),fe(l,r,c),_(r,i),s||(a=ae(r,"click",U2,!1,!1,!1),s=!0)},d:function(l){l&&oe(t),l&&oe(n),l&&oe(r),s=!1,a()}};return re("SvelteRegisterBlock",{block:o,id:rf.name,type:"if",source:"(118:4) {#if curDataset === 'my own set'}",ctx:e}),o}function ja(e){var b;let t,n,r,i,s,a,o=((b=e[4])==null?void 0:b.errorMessage)+"",u,l,c,h,f,p;function y(w,S){return w[1]==="my own set"?rf:nf}let d=y(e),g=d(e);const m={c:function(){var S;t=V("div"),n=V("div"),r=V("div"),i=B(),g.c(),s=B(),a=V("span"),u=pe(o),l=B(),c=V("input"),x(r,"class","svg-icon s-5AsLhRYgdrVb"),C(r,Mt,113,4,2727),x(a,"class","error-message s-5AsLhRYgdrVb"),C(a,Mt,137,4,3301),x(c,"accept","json"),x(c,"type","file"),x(c,"autocomplete","off"),Kn(c,"display","none"),x(c,"class","s-5AsLhRYgdrVb"),C(c,Mt,141,4,3378),x(n,"class","dropzone s-5AsLhRYgdrVb"),he(n,"drag-over",(S=e[4])==null?void 0:S.isDragging),C(n,Mt,104,2,2401),x(t,"class","dropzone-tab s-5AsLhRYgdrVb"),x(t,"style",h=`height: ${e[0]+we.layout.toolbarHeight}px;`),C(t,Mt,99,0,2283)},l:function(S){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(S,k){fe(S,t,k),_(t,n),_(n,r),r.innerHTML=bs,_(n,i),g.m(n,null),_(n,s),_(n,a),_(a,u),_(n,l),_(n,c),e[10](c),e[16](t),f||(p=[ae(c,"change",e[8],!1,!1,!1),ae(c,"click",e[9],!1,!1,!1),ae(n,"click",e[11],!1,!1,!1),ae(n,"dragenter",e[12],!1,!1,!1),ae(n,"dragover",e[13],!1,!1,!1),ae(n,"dragleave",e[14],!1,!1,!1),ae(n,"drop",e[15],!1,!1,!1)],f=!0)},p:function(S,[k]){var F,R;d!==(d=y(S))&&(g.d(1),g=d(S),g&&(g.c(),g.m(n,s))),k&16&&o!==(o=((F=S[4])==null?void 0:F.errorMessage)+"")&&Ce(u,o),k&16&&he(n,"drag-over",(R=S[4])==null?void 0:R.isDragging),k&1&&h!==(h=`height: ${S[0]+we.layout.toolbarHeight}px;`)&&x(t,"style",h)},i:de,o:de,d:function(S){S&&oe(t),g.d(),e[10](null),e[16](null),f=!1,He(p)}};return re("SvelteRegisterBlock",{block:m,id:ja.name,type:"component",source:"",ctx:e}),m}const U2=e=>{e.stopPropagation()};function B2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("Dropzone",r,[]);let{initDataFromDropzone:s}=t,{width:a=650}=t,{curDataset:o="my own set"}=t,u=null,l=null,c=null,h=!1,f=!1;ke(()=>{n(6,h=!0)});const p=()=>{n(4,c)},y=()=>{h&&u&&l&&(n(4,c=new vc(u,l,p,s)),n(7,f=!0))},d=["initDataFromDropzone","width","curDataset"];Object.keys(t).forEach(H=>{!~d.indexOf(H)&&H.slice(0,2)!=="$$"&&H!=="slot"&&console.warn(`<Dropzone> was created with unknown prop '${H}'`)});const g=H=>c==null?void 0:c.inputChanged(H),m=H=>c==null?void 0:c.inputClicked();function b(H){Oe[H?"unshift":"push"](()=>{l=H,n(3,l)})}const w=H=>c==null?void 0:c.clickHandler(),S=H=>c==null?void 0:c.dragEnterHandler(H),k=H=>c==null?void 0:c.dragOverHandler(H),F=H=>c==null?void 0:c.dragLeaveHandler(H),R=H=>c==null?void 0:c.dropHandler(H);function A(H){Oe[H?"unshift":"push"](()=>{u=H,n(2,u)})}return e.$$set=H=>{"initDataFromDropzone"in H&&n(5,s=H.initDataFromDropzone),"width"in H&&n(0,a=H.width),"curDataset"in H&&n(1,o=H.curDataset)},e.$capture_state=()=>({onMount:ke,Dropzone:vc,config:we,logoIcon:bs,initDataFromDropzone:s,width:a,curDataset:o,component:u,inputElem:l,dropzone:c,mounted:h,initialized:f,dropzoneUpdated:p,initView:y}),e.$inject_state=H=>{"initDataFromDropzone"in H&&n(5,s=H.initDataFromDropzone),"width"in H&&n(0,a=H.width),"curDataset"in H&&n(1,o=H.curDataset),"component"in H&&n(2,u=H.component),"inputElem"in H&&n(3,l=H.inputElem),"dropzone"in H&&n(4,c=H.dropzone),"mounted"in H&&n(6,h=H.mounted),"initialized"in H&&n(7,f=H.initialized)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&236&&h&&u&&l&&s&&!f&&y()},[a,o,u,l,c,s,h,f,g,m,b,w,S,k,F,R,A]}class sf extends at{constructor(t){super(t);it(this,t,B2,ja,Xe,{initDataFromDropzone:5,width:0,curDataset:1}),re("SvelteRegisterComponent",{component:this,tagName:"Dropzone_1",options:t,id:ja.name});const{ctx:n}=this.$$,r=t.props||{};n[5]===void 0&&!("initDataFromDropzone"in r)&&console.warn("<Dropzone> was created without expected prop 'initDataFromDropzone'")}get initDataFromDropzone(){throw new Error("<Dropzone>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set initDataFromDropzone(t){throw new Error("<Dropzone>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<Dropzone>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(t){throw new Error("<Dropzone>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get curDataset(){throw new Error("<Dropzone>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set curDataset(t){throw new Error("<Dropzone>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var af='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>',of=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 66 82" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-3896,-24)">
        <g transform="matrix(1,0,0,1,-0.831706,0)">
            <g id="icon-file" transform="matrix(1,0,0,0.996062,3887.07,100.115)">
                <path d="M27.49,-23.779C26.644,-23.779 25.944,-24.048 25.391,-24.585C24.837,-25.122 24.561,-25.781 24.561,-26.563C24.561,-27.376 24.837,-28.052 25.391,-28.589C25.944,-29.126 26.644,-29.395 27.49,-29.395L57.129,-29.395C57.975,-29.395 58.675,-29.126 59.228,-28.589C59.782,-28.052 60.059,-27.376 60.059,-26.563C60.059,-25.781 59.782,-25.122 59.228,-24.585C58.675,-24.048 57.975,-23.779 57.129,-23.779L27.49,-23.779ZM27.49,-9.082C26.644,-9.082 25.944,-9.351 25.391,-9.888C24.837,-10.425 24.561,-11.1 24.561,-11.914C24.561,-12.695 24.837,-13.363 25.391,-13.916C25.944,-14.469 26.644,-14.746 27.49,-14.746L57.129,-14.746C57.975,-14.746 58.675,-14.469 59.228,-13.916C59.782,-13.363 60.059,-12.695 60.059,-11.914C60.059,-11.1 59.782,-10.425 59.228,-9.888C58.675,-9.351 57.975,-9.082 57.129,-9.082L27.49,-9.082ZM22.022,5.908L62.5,5.908C66.602,5.908 69.678,4.867 71.729,2.783C73.779,0.7 74.805,-2.409 74.805,-6.543L74.805,-40.43L46.875,-40.43C41.797,-40.43 39.258,-42.969 39.258,-48.047L39.258,-76.416L22.022,-76.416C17.92,-76.416 14.852,-75.374 12.817,-73.291C10.783,-71.208 9.766,-68.099 9.766,-63.965L9.766,-6.543C9.766,-2.376 10.783,0.741 12.817,2.808C14.852,4.875 17.92,5.908 22.022,5.908ZM46.875,-46.143L74.365,-46.143C74.235,-47.054 73.877,-47.957 73.291,-48.853C72.705,-49.748 71.891,-50.716 70.85,-51.758L50.586,-72.461C49.577,-73.503 48.617,-74.325 47.705,-74.927C46.794,-75.529 45.882,-75.911 44.971,-76.074L44.971,-48.047C44.971,-46.777 45.605,-46.143 46.875,-46.143Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`;const{Map:j2,Object:X2}=co,Le="src/components/timber/Timber.svelte";function ri(e,t,n){const r=e.slice();return r[22]=t[n],r}function lf(e){let t,n,r,i,s,a;n=new rh({props:{favoritesStore:e[8],sunburstStore:e[9],searchStore:e[12],sunburstWidth:e[5]},$$inline:!0}),s=new dh({props:{data:e[3],initDepthGap:e[2],sunburstStore:e[9],treeWindowStore:e[10],pinnedTreeStore:e[11],searchStore:e[12]},$$inline:!0});const o={c:function(){t=V("div"),rt(n.$$.fragment),r=B(),i=V("div"),rt(s.$$.fragment),x(t,"class","toolbar s-DgMWn4VSIQjZ"),C(t,Le,315,8,8968),x(i,"class","sunburst-wrapper s-DgMWn4VSIQjZ"),C(i,Le,324,8,9157)},m:function(l,c){fe(l,t,c),Qe(n,t,null),fe(l,r,c),fe(l,i,c),Qe(s,i,null),a=!0},p:function(l,c){const h={};c&32&&(h.sunburstWidth=l[5]),n.$set(h);const f={};c&8&&(f.data=l[3]),c&4&&(f.initDepthGap=l[2]),s.$set(f)},i:function(l){a||(ye(n.$$.fragment,l),ye(s.$$.fragment,l),a=!0)},o:function(l){be(n.$$.fragment,l),be(s.$$.fragment,l),a=!1},d:function(l){l&&oe(t),Ke(n),l&&oe(r),l&&oe(i),Ke(s)}};return re("SvelteRegisterBlock",{block:o,id:lf.name,type:"else",source:"(315:6) {:else}",ctx:e}),o}function cf(e){let t,n;t=new sf({props:{initDataFromDropzone:e[7],width:e[5],curDataset:e[0]},$$inline:!0});const r={c:function(){rt(t.$$.fragment)},m:function(s,a){Qe(t,s,a),n=!0},p:function(s,a){const o={};a&32&&(o.width=s[5]),a&1&&(o.curDataset=s[0]),t.$set(o)},i:function(s){n||(ye(t.$$.fragment,s),n=!0)},o:function(s){be(t.$$.fragment,s),n=!1},d:function(s){Ke(t,s)}};return re("SvelteRegisterBlock",{block:r,id:cf.name,type:"if",source:"(313:6) {#if data === null}",ctx:e}),r}function Xa(e){let t,n,r,i;n=new Fh({props:{pinnedTree:e[22],pinnedTreeStore:e[11],favoritesStore:e[8]},$$inline:!0});const s={c:function(){t=V("div"),rt(n.$$.fragment),x(t,"class","pinned-tree-window-wrapper s-DgMWn4VSIQjZ"),C(t,Le,354,6,9851)},m:function(o,u){fe(o,t,u),Qe(n,t,null),i=!0},p:function(o,u){const l={};u&64&&(l.pinnedTree=o[22]),n.$set(l)},i:function(o){i||(ye(n.$$.fragment,o),r&&r.end(1),i=!0)},o:function(o){be(n.$$.fragment,o),r=lo(t,Vr,{duration:100}),i=!1},d:function(o){o&&oe(t),Ke(n),o&&r&&r.end()}};return re("SvelteRegisterBlock",{block:s,id:Xa.name,type:"if",source:"(354:4) {#if pinnedTree.isPinned}",ctx:e}),s}function qa(e,t){let n,r,i,s=t[22].isPinned&&Xa(t);const a={key:e,first:null,c:function(){n=ea(),s&&s.c(),r=ea(),this.first=n},m:function(u,l){fe(u,n,l),s&&s.m(u,l),fe(u,r,l),i=!0},p:function(u,l){t=u,t[22].isPinned?s?(s.p(t,l),l&64&&ye(s,1)):(s=Xa(t),s.c(),ye(s,1),s.m(r.parentNode,r)):s&&(It(),be(s,1,1,()=>{s=null}),Rt())},i:function(u){i||(ye(s),i=!0)},o:function(u){be(s),i=!1},d:function(u){u&&oe(n),s&&s.d(u),u&&oe(r)}};return re("SvelteRegisterBlock",{block:a,id:qa.name,type:"each",source:"(353:2) {#each pinnedTreeStoreValue.pinnedTrees as pinnedTree (pinnedTree.treeID)}",ctx:t}),a}function Za(e){let t,n,r,i,s,a,o,u,l,c,h,f,p,y,d,g,m,b,w,S,k,F,R,A,H,Y,N,D,E,v=[],T=new j2,M,P;const W=[cf,lf],z=[];function G(K,J){return K[3]===null?0:1}b=G(e),w=z[b]=W[b](e),F=new zh({props:{favoritesStore:e[8],pinnedTreeStore:e[11],width:e[5]},$$inline:!0}),H=new tf({props:{data:e[3],searchStore:e[12],width:e[5]},$$inline:!0}),D=new wh({props:{data:e[3],featureMap:e[4],treeWindowStore:e[10]},$$inline:!0});let U=e[6].pinnedTrees;Be(U);const Z=K=>K[22].treeID;_i(e,U,ri,Z);for(let K=0;K<U.length;K+=1){let J=ri(e,U,K),j=Z(J);T.set(j,v[K]=qa(j,J))}const Q={c:function(){t=V("div"),n=V("div"),r=V("div"),i=V("div"),s=V("div"),a=B(),o=V("div"),u=V("div"),u.textContent="TimberTrek",l=B(),c=V("div"),c.textContent="Curating decision trees that align with human knowledge",h=B(),f=V("div"),p=V("a"),y=B(),d=V("a"),g=B(),m=V("div"),w.c(),S=B(),k=V("div"),rt(F.$$.fragment),R=B(),A=V("div"),rt(H.$$.fragment),N=B(),rt(D.$$.fragment),E=B();for(let J=0;J<v.length;J+=1)v[J].c();M=B(),x(s,"class","svg-icon s-DgMWn4VSIQjZ"),C(s,Le,275,8,7903),x(u,"class","logo-icon s-DgMWn4VSIQjZ"),C(u,Le,279,10,8010),x(c,"class","logo-tag s-DgMWn4VSIQjZ"),x(c,"title","Curating decision trees that align with human knowledge"),he(c,"no-display",e[5]<400),C(c,Le,280,10,8060),x(o,"class","logo-text s-DgMWn4VSIQjZ"),C(o,Le,278,8,7976),x(i,"class","logo s-DgMWn4VSIQjZ"),C(i,Le,274,6,7876),x(p,"class","svg-icon paper-icon s-DgMWn4VSIQjZ"),x(p,"title","Research paper"),x(p,"target","_blank"),x(p,"href","https://arxiv.org/abs/1908.01755"),C(p,Le,291,8,8387),x(d,"class","svg-icon s-DgMWn4VSIQjZ"),x(d,"title","Open-source code"),x(d,"target","_blank"),x(d,"href","https://arxiv.org/abs/1908.01755"),C(d,Le,300,8,8597),x(f,"class","right-icons s-DgMWn4VSIQjZ"),C(f,Le,290,6,8353),x(r,"class","header s-DgMWn4VSIQjZ"),C(r,Le,273,4,7849),x(m,"class","content s-DgMWn4VSIQjZ"),C(m,Le,311,4,8819),x(k,"class","sidebar s-DgMWn4VSIQjZ"),C(k,Le,337,4,9424),x(A,"class","sidebar s-DgMWn4VSIQjZ"),C(A,Le,345,4,9574),x(n,"class","timbertrek s-DgMWn4VSIQjZ"),x(n,"style",Y=`width: ${e[5]}px;`),C(n,Le,272,2,7783),x(t,"class","timbertrek-page s-DgMWn4VSIQjZ"),C(t,Le,271,0,7729)},l:function(J){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(J,j){fe(J,t,j),_(t,n),_(n,r),_(r,i),_(i,s),s.innerHTML=bs,_(i,a),_(i,o),_(o,u),_(o,l),_(o,c),_(r,h),_(r,f),_(f,p),p.innerHTML=of,_(f,y),_(f,d),d.innerHTML=af,_(n,g),_(n,m),z[b].m(m,null),_(n,S),_(n,k),Qe(F,k,null),_(n,R),_(n,A),Qe(H,A,null),_(t,N),Qe(D,t,null),_(t,E);for(let ne=0;ne<v.length;ne+=1)v[ne].m(t,null);_(t,M),e[18](t),P=!0},p:function(J,[j]){j&32&&he(c,"no-display",J[5]<400);let ne=b;b=G(J),b===ne?z[b].p(J,j):(It(),be(z[ne],1,1,()=>{z[ne]=null}),Rt(),w=z[b],w?w.p(J,j):(w=z[b]=W[b](J),w.c()),ye(w,1),w.m(m,null));const ue={};j&32&&(ue.width=J[5]),F.$set(ue);const q={};j&8&&(q.data=J[3]),j&32&&(q.width=J[5]),H.$set(q),(!P||j&32&&Y!==(Y=`width: ${J[5]}px;`))&&x(n,"style",Y);const ee={};j&8&&(ee.data=J[3]),j&16&&(ee.featureMap=J[4]),D.$set(ee),j&2368&&(U=J[6].pinnedTrees,Be(U),It(),_i(J,U,ri,Z),v=Ec(v,j,Z,1,J,U,T,t,Rc,qa,M,ri),Rt())},i:function(J){if(!P){ye(w),ye(F.$$.fragment,J),ye(H.$$.fragment,J),ye(D.$$.fragment,J);for(let j=0;j<U.length;j+=1)ye(v[j]);P=!0}},o:function(J){be(w),be(F.$$.fragment,J),be(H.$$.fragment,J),be(D.$$.fragment,J);for(let j=0;j<v.length;j+=1)be(v[j]);P=!1},d:function(J){J&&oe(t),z[b].d(),Ke(F),Ke(H),Ke(D);for(let j=0;j<v.length;j+=1)v[j].d();e[18](null)}};return re("SvelteRegisterBlock",{block:Q,id:Za.name,type:"component",source:"",ctx:e}),Q}const q2=!1;function Z2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("Timber",r,[]);let{notebookMode:s=!1}=t,{curDataset:a="compas"}=t,{timbertrekTransitioning:o=!1}=t,u=null,l=!1,c=!1,h=2,f=null,p=null,y=s?500:650;const d=new Map;d.set("compas","compas-rules-mul_0.05-reg_0.01.json"),d.set("fico","fico-rules-mul_0.05-reg_0.01.json"),d.set("car evaluation","car-rules-mul_0.15-reg_0.015.json"),d.set("my own set","");const g=D=>{n(3,f=D),n(4,p=new Map);for(const[E,v]of Object.entries(f.featureMap))p.set(parseInt(E),v)},m=async D=>{if(D!=="my own dataset"&&(D==="car evaluation"?n(2,h=4):n(2,h=2),d.has(D))){n(15,l=!0);const E=d.get(D),v=await I.json(`/timbertrek/data/${E}`);g(v)}},b=D=>{n(3,f=D),n(4,p=new Map);for(const[E,v]of Object.entries(f.featureMap))p.set(parseInt(E),v)},w=tl(),S=nl(),k=rl(),F=il(),R=sl();let A=Vn();F.subscribe(D=>{n(6,A=D)}),ke(()=>{s&&document.addEventListener("timbertrekData",D=>{const E=D,v=E.data;n(5,y=E.width),g(v)}),n(16,c=!0)});const H=["notebookMode","curDataset","timbertrekTransitioning"];X2.keys(t).forEach(D=>{!~H.indexOf(D)&&D.slice(0,2)!=="$$"&&D!=="slot"&&console.warn(`<Timber> was created with unknown prop '${D}'`)});const Y=()=>{localStorage.clear()};function N(D){Oe[D?"unshift":"push"](()=>{u=D,n(1,u)})}return e.$$set=D=>{"notebookMode"in D&&n(13,s=D.notebookMode),"curDataset"in D&&n(0,a=D.curDataset),"timbertrekTransitioning"in D&&n(14,o=D.timbertrekTransitioning)},e.$capture_state=()=>({onMount:ke,fade:Vr,cubicInOut:Pf,getFavoritesStore:tl,getSunburstStore:nl,getTreeWindowStore:rl,getPinnedTreeStore:il,getPinnedTreeStoreDefaultValue:Vn,getSearchStore:sl,Toolbar:rh,Sunburst:dh,TreeWindow:wh,PinnedTreeWindow:Fh,FavoritesPanel:zh,SearchPanel:tf,Dropzone:sf,d3:I,logoIcon:bs,githubIcon:af,paperIcon:of,notebookMode:s,curDataset:a,timbertrekTransitioning:o,component:u,initialized:l,mounted:c,initDepthGap:h,data:f,featureMap:p,sunburstWidth:y,devMode:q2,datasetMap:d,initData:g,readDataFromFile:m,initDataFromDropzone:b,favoritesStore:w,sunburstStore:S,treeWindowStore:k,pinnedTreeStore:F,searchStore:R,pinnedTreeStoreValue:A}),e.$inject_state=D=>{"notebookMode"in D&&n(13,s=D.notebookMode),"curDataset"in D&&n(0,a=D.curDataset),"timbertrekTransitioning"in D&&n(14,o=D.timbertrekTransitioning),"component"in D&&n(1,u=D.component),"initialized"in D&&n(15,l=D.initialized),"mounted"in D&&n(16,c=D.mounted),"initDepthGap"in D&&n(2,h=D.initDepthGap),"data"in D&&n(3,f=D.data),"featureMap"in D&&n(4,p=D.featureMap),"sunburstWidth"in D&&n(5,y=D.sunburstWidth),"pinnedTreeStoreValue"in D&&n(6,A=D.pinnedTreeStoreValue)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&122881&&!s&&a&&!l&&c&&!o&&m(a)},[a,u,h,f,p,y,A,b,w,S,k,F,R,s,o,l,c,Y,N]}class Ss extends at{constructor(t){super(t);it(this,t,Z2,Za,Xe,{notebookMode:13,curDataset:0,timbertrekTransitioning:14}),re("SvelteRegisterComponent",{component:this,tagName:"Timber",options:t,id:Za.name})}get notebookMode(){throw new Error("<Timber>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set notebookMode(t){throw new Error("<Timber>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get curDataset(){throw new Error("<Timber>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set curDataset(t){throw new Error("<Timber>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get timbertrekTransitioning(){throw new Error("<Timber>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set timbertrekTransitioning(t){throw new Error("<Timber>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var uf=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 401 401" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;">
    <g transform="matrix(1,0,0,1,-19411,-12326)">
        <g transform="matrix(2.82395,0,0,1,1793.2,6727.4)">
            <g id="timbertrek-logo-light" transform="matrix(0.614272,1.43604e-16,-7.51731e-17,1.15942,2779.06,-823.626)">
                <g transform="matrix(0.628201,0,0,0.939888,2139.91,-523.818)">
                    <path d="M5691.27,6656.44L5660.64,6656.44L5742.98,6526.8L5823.36,6656.44L5792.72,6656.44L5820.76,6721.2L5742.66,6679.85L5663.24,6721.12L5691.27,6656.44ZM5742.89,6571.51L5742.89,6652.51L5790.28,6676.11L5742.89,6571.51Z" style="fill:rgb(128,128,128);"/>
                </g>
                <g transform="matrix(0.950085,-2.46519e-32,-2.46519e-32,0.950085,286.898,285.116)">
                    <g transform="matrix(-0.445586,6.73401e-17,-1.13133e-16,-1.66667,8499.43,14925.7)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);stroke:rgb(128,128,128);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(1.15018e-15,-0.666667,1.11396,4.44089e-15,-410.51,9829)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);stroke:rgb(128,128,128);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.445586,3.52496e-15,-6.0106e-15,1.66667,2996,-3501.67)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);stroke:rgb(128,128,128);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-3.52474e-15,0.666667,-1.11396,-1.33227e-14,11905.9,1595)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);stroke:rgb(128,128,128);stroke-width:2.98px;"/>
                    </g>
                </g>
                <g transform="matrix(0.634876,0,0,0.949874,1764.5,-89.8317)">
                    <g transform="matrix(-0.61592,-0.255122,0.637806,-1.5398,6551.69,16195.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.471405,-0.471405,1.17851,-1.17851,2670.11,15534.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.255122,-0.61592,1.5398,-0.637806,-662.81,13437.5)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.255122,-0.61592,1.5398,0.637806,-3813.83,6385.69)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.471405,-0.471405,1.17851,1.17851,-3152.2,2504.11)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.61592,-0.255122,0.637806,1.5398,-1055.53,-828.81)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.61592,0.255122,-0.637806,1.5398,5996.31,-3979.83)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.471405,0.471405,-1.17851,1.17851,9877.89,-3318.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.255122,0.61592,-1.5398,0.637806,13210.8,-1221.53)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.255122,0.61592,-1.5398,-0.637806,16361.8,5830.31)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.471405,0.471405,-1.17851,-1.17851,15700.2,9711.89)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.61592,0.255122,-0.637806,-1.5398,13603.5,13044.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                </g>
                <g transform="matrix(0.660497,0,0,0.988207,1497.7,1465.12)">
                    <path d="M6434.56,4123C6530.9,4123 6609.12,4201.22 6609.12,4297.56C6609.12,4393.9 6530.9,4472.12 6434.56,4472.12C6338.22,4472.12 6260,4393.9 6260,4297.56C6260,4201.22 6338.22,4123 6434.56,4123ZM6434.56,4139.36C6521.87,4139.36 6592.75,4210.25 6592.75,4297.56C6592.75,4384.87 6521.87,4455.75 6434.56,4455.75C6347.25,4455.75 6276.36,4384.87 6276.36,4297.56C6276.36,4210.25 6347.25,4139.36 6434.56,4139.36Z" style="fill:rgb(128,128,128);"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,Jt={tool:[`It is essential to understand how machine learning (ML) models make predictions in high-stakes settings such as healthcare, finance, and criminal justice. ML researchers have made great strides in developing interpretable models, and recent research focuses on <strong>operationalizing interpretability</strong> \u2014 leveraging an understanding of the domain to create more responsible and trustworthy ML systems.
`,`To help ML practitioners build trustworthy models, researchers have very recently developed a technique to generate the set of almost-optimal sparse interpretable decision trees. This set of high-performing models is called the <a target="_blank" href="https://arxiv.org/abs/1908.01755">Rashomon set</a>, named after the <a target="_blank" href="https://projecteuclid.org/journals/statistical-science/volume-16/issue-3/Statistical-Modeling--The-Two-Cultures-with-comments-and-a/10.1214/ss/1009213726.full">Rashomon effect</a> in statistics. A Rashomon set of sparse decision trees can have <em>thousands of inherently interpretable and almost-equally accurate models</em>, providing opportunities for users to choose ones that best align with their knowledge and needs (e.g., fairness, monotonicity, simplicity). However, the large size and diversity of Rashomon sets pose challenges for users to effectively explore and compare all these good models. TimberTrek is the first interactive visualization tool designed to tackle this critical challenge through <strong>summarizing the whole Rashomon set</strong> of sparse decision trees and empowering users to <strong>curate accurate and trustworthy models</strong>.
`],usage:{p1:`With a flexible interface design, there are two options to use TimberTrek to explore your Rashomon sets. The first option is to select MY SET on the top of this page, and then upload your Rashomon trie data by dragging it to the interface (Video 2-1). You can follow the instruction in the tool to learn how to generate the Rashomon JSON file.
`,p2:`You can directly use TimberTrek in any computational notebooks (e.g., Jupyter Notebook/Lab, Google Colab, and VS Code). To do that, you only need to install TimberTrek's Python package via <code>pip install timbertrek</code>. Then you can create a TimberTrek instance by passing your Rashomon trie data. With Jupyter Sticky Cells, you can even create multiple repositionable TimberTrek windows and compare different subsets of a Rashomon set side by side!
`}};Jt.tool;Jt.usage;const Me="src/components/article/Article.svelte";function bc(e,t,n){const r=e.slice();return r[9]=t[n],r}function Sc(e,t,n){const r=e.slice();return r[12]=t[n],r[14]=n,r}function Ja(e){let t,n,r,i,s,a,o;n=new Ss({props:{notebookMode:!1,curDataset:e[1],timbertrekTransitioning:e[2]},$$inline:!0});const u={c:function(){t=V("div"),rt(n.$$.fragment),x(t,"class","timbertrek-wrapper s-NAp586LyR7ay"),C(t,Me,301,8,6846)},m:function(c,h){fe(c,t,h),Qe(n,t,null),s=!0,a||(o=[ae(t,"introstart",e[5],!1,!1,!1),ae(t,"introend",e[6],!1,!1,!1)],a=!0)},p:function(c,h){const f={};h&2&&(f.curDataset=c[1]),h&4&&(f.timbertrekTransitioning=c[2]),n.$set(f)},i:function(c){s||(ye(n.$$.fragment,c),Tn(()=>{i&&i.end(1),r=Lf(t,na,{x:300,duration:300}),r.start()}),s=!0)},o:function(c){be(n.$$.fragment,c),r&&r.invalidate(),i=lo(t,na,{x:-300,duration:300}),s=!1},d:function(c){c&&oe(t),Ke(n),c&&i&&i.end(),a=!1,He(o)}};return re("SvelteRegisterBlock",{block:u,id:Ja.name,type:"key",source:"(301:6) {#key curDataset}",ctx:e}),u}function Qa(e){let t,n=e[12]+"",r,i,s,a;function o(){return e[7](e[12])}const u={c:function(){t=V("span"),r=pe(n),i=B(),x(t,"class","option s-NAp586LyR7ay"),x(t,"data-text",e[12]),he(t,"selected",e[12]===e[1]),C(t,Me,325,10,7511)},m:function(c,h){fe(c,t,h),_(t,r),_(t,i),s||(a=ae(t,"click",o,!1,!1,!1),s=!0)},p:function(c,h){e=c,h&10&&he(t,"selected",e[12]===e[1])},d:function(c){c&&oe(t),s=!1,a()}};return re("SvelteRegisterBlock",{block:u,id:Qa.name,type:"each",source:"(325:8) {#each datasets as name, i}",ctx:e}),u}function Ka(e){let t,n=e[9]+"";const r={c:function(){t=V("p"),x(t,"class","s-NAp586LyR7ay"),C(t,Me,345,6,7959)},m:function(s,a){fe(s,t,a),t.innerHTML=n},p:de,d:function(s){s&&oe(t)}};return re("SvelteRegisterBlock",{block:r,id:Ka.name,type:"each",source:"(345:4) {#each text.tool as p}",ctx:e}),r}function $a(e){let t,n,r,i=e[1],s,a,o,u,l,c,h,f,p,y,d,g,m,b,w,S,k=Jt.usage.p1+"",F,R,A=Jt.usage.p2+"",H,Y,N,D,E,v=Ja(e),T=e[3];Be(T);let M=[];for(let G=0;G<T.length;G+=1)M[G]=Qa(Sc(e,T,G));let P=Jt.tool;Be(P);let W=[];for(let G=0;G<P.length;G+=1)W[G]=Ka(bc(e,P,G));const z={c:function(){t=V("div"),n=V("div"),r=V("div"),v.c(),s=B(),a=V("div"),o=V("span"),o.textContent="Choose a Rashomon set:",u=B(),l=V("div");for(let U=0;U<M.length;U+=1)M[U].c();c=B(),h=V("div"),f=V("h2"),p=V("span"),p.textContent="What is TimberTrek?",y=B(),d=V("span"),g=B();for(let U=0;U<W.length;U+=1)W[U].c();m=B(),b=V("h2"),b.textContent="How to Use TimberTrek?",w=B(),S=V("p"),F=B(),R=V("p"),H=B(),Y=V("div"),N=V("iframe"),x(r,"class","timbertrek-app s-NAp586LyR7ay"),C(r,Me,299,4,6785),x(o,"class","option-title s-NAp586LyR7ay"),C(o,Me,322,6,7380),x(l,"class","options s-NAp586LyR7ay"),C(l,Me,323,6,7443),x(a,"class","dataset-options s-NAp586LyR7ay"),C(a,Me,321,4,7344),x(n,"class","main-app s-NAp586LyR7ay"),C(n,Me,298,2,6736),x(p,"class","s-NAp586LyR7ay"),C(p,Me,340,6,7819),x(d,"class","svg-icon logo-icon s-NAp586LyR7ay"),C(d,Me,341,6,7858),x(f,"id","tool"),x(f,"class","s-NAp586LyR7ay"),C(f,Me,339,4,7798),x(b,"id","usage"),x(b,"class","s-NAp586LyR7ay"),C(b,Me,348,4,7993),x(S,"class","s-NAp586LyR7ay"),C(S,Me,349,4,8040),x(R,"class","s-NAp586LyR7ay"),C(R,Me,350,4,8073),wf(N.src,D="https://xiaohk.github.io/timbertrek/notebook/retro/notebooks/?path=campas.ipynb")||x(N,"src",D),x(N,"width","100%"),x(N,"height","500px"),x(N,"class","s-NAp586LyR7ay"),C(N,Me,353,6,8140),x(Y,"class","jupyter-demo s-NAp586LyR7ay"),C(Y,Me,352,4,8107),x(h,"class","article s-NAp586LyR7ay"),C(h,Me,338,2,7772),x(t,"class","article-page s-NAp586LyR7ay"),C(t,Me,297,0,6707)},l:function(U){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(U,Z){fe(U,t,Z),_(t,n),_(n,r),v.m(r,null),_(n,s),_(n,a),_(a,o),_(a,u),_(a,l);for(let Q=0;Q<M.length;Q+=1)M[Q].m(l,null);e[8](n),_(t,c),_(t,h),_(h,f),_(f,p),_(f,y),_(f,d),d.innerHTML=uf,_(h,g);for(let Q=0;Q<W.length;Q+=1)W[Q].m(h,null);_(h,m),_(h,b),_(h,w),_(h,S),S.innerHTML=k,_(h,F),_(h,R),R.innerHTML=A,_(h,H),_(h,Y),_(Y,N),E=!0},p:function(U,[Z]){if(Z&2&&Xe(i,i=U[1])?(It(),be(v,1,1,de),Rt(),v=Ja(U),v.c(),ye(v),v.m(r,null)):v.p(U,Z),Z&26){T=U[3],Be(T);let Q;for(Q=0;Q<T.length;Q+=1){const K=Sc(U,T,Q);M[Q]?M[Q].p(K,Z):(M[Q]=Qa(K),M[Q].c(),M[Q].m(l,null))}for(;Q<M.length;Q+=1)M[Q].d(1);M.length=T.length}if(Z&0){P=Jt.tool,Be(P);let Q;for(Q=0;Q<P.length;Q+=1){const K=bc(U,P,Q);W[Q]?W[Q].p(K,Z):(W[Q]=Ka(K),W[Q].c(),W[Q].m(h,m))}for(;Q<W.length;Q+=1)W[Q].d(1);W.length=P.length}},i:function(U){E||(ye(v),E=!0)},o:function(U){be(v),E=!1},d:function(U){U&&oe(t),v.d(U),or(M,U),e[8](null),or(W,U)}};return re("SvelteRegisterBlock",{block:z,id:$a.name,type:"component",source:"",ctx:e}),z}function J2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("Article",r,[]);let s=null,a="compas",o=!1;const u=["compas","fico","car evaluation","my own set"],l=d=>{n(2,o=!0),n(1,a=d)};ke(()=>{});const c=[];Object.keys(t).forEach(d=>{!~c.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<Article> was created with unknown prop '${d}'`)});const h=()=>{n(2,o=!0)},f=()=>{n(2,o=!1)},p=d=>l(d);function y(d){Oe[d?"unshift":"push"](()=>{s=d,n(0,s)})}return e.$capture_state=()=>({onMount:ke,TimberTrek:Ss,fade:Vr,fly:na,iconLogo:uf,text:Jt,component:s,curDataset:a,timbertrekTransitioning:o,datasets:u,optionClicked:l}),e.$inject_state=d=>{"component"in d&&n(0,s=d.component),"curDataset"in d&&n(1,a=d.curDataset),"timbertrekTransitioning"in d&&n(2,o=d.timbertrekTransitioning)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,a,o,u,l,h,f,p,y]}class hf extends at{constructor(t){super(t);it(this,t,J2,$a,Xe,{}),re("SvelteRegisterComponent",{component:this,tagName:"Article",options:t,id:$a.name})}}const _c="src/components/notebook/Notebook.svelte";function eo(e){let t,n,r,i;r=new Ss({props:{notebookMode:!0},$$inline:!0});const s={c:function(){t=V("div"),n=V("div"),rt(r.$$.fragment),x(n,"class","main-app s-G67tNxa3tjK8"),C(n,_c,22,2,453),x(t,"class","notebook-page s-G67tNxa3tjK8"),C(t,_c,21,0,423)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,u){fe(o,t,u),_(t,n),Qe(r,n,null),e[1](n),i=!0},p:de,i:function(o){i||(ye(r.$$.fragment,o),i=!0)},o:function(o){be(r.$$.fragment,o),i=!1},d:function(o){o&&oe(t),Ke(r),e[1](null)}};return re("SvelteRegisterBlock",{block:s,id:eo.name,type:"component",source:"",ctx:e}),s}function Q2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("Notebook",r,[]);let s=null;const a=[];Object.keys(t).forEach(u=>{!~a.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Notebook> was created with unknown prop '${u}'`)});function o(u){Oe[u?"unshift":"push"](()=>{s=u,n(0,s)})}return e.$capture_state=()=>({onMount:ke,TimberTrek:Ss,component:s}),e.$inject_state=u=>{"component"in u&&n(0,s=u.component)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,o]}class ff extends at{constructor(t){super(t);it(this,t,Q2,eo,Xe,{}),re("SvelteRegisterComponent",{component:this,tagName:"Notebook",options:t,id:eo.name})}}const ii="src/App.svelte";function df(e){let t,n;t=new ff({$$inline:!0});const r={c:function(){rt(t.$$.fragment)},m:function(s,a){Qe(t,s,a),n=!0},i:function(s){n||(ye(t.$$.fragment,s),n=!0)},o:function(s){be(t.$$.fragment,s),n=!1},d:function(s){Ke(t,s)}};return re("SvelteRegisterBlock",{block:r,id:df.name,type:"else",source:"(20:2) {:else}",ctx:e}),r}function pf(e){let t,n;t=new hf({$$inline:!0});const r={c:function(){rt(t.$$.fragment)},m:function(s,a){Qe(t,s,a),n=!0},i:function(s){n||(ye(t.$$.fragment,s),n=!0)},o:function(s){be(t.$$.fragment,s),n=!1},d:function(s){Ke(t,s)}};return re("SvelteRegisterBlock",{block:r,id:pf.name,type:"if",source:"(18:2) {#if mode === 'article'}",ctx:e}),r}function to(e){let t,n,r,i,s,a,o,u;const l=[pf,df],c=[];function h(p,y){return p[0]==="article"?0:1}a=h(e),o=c[a]=l[a](e);const f={c:function(){t=V("link"),n=V("link"),r=V("link"),i=B(),s=V("div"),o.c(),x(t,"rel","preconnect"),x(t,"href","https://fonts.googleapis.com"),x(t,"class","s-XsEmFtvddWTw"),C(t,ii,8,2,228),x(n,"rel","preconnect"),x(n,"href","https://fonts.gstatic.com"),x(n,"crossorigin",""),x(n,"class","s-XsEmFtvddWTw"),C(n,ii,9,2,292),x(r,"href","https://fonts.googleapis.com/css2?family=Lato&display=swap"),x(r,"rel","stylesheet"),x(r,"class","s-XsEmFtvddWTw"),C(r,ii,10,2,365),x(s,"class","stand-alone-page s-XsEmFtvddWTw"),C(s,ii,16,0,483)},l:function(y){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(y,d){_(document.head,t),_(document.head,n),_(document.head,r),fe(y,i,d),fe(y,s,d),c[a].m(s,null),u=!0},p:function(y,[d]){let g=a;a=h(y),a!==g&&(It(),be(c[g],1,1,()=>{c[g]=null}),Rt(),o=c[a],o||(o=c[a]=l[a](y),o.c()),ye(o,1),o.m(s,null))},i:function(y){u||(ye(o),u=!0)},o:function(y){be(o),u=!1},d:function(y){oe(t),oe(n),oe(r),y&&oe(i),y&&oe(s),c[a].d()}};return re("SvelteRegisterBlock",{block:f,id:to.name,type:"component",source:"",ctx:e}),f}function K2(e,t,n){let{$$slots:r={},$$scope:i}=t;st("App",r,[]);let{mode:s="article"}=t;const a=["mode"];return Object.keys(t).forEach(o=>{!~a.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<App> was created with unknown prop '${o}'`)}),e.$$set=o=>{"mode"in o&&n(0,s=o.mode)},e.$capture_state=()=>({Article:hf,Notebook:ff,mode:s}),e.$inject_state=o=>{"mode"in o&&n(0,s=o.mode)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s]}class $2 extends at{constructor(t){super(t);it(this,t,K2,to,Xe,{mode:0}),re("SvelteRegisterComponent",{component:this,tagName:"App",options:t,id:to.name})}get mode(){throw new Error("<App>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(t){throw new Error("<App>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}new $2({target:document.body,props:{mode:"article"}});
