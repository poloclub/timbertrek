var Ff=Object.defineProperty;var Pf=(e,t,n)=>t in e?Ff(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var N=(e,t,n)=>(Pf(e,typeof t!="symbol"?t+"":t,n),n),ul=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var qs=(e,t,n)=>(ul(e,t,"read from private field"),n?n.call(e):t.get(e)),ge=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};var ne=(e,t,n)=>(ul(e,t,"access private method"),n);const Rf=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};Rf();function ye(){}const Rs=e=>e;function T(e,t,n,r,i){e.__svelte_meta={loc:{file:t,line:n,column:r,char:i}}}function Wc(e){return e()}function hl(){return Object.create(null)}function ze(e){e.forEach(Wc)}function ti(e){return typeof e=="function"}function it(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let hi;function Is(e,t){return hi||(hi=document.createElement("a")),hi.href=t,e===hi.href}function If(e){return Object.keys(e).length===0}const Oc=typeof window!="undefined";let Ao=Oc?()=>window.performance.now():()=>Date.now(),Do=Oc?e=>requestAnimationFrame(e):ye;const Zn=new Set;function zc(e){Zn.forEach(t=>{t.c(e)||(Zn.delete(t),t.f())}),Zn.size!==0&&Do(zc)}function Lo(e){let t;return Zn.size===0&&Do(zc),{promise:new Promise(n=>{Zn.add(t={c:e,f:n})}),abort(){Zn.delete(t)}}}function Gc(e,t){e.appendChild(t)}function Yc(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ef(e){const t=M("style");return Wf(Yc(e),t),t.sheet}function Wf(e,t){Gc(e.head||e,t)}function Bc(e,t,n){e.insertBefore(t,n||null)}function No(e){e.parentNode.removeChild(e)}function un(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function M(e){return document.createElement(e)}function Nn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function oe(e){return document.createTextNode(e)}function O(){return oe(" ")}function zi(){return oe("")}function Of(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function zf(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Gf(e){return Array.from(e.childNodes)}function Gi(e,t){e.value=t==null?"":t}function Xn(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function me(e,t,n){e.classList[n?"add":"remove"](t)}function Ho(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}class An{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,n,r=null){this.e||(this.e=M(n.nodeName),this.t=n,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)Bc(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(No)}}const Yi=new Map;let Bi=0;function Yf(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Bf(e,t){const n={stylesheet:Ef(t),rules:{}};return Yi.set(e,n),n}function Fo(e,t,n,r,i,s,a,o=0){const u=16.666/r;let l=`{
`;for(let m=0;m<=1;m+=u){const y=t+(n-t)*s(m);l+=m*100+`%{${a(y,1-y)}}
`}const c=l+`100% {${a(n,1-n)}}
}`,f=`__svelte_${Yf(c)}_${o}`,h=Yc(e),{stylesheet:p,rules:g}=Yi.get(h)||Bf(h,e);g[f]||(g[f]=!0,p.insertRule(`@keyframes ${f} ${c}`,p.cssRules.length));const d=e.style.animation||"";return e.style.animation=`${d?`${d}, `:""}${f} ${r}ms linear ${i}ms 1 both`,Bi+=1,f}function Ui(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Bi-=i,Bi||Uf())}function Uf(){Do(()=>{Bi||(Yi.forEach(e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}}),Yi.clear())})}function jf(e,t,n,r){if(!t)return ye;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return ye;const{delay:s=0,duration:a=300,easing:o=Rs,start:u=Ao()+s,end:l=u+a,tick:c=ye,css:f}=n(e,{from:t,to:i},r);let h=!0,p=!1,g;function d(){f&&(g=Fo(e,0,1,a,s,o,f)),s||(p=!0)}function m(){f&&Ui(e,g),h=!1}return Lo(y=>{if(!p&&y>=u&&(p=!0),p&&y>=l&&(c(1,0),m()),!h)return!1;if(p){const x=y-u,v=0+1*o(x/a);c(v,1-v)}return!0}),d(),c(0,1),m}function Xf(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,Uc(e,i)}}function Uc(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i=r.transform==="none"?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Pr;function Hr(e){Pr=e}function ni(){if(!Pr)throw new Error("Function called outside component initialization");return Pr}function Le(e){ni().$$.on_mount.push(e)}function ji(e){ni().$$.on_destroy.push(e)}function fl(){const e=ni();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=Ho(t,n);r.slice().forEach(s=>{s.call(e,i)})}}}function qf(e,t){ni().$$.context.set(e,t)}function Zf(e){return ni().$$.context.get(e)}const Vr=[],et=[],Di=[],dl=[],jc=Promise.resolve();let _a=!1;function Xc(){_a||(_a=!0,jc.then(qc))}function Po(){return Xc(),jc}function ir(e){Di.push(e)}const Zs=new Set;let fi=0;function qc(){const e=Pr;do{for(;fi<Vr.length;){const t=Vr[fi];fi++,Hr(t),Jf(t.$$)}for(Hr(null),Vr.length=0,fi=0;et.length;)et.pop()();for(let t=0;t<Di.length;t+=1){const n=Di[t];Zs.has(n)||(Zs.add(n),n())}Di.length=0}while(Vr.length);for(;dl.length;)dl.pop()();_a=!1,Zs.clear(),Hr(e)}function Jf(e){if(e.fragment!==null){e.update(),ze(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ir)}}let br;function Zc(){return br||(br=Promise.resolve(),br.then(()=>{br=null})),br}function Xi(e,t,n){e.dispatchEvent(Ho(`${t?"intro":"outro"}${n}`))}const Li=new Set;let hn;function pn(){hn={r:0,c:[],p:hn}}function gn(){hn.r||ze(hn.c),hn=hn.p}function _e(e,t){e&&e.i&&(Li.delete(e),e.i(t))}function Ve(e,t,n,r){if(e&&e.o){if(Li.has(e))return;Li.add(e),hn.c.push(()=>{Li.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const Jc={duration:0};function Qf(e,t,n){let r=t(e,n),i=!1,s,a,o=0;function u(){s&&Ui(e,s)}function l(){const{delay:f=0,duration:h=300,easing:p=Rs,tick:g=ye,css:d}=r||Jc;d&&(s=Fo(e,0,1,h,f,p,d,o++)),g(0,1);const m=Ao()+f,y=m+h;a&&a.abort(),i=!0,ir(()=>Xi(e,!0,"start")),a=Lo(x=>{if(i){if(x>=y)return g(1,0),Xi(e,!0,"end"),u(),i=!1;if(x>=m){const v=p((x-m)/h);g(v,1-v)}}return i})}let c=!1;return{start(){c||(c=!0,Ui(e),ti(r)?(r=r(),Zc().then(l)):l())},invalidate(){c=!1},end(){i&&(u(),i=!1)}}}function Ro(e,t,n){let r=t(e,n),i=!0,s;const a=hn;a.r+=1;function o(){const{delay:u=0,duration:l=300,easing:c=Rs,tick:f=ye,css:h}=r||Jc;h&&(s=Fo(e,1,0,l,u,c,h));const p=Ao()+u,g=p+l;ir(()=>Xi(e,!1,"start")),Lo(d=>{if(i){if(d>=g)return f(0,1),Xi(e,!1,"end"),--a.r||ze(a.c),!1;if(d>=p){const m=c((d-p)/l);f(1-m,m)}}return i})}return ti(r)?Zc().then(()=>{r=r(),o()}):o(),{end(u){u&&r.tick&&r.tick(1,0),i&&(s&&Ui(e,s),i=!1)}}}const Io=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Qc(e,t){Ve(e,1,1,()=>{t.delete(e.key)})}function Kf(e,t){e.f(),Qc(e,t)}function Kc(e,t,n,r,i,s,a,o,u,l,c,f){let h=e.length,p=s.length,g=h;const d={};for(;g--;)d[e[g].key]=g;const m=[],y=new Map,x=new Map;for(g=p;g--;){const F=f(i,s,g),I=n(F);let V=a.get(I);V?r&&V.p(F,t):(V=l(I,F),V.c()),y.set(I,m[g]=V),I in d&&x.set(I,Math.abs(g-d[I]))}const v=new Set,S=new Set;function k(F){_e(F,1),F.m(o,c),a.set(F.key,F),c=F.first,p--}for(;h&&p;){const F=m[p-1],I=e[h-1],V=F.key,D=I.key;F===I?(c=F.first,h--,p--):y.has(D)?!a.has(V)||v.has(V)?k(F):S.has(D)?h--:x.get(V)>x.get(D)?(S.add(V),k(F)):(v.add(D),h--):(u(I,a),h--)}for(;h--;){const F=e[h];y.has(F.key)||u(F,a)}for(;p;)k(m[p-1]);return m}function qi(e,t,n,r){const i=new Set;for(let s=0;s<t.length;s++){const a=r(n(e,t,s));if(i.has(a))throw new Error("Cannot have duplicate keys in a keyed each");i.add(a)}}function gt(e){e&&e.c()}function lt(e,t,n,r){const{fragment:i,on_mount:s,on_destroy:a,after_update:o}=e.$$;i&&i.m(t,n),r||ir(()=>{const u=s.map(Wc).filter(ti);a?a.push(...u):ze(u),e.$$.on_mount=[]}),o.forEach(ir)}function ct(e,t){const n=e.$$;n.fragment!==null&&(ze(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $f(e,t){e.$$.dirty[0]===-1&&(Vr.push(e),Xc(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function mt(e,t,n,r,i,s,a,o=[-1]){const u=Pr;Hr(e);const l=e.$$={fragment:null,ctx:null,props:s,update:ye,not_equal:i,bound:hl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:hl(),dirty:o,skip_bound:!1,root:t.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,h,...p)=>{const g=p.length?p[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=g)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](g),c&&$f(e,f)),h}):[],l.update(),c=!0,ze(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=Gf(t.target);l.fragment&&l.fragment.l(f),f.forEach(No)}else l.fragment&&l.fragment.c();t.intro&&_e(e.$$.fragment),lt(e,t.target,t.anchor,t.customElement),qc()}Hr(u)}class e0{$destroy(){ct(this,1),this.$destroy=ye}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!If(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ee(e,t){document.dispatchEvent(Ho(e,Object.assign({version:"3.46.6"},t),!0))}function w(e,t){ee("SvelteDOMInsert",{target:e,node:t}),Gc(e,t)}function le(e,t,n){ee("SvelteDOMInsert",{target:e,node:t,anchor:n}),Bc(e,t,n)}function se(e){ee("SvelteDOMRemove",{node:e}),No(e)}function de(e,t,n,r,i,s){const a=r===!0?["capture"]:r?Array.from(Object.keys(r)):[];i&&a.push("preventDefault"),s&&a.push("stopPropagation"),ee("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:a});const o=Of(e,t,n,r);return()=>{ee("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:a}),o()}}function b(e,t,n){zf(e,t,n),n==null?ee("SvelteDOMRemoveAttribute",{node:e,attribute:t}):ee("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function We(e,t){t=""+t,e.wholeText!==t&&(ee("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function Re(e){if(typeof e!="string"&&!(e&&typeof e=="object"&&"length"in e)){let t="{#each} only iterates over array-like objects.";throw typeof Symbol=="function"&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function yt(e,t,n){for(const r of Object.keys(t))~n.indexOf(r)||console.warn(`<${e}> received an unexpected slot "${r}".`)}class wt extends e0{constructor(t){if(!t||!t.target&&!t.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}function t0(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}function $c(e){const t=e-1;return t*t*t+1}function ri(e,{delay:t=0,duration:n=400,easing:r=Rs}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}function xa(e,{delay:t=0,duration:n=400,easing:r=$c,x:i=0,y:s=0,opacity:a=0}={}){const o=getComputedStyle(e),u=+o.opacity,l=o.transform==="none"?"":o.transform,c=u*(1-a);return{delay:t,duration:n,easing:r,css:(f,h)=>`
			transform: ${l} translate(${(1-f)*i}px, ${(1-f)*s}px);
			opacity: ${u-c*h}`}}const On=[];function ii(e,t=ye){let n;const r=new Set;function i(o){if(it(e,o)&&(e=o,n)){const u=!On.length;for(const l of r)l[1](),On.push(l,e);if(u){for(let l=0;l<On.length;l+=2)On[l][0](On[l+1]);On.length=0}}}function s(o){i(o(e))}function a(o,u=ye){const l=[o,u];return r.add(l),r.size===1&&(n=t(i)||ye),o(e),()=>{r.delete(l),r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}var Dn=(e=>(e[e.DepthChanged=0]="DepthChanged",e.None="",e))(Dn||{});const sr=()=>({shown:!1,favTrees:[]}),Eo=()=>({depthMax:0,depthLow:0,depthHigh:0,depthColors:[],action:""}),Wo=()=>({featureMap:new Map,treeMap:new Map,treeID:0,ancestorFs:[],show:!1,x:20,y:20,getFeatureColor:null}),ar=()=>({shown:!1,curAccuracyLow:0,curAccuracyHigh:1,curMinSampleLow:0,curMinSampleHigh:100,curHeightRange:new Set([]),curDepthFeatures:new Map,curAllFeatures:new Set([]),treeDepthFeaturesMap:null,treeHeightMap:null,treeMinSampleMap:null,featureMap:new Map,getFeatureColor:null,featureOrder:[],updatePlots:null}),or=()=>({pinnedTrees:[],lastActiveTreeID:null,getFeatureColor:null,getFeatureInfo:null}),pl=()=>ii(sr()),gl=()=>ii(Eo()),ml=()=>ii(Wo()),yl=()=>ii(or()),wl=()=>ii(ar());var ka="http://www.w3.org/1999/xhtml",vl={svg:"http://www.w3.org/2000/svg",xhtml:ka,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Es(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),vl.hasOwnProperty(t)?{space:vl[t],local:e}:e}function n0(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ka&&t.documentElement.namespaceURI===ka?t.createElement(e):t.createElementNS(n,e)}}function r0(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function eu(e){var t=Es(e);return(t.local?r0:n0)(t)}function i0(){}function Oo(e){return e==null?i0:function(){return this.querySelector(e)}}function s0(e){typeof e!="function"&&(e=Oo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),u,l,c=0;c<a;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),o[c]=l);return new rt(r,this._parents)}function tu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function a0(){return[]}function nu(e){return e==null?a0:function(){return this.querySelectorAll(e)}}function o0(e){return function(){return tu(e.apply(this,arguments))}}function l0(e){typeof e=="function"?e=o0(e):e=nu(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&(r.push(e.call(u,u.__data__,l,a)),i.push(u));return new rt(r,i)}function ru(e){return function(){return this.matches(e)}}function iu(e){return function(t){return t.matches(e)}}var c0=Array.prototype.find;function u0(e){return function(){return c0.call(this.children,e)}}function h0(){return this.firstElementChild}function f0(e){return this.select(e==null?h0:u0(typeof e=="function"?e:iu(e)))}var d0=Array.prototype.filter;function p0(){return Array.from(this.children)}function g0(e){return function(){return d0.call(this.children,e)}}function m0(e){return this.selectAll(e==null?p0:g0(typeof e=="function"?e:iu(e)))}function y0(e){typeof e!="function"&&(e=ru(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&o.push(u);return new rt(r,this._parents)}function su(e){return new Array(e.length)}function w0(){return new rt(this._enter||this._groups.map(su),this._parents)}function Zi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zi.prototype={constructor:Zi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function v0(e){return function(){return e}}function b0(e,t,n,r,i,s){for(var a=0,o,u=t.length,l=s.length;a<l;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new Zi(e,s[a]);for(;a<u;++a)(o=t[a])&&(i[a]=o)}function S0(e,t,n,r,i,s,a){var o,u,l=new Map,c=t.length,f=s.length,h=new Array(c),p;for(o=0;o<c;++o)(u=t[o])&&(h[o]=p=a.call(u,u.__data__,o,t)+"",l.has(p)?i[o]=u:l.set(p,u));for(o=0;o<f;++o)p=a.call(e,s[o],o,s)+"",(u=l.get(p))?(r[o]=u,u.__data__=s[o],l.delete(p)):n[o]=new Zi(e,s[o]);for(o=0;o<c;++o)(u=t[o])&&l.get(h[o])===u&&(i[o]=u)}function _0(e){return e.__data__}function x0(e,t){if(!arguments.length)return Array.from(this,_0);var n=t?S0:b0,r=this._parents,i=this._groups;typeof e!="function"&&(e=v0(e));for(var s=i.length,a=new Array(s),o=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],h=f.length,p=k0(e.call(c,c&&c.__data__,l,r)),g=p.length,d=o[l]=new Array(g),m=a[l]=new Array(g),y=u[l]=new Array(h);n(c,f,d,m,y,p,t);for(var x=0,v=0,S,k;x<g;++x)if(S=d[x]){for(x>=v&&(v=x+1);!(k=m[v])&&++v<g;);S._next=k||null}}return a=new rt(a,r),a._enter=o,a._exit=u,a}function k0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function T0(){return new rt(this._exit||this._groups.map(su),this._parents)}function M0(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function C0(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),u=0;u<a;++u)for(var l=n[u],c=r[u],f=l.length,h=o[u]=new Array(f),p,g=0;g<f;++g)(p=l[g]||c[g])&&(h[g]=p);for(;u<i;++u)o[u]=n[u];return new rt(o,this._parents)}function V0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function A0(e){e||(e=D0);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,u=i[s]=new Array(o),l,c=0;c<o;++c)(l=a[c])&&(u[c]=l);u.sort(t)}return new rt(i,this._parents).order()}function D0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function L0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function N0(){return Array.from(this)}function H0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function F0(){let e=0;for(const t of this)++e;return e}function P0(){return!this.node()}function R0(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function I0(e){return function(){this.removeAttribute(e)}}function E0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function W0(e,t){return function(){this.setAttribute(e,t)}}function O0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function z0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function G0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Y0(e,t){var n=Es(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?E0:I0:typeof t=="function"?n.local?G0:z0:n.local?O0:W0)(n,t))}function au(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function B0(e){return function(){this.style.removeProperty(e)}}function U0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function j0(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function X0(e,t,n){return arguments.length>1?this.each((t==null?B0:typeof t=="function"?j0:U0)(e,t,n==null?"":n)):lr(this.node(),e)}function lr(e,t){return e.style.getPropertyValue(t)||au(e).getComputedStyle(e,null).getPropertyValue(t)}function q0(e){return function(){delete this[e]}}function Z0(e,t){return function(){this[e]=t}}function J0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Q0(e,t){return arguments.length>1?this.each((t==null?q0:typeof t=="function"?J0:Z0)(e,t)):this.node()[e]}function ou(e){return e.trim().split(/^|\s+/)}function zo(e){return e.classList||new lu(e)}function lu(e){this._node=e,this._names=ou(e.getAttribute("class")||"")}lu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cu(e,t){for(var n=zo(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function uu(e,t){for(var n=zo(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function K0(e){return function(){cu(this,e)}}function $0(e){return function(){uu(this,e)}}function ed(e,t){return function(){(t.apply(this,arguments)?cu:uu)(this,e)}}function td(e,t){var n=ou(e+"");if(arguments.length<2){for(var r=zo(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ed:t?K0:$0)(n,t))}function nd(){this.textContent=""}function rd(e){return function(){this.textContent=e}}function id(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function sd(e){return arguments.length?this.each(e==null?nd:(typeof e=="function"?id:rd)(e)):this.node().textContent}function ad(){this.innerHTML=""}function od(e){return function(){this.innerHTML=e}}function ld(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function cd(e){return arguments.length?this.each(e==null?ad:(typeof e=="function"?ld:od)(e)):this.node().innerHTML}function ud(){this.nextSibling&&this.parentNode.appendChild(this)}function hd(){return this.each(ud)}function fd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dd(){return this.each(fd)}function pd(e){var t=typeof e=="function"?e:eu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function gd(){return null}function md(e,t){var n=typeof e=="function"?e:eu(e),r=t==null?gd:typeof t=="function"?t:Oo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function yd(){var e=this.parentNode;e&&e.removeChild(this)}function wd(){return this.each(yd)}function vd(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sd(e){return this.select(e?bd:vd)}function _d(e){return arguments.length?this.property("__data__",e):this.node().__data__}function xd(e){return function(t){e.call(this,t,this.__data__)}}function kd(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Td(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Md(e,t,n){return function(){var r=this.__on,i,s=xd(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Cd(e,t,n){var r=kd(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var u=0,l=o.length,c;u<l;++u)for(i=0,c=o[u];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=t?Md:Td,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function hu(e,t,n){var r=au(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Vd(e,t){return function(){return hu(this,e,t)}}function Ad(e,t){return function(){return hu(this,e,t.apply(this,arguments))}}function Dd(e,t){return this.each((typeof t=="function"?Ad:Vd)(e,t))}function*Ld(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var Go=[null];function rt(e,t){this._groups=e,this._parents=t}function pr(){return new rt([[document.documentElement]],Go)}function Nd(){return this}rt.prototype=pr.prototype={constructor:rt,select:s0,selectAll:l0,selectChild:f0,selectChildren:m0,filter:y0,data:x0,enter:w0,exit:T0,join:M0,merge:C0,selection:Nd,order:V0,sort:A0,call:L0,nodes:N0,node:H0,size:F0,empty:P0,each:R0,attr:Y0,style:X0,property:Q0,classed:td,text:sd,html:cd,raise:hd,lower:dd,append:pd,insert:md,remove:wd,clone:Sd,datum:_d,on:Cd,dispatch:Dd,[Symbol.iterator]:Ld};function nt(e){return typeof e=="string"?new rt([[document.querySelector(e)]],[document.documentElement]):new rt([[e]],Go)}function Hd(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ct(e,t){if(e=Hd(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Fd(e){return typeof e=="string"?new rt([document.querySelectorAll(e)],[document.documentElement]):new rt([tu(e)],Go)}function Pd(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function Rd(e,t){return fetch(e,t).then(Pd)}function Ta(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fu(e){let t=e,n=e,r=e;e.length!==2&&(t=(o,u)=>e(o)-u,n=Ta,r=(o,u)=>Ta(e(o),u));function i(o,u,l=0,c=o.length){if(l<c){if(n(u,u)!==0)return c;do{const f=l+c>>>1;r(o[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(o,u,l=0,c=o.length){if(l<c){if(n(u,u)!==0)return c;do{const f=l+c>>>1;r(o[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function a(o,u,l=0,c=o.length){const f=i(o,u,l,c-1);return f>l&&t(o[f-1],u)>-t(o[f],u)?f-1:f}return{left:i,center:a,right:s}}function Id(e){return e===null?NaN:+e}const Ed=fu(Ta),Wd=Ed.right;fu(Id).center;var du=Wd;function Od(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function Ni(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class bl extends Map{constructor(t,n=Yd){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Sl(this,t))}has(t){return super.has(Sl(this,t))}set(t,n){return super.set(zd(this,t),n)}delete(t){return super.delete(Gd(this,t))}}function Sl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function zd({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Gd({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Yd(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Bd(e){return e}var Ud=Array.prototype,jd=Ud.slice;function di(e){return()=>e}var Ma=Math.sqrt(50),Ca=Math.sqrt(10),Va=Math.sqrt(2);function Ji(e,t,n){var r,i=-1,s,a,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(s=e,e=t,t=s),(o=Rr(e,t,n))===0||!isFinite(o))return[];if(o>0){let u=Math.round(e/o),l=Math.round(t/o);for(u*o<e&&++u,l*o>t&&--l,a=new Array(s=l-u+1);++i<s;)a[i]=(u+i)*o}else{o=-o;let u=Math.round(e*o),l=Math.round(t*o);for(u/o<e&&++u,l/o>t&&--l,a=new Array(s=l-u+1);++i<s;)a[i]=(u+i)/o}return r&&a.reverse(),a}function Rr(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=Ma?10:s>=Ca?5:s>=Va?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=Ma?10:s>=Ca?5:s>=Va?2:1)}function Xd(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Ma?i*=10:s>=Ca?i*=5:s>=Va&&(i*=2),t<e?-i:i}function qd(e,t,n){let r;for(;;){const i=Rr(e,t,n);if(i===r||i===0||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function Zd(e){return Math.ceil(Math.log(Od(e))/Math.LN2)+1}function Jd(){var e=Bd,t=Ni,n=Zd;function r(i){Array.isArray(i)||(i=Array.from(i));var s,a=i.length,o,u,l=new Array(a);for(s=0;s<a;++s)l[s]=e(i[s],s,i);var c=t(l),f=c[0],h=c[1],p=n(l,f,h);if(!Array.isArray(p)){const y=h,x=+p;if(t===Ni&&([f,h]=qd(f,h,x)),p=Ji(f,h,x),p[0]<=f&&(u=Rr(f,h,x)),p[p.length-1]>=h)if(y>=h&&t===Ni){const v=Rr(f,h,x);isFinite(v)&&(v>0?h=(Math.floor(h/v)+1)*v:v<0&&(h=(Math.ceil(h*-v)+1)/-v))}else p.pop()}for(var g=p.length;p[0]<=f;)p.shift(),--g;for(;p[g-1]>h;)p.pop(),--g;var d=new Array(g+1),m;for(s=0;s<=g;++s)m=d[s]=[],m.x0=s>0?p[s-1]:f,m.x1=s<g?p[s]:h;if(isFinite(u)){if(u>0)for(s=0;s<a;++s)(o=l[s])!=null&&f<=o&&o<=h&&d[Math.floor((o-f)/u)].push(i[s]);else if(u<0)for(s=0;s<a;++s)(o=l[s])!=null&&f<=o&&o<=h&&d[Math.floor((f-o)*u)].push(i[s])}else for(s=0;s<a;++s)(o=l[s])!=null&&f<=o&&o<=h&&d[du(p,o,0,g)].push(i[s]);return d}return r.value=function(i){return arguments.length?(e=typeof i=="function"?i:di(i),r):e},r.domain=function(i){return arguments.length?(t=typeof i=="function"?i:di([i[0],i[1]]),r):t},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Array.isArray(i)?di(jd.call(i)):di(i),r):n},r}function Qd(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Kd(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function $d(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s,r=i);return r}function e1(e,t){let n,r=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);else for(let s of e)(s=t(s,++i,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s,r=i);return r}function t1(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function n1(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function si(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const _l=Symbol("implicit");function Yo(){var e=new bl,t=[],n=[],r=_l;function i(s){let a=e.get(s);if(a===void 0){if(r!==_l)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new bl;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Yo(t,n).unknown(r)},si.apply(i,arguments),i}function Bo(){var e=Yo().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,a,o=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var h=t().length,p=i<r,g=p?i:r,d=p?r:i;s=(d-g)/Math.max(1,h-u+l*2),o&&(s=Math.floor(s)),g+=(d-g-s*(h-u))*c,a=s*(1-u),o&&(g=Math.round(g),a=Math.round(a));var m=t1(h).map(function(y){return g+s*y});return n(p?m.reverse():m)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,f()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(u=Math.min(1,l=+h),f()):u},e.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),f()):u},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return Bo(t(),[r,i]).round(o).paddingInner(u).paddingOuter(l).align(c)},si.apply(f(),arguments)}function pu(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pu(t())},e}function r1(){return pu(Bo.apply(null,arguments).paddingInner(1))}function gr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ai(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function wn(){}var Pn=.7,cr=1/Pn,Jn="\\s*([+-]?\\d+)\\s*",Ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i1=/^#([0-9a-f]{3,8})$/,s1=new RegExp(`^rgb\\(${Jn},${Jn},${Jn}\\)$`),a1=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),o1=new RegExp(`^rgba\\(${Jn},${Jn},${Jn},${Ir}\\)$`),l1=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Ir}\\)$`),c1=new RegExp(`^hsl\\(${Ir},${Wt},${Wt}\\)$`),u1=new RegExp(`^hsla\\(${Ir},${Wt},${Wt},${Ir}\\)$`),xl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gr(wn,mn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kl,formatHex:kl,formatHex8:h1,formatHsl:f1,formatRgb:Tl,toString:Tl});function kl(){return this.rgb().formatHex()}function h1(){return this.rgb().formatHex8()}function f1(){return gu(this).formatHsl()}function Tl(){return this.rgb().formatRgb()}function mn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=i1.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ml(t):n===3?new Oe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=s1.exec(e))?new Oe(t[1],t[2],t[3],1):(t=a1.exec(e))?new Oe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=o1.exec(e))?pi(t[1],t[2],t[3],t[4]):(t=l1.exec(e))?pi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=c1.exec(e))?Al(t[1],t[2]/100,t[3]/100,1):(t=u1.exec(e))?Al(t[1],t[2]/100,t[3]/100,t[4]):xl.hasOwnProperty(e)?Ml(xl[e]):e==="transparent"?new Oe(NaN,NaN,NaN,0):null}function Ml(e){return new Oe(e>>16&255,e>>8&255,e&255,1)}function pi(e,t,n,r){return r<=0&&(e=t=n=NaN),new Oe(e,t,n,r)}function Uo(e){return e instanceof wn||(e=mn(e)),e?(e=e.rgb(),new Oe(e.r,e.g,e.b,e.opacity)):new Oe}function Aa(e,t,n,r){return arguments.length===1?Uo(e):new Oe(e,t,n,r==null?1:r)}function Oe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}gr(Oe,Aa,ai(wn,{brighter(e){return e=e==null?cr:Math.pow(cr,e),new Oe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pn:Math.pow(Pn,e),new Oe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Oe(Hn(this.r),Hn(this.g),Hn(this.b),Qi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cl,formatHex:Cl,formatHex8:d1,formatRgb:Vl,toString:Vl}));function Cl(){return`#${Ln(this.r)}${Ln(this.g)}${Ln(this.b)}`}function d1(){return`#${Ln(this.r)}${Ln(this.g)}${Ln(this.b)}${Ln((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vl(){const e=Qi(this.opacity);return`${e===1?"rgb(":"rgba("}${Hn(this.r)}, ${Hn(this.g)}, ${Hn(this.b)}${e===1?")":`, ${e})`}`}function Qi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ln(e){return e=Hn(e),(e<16?"0":"")+e.toString(16)}function Al(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Dt(e,t,n,r)}function gu(e){if(e instanceof Dt)return new Dt(e.h,e.s,e.l,e.opacity);if(e instanceof wn||(e=mn(e)),!e)return new Dt;if(e instanceof Dt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,u=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=u<.5?s+i:2-s-i,a*=60):o=u>0&&u<1?0:a,new Dt(a,o,u,e.opacity)}function mu(e,t,n,r){return arguments.length===1?gu(e):new Dt(e,t,n,r==null?1:r)}function Dt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gr(Dt,mu,ai(wn,{brighter(e){return e=e==null?cr:Math.pow(cr,e),new Dt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pn:Math.pow(Pn,e),new Dt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Oe(Js(e>=240?e-240:e+120,i,r),Js(e,i,r),Js(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Dt(Dl(this.h),gi(this.s),gi(this.l),Qi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qi(this.opacity);return`${e===1?"hsl(":"hsla("}${Dl(this.h)}, ${gi(this.s)*100}%, ${gi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dl(e){return e=(e||0)%360,e<0?e+360:e}function gi(e){return Math.max(0,Math.min(1,e||0))}function Js(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yu=Math.PI/180,wu=180/Math.PI,Ki=18,vu=.96422,bu=1,Su=.82521,_u=4/29,Qn=6/29,xu=3*Qn*Qn,p1=Qn*Qn*Qn;function ku(e){if(e instanceof Ot)return new Ot(e.l,e.a,e.b,e.opacity);if(e instanceof It)return Mu(e);e instanceof Oe||(e=Uo(e));var t=ea(e.r),n=ea(e.g),r=ea(e.b),i=Qs((.2225045*t+.7168786*n+.0606169*r)/bu),s,a;return t===n&&n===r?s=a=i:(s=Qs((.4360747*t+.3850649*n+.1430804*r)/vu),a=Qs((.0139322*t+.0971045*n+.7141733*r)/Su)),new Ot(116*i-16,500*(s-i),200*(i-a),e.opacity)}function g1(e,t,n,r){return arguments.length===1?ku(e):new Ot(e,t,n,r==null?1:r)}function Ot(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}gr(Ot,g1,ai(wn,{brighter(e){return new Ot(this.l+Ki*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new Ot(this.l-Ki*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=vu*Ks(t),e=bu*Ks(e),n=Su*Ks(n),new Oe($s(3.1338561*t-1.6168667*e-.4906146*n),$s(-.9787684*t+1.9161415*e+.033454*n),$s(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Qs(e){return e>p1?Math.pow(e,1/3):e/xu+_u}function Ks(e){return e>Qn?e*e*e:xu*(e-_u)}function $s(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ea(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Tu(e){if(e instanceof It)return new It(e.h,e.c,e.l,e.opacity);if(e instanceof Ot||(e=ku(e)),e.a===0&&e.b===0)return new It(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*wu;return new It(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function m1(e,t,n,r){return arguments.length===1?Tu(e):new It(n,t,e,r==null?1:r)}function y1(e,t,n,r){return arguments.length===1?Tu(e):new It(e,t,n,r==null?1:r)}function It(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Mu(e){if(isNaN(e.h))return new Ot(e.l,0,0,e.opacity);var t=e.h*yu;return new Ot(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}gr(It,y1,ai(wn,{brighter(e){return new It(this.h,this.c,this.l+Ki*(e==null?1:e),this.opacity)},darker(e){return new It(this.h,this.c,this.l-Ki*(e==null?1:e),this.opacity)},rgb(){return Mu(this).rgb()}}));var Cu=-.14861,jo=1.78277,Xo=-.29227,Ws=-.90649,Er=1.97294,Ll=Er*Ws,Nl=Er*jo,Hl=jo*Xo-Ws*Cu;function w1(e){if(e instanceof Fn)return new Fn(e.h,e.s,e.l,e.opacity);e instanceof Oe||(e=Uo(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Hl*r+Ll*t-Nl*n)/(Hl+Ll-Nl),s=r-i,a=(Er*(n-i)-Xo*s)/Ws,o=Math.sqrt(a*a+s*s)/(Er*i*(1-i)),u=o?Math.atan2(a,s)*wu-120:NaN;return new Fn(u<0?u+360:u,o,i,e.opacity)}function yn(e,t,n,r){return arguments.length===1?w1(e):new Fn(e,t,n,r==null?1:r)}function Fn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gr(Fn,yn,ai(wn,{brighter(e){return e=e==null?cr:Math.pow(cr,e),new Fn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pn:Math.pow(Pn,e),new Fn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*yu,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Oe(255*(t+n*(Cu*r+jo*i)),255*(t+n*(Xo*r+Ws*i)),255*(t+n*(Er*r)),this.opacity)}}));var Os=e=>()=>e;function Vu(e,t){return function(n){return e+n*t}}function v1(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function b1(e,t){var n=t-e;return n?Vu(e,n>180||n<-180?n-360*Math.round(n/360):n):Os(isNaN(e)?t:e)}function S1(e){return(e=+e)==1?Kn:function(t,n){return n-t?v1(t,n,e):Os(isNaN(t)?n:t)}}function Kn(e,t){var n=t-e;return n?Vu(e,n):Os(isNaN(e)?t:e)}var $i=function e(t){var n=S1(t);function r(i,s){var a=n((i=Aa(i)).r,(s=Aa(s)).r),o=n(i.g,s.g),u=n(i.b,s.b),l=Kn(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function _1(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function x1(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function k1(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=oi(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function T1(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Vt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function M1(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=oi(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Da=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ta=new RegExp(Da.source,"g");function C1(e){return function(){return e}}function V1(e){return function(t){return e(t)+""}}function Au(e,t){var n=Da.lastIndex=ta.lastIndex=0,r,i,s,a=-1,o=[],u=[];for(e=e+"",t=t+"";(r=Da.exec(e))&&(i=ta.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,u.push({i:a,x:Vt(r,i)})),n=ta.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?u[0]?V1(u[0].x):C1(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)o[(f=u[c]).i]=f.x(l);return o.join("")})}function oi(e,t){var n=typeof t,r;return t==null||n==="boolean"?Os(t):(n==="number"?Vt:n==="string"?(r=mn(t))?(t=r,$i):Au:t instanceof mn?$i:t instanceof Date?T1:x1(t)?_1:Array.isArray(t)?k1:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?M1:Vt)(e,t)}function A1(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Fl=180/Math.PI,La={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Du(e,t,n,r,i,s){var a,o,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,u/=o),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Fl,skewX:Math.atan(u)*Fl,scaleX:a,scaleY:o}}var mi;function D1(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?La:Du(t.a,t.b,t.c,t.d,t.e,t.f)}function L1(e){return e==null||(mi||(mi=document.createElementNS("http://www.w3.org/2000/svg","g")),mi.setAttribute("transform",e),!(e=mi.transform.baseVal.consolidate()))?La:(e=e.matrix,Du(e.a,e.b,e.c,e.d,e.e,e.f))}function Lu(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,h,p,g){if(l!==f||c!==h){var d=p.push("translate(",null,t,null,n);g.push({i:d-4,x:Vt(l,f)},{i:d-2,x:Vt(c,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function a(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Vt(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function o(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Vt(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,h,p,g){if(l!==f||c!==h){var d=p.push(i(p)+"scale(",null,",",null,")");g.push({i:d-4,x:Vt(l,f)},{i:d-2,x:Vt(c,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,h),a(l.rotate,c.rotate,f,h),o(l.skewX,c.skewX,f,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(p){for(var g=-1,d=h.length,m;++g<d;)f[(m=h[g]).i]=m.x(p);return f.join("")}}}var N1=Lu(D1,"px, ","px)","deg)"),H1=Lu(L1,", ",")",")"),F1=1e-12;function Pl(e){return((e=Math.exp(e))+1/e)/2}function P1(e){return((e=Math.exp(e))-1/e)/2}function R1(e){return((e=Math.exp(2*e))-1)/(e+1)}var I1=function e(t,n,r){function i(s,a){var o=s[0],u=s[1],l=s[2],c=a[0],f=a[1],h=a[2],p=c-o,g=f-u,d=p*p+g*g,m,y;if(d<F1)y=Math.log(h/l)/t,m=function(I){return[o+I*p,u+I*g,l*Math.exp(t*I*y)]};else{var x=Math.sqrt(d),v=(h*h-l*l+r*d)/(2*l*n*x),S=(h*h-l*l-r*d)/(2*h*n*x),k=Math.log(Math.sqrt(v*v+1)-v),F=Math.log(Math.sqrt(S*S+1)-S);y=(F-k)/t,m=function(I){var V=I*y,D=Pl(k),z=l/(n*x)*(D*R1(t*V+k)-P1(k));return[o+z*p,u+z*g,l*D/Pl(t*V+k)]}}return m.duration=y*1e3*t/Math.SQRT2,m}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,u=o*o;return e(a,o,u)},i}(Math.SQRT2,2,4);function Nu(e){return function t(n){n=+n;function r(i,s){var a=e((i=yn(i)).h,(s=yn(s)).h),o=Kn(i.s,s.s),u=Kn(i.l,s.l),l=Kn(i.opacity,s.opacity);return function(c){return i.h=a(c),i.s=o(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}Nu(b1);var Hu=Nu(Kn);function E1(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}function W1(e){return function(){return e}}function O1(e){return+e}var Rl=[0,1];function Et(e){return e}function Na(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:W1(isNaN(t)?NaN:.5)}function z1(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function G1(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=Na(i,r),s=n(a,s)):(r=Na(r,i),s=n(s,a)),function(o){return s(r(o))}}function Y1(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Na(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var u=du(e,o,1,r)-1;return s[u](i[u](o))}}function qo(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zo(){var e=Rl,t=Rl,n=oi,r,i,s,a=Et,o,u,l;function c(){var h=Math.min(e.length,t.length);return a!==Et&&(a=z1(e[0],e[h-1])),o=h>2?Y1:G1,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?s:(u||(u=o(e.map(r),t,n)))(r(a(h)))}return f.invert=function(h){return a(i((l||(l=o(t,e.map(r),Vt)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,O1),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=A1,c()},f.clamp=function(h){return arguments.length?(a=h?!0:Et,c()):a!==Et},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return r=h,i=p,c()}}function B1(){return Zo()(Et,Et)}function U1(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function es(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ur(e){return e=es(Math.abs(e)),e?e[1]:NaN}function j1(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],u=0;i>0&&o>0&&(u+o+1>r&&(o=Math.max(1,r-u)),s.push(n.substring(i-=o,i+o)),!((u+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function X1(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var q1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wr(e){if(!(t=q1.exec(e)))throw new Error("invalid format: "+e);var t;return new Jo({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Wr.prototype=Jo.prototype;function Jo(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Jo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Z1(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Fu;function J1(e,t){var n=es(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Fu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+es(e,Math.max(0,t+s-1))[0]}function Il(e,t){var n=es(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var El={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:U1,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Il(e*100,t),r:Il,s:J1,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Wl(e){return e}var Ol=Array.prototype.map,zl=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Q1(e){var t=e.grouping===void 0||e.thousands===void 0?Wl:j1(Ol.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Wl:X1(Ol.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Wr(f);var h=f.fill,p=f.align,g=f.sign,d=f.symbol,m=f.zero,y=f.width,x=f.comma,v=f.precision,S=f.trim,k=f.type;k==="n"?(x=!0,k="g"):El[k]||(v===void 0&&(v=12),S=!0,k="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var F=d==="$"?n:d==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",I=d==="$"?r:/[%p]/.test(k)?a:"",V=El[k],D=/[defgprs%]/.test(k);v=v===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function z(H){var R=F,A=I,_,C,L;if(k==="c")A=V(H)+A,H="";else{H=+H;var P=H<0||1/H<0;if(H=isNaN(H)?u:V(Math.abs(H),v),S&&(H=Z1(H)),P&&+H==0&&g!=="+"&&(P=!1),R=(P?g==="("?g:o:g==="-"||g==="("?"":g)+R,A=(k==="s"?zl[8+Fu/3]:"")+A+(P&&g==="("?")":""),D){for(_=-1,C=H.length;++_<C;)if(L=H.charCodeAt(_),48>L||L>57){A=(L===46?i+H.slice(_+1):H.slice(_))+A,H=H.slice(0,_);break}}}x&&!m&&(H=t(H,1/0));var G=R.length+H.length+A.length,Y=G<y?new Array(y-G+1).join(h):"";switch(x&&m&&(H=t(Y+H,Y.length?y-A.length:1/0),Y=""),p){case"<":H=R+H+A+Y;break;case"=":H=R+Y+H+A;break;case"^":H=Y.slice(0,G=Y.length>>1)+R+H+A+Y.slice(G);break;default:H=Y+R+H+A;break}return s(H)}return z.toString=function(){return f+""},z}function c(f,h){var p=l((f=Wr(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(ur(h)/3)))*3,d=Math.pow(10,-g),m=zl[8+g/3];return function(y){return p(d*y)+m}}return{format:l,formatPrefix:c}}var yi,zs,Pu;K1({thousands:",",grouping:[3],currency:["$",""]});function K1(e){return yi=Q1(e),zs=yi.format,Pu=yi.formatPrefix,yi}function $1(e){return Math.max(0,-ur(Math.abs(e)))}function ep(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ur(t)/3)))*3-ur(Math.abs(e)))}function tp(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ur(t)-ur(e))+1}function np(e,t,n,r){var i=Xd(e,t,n),s;switch(r=Wr(r==null?",f":r),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=ep(i,a))&&(r.precision=s),Pu(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=tp(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=$1(i))&&(r.precision=s-(r.type==="%")*2);break}}return zs(r)}function Ru(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ji(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return np(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],u,l,c=10;for(o<a&&(l=a,a=o,o=l,l=i,i=s,s=l);c-- >0;){if(l=Rr(a,o,n),l===u)return r[i]=a,r[s]=o,t(r);if(l>0)a=Math.floor(a/l)*l,o=Math.ceil(o/l)*l;else if(l<0)a=Math.ceil(a*l)/l,o=Math.floor(o*l)/l;else break;u=l}return e},e}function Iu(){var e=B1();return e.copy=function(){return qo(e,Iu())},si.apply(e,arguments),Ru(e)}function rp(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Gl(e){return Math.log(e)}function Yl(e){return Math.exp(e)}function ip(e){return-Math.log(-e)}function sp(e){return-Math.exp(-e)}function ap(e){return isFinite(e)?+("1e"+e):e<0?0:e}function op(e){return e===10?ap:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lp(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Bl(e){return(t,n)=>-e(-t,n)}function cp(e){const t=e(Gl,Yl),n=t.domain;let r=10,i,s;function a(){return i=lp(r),s=op(r),n()[0]<0?(i=Bl(i),s=Bl(s),e(ip,sp)):e(Gl,Yl),t}return t.base=function(o){return arguments.length?(r=+o,a()):r},t.domain=function(o){return arguments.length?(n(o),a()):n()},t.ticks=o=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),p=i(c),g,d;const m=o==null?10:+o;let y=[];if(!(r%1)&&p-h<m){if(h=Math.floor(h),p=Math.ceil(p),l>0){for(;h<=p;++h)for(g=1;g<r;++g)if(d=h<0?g/s(-h):g*s(h),!(d<l)){if(d>c)break;y.push(d)}}else for(;h<=p;++h)for(g=r-1;g>=1;--g)if(d=h>0?g/s(-h):g*s(h),!(d<l)){if(d>c)break;y.push(d)}y.length*2<m&&(y=Ji(l,c,m))}else y=Ji(h,p,Math.min(p-h,m)).map(s);return f?y.reverse():y},t.tickFormat=(o,u)=>{if(o==null&&(o=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Wr(u)).precision==null&&(u.trim=!0),u=zs(u)),o===1/0)return u;const l=Math.max(1,r*o/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(rp(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),t}function Eu(){const e=cp(Zo()).domain([1,10]);return e.copy=()=>qo(e,Eu()).base(e.base()),si.apply(e,arguments),e}function Ul(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function up(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function hp(e){return e<0?-e*e:e*e}function fp(e){var t=e(Et,Et),n=1;function r(){return n===1?e(Et,Et):n===.5?e(up,hp):e(Ul(n),Ul(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ru(t)}function Qo(){var e=fp(Zo());return e.copy=function(){return qo(e,Qo()).exponent(e.exponent())},si.apply(e,arguments),e}function dp(){return Qo.apply(null,arguments).exponent(.5)}var na=new Date,ra=new Date;function en(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=function(s){return e(s=new Date(+s)),s},i.ceil=function(s){return e(s=new Date(s-1)),t(s,1),e(s),s},i.round=function(s){var a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=function(s,a){return t(s=new Date(+s),a==null?1:Math.floor(a)),s},i.range=function(s,a,o){var u=[],l;if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return u;do u.push(l=new Date(+s)),t(s,o),e(s);while(l<s&&s<a);return u},i.filter=function(s){return en(function(a){if(a>=a)for(;e(a),!s(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;t(a,-1),!s(a););else for(;--o>=0;)for(;t(a,1),!s(a););})},n&&(i.count=function(s,a){return na.setTime(+s),ra.setTime(+a),e(na),e(ra),Math.floor(n(na,ra))},i.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?function(a){return r(a)%s===0}:function(a){return i.count(0,a)%s===0}):i}),i}const pp=1e3,Ko=pp*60,gp=Ko*60,$o=gp*24,Wu=$o*7;var mp=en(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ko)/$o,e=>e.getDate()-1),Ou=mp;function In(e){return en(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ko)/Wu})}var yp=In(0),Ha=In(1);In(2);In(3);var Or=In(4);In(5);In(6);var zu=en(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});zu.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:en(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};var zr=zu,wp=en(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/$o},function(e){return e.getUTCDate()-1}),Gu=wp;function En(e){return en(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/Wu})}var vp=En(0),Fa=En(1);En(2);En(3);var Gr=En(4);En(5);En(6);var Yu=en(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Yu.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:en(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};var Yr=Yu;function ia(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function sa(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sr(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function bp(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,u=e.shortMonths,l=_r(i),c=xr(i),f=_r(s),h=xr(s),p=_r(a),g=xr(a),d=_r(o),m=xr(o),y=_r(u),x=xr(u),v={a:P,A:G,b:Y,B:U,c:null,d:Ql,e:Ql,f:Yp,g:$p,G:tg,H:Op,I:zp,j:Gp,L:Bu,m:Bp,M:Up,p:q,q:Z,Q:ec,s:tc,S:jp,u:Xp,U:qp,V:Zp,w:Jp,W:Qp,x:null,X:null,y:Kp,Y:eg,Z:ng,"%":$l},S={a:pe,A:Q,b:J,B,c:null,d:Kl,e:Kl,f:ag,g:mg,G:wg,H:rg,I:ig,j:sg,L:ju,m:og,M:lg,p:te,q:he,Q:ec,s:tc,S:cg,u:ug,U:hg,V:fg,w:dg,W:pg,x:null,X:null,y:gg,Y:yg,Z:vg,"%":$l},k={a:z,A:H,b:R,B:A,c:_,d:Zl,e:Zl,f:Rp,g:ql,G:Xl,H:Jl,I:Jl,j:Np,L:Pp,m:Lp,M:Hp,p:D,q:Dp,Q:Ep,s:Wp,S:Fp,u:Tp,U:Mp,V:Cp,w:kp,W:Vp,x:C,X:L,y:ql,Y:Xl,Z:Ap,"%":Ip};v.x=F(n,v),v.X=F(r,v),v.c=F(t,v),S.x=F(n,S),S.X=F(r,S),S.c=F(t,S);function F(X,K){return function(ae){var W=[],ve=-1,fe=0,xe=X.length,ke,j,ce;for(ae instanceof Date||(ae=new Date(+ae));++ve<xe;)X.charCodeAt(ve)===37&&(W.push(X.slice(fe,ve)),(j=jl[ke=X.charAt(++ve)])!=null?ke=X.charAt(++ve):j=ke==="e"?" ":"0",(ce=K[ke])&&(ke=ce(ae,j)),W.push(ke),fe=ve+1);return W.push(X.slice(fe,ve)),W.join("")}}function I(X,K){return function(ae){var W=Sr(1900,void 0,1),ve=V(W,X,ae+="",0),fe,xe;if(ve!=ae.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(K&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(fe=sa(Sr(W.y,0,1)),xe=fe.getUTCDay(),fe=xe>4||xe===0?Fa.ceil(fe):Fa(fe),fe=Gu.offset(fe,(W.V-1)*7),W.y=fe.getUTCFullYear(),W.m=fe.getUTCMonth(),W.d=fe.getUTCDate()+(W.w+6)%7):(fe=ia(Sr(W.y,0,1)),xe=fe.getDay(),fe=xe>4||xe===0?Ha.ceil(fe):Ha(fe),fe=Ou.offset(fe,(W.V-1)*7),W.y=fe.getFullYear(),W.m=fe.getMonth(),W.d=fe.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),xe="Z"in W?sa(Sr(W.y,0,1)).getUTCDay():ia(Sr(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(xe+5)%7:W.w+W.U*7-(xe+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,sa(W)):ia(W)}}function V(X,K,ae,W){for(var ve=0,fe=K.length,xe=ae.length,ke,j;ve<fe;){if(W>=xe)return-1;if(ke=K.charCodeAt(ve++),ke===37){if(ke=K.charAt(ve++),j=k[ke in jl?K.charAt(ve++):ke],!j||(W=j(X,ae,W))<0)return-1}else if(ke!=ae.charCodeAt(W++))return-1}return W}function D(X,K,ae){var W=l.exec(K.slice(ae));return W?(X.p=c.get(W[0].toLowerCase()),ae+W[0].length):-1}function z(X,K,ae){var W=p.exec(K.slice(ae));return W?(X.w=g.get(W[0].toLowerCase()),ae+W[0].length):-1}function H(X,K,ae){var W=f.exec(K.slice(ae));return W?(X.w=h.get(W[0].toLowerCase()),ae+W[0].length):-1}function R(X,K,ae){var W=y.exec(K.slice(ae));return W?(X.m=x.get(W[0].toLowerCase()),ae+W[0].length):-1}function A(X,K,ae){var W=d.exec(K.slice(ae));return W?(X.m=m.get(W[0].toLowerCase()),ae+W[0].length):-1}function _(X,K,ae){return V(X,t,K,ae)}function C(X,K,ae){return V(X,n,K,ae)}function L(X,K,ae){return V(X,r,K,ae)}function P(X){return a[X.getDay()]}function G(X){return s[X.getDay()]}function Y(X){return u[X.getMonth()]}function U(X){return o[X.getMonth()]}function q(X){return i[+(X.getHours()>=12)]}function Z(X){return 1+~~(X.getMonth()/3)}function pe(X){return a[X.getUTCDay()]}function Q(X){return s[X.getUTCDay()]}function J(X){return u[X.getUTCMonth()]}function B(X){return o[X.getUTCMonth()]}function te(X){return i[+(X.getUTCHours()>=12)]}function he(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var K=F(X+="",v);return K.toString=function(){return X},K},parse:function(X){var K=I(X+="",!1);return K.toString=function(){return X},K},utcFormat:function(X){var K=F(X+="",S);return K.toString=function(){return X},K},utcParse:function(X){var K=I(X+="",!0);return K.toString=function(){return X},K}}}var jl={"-":"",_:" ","0":"0"},Ge=/^\s*\d+/,Sp=/^%/,_p=/[\\^$*+?|[\]().{}]/g;function be(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function xp(e){return e.replace(_p,"\\$&")}function _r(e){return new RegExp("^(?:"+e.map(xp).join("|")+")","i")}function xr(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function kp(e,t,n){var r=Ge.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Tp(e,t,n){var r=Ge.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Mp(e,t,n){var r=Ge.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Cp(e,t,n){var r=Ge.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Vp(e,t,n){var r=Ge.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Xl(e,t,n){var r=Ge.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ql(e,t,n){var r=Ge.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ap(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Dp(e,t,n){var r=Ge.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Lp(e,t,n){var r=Ge.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Zl(e,t,n){var r=Ge.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Np(e,t,n){var r=Ge.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Jl(e,t,n){var r=Ge.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Hp(e,t,n){var r=Ge.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Fp(e,t,n){var r=Ge.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Pp(e,t,n){var r=Ge.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Rp(e,t,n){var r=Ge.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ip(e,t,n){var r=Sp.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Ep(e,t,n){var r=Ge.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Wp(e,t,n){var r=Ge.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Ql(e,t){return be(e.getDate(),t,2)}function Op(e,t){return be(e.getHours(),t,2)}function zp(e,t){return be(e.getHours()%12||12,t,2)}function Gp(e,t){return be(1+Ou.count(zr(e),e),t,3)}function Bu(e,t){return be(e.getMilliseconds(),t,3)}function Yp(e,t){return Bu(e,t)+"000"}function Bp(e,t){return be(e.getMonth()+1,t,2)}function Up(e,t){return be(e.getMinutes(),t,2)}function jp(e,t){return be(e.getSeconds(),t,2)}function Xp(e){var t=e.getDay();return t===0?7:t}function qp(e,t){return be(yp.count(zr(e)-1,e),t,2)}function Uu(e){var t=e.getDay();return t>=4||t===0?Or(e):Or.ceil(e)}function Zp(e,t){return e=Uu(e),be(Or.count(zr(e),e)+(zr(e).getDay()===4),t,2)}function Jp(e){return e.getDay()}function Qp(e,t){return be(Ha.count(zr(e)-1,e),t,2)}function Kp(e,t){return be(e.getFullYear()%100,t,2)}function $p(e,t){return e=Uu(e),be(e.getFullYear()%100,t,2)}function eg(e,t){return be(e.getFullYear()%1e4,t,4)}function tg(e,t){var n=e.getDay();return e=n>=4||n===0?Or(e):Or.ceil(e),be(e.getFullYear()%1e4,t,4)}function ng(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+be(t/60|0,"0",2)+be(t%60,"0",2)}function Kl(e,t){return be(e.getUTCDate(),t,2)}function rg(e,t){return be(e.getUTCHours(),t,2)}function ig(e,t){return be(e.getUTCHours()%12||12,t,2)}function sg(e,t){return be(1+Gu.count(Yr(e),e),t,3)}function ju(e,t){return be(e.getUTCMilliseconds(),t,3)}function ag(e,t){return ju(e,t)+"000"}function og(e,t){return be(e.getUTCMonth()+1,t,2)}function lg(e,t){return be(e.getUTCMinutes(),t,2)}function cg(e,t){return be(e.getUTCSeconds(),t,2)}function ug(e){var t=e.getUTCDay();return t===0?7:t}function hg(e,t){return be(vp.count(Yr(e)-1,e),t,2)}function Xu(e){var t=e.getUTCDay();return t>=4||t===0?Gr(e):Gr.ceil(e)}function fg(e,t){return e=Xu(e),be(Gr.count(Yr(e),e)+(Yr(e).getUTCDay()===4),t,2)}function dg(e){return e.getUTCDay()}function pg(e,t){return be(Fa.count(Yr(e)-1,e),t,2)}function gg(e,t){return be(e.getUTCFullYear()%100,t,2)}function mg(e,t){return e=Xu(e),be(e.getUTCFullYear()%100,t,2)}function yg(e,t){return be(e.getUTCFullYear()%1e4,t,4)}function wg(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Gr(e):Gr.ceil(e),be(e.getUTCFullYear()%1e4,t,4)}function vg(){return"+0000"}function $l(){return"%"}function ec(e){return+e}function tc(e){return Math.floor(+e/1e3)}var aa,qu;bg({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bg(e){return aa=bp(e),qu=aa.format,aa}function Sg(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}var _g=Sg("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");Hu(yn(-100,.75,.35),yn(80,1.5,.8));Hu(yn(260,.75,.35),yn(80,1.5,.8));var wi=yn();function xg(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return wi.h=360*e-100,wi.s=1.5-1.5*t,wi.l=.8-.9*t,wi+""}var hr=0,Ar=0,kr=0,Zu=1e3,ts,Dr,ns=0,Rn=0,Gs=0,Br=typeof performance=="object"&&performance.now?performance:Date,Ju=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function el(){return Rn||(Ju(kg),Rn=Br.now()+Gs)}function kg(){Rn=0}function rs(){this._call=this._time=this._next=null}rs.prototype=Qu.prototype={constructor:rs,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?el():+n)+(t==null?0:+t),!this._next&&Dr!==this&&(Dr?Dr._next=this:ts=this,Dr=this),this._call=e,this._time=n,Pa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pa())}};function Qu(e,t,n){var r=new rs;return r.restart(e,t,n),r}function Tg(){el(),++hr;for(var e=ts,t;e;)(t=Rn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--hr}function nc(){Rn=(ns=Br.now())+Gs,hr=Ar=0;try{Tg()}finally{hr=0,Cg(),Rn=0}}function Mg(){var e=Br.now(),t=e-ns;t>Zu&&(Gs-=t,ns=e)}function Cg(){for(var e,t=ts,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ts=n);Dr=e,Pa(r)}function Pa(e){if(!hr){Ar&&(Ar=clearTimeout(Ar));var t=e-Rn;t>24?(e<1/0&&(Ar=setTimeout(nc,e-Br.now()-Gs)),kr&&(kr=clearInterval(kr))):(kr||(ns=Br.now(),kr=setInterval(Mg,Zu)),hr=1,Ju(nc))}}function Ra(e,t,n){var r=new rs;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Vg={value:()=>{}};function li(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Hi(n)}function Hi(e){this._=e}function Ag(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Hi.prototype=li.prototype={constructor:Hi,on:function(e,t){var n=this._,r=Ag(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=Dg(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=rc(n[i],e.name,t);else if(t==null)for(i in n)n[i]=rc(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Hi(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Dg(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function rc(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Vg,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Lg=li("start","end","cancel","interrupt"),Ng=[],Ku=0,ic=1,Ia=2,Fi=3,sc=4,Ea=5,Pi=6;function Ys(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Hg(e,n,{name:t,index:r,group:i,on:Lg,tween:Ng,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ku})}function tl(e,t){var n=Lt(e,t);if(n.state>Ku)throw new Error("too late; already scheduled");return n}function zt(e,t){var n=Lt(e,t);if(n.state>Fi)throw new Error("too late; already running");return n}function Lt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Hg(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Qu(s,0,n.time);function s(l){n.state=ic,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,f,h,p;if(n.state!==ic)return u();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Fi)return Ra(a);p.state===sc?(p.state=Pi,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Pi,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(Ra(function(){n.state===Fi&&(n.state=sc,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=Ia,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ia){for(n.state=Fi,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function o(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Ea,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===Ea&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Pi,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function $n(e,t){var n=e.__transition,r,i,s=!0,a;if(!!n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>Ia&&r.state<Ea,r.state=Pi,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function Fg(e){return this.each(function(){$n(this,e)})}function Pg(e,t){var n,r;return function(){var i=zt(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Rg(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=zt(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=o;break}u===l&&i.push(o)}s.tween=i}}function Ig(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Lt(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?Pg:Rg)(n,e,t))}function nl(e,t,n){var r=e._id;return e.each(function(){var i=zt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Lt(i,r).value[t]}}function $u(e,t){var n;return(typeof t=="number"?Vt:t instanceof mn?$i:(n=mn(t))?(t=n,$i):Au)(e,t)}function Eg(e){return function(){this.removeAttribute(e)}}function Wg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Og(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function zg(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function Gg(e,t,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=t(r=a,o)))}}function Yg(e,t,n){var r,i,s;return function(){var a,o=n(this),u;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=o+"",a===u?null:a===r&&u===i?s:(i=u,s=t(r=a,o)))}}function Bg(e,t){var n=Es(e),r=n==="transform"?H1:$u;return this.attrTween(e,typeof t=="function"?(n.local?Yg:Gg)(n,r,nl(this,"attr."+e,t)):t==null?(n.local?Wg:Eg)(n):(n.local?zg:Og)(n,r,t))}function Ug(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function jg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Xg(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&jg(e,s)),n}return i._value=t,i}function qg(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Ug(e,s)),n}return i._value=t,i}function Zg(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Es(e);return this.tween(n,(r.local?Xg:qg)(r,t))}function Jg(e,t){return function(){tl(this,e).delay=+t.apply(this,arguments)}}function Qg(e,t){return t=+t,function(){tl(this,e).delay=t}}function Kg(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jg:Qg)(t,e)):Lt(this.node(),t).delay}function $g(e,t){return function(){zt(this,e).duration=+t.apply(this,arguments)}}function e6(e,t){return t=+t,function(){zt(this,e).duration=t}}function t6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$g:e6)(t,e)):Lt(this.node(),t).duration}function n6(e,t){if(typeof t!="function")throw new Error;return function(){zt(this,e).ease=t}}function r6(e){var t=this._id;return arguments.length?this.each(n6(t,e)):Lt(this.node(),t).ease}function i6(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;zt(this,e).ease=n}}function s6(e){if(typeof e!="function")throw new Error;return this.each(i6(this._id,e))}function a6(e){typeof e!="function"&&(e=ru(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],u,l=0;l<a;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&o.push(u);return new $t(r,this._parents,this._name,this._id)}function o6(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var u=t[o],l=n[o],c=u.length,f=a[o]=new Array(c),h,p=0;p<c;++p)(h=u[p]||l[p])&&(f[p]=h);for(;o<r;++o)a[o]=t[o];return new $t(a,this._parents,this._name,this._id)}function l6(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function c6(e,t,n){var r,i,s=l6(t)?tl:zt;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function u6(e,t){var n=this._id;return arguments.length<2?Lt(this.node(),n).on.on(e):this.each(c6(n,e,t))}function h6(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function f6(){return this.on("end.remove",h6(this._id))}function d6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Oo(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],u=o.length,l=s[a]=new Array(u),c,f,h=0;h<u;++h)(c=o[h])&&(f=e.call(c,c.__data__,h,o))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Ys(l[h],t,n,h,l,Lt(c,n)));return new $t(s,this._parents,t,n)}function p6(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nu(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var u=r[o],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var h=e.call(c,c.__data__,f,u),p,g=Lt(c,n),d=0,m=h.length;d<m;++d)(p=h[d])&&Ys(p,t,n,d,h,g);s.push(h),a.push(c)}return new $t(s,a,t,n)}var g6=pr.prototype.constructor;function m6(){return new g6(this._groups,this._parents)}function y6(e,t){var n,r,i;return function(){var s=lr(this,e),a=(this.style.removeProperty(e),lr(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function eh(e){return function(){this.style.removeProperty(e)}}function w6(e,t,n){var r,i=n+"",s;return function(){var a=lr(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function v6(e,t,n){var r,i,s;return function(){var a=lr(this,e),o=n(this),u=o+"";return o==null&&(u=o=(this.style.removeProperty(e),lr(this,e))),a===u?null:a===r&&u===i?s:(i=u,s=t(r=a,o))}}function b6(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var u=zt(this,e),l=u.on,c=u.value[s]==null?o||(o=eh(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),u.on=r}}function S6(e,t,n){var r=(e+="")=="transform"?N1:$u;return t==null?this.styleTween(e,y6(e,r)).on("end.style."+e,eh(e)):typeof t=="function"?this.styleTween(e,v6(e,r,nl(this,"style."+e,t))).each(b6(this._id,e)):this.styleTween(e,w6(e,r,t),n).on("end.style."+e,null)}function _6(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function x6(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&_6(e,a,n)),r}return s._value=t,s}function k6(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,x6(e,t,n==null?"":n))}function T6(e){return function(){this.textContent=e}}function M6(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function C6(e){return this.tween("text",typeof e=="function"?M6(nl(this,"text",e)):T6(e==null?"":e+""))}function V6(e){return function(t){this.textContent=e.call(this,t)}}function A6(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&V6(i)),t}return r._value=e,r}function D6(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,A6(e))}function L6(){for(var e=this._name,t=this._id,n=nh(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)if(u=a[l]){var c=Lt(u,t);Ys(u,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $t(r,this._parents,e,n)}function N6(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},u={value:function(){--i===0&&s()}};n.each(function(){var l=zt(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(u)),l.on=t}),i===0&&s()})}var H6=0;function $t(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function th(e){return pr().transition(e)}function nh(){return++H6}var Zt=pr.prototype;$t.prototype=th.prototype={constructor:$t,select:d6,selectAll:p6,selectChild:Zt.selectChild,selectChildren:Zt.selectChildren,filter:a6,merge:o6,selection:m6,transition:L6,call:Zt.call,nodes:Zt.nodes,node:Zt.node,size:Zt.size,empty:Zt.empty,each:Zt.each,on:u6,attr:Bg,attrTween:Zg,style:S6,styleTween:k6,text:C6,textTween:D6,remove:f6,tween:Ig,delay:Kg,duration:t6,ease:r6,easeVarying:s6,end:N6,[Symbol.iterator]:Zt[Symbol.iterator]};const F6=e=>+e;function P6(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function rh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var R6=3,I6=function e(t){t=+t;function n(r){return((r*=2)<=1?Math.pow(r,t):2-Math.pow(2-r,t))/2}return n.exponent=e,n}(R6);function E6(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}var ac=2*Math.PI,W6=1,O6=.3,z6=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=ac);function i(s){return 1-t*E6(s=+s)*Math.sin((s+r)/n)}return i.amplitude=function(s){return e(s,n*ac)},i.period=function(s){return e(t,s)},i}(W6,O6),G6={time:null,delay:0,duration:250,ease:rh};function Y6(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function B6(e){var t,n;e instanceof $t?(t=e._id,e=e._name):(t=nh(),(n=G6).time=el(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,u,l=0;l<o;++l)(u=a[l])&&Ys(u,e,t,l,a,n||Y6(u,t));return new $t(r,this._parents,e,t)}pr.prototype.interrupt=Fg;pr.prototype.transition=B6;function U6(e){return e}var oa=1,la=2,Wa=3,Lr=4,oc=1e-6;function j6(e){return"translate("+e+",0)"}function X6(e){return"translate(0,"+e+")"}function q6(e){return t=>+e(t)}function Z6(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function J6(){return!this.__axis}function ih(e,t){var n=[],r=null,i=null,s=6,a=6,o=3,u=typeof window!="undefined"&&window.devicePixelRatio>1?0:.5,l=e===oa||e===Lr?-1:1,c=e===Lr||e===la?"x":"y",f=e===oa||e===Wa?j6:X6;function h(p){var g=r==null?t.ticks?t.ticks.apply(t,n):t.domain():r,d=i==null?t.tickFormat?t.tickFormat.apply(t,n):U6:i,m=Math.max(s,0)+o,y=t.range(),x=+y[0]+u,v=+y[y.length-1]+u,S=(t.bandwidth?Z6:q6)(t.copy(),u),k=p.selection?p.selection():p,F=k.selectAll(".domain").data([null]),I=k.selectAll(".tick").data(g,t).order(),V=I.exit(),D=I.enter().append("g").attr("class","tick"),z=I.select("line"),H=I.select("text");F=F.merge(F.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),I=I.merge(D),z=z.merge(D.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),H=H.merge(D.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",e===oa?"0em":e===Wa?"0.71em":"0.32em")),p!==k&&(F=F.transition(p),I=I.transition(p),z=z.transition(p),H=H.transition(p),V=V.transition(p).attr("opacity",oc).attr("transform",function(R){return isFinite(R=S(R))?f(R+u):this.getAttribute("transform")}),D.attr("opacity",oc).attr("transform",function(R){var A=this.parentNode.__axis;return f((A&&isFinite(A=A(R))?A:S(R))+u)})),V.remove(),F.attr("d",e===Lr||e===la?a?"M"+l*a+","+x+"H"+u+"V"+v+"H"+l*a:"M"+u+","+x+"V"+v:a?"M"+x+","+l*a+"V"+u+"H"+v+"V"+l*a:"M"+x+","+u+"H"+v),I.attr("opacity",1).attr("transform",function(R){return f(S(R)+u)}),z.attr(c+"2",l*s),H.attr(c,l*m).text(d),k.filter(J6).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===la?"start":e===Lr?"end":"middle"),k.each(function(){this.__axis=S})}return h.scale=function(p){return arguments.length?(t=p,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),h):r&&r.slice()},h.tickFormat=function(p){return arguments.length?(i=p,h):i},h.tickSize=function(p){return arguments.length?(s=a=+p,h):s},h.tickSizeInner=function(p){return arguments.length?(s=+p,h):s},h.tickSizeOuter=function(p){return arguments.length?(a=+p,h):a},h.tickPadding=function(p){return arguments.length?(o=+p,h):o},h.offset=function(p){return arguments.length?(u=+p,h):u},h}function Q6(e){return ih(Wa,e)}function K6(e){return ih(Lr,e)}const Oa=Math.PI,za=2*Oa,Cn=1e-6,$6=za-Cn;function Ga(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ci(){return new Ga}Ga.prototype=ci.prototype={constructor:Ga,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,s){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var s=this._x1,a=this._y1,o=n-e,u=r-t,l=s-e,c=a-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Cn)if(!(Math.abs(c*o-u*l)>Cn)||!i)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var h=n-s,p=r-a,g=o*o+u*u,d=h*h+p*p,m=Math.sqrt(g),y=Math.sqrt(f),x=i*Math.tan((Oa-Math.acos((g+f-d)/(2*m*y)))/2),v=x/y,S=x/m;Math.abs(v-1)>Cn&&(this._+="L"+(e+v*l)+","+(t+v*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>l*p)+","+(this._x1=e+S*o)+","+(this._y1=t+S*u)}},arc:function(e,t,n,r,i,s){e=+e,t=+t,n=+n,s=!!s;var a=n*Math.cos(r),o=n*Math.sin(r),u=e+a,l=t+o,c=1^s,f=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+u+","+l:(Math.abs(this._x1-u)>Cn||Math.abs(this._y1-l)>Cn)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%za+za),f>$6?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-o)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>Cn&&(this._+="A"+n+","+n+",0,"+ +(f>=Oa)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function $e(e){return function(){return e}}const lc=Math.abs,Je=Math.atan2,Mn=Math.cos,em=Math.max,ca=Math.min,Pt=Math.sin,qn=Math.sqrt,at=1e-12,Ur=Math.PI,is=Ur/2,tm=2*Ur;function nm(e){return e>1?0:e<-1?Ur:Math.acos(e)}function cc(e){return e>=1?is:e<=-1?-is:Math.asin(e)}function rm(e){return e.innerRadius}function im(e){return e.outerRadius}function sm(e){return e.startAngle}function am(e){return e.endAngle}function om(e){return e&&e.padAngle}function lm(e,t,n,r,i,s,a,o){var u=n-e,l=r-t,c=a-i,f=o-s,h=f*u-c*l;if(!(h*h<at))return h=(c*(t-s)-f*(e-i))/h,[e+h*u,t+h*l]}function vi(e,t,n,r,i,s,a){var o=e-n,u=t-r,l=(a?s:-s)/qn(o*o+u*u),c=l*u,f=-l*o,h=e+c,p=t+f,g=n+c,d=r+f,m=(h+g)/2,y=(p+d)/2,x=g-h,v=d-p,S=x*x+v*v,k=i-s,F=h*d-g*p,I=(v<0?-1:1)*qn(em(0,k*k*S-F*F)),V=(F*v-x*I)/S,D=(-F*x-v*I)/S,z=(F*v+x*I)/S,H=(-F*x+v*I)/S,R=V-m,A=D-y,_=z-m,C=H-y;return R*R+A*A>_*_+C*C&&(V=z,D=H),{cx:V,cy:D,x01:-c,y01:-f,x11:V*(i/k-1),y11:D*(i/k-1)}}function cm(){var e=rm,t=im,n=$e(0),r=null,i=sm,s=am,a=om,o=null;function u(){var l,c,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-is,g=s.apply(this,arguments)-is,d=lc(g-p),m=g>p;if(o||(o=l=ci()),h<f&&(c=h,h=f,f=c),!(h>at))o.moveTo(0,0);else if(d>tm-at)o.moveTo(h*Mn(p),h*Pt(p)),o.arc(0,0,h,p,g,!m),f>at&&(o.moveTo(f*Mn(g),f*Pt(g)),o.arc(0,0,f,g,p,m));else{var y=p,x=g,v=p,S=g,k=d,F=d,I=a.apply(this,arguments)/2,V=I>at&&(r?+r.apply(this,arguments):qn(f*f+h*h)),D=ca(lc(h-f)/2,+n.apply(this,arguments)),z=D,H=D,R,A;if(V>at){var _=cc(V/f*Pt(I)),C=cc(V/h*Pt(I));(k-=_*2)>at?(_*=m?1:-1,v+=_,S-=_):(k=0,v=S=(p+g)/2),(F-=C*2)>at?(C*=m?1:-1,y+=C,x-=C):(F=0,y=x=(p+g)/2)}var L=h*Mn(y),P=h*Pt(y),G=f*Mn(S),Y=f*Pt(S);if(D>at){var U=h*Mn(x),q=h*Pt(x),Z=f*Mn(v),pe=f*Pt(v),Q;if(d<Ur&&(Q=lm(L,P,Z,pe,U,q,G,Y))){var J=L-Q[0],B=P-Q[1],te=U-Q[0],he=q-Q[1],X=1/Pt(nm((J*te+B*he)/(qn(J*J+B*B)*qn(te*te+he*he)))/2),K=qn(Q[0]*Q[0]+Q[1]*Q[1]);z=ca(D,(f-K)/(X-1)),H=ca(D,(h-K)/(X+1))}}F>at?H>at?(R=vi(Z,pe,L,P,h,H,m),A=vi(U,q,G,Y,h,H,m),o.moveTo(R.cx+R.x01,R.cy+R.y01),H<D?o.arc(R.cx,R.cy,H,Je(R.y01,R.x01),Je(A.y01,A.x01),!m):(o.arc(R.cx,R.cy,H,Je(R.y01,R.x01),Je(R.y11,R.x11),!m),o.arc(0,0,h,Je(R.cy+R.y11,R.cx+R.x11),Je(A.cy+A.y11,A.cx+A.x11),!m),o.arc(A.cx,A.cy,H,Je(A.y11,A.x11),Je(A.y01,A.x01),!m))):(o.moveTo(L,P),o.arc(0,0,h,y,x,!m)):o.moveTo(L,P),!(f>at)||!(k>at)?o.lineTo(G,Y):z>at?(R=vi(G,Y,U,q,f,-z,m),A=vi(L,P,Z,pe,f,-z,m),o.lineTo(R.cx+R.x01,R.cy+R.y01),z<D?o.arc(R.cx,R.cy,z,Je(R.y01,R.x01),Je(A.y01,A.x01),!m):(o.arc(R.cx,R.cy,z,Je(R.y01,R.x01),Je(R.y11,R.x11),!m),o.arc(0,0,f,Je(R.cy+R.y11,R.cx+R.x11),Je(A.cy+A.y11,A.cx+A.x11),m),o.arc(A.cx,A.cy,z,Je(A.y11,A.x11),Je(A.y01,A.x01),!m))):o.arc(0,0,f,S,v,m)}if(o.closePath(),l)return o=null,l+""||null}return u.centroid=function(){var l=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,c=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Ur/2;return[Mn(c)*l,Pt(c)*l]},u.innerRadius=function(l){return arguments.length?(e=typeof l=="function"?l:$e(+l),u):e},u.outerRadius=function(l){return arguments.length?(t=typeof l=="function"?l:$e(+l),u):t},u.cornerRadius=function(l){return arguments.length?(n=typeof l=="function"?l:$e(+l),u):n},u.padRadius=function(l){return arguments.length?(r=l==null?null:typeof l=="function"?l:$e(+l),u):r},u.startAngle=function(l){return arguments.length?(i=typeof l=="function"?l:$e(+l),u):i},u.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:$e(+l),u):s},u.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:$e(+l),u):a},u.context=function(l){return arguments.length?(o=l==null?null:l,u):o},u}var um=Array.prototype.slice;function hm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sh(e){this._context=e}sh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fm(e){return new sh(e)}function ah(e){return e[0]}function oh(e){return e[1]}function dm(e,t){var n=$e(!0),r=null,i=fm,s=null;e=typeof e=="function"?e:e===void 0?ah:$e(e),t=typeof t=="function"?t:t===void 0?oh:$e(t);function a(o){var u,l=(o=hm(o)).length,c,f=!1,h;for(r==null&&(s=i(h=ci())),u=0;u<=l;++u)!(u<l&&n(c=o[u],u,o))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(c,u,o),+t(c,u,o));if(h)return s=null,h+""||null}return a.x=function(o){return arguments.length?(e=typeof o=="function"?o:$e(+o),a):e},a.y=function(o){return arguments.length?(t=typeof o=="function"?o:$e(+o),a):t},a.defined=function(o){return arguments.length?(n=typeof o=="function"?o:$e(!!o),a):n},a.curve=function(o){return arguments.length?(i=o,r!=null&&(s=i(r)),a):i},a.context=function(o){return arguments.length?(o==null?r=s=null:s=i(r=o),a):r},a}class lh{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function pm(e){return new lh(e,!0)}function gm(e){return new lh(e,!1)}function mm(e){return e.source}function ym(e){return e.target}function ch(e){let t=mm,n=ym,r=ah,i=oh,s=null,a=null;function o(){let u;const l=um.call(arguments),c=t.apply(this,l),f=n.apply(this,l);if(s==null&&(a=e(u=ci())),a.lineStart(),l[0]=c,a.point(+r.apply(this,l),+i.apply(this,l)),l[0]=f,a.point(+r.apply(this,l),+i.apply(this,l)),a.lineEnd(),u)return a=null,u+""||null}return o.source=function(u){return arguments.length?(t=u,o):t},o.target=function(u){return arguments.length?(n=u,o):n},o.x=function(u){return arguments.length?(r=typeof u=="function"?u:$e(+u),o):r},o.y=function(u){return arguments.length?(i=typeof u=="function"?u:$e(+u),o):i},o.context=function(u){return arguments.length?(u==null?s=a=null:a=e(s=u),o):s},o}function wm(){return ch(pm)}function vm(){return ch(gm)}function uc(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function uh(e){this._context=e}uh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uc(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bm(e){return new uh(e)}function hc(e){return e<0?-1:1}function fc(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(hc(s)+hc(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function dc(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ua(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function ss(e){this._context=e}ss.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ua(this,this._t0,dc(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ua(this,dc(this,n=fc(this,e,t)),n);break;default:ua(this,this._t0,n=fc(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function hh(e){this._context=new fh(e)}(hh.prototype=Object.create(ss.prototype)).point=function(e,t){ss.prototype.point.call(this,t,e)};function fh(e){this._context=e}fh.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Sm(e){return new ss(e)}function _m(e){return new hh(e)}function dh(e,t){this._context=e,this._t=t}dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function xm(e){return new dh(e,1)}function km(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Tm(){return this.eachAfter(km)}function Mm(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Cm(e,t){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Vm(e,t){for(var n=this,r=[n],i=[],s,a,o,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Am(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Dm(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Lm(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Nm(e){for(var t=this,n=Hm(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Hm(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Fm(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Pm(){return Array.from(this)}function Rm(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Im(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Em(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function rl(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=zm)):t===void 0&&(t=Om);for(var n=new jr(e),r,i=[n],s,a,o,u;r=i.pop();)if((a=t(r.data))&&(u=(a=Array.from(a)).length))for(r.children=a,o=u-1;o>=0;--o)i.push(s=a[o]=new jr(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Ym)}function Wm(){return rl(this).eachBefore(Gm)}function Om(e){return e.children}function zm(e){return Array.isArray(e)?e[1]:null}function Gm(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Ym(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function jr(e){this.data=e,this.depth=this.height=0,this.parent=null}jr.prototype=rl.prototype={constructor:jr,count:Tm,each:Mm,eachAfter:Vm,eachBefore:Cm,find:Am,sum:Dm,sort:Lm,path:Nm,ancestors:Fm,descendants:Pm,leaves:Rm,links:Im,copy:Wm,[Symbol.iterator]:Em};function Bm(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Um(e,t,n,r,i){for(var s=e.children,a,o=-1,u=s.length,l=e.value&&(r-t)/e.value;++o<u;)a=s[o],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*l}function jm(){var e=1,t=1,n=0,r=!1;function i(a){var o=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/o,a.eachBefore(s(t,o)),r&&a.eachBefore(Bm),a}function s(a,o){return function(u){u.children&&Um(u,u.x0,a*(u.depth+1)/o,u.x1,a*(u.depth+2)/o);var l=u.x0,c=u.y0,f=u.x1-n,h=u.y1-n;f<l&&(l=f=(l+f)/2),h<c&&(c=h=(c+h)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=h}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}function Xm(e,t){return e.parent===t.parent?1:2}function ha(e){var t=e.children;return t?t[0]:e.t}function fa(e){var t=e.children;return t?t[t.length-1]:e.t}function qm(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Zm(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Jm(e,t,n){return e.a.parent===t.parent?e.a:n}function Ri(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Ri.prototype=Object.create(jr.prototype);function Qm(e){for(var t=new Ri(e,0),n,r=[t],i,s,a,o;n=r.pop();)if(s=n._.children)for(n.children=new Array(o=s.length),a=o-1;a>=0;--a)r.push(i=n.children[a]=new Ri(s[a],a)),i.parent=n;return(t.parent=new Ri(null,0)).children=[t],t}function Km(){var e=Xm,t=1,n=1,r=null;function i(l){var c=Qm(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(a),r)l.eachBefore(u);else{var f=l,h=l,p=l;l.eachBefore(function(x){x.x<f.x&&(f=x),x.x>h.x&&(h=x),x.depth>p.depth&&(p=x)});var g=f===h?1:e(f,h)/2,d=g-f.x,m=t/(h.x+g+d),y=n/(p.depth||1);l.eachBefore(function(x){x.x=(x.x+d)*m,x.y=x.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,h=l.i?f[l.i-1]:null;if(c){Zm(l);var p=(c[0].z+c[c.length-1].z)/2;h?(l.z=h.z+e(l._,h._),l.m=l.z-p):l.z=p}else h&&(l.z=h.z+e(l._,h._));l.parent.A=o(l,h,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function o(l,c,f){if(c){for(var h=l,p=l,g=c,d=h.parent.children[0],m=h.m,y=p.m,x=g.m,v=d.m,S;g=fa(g),h=ha(h),g&&h;)d=ha(d),p=fa(p),p.a=l,S=g.z+x-h.z-m+e(g._,h._),S>0&&(qm(Jm(g,l,f),l,S),m+=S,y+=S),x+=g.m,m+=h.m,v+=d.m,y+=p.m;g&&!fa(p)&&(p.t=g,p.m+=x-y),h&&!ha(d)&&(d.t=h,d.m+=m-v,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}const $m={passive:!1},Xr={capture:!0,passive:!1};function da(e){e.stopImmediatePropagation()}function er(e){e.preventDefault(),e.stopImmediatePropagation()}function il(e){var t=e.document.documentElement,n=nt(e).on("dragstart.drag",er,Xr);"onselectstart"in t?n.on("selectstart.drag",er,Xr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function sl(e,t){var n=e.document.documentElement,r=nt(e).on("dragstart.drag",null);t&&(r.on("click.drag",er,Xr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var bi=e=>()=>e;function Ya(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}Ya.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function e2(e){return!e.ctrlKey&&!e.button}function t2(){return this.parentNode}function n2(e,t){return t==null?{x:e.x,y:e.y}:t}function r2(){return navigator.maxTouchPoints||"ontouchstart"in this}function i2(){var e=e2,t=t2,n=n2,r=r2,i={},s=li("start","drag","end"),a=0,o,u,l,c,f=0;function h(S){S.on("mousedown.drag",p).filter(r).on("touchstart.drag",m).on("touchmove.drag",y,$m).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(S,k){if(!(c||!e.call(this,S,k))){var F=v(this,t.call(this,S,k),S,k,"mouse");!F||(nt(S.view).on("mousemove.drag",g,Xr).on("mouseup.drag",d,Xr),il(S.view),da(S),l=!1,o=S.clientX,u=S.clientY,F("start",S))}}function g(S){if(er(S),!l){var k=S.clientX-o,F=S.clientY-u;l=k*k+F*F>f}i.mouse("drag",S)}function d(S){nt(S.view).on("mousemove.drag mouseup.drag",null),sl(S.view,l),er(S),i.mouse("end",S)}function m(S,k){if(!!e.call(this,S,k)){var F=S.changedTouches,I=t.call(this,S,k),V=F.length,D,z;for(D=0;D<V;++D)(z=v(this,I,S,k,F[D].identifier,F[D]))&&(da(S),z("start",S,F[D]))}}function y(S){var k=S.changedTouches,F=k.length,I,V;for(I=0;I<F;++I)(V=i[k[I].identifier])&&(er(S),V("drag",S,k[I]))}function x(S){var k=S.changedTouches,F=k.length,I,V;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),I=0;I<F;++I)(V=i[k[I].identifier])&&(da(S),V("end",S,k[I]))}function v(S,k,F,I,V,D){var z=s.copy(),H=Ct(D||F,k),R,A,_;if((_=n.call(S,new Ya("beforestart",{sourceEvent:F,target:h,identifier:V,active:a,x:H[0],y:H[1],dx:0,dy:0,dispatch:z}),I))!=null)return R=_.x-H[0]||0,A=_.y-H[1]||0,function C(L,P,G){var Y=H,U;switch(L){case"start":i[V]=C,U=a++;break;case"end":delete i[V],--a;case"drag":H=Ct(G||P,k),U=a;break}z.call(L,S,new Ya(L,{sourceEvent:P,subject:_,target:h,identifier:V,active:U,x:H[0]+R,y:H[1]+A,dx:H[0]-Y[0],dy:H[1]-Y[1],dispatch:z}),I)}}return h.filter=function(S){return arguments.length?(e=typeof S=="function"?S:bi(!!S),h):e},h.container=function(S){return arguments.length?(t=typeof S=="function"?S:bi(S),h):t},h.subject=function(S){return arguments.length?(n=typeof S=="function"?S:bi(S),h):n},h.touchable=function(S){return arguments.length?(r=typeof S=="function"?S:bi(!!S),h):r},h.on=function(){var S=s.on.apply(s,arguments);return S===s?h:S},h.clickDistance=function(S){return arguments.length?(f=(S=+S)*S,h):Math.sqrt(f)},h}var pa=e=>()=>e;function s2(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function a2(e){e.stopImmediatePropagation()}function ga(e){e.preventDefault(),e.stopImmediatePropagation()}var pc={name:"drag"},ma={name:"space"},zn={name:"handle"},Gn={name:"center"};const{abs:gc,max:Qe,min:Ke}=Math;function mc(e){return[+e[0],+e[1]]}function Ba(e){return[mc(e[0]),mc(e[1])]}var ya={name:"x",handles:["w","e"].map(qr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},wa={name:"y",handles:["n","s"].map(qr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},o2={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(qr),input:function(e){return e==null?null:Ba(e)},output:function(e){return e}},Jt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yc={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},wc={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},l2={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},c2={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function qr(e){return{type:e}}function u2(e){return!e.ctrlKey&&!e.button}function h2(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function f2(){return navigator.maxTouchPoints||"ontouchstart"in this}function va(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function d2(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function p2(){return g2(o2)}function g2(e){var t=h2,n=u2,r=f2,i=!0,s=li("start","brush","end"),a=6,o;function u(m){var y=m.property("__brush",d).selectAll(".overlay").data([qr("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Jt.overlay).merge(y).each(function(){var v=va(this).extent;nt(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),m.selectAll(".selection").data([qr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Jt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var x=m.selectAll(".handle").data(e.handles,function(v){return v.type});x.exit().remove(),x.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return Jt[v.type]}),m.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(m,y,x){m.tween?m.on("start.brush",function(v){c(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){c(this,arguments).end(v)}).tween("brush",function(){var v=this,S=v.__brush,k=c(v,arguments),F=S.selection,I=e.input(typeof y=="function"?y.apply(this,arguments):y,S.extent),V=oi(F,I);function D(z){S.selection=z===1&&I===null?null:V(z),l.call(v),k.brush()}return F!==null&&I!==null?D:D(1)}):m.each(function(){var v=this,S=arguments,k=v.__brush,F=e.input(typeof y=="function"?y.apply(v,S):y,k.extent),I=c(v,S).beforestart();$n(v),k.selection=F===null?null:F,l.call(v),I.start(x).brush(x).end(x)})},u.clear=function(m,y){u.move(m,null,y)};function l(){var m=nt(this),y=va(this).selection;y?(m.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(x){return x.type[x.type.length-1]==="e"?y[1][0]-a/2:y[0][0]-a/2}).attr("y",function(x){return x.type[0]==="s"?y[1][1]-a/2:y[0][1]-a/2}).attr("width",function(x){return x.type==="n"||x.type==="s"?y[1][0]-y[0][0]+a:a}).attr("height",function(x){return x.type==="e"||x.type==="w"?y[1][1]-y[0][1]+a:a})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(m,y,x){var v=m.__brush.emitter;return v&&(!x||!v.clean)?v:new f(m,y,x)}function f(m,y,x){this.that=m,this.args=y,this.state=m.__brush,this.active=0,this.clean=x}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,y){return this.starting?(this.starting=!1,this.emit("start",m,y)):this.emit("brush",m),this},brush:function(m,y){return this.emit("brush",m,y),this},end:function(m,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,y)),this},emit:function(m,y,x){var v=nt(this.that).datum();s.call(m,this.that,new s2(m,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:x,dispatch:s}),v)}};function h(m){if(o&&!m.touches||!n.apply(this,arguments))return;var y=this,x=m.target.__data__.type,v=(i&&m.metaKey?x="overlay":x)==="selection"?pc:i&&m.altKey?Gn:zn,S=e===wa?null:l2[x],k=e===ya?null:c2[x],F=va(y),I=F.extent,V=F.selection,D=I[0][0],z,H,R=I[0][1],A,_,C=I[1][0],L,P,G=I[1][1],Y,U,q=0,Z=0,pe,Q=S&&k&&i&&m.shiftKey,J,B,te=Array.from(m.touches||[m],j=>{const ce=j.identifier;return j=Ct(j,y),j.point0=j.slice(),j.identifier=ce,j});$n(y);var he=c(y,arguments,!0).beforestart();if(x==="overlay"){V&&(pe=!0);const j=[te[0],te[1]||te[0]];F.selection=V=[[z=e===wa?D:Ke(j[0][0],j[1][0]),A=e===ya?R:Ke(j[0][1],j[1][1])],[L=e===wa?C:Qe(j[0][0],j[1][0]),Y=e===ya?G:Qe(j[0][1],j[1][1])]],te.length>1&&ve(m)}else z=V[0][0],A=V[0][1],L=V[1][0],Y=V[1][1];H=z,_=A,P=L,U=Y;var X=nt(y).attr("pointer-events","none"),K=X.selectAll(".overlay").attr("cursor",Jt[x]);if(m.touches)he.moved=W,he.ended=fe;else{var ae=nt(m.view).on("mousemove.brush",W,!0).on("mouseup.brush",fe,!0);i&&ae.on("keydown.brush",xe,!0).on("keyup.brush",ke,!0),il(m.view)}l.call(y),he.start(m,v.name);function W(j){for(const ce of j.changedTouches||[j])for(const Ne of te)Ne.identifier===ce.identifier&&(Ne.cur=Ct(ce,y));if(Q&&!J&&!B&&te.length===1){const ce=te[0];gc(ce.cur[0]-ce[0])>gc(ce.cur[1]-ce[1])?B=!0:J=!0}for(const ce of te)ce.cur&&(ce[0]=ce.cur[0],ce[1]=ce.cur[1]);pe=!0,ga(j),ve(j)}function ve(j){const ce=te[0],Ne=ce.point0;var Te;switch(q=ce[0]-Ne[0],Z=ce[1]-Ne[1],v){case ma:case pc:{S&&(q=Qe(D-z,Ke(C-L,q)),H=z+q,P=L+q),k&&(Z=Qe(R-A,Ke(G-Y,Z)),_=A+Z,U=Y+Z);break}case zn:{te[1]?(S&&(H=Qe(D,Ke(C,te[0][0])),P=Qe(D,Ke(C,te[1][0])),S=1),k&&(_=Qe(R,Ke(G,te[0][1])),U=Qe(R,Ke(G,te[1][1])),k=1)):(S<0?(q=Qe(D-z,Ke(C-z,q)),H=z+q,P=L):S>0&&(q=Qe(D-L,Ke(C-L,q)),H=z,P=L+q),k<0?(Z=Qe(R-A,Ke(G-A,Z)),_=A+Z,U=Y):k>0&&(Z=Qe(R-Y,Ke(G-Y,Z)),_=A,U=Y+Z));break}case Gn:{S&&(H=Qe(D,Ke(C,z-q*S)),P=Qe(D,Ke(C,L+q*S))),k&&(_=Qe(R,Ke(G,A-Z*k)),U=Qe(R,Ke(G,Y+Z*k)));break}}P<H&&(S*=-1,Te=z,z=L,L=Te,Te=H,H=P,P=Te,x in yc&&K.attr("cursor",Jt[x=yc[x]])),U<_&&(k*=-1,Te=A,A=Y,Y=Te,Te=_,_=U,U=Te,x in wc&&K.attr("cursor",Jt[x=wc[x]])),F.selection&&(V=F.selection),J&&(H=V[0][0],P=V[1][0]),B&&(_=V[0][1],U=V[1][1]),(V[0][0]!==H||V[0][1]!==_||V[1][0]!==P||V[1][1]!==U)&&(F.selection=[[H,_],[P,U]],l.call(y),he.brush(j,v.name))}function fe(j){if(a2(j),j.touches){if(j.touches.length)return;o&&clearTimeout(o),o=setTimeout(function(){o=null},500)}else sl(j.view,pe),ae.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);X.attr("pointer-events","all"),K.attr("cursor",Jt.overlay),F.selection&&(V=F.selection),d2(V)&&(F.selection=null,l.call(y)),he.end(j,v.name)}function xe(j){switch(j.keyCode){case 16:{Q=S&&k;break}case 18:{v===zn&&(S&&(L=P-q*S,z=H+q*S),k&&(Y=U-Z*k,A=_+Z*k),v=Gn,ve(j));break}case 32:{(v===zn||v===Gn)&&(S<0?L=P-q:S>0&&(z=H-q),k<0?Y=U-Z:k>0&&(A=_-Z),v=ma,K.attr("cursor",Jt.selection),ve(j));break}default:return}ga(j)}function ke(j){switch(j.keyCode){case 16:{Q&&(J=B=Q=!1,ve(j));break}case 18:{v===Gn&&(S<0?L=P:S>0&&(z=H),k<0?Y=U:k>0&&(A=_),v=zn,ve(j));break}case 32:{v===ma&&(j.altKey?(S&&(L=P-q*S,z=H+q*S),k&&(Y=U-Z*k,A=_+Z*k),v=Gn):(S<0?L=P:S>0&&(z=H),k<0?Y=U:k>0&&(A=_),v=zn),K.attr("cursor",Jt[x]),ve(j));break}default:return}ga(j)}}function p(m){c(this,arguments).moved(m)}function g(m){c(this,arguments).ended(m)}function d(){var m=this.__brush||{selection:null};return m.extent=Ba(t.apply(this,arguments)),m.dim=e,m}return u.extent=function(m){return arguments.length?(t=typeof m=="function"?m:pa(Ba(m)),u):t},u.filter=function(m){return arguments.length?(n=typeof m=="function"?m:pa(!!m),u):n},u.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:pa(!!m),u):r},u.handleSize=function(m){return arguments.length?(a=+m,u):a},u.keyModifiers=function(m){return arguments.length?(i=!!m,u):i},u.on=function(){var m=s.on.apply(s,arguments);return m===s?u:m},u}var Si=e=>()=>e;function m2(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function fn(e,t,n){this.k=e,this.x=t,this.y=n}fn.prototype={constructor:fn,scale:function(e){return e===1?this:new fn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new fn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var al=new fn(1,0,0);function ba(e){e.stopImmediatePropagation()}function Tr(e){e.preventDefault(),e.stopImmediatePropagation()}function y2(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function w2(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function vc(){return this.__zoom||al}function v2(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function b2(){return navigator.maxTouchPoints||"ontouchstart"in this}function S2(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function _2(){var e=y2,t=w2,n=S2,r=v2,i=b2,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,u=I1,l=li("start","zoom","end"),c,f,h,p=500,g=150,d=0,m=10;function y(_){_.property("__zoom",vc).on("wheel.zoom",V,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",H).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(_,C,L,P){var G=_.selection?_.selection():_;G.property("__zoom",vc),_!==G?k(_,C,L,P):G.interrupt().each(function(){F(this,arguments).event(P).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},y.scaleBy=function(_,C,L,P){y.scaleTo(_,function(){var G=this.__zoom.k,Y=typeof C=="function"?C.apply(this,arguments):C;return G*Y},L,P)},y.scaleTo=function(_,C,L,P){y.transform(_,function(){var G=t.apply(this,arguments),Y=this.__zoom,U=L==null?S(G):typeof L=="function"?L.apply(this,arguments):L,q=Y.invert(U),Z=typeof C=="function"?C.apply(this,arguments):C;return n(v(x(Y,Z),U,q),G,a)},L,P)},y.translateBy=function(_,C,L,P){y.transform(_,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),a)},null,P)},y.translateTo=function(_,C,L,P,G){y.transform(_,function(){var Y=t.apply(this,arguments),U=this.__zoom,q=P==null?S(Y):typeof P=="function"?P.apply(this,arguments):P;return n(al.translate(q[0],q[1]).scale(U.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof L=="function"?-L.apply(this,arguments):-L),Y,a)},P,G)};function x(_,C){return C=Math.max(s[0],Math.min(s[1],C)),C===_.k?_:new fn(C,_.x,_.y)}function v(_,C,L){var P=C[0]-L[0]*_.k,G=C[1]-L[1]*_.k;return P===_.x&&G===_.y?_:new fn(_.k,P,G)}function S(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function k(_,C,L,P){_.on("start.zoom",function(){F(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(P).end()}).tween("zoom",function(){var G=this,Y=arguments,U=F(G,Y).event(P),q=t.apply(G,Y),Z=L==null?S(q):typeof L=="function"?L.apply(G,Y):L,pe=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),Q=G.__zoom,J=typeof C=="function"?C.apply(G,Y):C,B=u(Q.invert(Z).concat(pe/Q.k),J.invert(Z).concat(pe/J.k));return function(te){if(te===1)te=J;else{var he=B(te),X=pe/he[2];te=new fn(X,Z[0]-he[0]*X,Z[1]-he[1]*X)}U.zoom(null,te)}})}function F(_,C,L){return!L&&_.__zooming||new I(_,C)}function I(_,C){this.that=_,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,C),this.taps=0}I.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,C){return this.mouse&&_!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var C=nt(this.that).datum();l.call(_,this.that,new m2(_,{sourceEvent:this.sourceEvent,target:y,type:_,transform:this.that.__zoom,dispatch:l}),C)}};function V(_,...C){if(!e.apply(this,arguments))return;var L=F(this,C).event(_),P=this.__zoom,G=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,r.apply(this,arguments)))),Y=Ct(_);if(L.wheel)(L.mouse[0][0]!==Y[0]||L.mouse[0][1]!==Y[1])&&(L.mouse[1]=P.invert(L.mouse[0]=Y)),clearTimeout(L.wheel);else{if(P.k===G)return;L.mouse=[Y,P.invert(Y)],$n(this),L.start()}Tr(_),L.wheel=setTimeout(U,g),L.zoom("mouse",n(v(x(P,G),L.mouse[0],L.mouse[1]),L.extent,a));function U(){L.wheel=null,L.end()}}function D(_,...C){if(h||!e.apply(this,arguments))return;var L=_.currentTarget,P=F(this,C,!0).event(_),G=nt(_.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",pe,!0),Y=Ct(_,L),U=_.clientX,q=_.clientY;il(_.view),ba(_),P.mouse=[Y,this.__zoom.invert(Y)],$n(this),P.start();function Z(Q){if(Tr(Q),!P.moved){var J=Q.clientX-U,B=Q.clientY-q;P.moved=J*J+B*B>d}P.event(Q).zoom("mouse",n(v(P.that.__zoom,P.mouse[0]=Ct(Q,L),P.mouse[1]),P.extent,a))}function pe(Q){G.on("mousemove.zoom mouseup.zoom",null),sl(Q.view,P.moved),Tr(Q),P.event(Q).end()}}function z(_,...C){if(!!e.apply(this,arguments)){var L=this.__zoom,P=Ct(_.changedTouches?_.changedTouches[0]:_,this),G=L.invert(P),Y=L.k*(_.shiftKey?.5:2),U=n(v(x(L,Y),P,G),t.apply(this,C),a);Tr(_),o>0?nt(this).transition().duration(o).call(k,U,P,_):nt(this).call(y.transform,U,P,_)}}function H(_,...C){if(!!e.apply(this,arguments)){var L=_.touches,P=L.length,G=F(this,C,_.changedTouches.length===P).event(_),Y,U,q,Z;for(ba(_),U=0;U<P;++U)q=L[U],Z=Ct(q,this),Z=[Z,this.__zoom.invert(Z),q.identifier],G.touch0?!G.touch1&&G.touch0[2]!==Z[2]&&(G.touch1=Z,G.taps=0):(G.touch0=Z,Y=!0,G.taps=1+!!c);c&&(c=clearTimeout(c)),Y&&(G.taps<2&&(f=Z[0],c=setTimeout(function(){c=null},p)),$n(this),G.start())}}function R(_,...C){if(!!this.__zooming){var L=F(this,C).event(_),P=_.changedTouches,G=P.length,Y,U,q,Z;for(Tr(_),Y=0;Y<G;++Y)U=P[Y],q=Ct(U,this),L.touch0&&L.touch0[2]===U.identifier?L.touch0[0]=q:L.touch1&&L.touch1[2]===U.identifier&&(L.touch1[0]=q);if(U=L.that.__zoom,L.touch1){var pe=L.touch0[0],Q=L.touch0[1],J=L.touch1[0],B=L.touch1[1],te=(te=J[0]-pe[0])*te+(te=J[1]-pe[1])*te,he=(he=B[0]-Q[0])*he+(he=B[1]-Q[1])*he;U=x(U,Math.sqrt(te/he)),q=[(pe[0]+J[0])/2,(pe[1]+J[1])/2],Z=[(Q[0]+B[0])/2,(Q[1]+B[1])/2]}else if(L.touch0)q=L.touch0[0],Z=L.touch0[1];else return;L.zoom("touch",n(v(U,q,Z),L.extent,a))}}function A(_,...C){if(!!this.__zooming){var L=F(this,C).event(_),P=_.changedTouches,G=P.length,Y,U;for(ba(_),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),Y=0;Y<G;++Y)U=P[Y],L.touch0&&L.touch0[2]===U.identifier?delete L.touch0:L.touch1&&L.touch1[2]===U.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(U=Ct(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<m)){var q=nt(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return y.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Si(+_),y):r},y.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Si(!!_),y):e},y.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:Si(!!_),y):i},y.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Si([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),y):t},y.scaleExtent=function(_){return arguments.length?(s[0]=+_[0],s[1]=+_[1],y):[s[0],s[1]]},y.translateExtent=function(_){return arguments.length?(a[0][0]=+_[0][0],a[1][0]=+_[1][0],a[0][1]=+_[0][1],a[1][1]=+_[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(_){return arguments.length?(n=_,y):n},y.duration=function(_){return arguments.length?(o=+_,y):o},y.interpolate=function(_){return arguments.length?(u=_,y):u},y.on=function(){var _=l.on.apply(l,arguments);return _===l?y:_},y.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,y):Math.sqrt(d)},y.tapDistance=function(_){return arguments.length?(m=+_,y):m},y}var E={select:nt,selectAll:Fd,json:Rd,scaleLinear:Iu,scaleSqrt:dp,scalePoint:r1,scaleBand:Bo,scalePow:Qo,scaleOrdinal:Yo,scaleLog:Eu,schemeTableau10:_g,interpolateRainbow:xg,lch:m1,hsl:mu,color:mn,quantize:E1,interpolate:oi,max:Qd,maxIndex:$d,min:Kd,minIndex:e1,extent:Ni,sum:n1,bin:Jd,timeout:Ra,transition:th,easeLinear:F6,easePolyInOut:I6,easeQuadInOut:P6,easeCubicInOut:rh,easeElasticOut:z6,axisLeft:K6,axisBottom:Q6,line:dm,curveStepAfter:xm,brush:p2,zoom:_2,zoomIdentity:al,drag:i2,format:zs,curveMonotoneX:Sm,curveMonotoneY:_m,curveBasis:bm,timeFormat:qu,hierarchy:rl,partition:jm,tree:Km,arc:cm,linkHorizontal:wm,linkVertical:vm,path:ci};const fr=(e,t)=>Math.round((e+Number.EPSILON)*10**t)/10**t,x2=(e,t=null,n="download.json")=>{const r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));let i=t,s=!1;t===null&&(i=document.createElement("a"),i.style.display="none",s=!0),i==null||i.setAttribute("href",r),i==null||i.setAttribute("download",`${n}`),i==null||i.click(),s&&(i==null||i.remove())},bc=e=>{const t=e[0],n=e[1],r=e[2],i=[t,n,r].map(s=>(s/=255,s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)));return i[0]*.2126+i[1]*.7152+i[2]*.0722},dr=(e,t)=>{const n=bc(e),r=bc(t);return n>r?(r+.05)/(n+.05):(n+.05)/(r+.05)},Sc=(e,t)=>e.size===t.size&&[...e].every(n=>t.has(n));class _c{constructor(t,n,r,i){N(this,"favoritesStore");N(this,"favoritesStoreValue");N(this,"searchStore");N(this,"searchStoreValue");N(this,"sunburstStore");N(this,"sunburstStoreValue");N(this,"handlerUpdated");N(this,"favoritesClicked",()=>{this.favoritesStoreValue.shown=!this.favoritesStoreValue.shown,this.favoritesStore.set(this.favoritesStoreValue),this.favoritesStoreValue.shown&&this.searchStoreValue.shown&&(this.searchStoreValue.shown=!1,this.searchStore.set(this.searchStoreValue))});N(this,"searchClicked",()=>{this.searchStoreValue.shown=!this.searchStoreValue.shown,this.searchStore.set(this.searchStoreValue),this.searchStoreValue.shown&&this.favoritesStoreValue.shown&&(this.favoritesStoreValue.shown=!1,this.favoritesStore.set(this.favoritesStoreValue))});N(this,"depthBoxClicked",t=>{t<this.sunburstStoreValue.depthLow||(t>this.sunburstStoreValue.depthHigh?(this.sunburstStoreValue.depthHigh=t,this.sunburstStoreValue.action=Dn.DepthChanged,this.sunburstStore.set(this.sunburstStoreValue)):this.sunburstStoreValue.depthLow<t&&t<this.sunburstStoreValue.depthHigh?(this.sunburstStoreValue.depthHigh=t,this.sunburstStoreValue.action=Dn.DepthChanged,this.sunburstStore.set(this.sunburstStoreValue)):this.sunburstStoreValue.depthLow===t||this.sunburstStoreValue.depthHigh===t||console.error("Unknown case in depthBoxClicked()"))});N(this,"getDepthBoxStyle",t=>{const n=this.sunburstStoreValue.depthColors[t-1];let r="inherit";if(n===null||n==="")return"";{const i=[252,252,252],s=[74,74,74],a=E.color(n).rgb(),o=[a.r,a.g,a.b];dr(i,o)<dr(s,o)&&(r="hsla(0, 0%, 99%, 1)")}return`
    background-color: ${n}; color: ${r}; border: none;
    `});this.handlerUpdated=t,this.favoritesStore=n,this.favoritesStoreValue=sr(),this.favoritesStore.subscribe(s=>{this.favoritesStoreValue=s,this.handlerUpdated()}),this.sunburstStore=r,this.sunburstStoreValue=Eo(),this.sunburstStore.subscribe(s=>{this.sunburstStoreValue=s,this.handlerUpdated()}),this.searchStore=i,this.searchStoreValue=ar(),this.searchStore.subscribe(s=>{this.searchStoreValue=s,this.handlerUpdated()})}}var ph='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M11.5 7a4.499 4.499 0 11-8.998 0A4.499 4.499 0 0111.5 7zm-.82 4.74a6 6 0 111.06-1.06l3.04 3.04a.75.75 0 11-1.06 1.06l-3.04-3.04z"></path></svg>',gh='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z"></path></svg>',mh=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <path d="M8,14.25L7.655,14.916L7.647,14.912L7.629,14.902C7.524,14.848 7.421,14.791 7.319,14.732C6.1,14.038 4.95,13.23 3.885,12.318C2.045,10.731 0,8.35 0,5.5C0,2.836 2.086,1 4.25,1C5.797,1 7.153,1.802 8,3.02C8.847,1.802 10.203,1 11.75,1C13.914,1 16,2.836 16,5.5C16,8.35 13.955,10.731 12.115,12.318C10.959,13.306 9.705,14.172 8.371,14.902L8.353,14.912L8.347,14.915L8.345,14.915L8,14.25ZM8,14.25L8.345,14.916C8.129,15.028 7.871,15.028 7.655,14.916L8,14.25Z"/>
</svg>
`;const tt="src/components/toolbar/Toolbar.svelte";function xc(e,t,n){const r=e.slice();return r[13]=t[n],r}function kc(e,t,n){const r=e.slice();return r[13]=t[n],r}function Ua(e){let t;const n={c:function(){var i,s;t=M("div"),b(t,"class","depth-line s-JBVBfphpN2RX"),me(t,"in-range",e[13]+2<=((i=e[2])==null?void 0:i.sunburstStoreValue.depthHigh)&&e[13]+2>((s=e[2])==null?void 0:s.sunburstStoreValue.depthLow)),T(t,tt,197,10,5374)},m:function(i,s){le(i,t,s)},p:function(i,s){var a,o;s&4&&me(t,"in-range",i[13]+2<=((a=i[2])==null?void 0:a.sunburstStoreValue.depthHigh)&&i[13]+2>((o=i[2])==null?void 0:o.sunburstStoreValue.depthLow))},d:function(i){i&&se(t)}};return ee("SvelteRegisterBlock",{block:n,id:Ua.name,type:"each",source:"(197:8) {#each [...Array(Math.max(handler?.sunburstStoreValue.depthMax - 1, 0)).keys()] as i}",ctx:e}),n}function ja(e){let t,n=e[13]+1+"",r,i,s,a,o;function u(){return e[6](e[13])}const l={c:function(){var f,h,p,g;t=M("div"),r=oe(n),i=O(),b(t,"class","depth-box s-JBVBfphpN2RX"),b(t,"style",s=(f=e[2])==null?void 0:f.getDepthBoxStyle(e[13]+1)),me(t,"in-range",e[13]+1<=((h=e[2])==null?void 0:h.sunburstStoreValue.depthHigh)&&e[13]+1>=((p=e[2])==null?void 0:p.sunburstStoreValue.depthLow)),me(t,"no-hover",e[13]+1===((g=e[2])==null?void 0:g.sunburstStoreValue.depthHigh)),T(t,tt,206,8,5674)},m:function(f,h){le(f,t,h),w(t,r),w(t,i),a||(o=de(t,"click",u,!1,!1,!1),a=!0)},p:function(f,h){var p,g,d,m;e=f,h&4&&n!==(n=e[13]+1+"")&&We(r,n),h&4&&s!==(s=(p=e[2])==null?void 0:p.getDepthBoxStyle(e[13]+1))&&b(t,"style",s),h&4&&me(t,"in-range",e[13]+1<=((g=e[2])==null?void 0:g.sunburstStoreValue.depthHigh)&&e[13]+1>=((d=e[2])==null?void 0:d.sunburstStoreValue.depthLow)),h&4&&me(t,"no-hover",e[13]+1===((m=e[2])==null?void 0:m.sunburstStoreValue.depthHigh))},d:function(f){f&&se(t),a=!1,o()}};return ee("SvelteRegisterBlock",{block:l,id:ja.name,type:"each",source:"(206:6) {#each [...Array(handler?.sunburstStoreValue.depthMax).keys()] as i}",ctx:e}),l}function Xa(e){var C,L;let t,n,r,i=e[0]<600?"Depth":"Show Depth",s,a,o,u,l,c,f,h,p,g,d,m,y,x,v,S,k,F,I,V,D,z=[...Array(Math.max(((C=e[2])==null?void 0:C.sunburstStoreValue.depthMax)-1,0)).keys()];Re(z);let H=[];for(let P=0;P<z.length;P+=1)H[P]=Ua(kc(e,z,P));let R=[...Array((L=e[2])==null?void 0:L.sunburstStoreValue.depthMax).keys()];Re(R);let A=[];for(let P=0;P<R.length;P+=1)A[P]=ja(xc(e,R,P));const _={c:function(){var G,Y,U,q;t=M("div"),n=M("div"),r=M("div"),s=oe(i),a=O(),o=M("div"),u=M("div");for(let Z=0;Z<H.length;Z+=1)H[Z].c();l=O();for(let Z=0;Z<A.length;Z+=1)A[Z].c();c=O(),f=M("div"),h=M("div"),p=M("span"),g=new An,d=O(),m=M("div"),y=O(),x=M("span"),x.textContent="Favorites",v=O(),S=M("div"),k=M("span"),F=O(),I=M("span"),I.textContent="Search",b(r,"class","depth-label s-JBVBfphpN2RX"),T(r,tt,190,4,5105),b(u,"class","depth-box-lines s-JBVBfphpN2RX"),T(u,tt,195,6,5240),b(o,"class","depth-box-container s-JBVBfphpN2RX"),T(o,tt,194,4,5200),b(n,"class","depths s-JBVBfphpN2RX"),T(n,tt,189,2,5080),g.a=d,b(m,"class","hidden-heart s-JBVBfphpN2RX"),me(m,"pulse",!1),T(m,tt,230,8,6357),b(p,"class","svg-icon s-JBVBfphpN2RX"),T(p,tt,228,6,6299),b(x,"class","button-text s-JBVBfphpN2RX"),me(x,"no-display",((G=e[2])==null?void 0:G.sunburstStoreValue.depthMax)>8&&e[0]<650),T(x,tt,234,6,6472),b(h,"class","tool-button s-JBVBfphpN2RX"),me(h,"shown",(Y=e[2])==null?void 0:Y.favoritesStoreValue.shown),T(h,tt,221,4,6131),b(k,"class","svg-icon s-JBVBfphpN2RX"),T(k,tt,250,6,6825),b(I,"class","button-text s-JBVBfphpN2RX"),me(I,"no-display",((U=e[2])==null?void 0:U.sunburstStoreValue.depthMax)>8&&e[0]<650),T(I,tt,253,6,6896),b(S,"class","tool-button s-JBVBfphpN2RX"),me(S,"shown",(q=e[2])==null?void 0:q.searchStoreValue.shown),T(S,tt,243,4,6663),b(f,"class","tools s-JBVBfphpN2RX"),T(f,tt,220,2,6107),b(t,"class","toolbar s-JBVBfphpN2RX"),T(t,tt,188,0,5034)},l:function(G){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(G,Y){le(G,t,Y),w(t,n),w(n,r),w(r,s),w(n,a),w(n,o),w(o,u);for(let U=0;U<H.length;U+=1)H[U].m(u,null);w(o,l);for(let U=0;U<A.length;U+=1)A[U].m(o,null);w(t,c),w(t,f),w(f,h),w(h,p),g.m(gh,p),w(p,d),w(p,m),m.innerHTML=mh,w(h,y),w(h,x),w(f,v),w(f,S),w(S,k),k.innerHTML=ph,w(S,F),w(S,I),e[9](t),V||(D=[de(h,"click",e[7],!1,!1,!1),de(S,"click",e[8],!1,!1,!1)],V=!0)},p:function(G,[Y]){var U,q,Z,pe,Q,J;if(Y&1&&i!==(i=G[0]<600?"Depth":"Show Depth")&&We(s,i),Y&4){z=[...Array(Math.max(((U=G[2])==null?void 0:U.sunburstStoreValue.depthMax)-1,0)).keys()],Re(z);let B;for(B=0;B<z.length;B+=1){const te=kc(G,z,B);H[B]?H[B].p(te,Y):(H[B]=Ua(te),H[B].c(),H[B].m(u,null))}for(;B<H.length;B+=1)H[B].d(1);H.length=z.length}if(Y&4){R=[...Array((q=G[2])==null?void 0:q.sunburstStoreValue.depthMax).keys()],Re(R);let B;for(B=0;B<R.length;B+=1){const te=xc(G,R,B);A[B]?A[B].p(te,Y):(A[B]=ja(te),A[B].c(),A[B].m(o,null))}for(;B<A.length;B+=1)A[B].d(1);A.length=R.length}Y&5&&me(x,"no-display",((Z=G[2])==null?void 0:Z.sunburstStoreValue.depthMax)>8&&G[0]<650),Y&4&&me(h,"shown",(pe=G[2])==null?void 0:pe.favoritesStoreValue.shown),Y&5&&me(I,"no-display",((Q=G[2])==null?void 0:Q.sunburstStoreValue.depthMax)>8&&G[0]<650),Y&4&&me(S,"shown",(J=G[2])==null?void 0:J.searchStoreValue.shown)},i:ye,o:ye,d:function(G){G&&se(t),un(H,G),un(A,G),e[9](null),V=!1,ze(D)}};return ee("SvelteRegisterBlock",{block:_,id:Xa.name,type:"component",source:"",ctx:e}),_}function k2(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("Toolbar",r,[]);let{favoritesStore:s=null}=t,{sunburstStore:a=null}=t,{searchStore:o=null}=t,{sunburstWidth:u=650}=t,l=null,c=!1,f=null;Le(()=>{c=!0});const h=()=>{n(2,f)},p=()=>{s&&a&&o&&n(2,f=new _c(h,s,a,o))},g=["favoritesStore","sunburstStore","searchStore","sunburstWidth"];Object.keys(t).forEach(v=>{!~g.indexOf(v)&&v.slice(0,2)!=="$$"&&v!=="slot"&&console.warn(`<Toolbar> was created with unknown prop '${v}'`)});const d=v=>f==null?void 0:f.depthBoxClicked(v+1),m=()=>{f==null||f.favoritesClicked()},y=()=>{f==null||f.searchClicked()};function x(v){et[v?"unshift":"push"](()=>{l=v,n(1,l)})}return e.$$set=v=>{"favoritesStore"in v&&n(3,s=v.favoritesStore),"sunburstStore"in v&&n(4,a=v.sunburstStore),"searchStore"in v&&n(5,o=v.searchStore),"sunburstWidth"in v&&n(0,u=v.sunburstWidth)},e.$capture_state=()=>({onMount:Le,ToolbarEventHandler:_c,iconSearch:ph,iconHeart:gh,iconHeartSolid:mh,favoritesStore:s,sunburstStore:a,searchStore:o,sunburstWidth:u,component:l,mounted:c,handler:f,handlerUpdated:h,initView:p}),e.$inject_state=v=>{"favoritesStore"in v&&n(3,s=v.favoritesStore),"sunburstStore"in v&&n(4,a=v.sunburstStore),"searchStore"in v&&n(5,o=v.searchStore),"sunburstWidth"in v&&n(0,u=v.sunburstWidth),"component"in v&&n(1,l=v.component),"mounted"in v&&(c=v.mounted),"handler"in v&&n(2,f=v.handler)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&56&&s&&a&&o&&p()},[u,l,f,s,a,o,d,m,y,x]}class yh extends wt{constructor(t){super(t);mt(this,t,k2,Xa,it,{favoritesStore:3,sunburstStore:4,searchStore:5,sunburstWidth:0}),ee("SvelteRegisterComponent",{component:this,tagName:"Toolbar",options:t,id:Xa.name})}get favoritesStore(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sunburstStore(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sunburstStore(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get searchStore(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set searchStore(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sunburstWidth(){throw new Error("<Toolbar>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sunburstWidth(t){throw new Error("<Toolbar>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ii={sunburstWidth:650,treeWindowWidth:150,treeWindowHeaderHeight:26,treeWindowHeight:0,toolbarHeight:36},T2={mouseenterDelay:300};Ii.treeWindowHeight=Ii.treeWindowHeaderHeight+Ii.treeWindowWidth;const M2={"red-50":"hsl(350, 100.0%, 96.08%)","red-100":"hsl(354, 100.0%, 90.2%)","red-200":"hsl(0, 72.65%, 77.06%)","red-300":"hsl(0, 68.67%, 67.45%)","red-400":"hsl(1, 83.25%, 62.55%)","red-500":"hsl(4, 89.62%, 58.43%)","red-600":"hsl(1, 77.19%, 55.29%)","red-700":"hsl(0, 65.08%, 50.59%)","red-800":"hsl(0, 66.39%, 46.67%)","red-900":"hsl(0, 73.46%, 41.37%)","red-a100":"hsl(4, 100.0%, 75.1%)","red-a200":"hsl(0, 100.0%, 66.08%)","red-a400":"hsl(348, 100.0%, 54.51%)","red-a700":"hsl(0, 100.0%, 41.76%)","pink-50":"hsl(340, 80.0%, 94.12%)","pink-100":"hsl(339, 81.33%, 85.29%)","pink-200":"hsl(339, 82.11%, 75.88%)","pink-300":"hsl(339, 82.56%, 66.27%)","pink-400":"hsl(339, 81.9%, 58.82%)","pink-500":"hsl(339, 82.19%, 51.57%)","pink-600":"hsl(338, 77.78%, 47.65%)","pink-700":"hsl(336, 77.98%, 42.75%)","pink-800":"hsl(333, 79.27%, 37.84%)","pink-900":"hsl(328, 81.33%, 29.41%)","pink-a100":"hsl(339, 100.0%, 75.1%)","pink-a200":"hsl(339, 100.0%, 62.55%)","pink-a400":"hsl(338, 100.0%, 48.04%)","pink-a700":"hsl(333, 84.11%, 41.96%)","purple-50":"hsl(292, 44.44%, 92.94%)","purple-100":"hsl(291, 46.07%, 82.55%)","purple-200":"hsl(291, 46.94%, 71.18%)","purple-300":"hsl(291, 46.6%, 59.61%)","purple-400":"hsl(291, 46.61%, 50.78%)","purple-500":"hsl(291, 63.72%, 42.16%)","purple-600":"hsl(287, 65.05%, 40.39%)","purple-700":"hsl(282, 67.88%, 37.84%)","purple-800":"hsl(277, 70.17%, 35.49%)","purple-900":"hsl(267, 75.0%, 31.37%)","purple-a100":"hsl(291, 95.38%, 74.51%)","purple-a200":"hsl(291, 95.9%, 61.76%)","purple-a400":"hsl(291, 100.0%, 48.82%)","purple-a700":"hsl(280, 100.0%, 50.0%)","deep-purple-50":"hsl(264, 45.45%, 93.53%)","deep-purple-100":"hsl(261, 45.68%, 84.12%)","deep-purple-200":"hsl(261, 46.27%, 73.73%)","deep-purple-300":"hsl(261, 46.81%, 63.14%)","deep-purple-400":"hsl(261, 46.72%, 55.1%)","deep-purple-500":"hsl(261, 51.87%, 47.25%)","deep-purple-600":"hsl(259, 53.91%, 45.1%)","deep-purple-700":"hsl(257, 57.75%, 41.76%)","deep-purple-800":"hsl(254, 60.8%, 39.02%)","deep-purple-900":"hsl(251, 68.79%, 33.92%)","deep-purple-a100":"hsl(261, 100.0%, 76.67%)","deep-purple-a200":"hsl(255, 100.0%, 65.1%)","deep-purple-a400":"hsl(258, 100.0%, 56.08%)","deep-purple-a700":"hsl(265, 100.0%, 45.88%)","indigo-50":"hsl(231, 43.75%, 93.73%)","indigo-100":"hsl(231, 45.0%, 84.31%)","indigo-200":"hsl(230, 44.36%, 73.92%)","indigo-300":"hsl(230, 44.09%, 63.53%)","indigo-400":"hsl(230, 44.25%, 55.69%)","indigo-500":"hsl(230, 48.36%, 47.84%)","indigo-600":"hsl(231, 50.0%, 44.71%)","indigo-700":"hsl(231, 53.62%, 40.59%)","indigo-800":"hsl(232, 57.22%, 36.67%)","indigo-900":"hsl(234, 65.79%, 29.8%)","indigo-a100":"hsl(230, 100.0%, 77.45%)","indigo-a200":"hsl(230, 98.84%, 66.08%)","indigo-a400":"hsl(230, 98.97%, 61.76%)","indigo-a700":"hsl(230, 99.04%, 59.22%)","blue-50":"hsl(205, 86.67%, 94.12%)","blue-100":"hsl(207, 88.89%, 85.88%)","blue-200":"hsl(206, 89.74%, 77.06%)","blue-300":"hsl(206, 89.02%, 67.84%)","blue-400":"hsl(206, 89.95%, 60.98%)","blue-500":"hsl(206, 89.74%, 54.12%)","blue-600":"hsl(208, 79.28%, 50.78%)","blue-700":"hsl(209, 78.72%, 46.08%)","blue-800":"hsl(211, 80.28%, 41.76%)","blue-900":"hsl(216, 85.06%, 34.12%)","blue-a100":"hsl(217, 100.0%, 75.49%)","blue-a200":"hsl(217, 100.0%, 63.33%)","blue-a400":"hsl(217, 100.0%, 58.04%)","blue-a700":"hsl(224, 100.0%, 58.04%)","light-blue-50":"hsl(198, 93.55%, 93.92%)","light-blue-100":"hsl(198, 92.41%, 84.51%)","light-blue-200":"hsl(198, 92.37%, 74.31%)","light-blue-300":"hsl(198, 91.3%, 63.92%)","light-blue-400":"hsl(198, 91.93%, 56.27%)","light-blue-500":"hsl(198, 97.57%, 48.43%)","light-blue-600":"hsl(199, 97.41%, 45.49%)","light-blue-700":"hsl(201, 98.1%, 41.37%)","light-blue-800":"hsl(202, 97.91%, 37.45%)","light-blue-900":"hsl(206, 98.72%, 30.59%)","light-blue-a100":"hsl(198, 100.0%, 75.1%)","light-blue-a200":"hsl(198, 100.0%, 62.55%)","light-blue-a400":"hsl(198, 100.0%, 50.0%)","light-blue-a700":"hsl(202, 100.0%, 45.88%)","cyan-50":"hsl(186, 72.22%, 92.94%)","cyan-100":"hsl(186, 71.11%, 82.35%)","cyan-200":"hsl(186, 71.62%, 70.98%)","cyan-300":"hsl(186, 71.15%, 59.22%)","cyan-400":"hsl(186, 70.87%, 50.2%)","cyan-500":"hsl(186, 100.0%, 41.57%)","cyan-600":"hsl(186, 100.0%, 37.84%)","cyan-700":"hsl(185, 100.0%, 32.75%)","cyan-800":"hsl(185, 100.0%, 28.04%)","cyan-900":"hsl(182, 100.0%, 19.61%)","cyan-a100":"hsl(180, 100.0%, 75.88%)","cyan-a200":"hsl(180, 100.0%, 54.71%)","cyan-a400":"hsl(186, 100.0%, 50.0%)","cyan-a700":"hsl(187, 100.0%, 41.57%)","teal-50":"hsl(176, 40.91%, 91.37%)","teal-100":"hsl(174, 41.28%, 78.63%)","teal-200":"hsl(174, 41.9%, 64.9%)","teal-300":"hsl(174, 41.83%, 50.78%)","teal-400":"hsl(174, 62.75%, 40.0%)","teal-500":"hsl(174, 100.0%, 29.41%)","teal-600":"hsl(173, 100.0%, 26.86%)","teal-700":"hsl(173, 100.0%, 23.73%)","teal-800":"hsl(172, 100.0%, 20.59%)","teal-900":"hsl(169, 100.0%, 15.1%)","teal-a100":"hsl(166, 100.0%, 82.75%)","teal-a200":"hsl(165, 100.0%, 69.61%)","teal-a400":"hsl(165, 82.26%, 51.37%)","teal-a700":"hsl(171, 100.0%, 37.45%)","green-50":"hsl(124, 39.39%, 93.53%)","green-100":"hsl(121, 37.5%, 84.31%)","green-200":"hsl(122, 37.4%, 74.31%)","green-300":"hsl(122, 38.46%, 64.31%)","green-400":"hsl(122, 38.46%, 56.67%)","green-500":"hsl(122, 39.44%, 49.22%)","green-600":"hsl(122, 40.97%, 44.51%)","green-700":"hsl(122, 43.43%, 38.82%)","green-800":"hsl(123, 46.2%, 33.53%)","green-900":"hsl(124, 55.37%, 23.73%)","green-a100":"hsl(136, 77.22%, 84.51%)","green-a200":"hsl(150, 81.82%, 67.65%)","green-a400":"hsl(150, 100.0%, 45.1%)","green-a700":"hsl(144, 100.0%, 39.22%)","light-green-50":"hsl(88, 51.72%, 94.31%)","light-green-100":"hsl(87, 50.68%, 85.69%)","light-green-200":"hsl(88, 50.0%, 76.47%)","light-green-300":"hsl(87, 50.0%, 67.06%)","light-green-400":"hsl(87, 50.24%, 59.8%)","light-green-500":"hsl(87, 50.21%, 52.75%)","light-green-600":"hsl(89, 46.12%, 48.04%)","light-green-700":"hsl(92, 47.91%, 42.16%)","light-green-800":"hsl(95, 49.46%, 36.47%)","light-green-900":"hsl(103, 55.56%, 26.47%)","light-green-a100":"hsl(87, 100.0%, 78.24%)","light-green-a200":"hsl(87, 100.0%, 67.45%)","light-green-a400":"hsl(92, 100.0%, 50.59%)","light-green-a700":"hsl(96, 81.15%, 47.84%)","lime-50":"hsl(65, 71.43%, 94.51%)","lime-100":"hsl(64, 69.01%, 86.08%)","lime-200":"hsl(65, 70.69%, 77.25%)","lime-300":"hsl(65, 70.37%, 68.24%)","lime-400":"hsl(65, 69.7%, 61.18%)","lime-500":"hsl(65, 69.96%, 54.31%)","lime-600":"hsl(63, 59.68%, 49.61%)","lime-700":"hsl(62, 61.43%, 43.73%)","lime-800":"hsl(59, 62.89%, 38.04%)","lime-900":"hsl(53, 69.93%, 30.0%)","lime-a100":"hsl(65, 100.0%, 75.29%)","lime-a200":"hsl(65, 100.0%, 62.75%)","lime-a400":"hsl(73, 100.0%, 50.0%)","lime-a700":"hsl(75, 100.0%, 45.88%)","yellow-50":"hsl(55, 100.0%, 95.29%)","yellow-100":"hsl(53, 100.0%, 88.43%)","yellow-200":"hsl(53, 100.0%, 80.78%)","yellow-300":"hsl(53, 100.0%, 73.14%)","yellow-400":"hsl(53, 100.0%, 67.25%)","yellow-500":"hsl(53, 100.0%, 61.57%)","yellow-600":"hsl(48, 98.04%, 60.0%)","yellow-700":"hsl(42, 96.26%, 58.04%)","yellow-800":"hsl(37, 94.64%, 56.08%)","yellow-900":"hsl(28, 91.74%, 52.55%)","yellow-a100":"hsl(60, 100.0%, 77.65%)","yellow-a200":"hsl(60, 100.0%, 50.0%)","yellow-a400":"hsl(55, 100.0%, 50.0%)","yellow-a700":"hsl(50, 100.0%, 50.0%)","amber-50":"hsl(46, 100.0%, 94.12%)","amber-100":"hsl(45, 100.0%, 85.1%)","amber-200":"hsl(45, 100.0%, 75.49%)","amber-300":"hsl(45, 100.0%, 65.49%)","amber-400":"hsl(45, 100.0%, 57.84%)","amber-500":"hsl(45, 100.0%, 51.37%)","amber-600":"hsl(42, 100.0%, 50.0%)","amber-700":"hsl(37, 100.0%, 50.0%)","amber-800":"hsl(33, 100.0%, 50.0%)","amber-900":"hsl(26, 100.0%, 50.0%)","amber-a100":"hsl(47, 100.0%, 74.9%)","amber-a200":"hsl(47, 100.0%, 62.55%)","amber-a400":"hsl(46, 100.0%, 50.0%)","amber-a700":"hsl(40, 100.0%, 50.0%)","orange-50":"hsl(36, 100.0%, 93.92%)","orange-100":"hsl(35, 100.0%, 84.9%)","orange-200":"hsl(35, 100.0%, 75.1%)","orange-300":"hsl(35, 100.0%, 65.1%)","orange-400":"hsl(35, 100.0%, 57.45%)","orange-500":"hsl(35, 100.0%, 50.0%)","orange-600":"hsl(33, 100.0%, 49.22%)","orange-700":"hsl(30, 100.0%, 48.04%)","orange-800":"hsl(27, 100.0%, 46.86%)","orange-900":"hsl(21, 100.0%, 45.1%)","orange-a100":"hsl(38, 100.0%, 75.1%)","orange-a200":"hsl(33, 100.0%, 62.55%)","orange-a400":"hsl(34, 100.0%, 50.0%)","orange-a700":"hsl(25, 100.0%, 50.0%)","deep-orange-50":"hsl(5, 71.43%, 94.51%)","deep-orange-100":"hsl(14, 100.0%, 86.86%)","deep-orange-200":"hsl(14, 100.0%, 78.43%)","deep-orange-300":"hsl(14, 100.0%, 69.8%)","deep-orange-400":"hsl(14, 100.0%, 63.14%)","deep-orange-500":"hsl(14, 100.0%, 56.67%)","deep-orange-600":"hsl(14, 90.68%, 53.73%)","deep-orange-700":"hsl(14, 80.39%, 50.0%)","deep-orange-800":"hsl(14, 82.28%, 46.47%)","deep-orange-900":"hsl(14, 88.18%, 39.8%)","deep-orange-a100":"hsl(14, 100.0%, 75.1%)","deep-orange-a200":"hsl(14, 100.0%, 62.55%)","deep-orange-a400":"hsl(14, 100.0%, 50.0%)","deep-orange-a700":"hsl(11, 100.0%, 43.33%)","brown-50":"hsl(19, 15.79%, 92.55%)","brown-100":"hsl(16, 15.79%, 81.37%)","brown-200":"hsl(14, 15.19%, 69.02%)","brown-300":"hsl(15, 15.32%, 56.47%)","brown-400":"hsl(15, 17.5%, 47.06%)","brown-500":"hsl(15, 25.39%, 37.84%)","brown-600":"hsl(15, 25.29%, 34.12%)","brown-700":"hsl(14, 25.68%, 29.02%)","brown-800":"hsl(11, 25.81%, 24.31%)","brown-900":"hsl(8, 27.84%, 19.02%)","gray-50":"hsl(0, 0.0%, 98.04%)","gray-100":"hsl(0, 0.0%, 96.08%)","gray-200":"hsl(0, 0.0%, 93.33%)","gray-300":"hsl(0, 0.0%, 87.84%)","gray-400":"hsl(0, 0.0%, 74.12%)","gray-500":"hsl(0, 0.0%, 61.96%)","gray-600":"hsl(0, 0.0%, 45.88%)","gray-700":"hsl(0, 0.0%, 38.04%)","gray-800":"hsl(0, 0.0%, 25.88%)","gray-900":"hsl(0, 0.0%, 12.94%)","blue-gray-50":"hsl(204, 15.15%, 93.53%)","blue-gray-100":"hsl(198, 15.66%, 83.73%)","blue-gray-200":"hsl(199, 15.33%, 73.14%)","blue-gray-300":"hsl(199, 15.63%, 62.35%)","blue-gray-400":"hsl(200, 15.38%, 54.12%)","blue-gray-500":"hsl(199, 18.3%, 46.08%)","blue-gray-600":"hsl(198, 18.45%, 40.39%)","blue-gray-700":"hsl(199, 18.34%, 33.14%)","blue-gray-800":"hsl(199, 17.91%, 26.27%)","blue-gray-900":"hsl(199, 19.15%, 18.43%)","blue-gray-1000":"hsl(199, 20.93%, 8.43%)"},Ce={colors:M2,layout:Ii,time:T2};var St=(e=>(e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e))(St||{}),Bn=(e=>(e[e.First=0]="First",e[e.Second=1]="Second",e[e.Both=2]="Both",e))(Bn||{}),Nr=(e=>(e[e.PairArray=0]="PairArray",e[e.PairString=1]="PairString",e))(Nr||{}),At=(e=>(e[e.SectorArc=0]="SectorArc",e[e.MidLine=1]="MidLine",e))(At||{});const C2=[[" ",19.3],["!",34.3],['"',39.7],["#",58],["$",58],["%",78.6],["&",70.3],["'",23],["(",30],[")",30],["*",40],["+",58],[",",21.2],["-",34.7],[".",21.2],["/",37.3],["0",58],["1",58],["2",58],["3",58],["4",58],["5",58],["6",58],["7",58],["8",58],["9",58],[":",25.2],[";",25.2],["<",58],["=",58],[">",58],["?",39.8],["@",82.2],["A",68],["B",64.7],["C",68.5],["D",75.3],["E",58.1],["F",56.6],["G",73.4],["H",75.6],["I",30.7],["J",44.4],["K",68.1],["L",51.4],["M",92],["N",75.6],["O",79.8],["P",61.1],["Q",79.8],["R",64.4],["S",53],["T",59],["U",73],["V",68],["W",101.9],["X",64.3],["Y",62.9],["Z",62.4],["[",30],["\\",37.5],["]",30],["^",58],["_",39.4],["`",30.7],["a",50.7],["b",55.9],["c",46.7],["d",55.9],["e",52.4],["f",33.7],["g",51.1],["h",55.6],["i",25.6],["j",25.4],["k",52.4],["l",25.6],["m",82.1],["n",55.6],["o",55.6],["p",55.2],["q",55.9],["r",40.3],["s",43.4],["t",37.3],["u",55.6],["v",51.2],["w",76.6],["x",50.4],["y",51.2],["z",46.2],["{",30],["|",30],["}",30],["~",58],["_median",55.9]],V2=[['"&',-9.1],['",',-11.4],['"-',-8.9],['".',-11.4],['"/',-9.1],['"@',-2.3],['"A',-9.1],['"C',-2.3],['"G',-2.3],['"O',-2.3],['"Q',-2.3],['"V',2.4],['"W',2.4],['"Y',1.5],['"\\',2.4],['"a',-3.2],['"c',-4.6],['"d',-4.6],['"e',-4.6],['"o',-4.6],['"q',-4.6],["'&",-9.1],["',",-11.4],["'-",-8.9],["'.",-11.4],["'/",-9.1],["'@",-2.3],["'A",-9.1],["'C",-2.3],["'G",-2.3],["'O",-2.3],["'Q",-2.3],["'V",2.4],["'W",2.4],["'Y",1.5],["'\\",2.4],["'a",-3.2],["'c",-4.6],["'d",-4.6],["'e",-4.6],["'o",-4.6],["'q",-4.6],["(@",-2],["(C",-2],["(G",-2],["(O",-2],["(Q",-2],["(c",-1.6],["(d",-1.6],["(e",-1.6],["(o",-1.6],["(q",-1.6],["*&",-9.1],["*,",-11.4],["*-",-8.9],["*.",-11.4],["*/",-9.1],["*@",-2.3],["*A",-9.1],["*C",-2.3],["*G",-2.3],["*O",-2.3],["*Q",-2.3],["*V",2.4],["*W",2.4],["*Y",1.5],["*\\",2.4],["*a",-3.2],["*c",-4.6],["*d",-4.6],["*e",-4.6],["*o",-4.6],["*q",-4.6],[',"',-11.4],[",'",-11.4],[",*",-11.4],[",-",-6.8],[",@",-2.8],[",C",-2.8],[",G",-2.8],[",O",-2.8],[",Q",-2.8],[",T",-9],[",V",-9],[",W",-6.1],[",Y",-7.6],[",\\",-9],[",v",-6.6],[",w",-3.1],[",y",-6.6],['-"',-8.9],["-&",-2.6],["-'",-8.9],["-*",-8.9],["-,",-6.8],["-.",-6.8],["-/",-2.6],["-A",-2.6],["-T",-9],["-V",-5.6],["-W",-1.6],["-X",-3.1],["-Y",-8],["-Z",-2.3],["-\\",-5.6],['."',-11.4],[".'",-11.4],[".*",-11.4],[".-",-6.8],[".@",-2.8],[".C",-2.8],[".G",-2.8],[".O",-2.8],[".Q",-2.8],[".T",-9],[".V",-9],[".W",-6.1],[".Y",-7.6],[".\\",-9],[".v",-6.6],[".w",-3.1],[".y",-6.6],['/"',2.4],["/&",-6.8],["/'",2.4],["/*",2.4],["/,",-9.6],["/-",-5.6],["/.",-9.6],["//",-6.8],["/:",-4.4],["/;",-4.4],["/?",2.4],["/@",-2.6],["/A",-6.8],["/C",-2.6],["/G",-2.6],["/J",-7.6],["/O",-2.6],["/Q",-2.6],["/a",-5.8],["/c",-5.8],["/d",-5.8],["/e",-5.8],["/f",-1.5],["/g",-6.8],["/m",-4.4],["/n",-4.4],["/o",-5.8],["/p",-4.4],["/q",-5.8],["/r",-4.4],["/s",-5.3],["/t",-2.1],["/u",-4.4],["/v",-2.4],["/x",-2.6],["/y",-2.4],["/z",-4.1],['@"',-2.3],["@&",-2.1],["@'",-2.3],["@)",-2],["@*",-2.3],["@,",-2.8],["@.",-2.8],["@/",-2.1],["@A",-2.1],["@T",-4.9],["@V",-2.6],["@X",-1.5],["@Y",-4],["@Z",-3.5],["@\\",-2.6],["@]",-2],["@}",-2],['A"',-9.1],["A'",-9.1],["A*",-9.1],["A-",-2.6],["A?",-2.8],["A@",-2.1],["AC",-2.1],["AG",-2.1],["AJ",2.5],["AO",-2.1],["AQ",-2.1],["AT",-6.6],["AU",-2.8],["AV",-6.8],["AW",-4.2],["AY",-8.2],["A\\",-6.8],["Av",-4.1],["Ay",-4.1],["C-",-7.5],['D"',-2.3],["D&",-2.1],["D'",-2.3],["D)",-2],["D*",-2.3],["D,",-2.8],["D.",-2.8],["D/",-2.1],["DA",-2.1],["DT",-4.9],["DV",-2.6],["DX",-1.5],["DY",-4],["DZ",-3.5],["D\\",-2.6],["D]",-2],["D}",-2],["F&",-6.6],["F,",-9],["F.",-9],["F/",-6.6],["F:",-3],["F;",-3],["F?",1.5],["FA",-6.6],["FJ",-9.9],["Fc",-3.5],["Fd",-3.5],["Fe",-3.5],["Fm",-3],["Fn",-3],["Fo",-3.5],["Fp",-3],["Fq",-3.5],["Fr",-3],["Fu",-3],["J&",-2.8],["J,",-2.5],["J.",-2.5],["J/",-2.8],["JA",-2.8],["K-",-3.1],["K@",-1.5],["KC",-1.5],["KG",-1.5],["KO",-1.5],["KQ",-1.5],["Kc",-1.8],["Kd",-1.8],["Ke",-1.8],["Kf",-2.6],["Ko",-1.8],["Kq",-1.8],["Kt",-4.1],["Kv",-3.3],["Kw",-2.8],["Ky",-3.3],['L"',-14.5],["L'",-14.5],["L*",-14.5],["L,",2.7],["L-",-9.9],["L.",2.7],["L?",-2.5],["L@",-4],["LC",-4],["LG",-4],["LO",-4],["LQ",-4],["LT",-8.6],["LV",-9.1],["LW",-7.6],["LY",-10.6],["L\\",-9.1],["Lc",-1.8],["Ld",-1.8],["Le",-1.8],["Lo",-1.8],["Lq",-1.8],["Lv",-5.4],["Lw",-4],["Ly",-5.4],['O"',-2.3],["O&",-2.1],["O'",-2.3],["O)",-2],["O*",-2.3],["O,",-2.8],["O.",-2.8],["O/",-2.1],["OA",-2.1],["OT",-4.9],["OV",-2.6],["OX",-1.5],["OY",-4],["OZ",-3.5],["O\\",-2.6],["O]",-2],["O}",-2],["P&",-6.9],["P,",-12.4],["P.",-12.4],["P/",-6.9],["PA",-6.9],["PJ",-9.1],["Pa",-2.5],["Pc",-1.5],["Pd",-1.5],["Pe",-1.5],["Po",-1.5],["Pq",-1.5],['Q"',-2.3],["Q&",-2.1],["Q'",-2.3],["Q)",-2],["Q*",-2.3],["Q,",-2.8],["Q.",-2.8],["Q/",-2.1],["QA",-2.1],["QT",-4.9],["QV",-2.6],["QX",-1.5],["QY",-4],["QZ",-3.5],["Q\\",-2.6],["Q]",-2],["Q}",-2],["R@",-2.3],["RC",-2.3],["RG",-2.3],["RO",-2.3],["RQ",-2.3],["RT",-2.6],["RU",-2.1],["T&",-6.6],["T,",-9],["T-",-9],["T.",-9],["T/",-6.6],["T:",-8],["T;",-8],["T@",-4.9],["TA",-6.6],["TC",-4.9],["TG",-4.9],["TJ",-10],["TO",-4.9],["TQ",-4.9],["Ta",-12.5],["Tc",-10.5],["Td",-10.5],["Te",-10.5],["Tg",-9.4],["Tm",-8],["Tn",-8],["To",-10.5],["Tp",-8],["Tq",-10.5],["Tr",-8],["Ts",-8.1],["Tu",-8],["Tv",-9],["Tw",-7],["Tx",-7.2],["Ty",-9],["Tz",-6],["U&",-2.8],["U,",-2.5],["U.",-2.5],["U/",-2.8],["UA",-2.8],['V"',2.4],["V&",-6.8],["V'",2.4],["V*",2.4],["V,",-9.6],["V-",-5.6],["V.",-9.6],["V/",-6.8],["V:",-4.4],["V;",-4.4],["V?",2.4],["V@",-2.6],["VA",-6.8],["VC",-2.6],["VG",-2.6],["VJ",-7.6],["VO",-2.6],["VQ",-2.6],["Va",-5.8],["Vc",-5.8],["Vd",-5.8],["Ve",-5.8],["Vf",-1.5],["Vg",-6.8],["Vm",-4.4],["Vn",-4.4],["Vo",-5.8],["Vp",-4.4],["Vq",-5.8],["Vr",-4.4],["Vs",-5.3],["Vt",-2.1],["Vu",-4.4],["Vv",-2.4],["Vx",-2.6],["Vy",-2.4],["Vz",-4.1],['W"',2.4],["W&",-4.7],["W'",2.4],["W*",2.4],["W,",-6.1],["W-",-1.6],["W.",-6.1],["W/",-4.7],["W?",1.7],["WA",-4.7],["WJ",-5.1],["Wa",-4.4],["Wc",-1.6],["Wd",-1.6],["We",-1.6],["Wg",-4.9],["Wo",-1.6],["Wq",-1.6],["Ws",-2.3],["X-",-3.1],["X@",-1.5],["XC",-1.5],["XG",-1.5],["XO",-1.5],["XQ",-1.5],["Xc",-1.8],["Xd",-1.8],["Xe",-1.8],["Xf",-2.6],["Xo",-1.8],["Xq",-1.8],["Xt",-4.1],["Xv",-3.3],["Xw",-2.8],["Xy",-3.3],['Y"',1.5],["Y&",-8.2],["Y'",1.5],["Y*",1.5],["Y,",-7.6],["Y-",-8],["Y.",-7.6],["Y/",-8.2],["Y:",-6.1],["Y;",-6.1],["Y?",1.7],["Y@",-4],["YA",-8.2],["YC",-4],["YG",-4],["YJ",-10],["YO",-4],["YQ",-4],["Ya",-6.4],["Yc",-8],["Yd",-8],["Ye",-8],["Yg",-8.6],["Ym",-6.1],["Yn",-6.1],["Yo",-8],["Yp",-6.1],["Yq",-8],["Yr",-6.1],["Ys",-6.4],["Yu",-6.1],["Yv",-5],["Yw",-4.6],["Yx",-6.6],["Yy",-5],["Z-",-3.5],["Z?",1.7],["Z@",-2.9],["ZC",-2.9],["ZG",-2.9],["ZO",-2.9],["ZQ",-2.9],["Zc",-1.9],["Zd",-1.9],["Ze",-1.9],["Zo",-1.9],["Zq",-1.9],["Zs",-1.4],["Zv",-2],["Zy",-2],["[@",-2],["[C",-2],["[G",-2],["[O",-2],["[Q",-2],["[c",-1.6],["[d",-1.6],["[e",-1.6],["[o",-1.6],["[q",-1.6],['\\"',-9.1],["\\'",-9.1],["\\*",-9.1],["\\-",-2.6],["\\?",-2.8],["\\@",-2.1],["\\C",-2.1],["\\G",-2.1],["\\J",2.5],["\\O",-2.1],["\\Q",-2.1],["\\T",-6.6],["\\U",-2.8],["\\V",-6.8],["\\W",-4.2],["\\Y",-8.2],["\\\\",-6.8],["\\v",-4.1],["\\y",-4.1],['a"',-3.6],["a'",-3.6],["a*",-3.6],["av",-1.6],["aw",-.8],["ay",-1.6],['b"',-4.6],["b'",-4.6],["b)",-1.6],["b*",-4.6],["bV",-5.8],["bW",-1.6],["b\\",-5.8],["b]",-1.6],["bv",-1.3],["bx",-3],["by",-1.3],["b}",-1.6],['e"',-4.6],["e'",-4.6],["e)",-1.6],["e*",-4.6],["eV",-5.8],["eW",-1.6],["e\\",-5.8],["e]",-1.6],["ev",-1.3],["ex",-3],["ey",-1.3],["e}",-1.6],['f"',3.4],["f'",3.4],["f*",3.4],["f,",-6.5],["f.",-6.5],["fi",-2.3],['h"',-3.6],["h'",-3.6],["h*",-3.6],["hv",-1.6],["hw",-.8],["hy",-1.6],["kc",-3],["kd",-3],["ke",-3],["ko",-3],["kq",-3],['m"',-3.6],["m'",-3.6],["m*",-3.6],["mv",-1.6],["mw",-.8],["my",-1.6],['n"',-3.6],["n'",-3.6],["n*",-3.6],["nv",-1.6],["nw",-.8],["ny",-1.6],['o"',-4.6],["o'",-4.6],["o)",-1.6],["o*",-4.6],["oV",-5.8],["oW",-1.6],["o\\",-5.8],["o]",-1.6],["ov",-1.3],["ox",-3],["oy",-1.3],["o}",-1.6],['p"',-4.6],["p'",-4.6],["p)",-1.6],["p*",-4.6],["pV",-5.8],["pW",-1.6],["p\\",-5.8],["p]",-1.6],["pv",-1.3],["px",-3],["py",-1.3],["p}",-1.6],["r,",-6.6],["r.",-6.6],["ra",-1.9],["v&",-4.1],["v,",-6.6],["v.",-6.6],["v/",-4.1],["vA",-4.1],["vc",-1.3],["vd",-1.3],["ve",-1.3],["vo",-1.3],["vq",-1.3],["w,",-3.1],["w.",-3.1],["xc",-3],["xd",-3],["xe",-3],["xo",-3],["xq",-3],["y&",-4.1],["y,",-6.6],["y.",-6.6],["y/",-4.1],["yA",-4.1],["yc",-1.3],["yd",-1.3],["ye",-1.3],["yo",-1.3],["yq",-1.3],["{@",-2],["{C",-2],["{G",-2],["{O",-2],["{Q",-2],["{c",-1.6],["{d",-1.6],["{e",-1.6],["{o",-1.6],["{q",-1.6]];var A2={textWidth:C2,kerningWidth:V2};const D2=(e,t,n=16)=>{const r=new Map(e.textWidth),i=new Map(e.kerningWidth),s=[...t];let a=0;for(const[o,u]of s.entries())a+=r.get(u)||r.get("_median"),o!==s.length-1&&(a+=i.get(`${u}${s[o+1]}`)||0);return a/(100/n)},ot=(e,t=16)=>D2(A2,e,t),_i=Math.PI/2,wh=20;function L2(e,t){switch(t){case At.SectorArc:{const n=[this.xScale(e.x0)-_i,this.xScale(e.x1)-_i],r=Math.max(0,(this.yScale(e.y0)+this.yScale(e.y1))/2),i=(n[0]+n[1])/2,s=i>0&&i<Math.PI;s&&n.reverse();const a=E.path();return a.arc(0,0,r,n[0],n[1],s),a.toString()}case At.MidLine:{const n=[this.xScale(e.x0)-_i,this.xScale(e.x1)-_i],r=(n[0]+n[1])/2,i=this.yScale(e.y0),s=this.yScale(e.y1),a=i*Math.cos(r),o=i*Math.sin(r),u=s*Math.cos(r),l=s*Math.sin(r),c=E.path();return r>=Math.PI/2&&r<=Math.PI*3/2?(c.moveTo(u,l),c.lineTo(a,o)):(c.moveTo(a,o),c.lineTo(u,l)),c.toString()}}}function N2(e,t=16,n=null,r=0){n==null&&(n=this.getFeatureInfo(e.data.f).nameValue);const i=ot(n,t),s=this.xScale(e.x1)-this.xScale(e.x0),a=Math.max(0,(this.yScale(e.y0)+this.yScale(e.y1))/2),o=s*a;return i<=o-r}const ol=(e,t)=>{const n=E.color(e(t.data.f));let r="currentcolor";if(n!==null){const i=[252,252,252],s=[74,74,74],a=E.color(n).rgb(),o=[a.r,a.g,a.b];dr(i,o)<dr(s,o)&&(r="hsla(0, 0%, 99%, 1)")}return r};function H2(){const t=this.svg.select("g.mid-circle-group").selectAll("g.mid-circle");if(t.size()===0)return;const n=this.svg.select(`g.arc-${this.sunburstStoreValue.depthLow}`).datum(),i=(this.yScale(n.y1)-this.yScale(n.y0))/t.size(),s=Math.PI*1.2,a=t.append("text").attr("class","feature-name").style("fill",l=>ol(this.getFeatureColor,l)),o=this.textFontScale(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow),u=(l,c)=>{const f=this.getFeatureInfo(l.data.f);let h=f.nameValue,p=ot(h,16*o);if(p>c)for(h=f.shortValue,p=ot(h,16*o);p>c;)h=h.replace("...",""),h=h.slice(0,h.length-1),h=`${h}...`,p=ot(h,16*o);return h};a.filter(l=>l.depth===1).style("font-size",`${o}rem`).text(l=>u(l,i*2-10)),a.filter(l=>l.depth!==1).style("font-size",`${o}rem`).append("textPath").attr("startOffset","50%").attr("xlink:href",l=>`#mid-circle-text-arc-${l.depth}`).text(l=>u(l,i*(l.depth-.5)*s))}function F2(){const e=this.svg.select("g.arc-group"),t=this.svg.select("g.text-group");let n=e.selectAll(`g.arc-${this.xScale.domain()[0]===0&&this.xScale.domain()[1]===1?this.sunburstStoreValue.depthLow:this.sunburstStoreValue.depthLow+1}`);n=n.sort((f,h)=>f.x0-h.x0),n=n.filter(f=>f.x0>=this.xScale.domain()[0]&&f.x1<=this.xScale.domain()[1]&&f.data.f!=="_");const r=t.selectAll("g.text-group").data(n.data()).join("g").attr("class","text-group");r.append("path").attr("class","text-arc").attr("id",(f,h)=>`text-arc-${h}`).attr("d",f=>this.textArc(f,At.SectorArc)),r.append("path").attr("class","text-line").attr("id",(f,h)=>`text-line-${h}`).attr("d",f=>this.textArc(f,At.MidLine));const i=r.append("text").attr("class","feature-name");i.style("fill",f=>ol(this.getFeatureColor,f));const s=new Set,a=new Map;if(i.size()===0)return;const o=this.yScale(i.datum().y1)-this.yScale(i.datum().y0)-15,u=this.textFontScale(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow),l=i.style("font-size",`${u}rem`).append("textPath").attr("startOffset","50%").attr("xlink:href",(f,h)=>{const p=this.getFeatureInfo(f.data.f);let g=p.nameValue,d=!1;return s.has(p.name)&&(g=p.value,d=!0),s.add(p.name),ot(g,16*u)<o?(a.set(h,At.MidLine),`#text-line-${h}`):!d&&this.doesTextFitArc(f,16*u,g,10)?(a.set(h,At.SectorArc),`#text-arc-${h}`):(a.set(h,At.MidLine),`#text-line-${h}`)});s.clear(),l.text((f,h)=>{const p=this.getFeatureInfo(f.data.f);let g=p.nameValue,d=!1;if(s.has(p.name)&&(g=p.value,d=!0),a.get(h)===At.MidLine){if(this.yScale(f.y1)*(this.xScale(f.x1)-this.xScale(f.x0))<wh)return"";let y=ot(g,16*u);if(y>o&&!d)for(g=p.shortValue,y=ot(g,16*u);y>o;)g=g.replace("...",""),g=g.slice(0,g.length-1),g=`${g}...`,y=ot(g,16*u)}return s.add(p.name),g});const c=new Set;Array.from(this.featureMap.entries()).forEach(f=>{s.has(f[1][0])||c.add(f[0])}),this.drawSecondaryText(c)}function P2(e){const t=this.svg.select("g.arc-group"),n=this.svg.select("g.text-group");let r=t.selectAll(`g.arc-${this.xScale.domain()[0]===0&&this.xScale.domain()[1]===1?this.sunburstStoreValue.depthLow+1:this.sunburstStoreValue.depthLow+2}`);if(r=r.filter(f=>f.x0>=this.xScale.domain()[0]&&f.x1<=this.xScale.domain()[1]&&e.has(+f.data.f)),r.size()===0)return;r=r.sort((f,h)=>f.x0-h.x0);const i=n.selectAll("g.s-text-group").data(r.data()).join("g").attr("class","text-group");i.append("path").attr("class","text-arc").attr("id",(f,h)=>`s-text-arc-${h}`).attr("d",f=>this.textArc(f,At.SectorArc)),i.append("path").attr("class","text-line").attr("id",(f,h)=>`s-text-line-${h}`).attr("d",f=>this.textArc(f,At.MidLine));const s=i.append("text").attr("class","feature-name"),a=this.yScale(s.datum().y1)-this.yScale(s.datum().y0)-15,o=this.textFontScale(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow);s.style("fill",f=>ol(this.getFeatureColor,f));const u=new Set([]),l=s.style("font-size",`${o}rem`).append("textPath").attr("startOffset","50%").attr("xlink:href",(f,h)=>{const g=this.getFeatureInfo(f.data.f).nameValue;return ot(g,16*o)<a?`#s-text-line-${h}`:this.doesTextFitArc(f,16*o,g,10)?(u.add(h),`#s-text-arc-${h}`):`#s-text-line-${h}`}),c=new Set;l.text((f,h)=>{if(c.has(f.data.f))return"";const p=this.getFeatureInfo(f.data.f);let g=p.nameValue;if(this.yScale(f.y1)*(this.xScale(f.x1)-this.xScale(f.x0))<wh)return"";if(!u.has(h)){let m=ot(g,16*o);if(m>a)for(g=p.shortValue,m=ot(g,16*o);m>a;)g=g.replace("...",""),g=g.slice(0,g.length-1),g=`${g}...`,m=ot(g,16*o)}return c.add(f.data.f),g})}function R2(){this.svg.select(".text-group").selectAll("*").remove(),this.svg.selectAll("text.feature-name").remove()}let Fr=null,Ei=null,vh=new Date().getTime();function I2(e,t){if(e.stopPropagation(),e.preventDefault(),t!==null&&t.data.f==="_")return;let n={x0:0,x1:1,y0:0,y1:1},r=t;const i=this.xScale.domain(),s=this.yScale.domain(),a=this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow;if(t===null||t.x0==i[0]&&t.x1==i[1]){const l=this.arcDomainStack.pop();l!==void 0?(r=l.node,n=l,this.sunburstStoreValue.depthLow=r.depth===0?1:r.depth,this.sunburstStoreValue.depthHigh=Math.min(this.sunburstStoreValue.depthLow+l.depthGap,this.sunburstStoreValue.depthMax)):console.error("No more arc domain from the stack to pop!")}else{const l=1/(this.sunburstStoreValue.depthMax+1);this.sunburstStoreValue.depthLow=t.depth,this.sunburstStoreValue.depthHigh=Math.min(t.depth+a,this.sunburstStoreValue.depthMax),n={x0:t.x0,x1:t.x1,y0:t.y0,y1:t.y0+l*(this.sunburstStoreValue.depthHigh-this.sunburstStoreValue.depthLow+1)};const c={x0:i[0],x1:i[1],y0:s[0],y1:s[1],node:this.curHeadNode,depthGap:a};this.arcDomainStack.push(c)}const o=new Array(this.sunburstStoreValue.depthMax).fill("");r.ancestors().forEach(l=>{if(l.depth>0){const c=this.getFeatureColor(l.data.f);o[l.depth-1]=c}}),this.sunburstStoreValue.depthColors=o,this.sunburstStore.set(this.sunburstStoreValue),this.curHeadNode=r,this.sunburstUpdated(),this.arcZoom(n)}function E2(e,t){if(e.currentTarget===null)return;t.ancestors().filter(r=>r.depth>0).forEach(r=>{const i=this.svg.select(`path#arc-${r.data.nid}`);E.select(i.node().parentElement).raise(),i.classed("highlighted",!0)})}function W2(e,t){if(e.currentTarget===null)return;t.ancestors().filter(r=>r.depth>0).forEach(r=>{this.svg.select(`path#arc-${r.data.nid}`).classed("highlighted",!1)})}function O2(e,t){e.preventDefault(),e.stopPropagation(),this.arcMouseenterHandler(e,t),Ei!==null&&(window.clearTimeout(Ei),Ei=null);const n=()=>{if(t.data.t===void 0)return;const r=t.data.t;this.treeWindowStoreValue.treeID=+r;const i=t.ancestors().filter(a=>a.depth!==0).map(a=>a.data.f).reverse();this.treeWindowStoreValue.ancestorFs=i;const s=this.getTreeWindowPos(t);this.treeWindowStoreValue.x=s.x,this.treeWindowStoreValue.y=s.y,this.treeWindowStoreValue.show=!0,this.treeWindowStore.set(this.treeWindowStoreValue),this.curHeadNode.value&&this.curHeadNode.value<300&&this.svg.select(".arc-group").selectAll(`path.arc.leaf-${r}`).filter(o=>o.data.nid!==t.data.nid).classed("same-leaf-highlight",!0),Fr=null};this.treeWindowStoreValue.show||new Date().getTime()-vh<500?n():Fr=window.setTimeout(n,Ce.time.mouseenterDelay)}function z2(e,t){t.data.t!==void 0&&(e.preventDefault(),e.stopPropagation(),this.arcMouseleaveHandler(e,t),this.curHeadNode.value&&this.curHeadNode.value<300&&this.svg.select(".arc-group").selectAll(`path.arc.leaf-${t.data.t}`).classed("same-leaf-highlight",!1),Fr!==null&&(window.clearTimeout(Fr),Fr=null),Ei=window.setTimeout(()=>{this.treeWindowStoreValue.show=!1,this.treeWindowStore.set(this.treeWindowStoreValue),vh=new Date().getTime()},100))}function G2(e){let t=(this.xScale(e.x0)+this.xScale(e.x1))/2-Math.PI/2;const n=this.yScale(e.y1)+8,r={x:Math.cos(t)*n,y:Math.sin(t)*n,quad:Math.floor(t/(Math.PI/2))+2};e.x0===this.xScale.domain()[0]&&e.x1===this.xScale.domain()[1]&&(r.x=Math.cos(-Math.PI/4)*n,r.y=Math.sin(-Math.PI/4)*n,r.quad=1);const i=c=>{const f={x:0,y:0};switch(c.quad){case 1:{f.x=c.x,f.y=c.y-Ce.layout.treeWindowHeight;break}case 2:{f.x=c.x,f.y=c.y;break}case 3:{f.x=c.x-Ce.layout.treeWindowWidth,f.y=c.y;break}case 4:{f.x=c.x-Ce.layout.treeWindowWidth,f.y=c.y-Ce.layout.treeWindowHeight;break}default:console.warn("Unknown quad!")}return f};let s=window.innerHeight;E.select(".timbertrek-page").size()>0&&(s=E.select(".timbertrek-page").node().getBoundingClientRect().height);const a=5,o=this.svg.node().getBoundingClientRect(),u={x:o.x+o.width/2,y:o.y+o.height/2};let l=i(r);if(l.y+u.y<a){const f=-(u.y-Ce.layout.treeWindowHeight-a);t=Math.asin(f/n),r.quad===4&&(t=Math.PI-t),r.x=Math.cos(t)*n,r.y=Math.sin(t)*n,r.quad=Math.floor(t/(Math.PI/2))+2,l=i(r)}if(l.y+u.y+Ce.layout.treeWindowHeight>s-a){const c=s-a-u.y-Ce.layout.treeWindowHeight;t=Math.asin(c/n),r.quad===3&&(t=Math.PI-t),r.x=Math.cos(t)*n,r.y=Math.sin(t)*n,r.quad=Math.floor(t/(Math.PI/2))+2,l=i(r)}return l.x=u.x+l.x,l.y=u.y+l.y,l}function Y2(e,t){if(e.preventDefault(),e.stopPropagation(),localStorage.getItem("treeWindowPinnedOnce")!=="true"&&localStorage.setItem("treeWindowPinnedOnce","true"),t.data.t===void 0)return;const n=t.data.t,r=this.treeWindowStoreValue.treeMap.get(n);if(r===void 0)return;const i=this.getTreeWindowPos(t),s={x:i.x,y:i.y,width:Ce.layout.treeWindowWidth,height:Ce.layout.treeWindowHeight},a={x:20,y:20};if(this.pinnedTreeStoreValue.lastActiveTreeID!==null){const o=this.pinnedTreeStoreValue.pinnedTrees.filter(u=>u.treeID===this.pinnedTreeStoreValue.lastActiveTreeID)[0];a.x=o.x+20,a.y=o.y+30}if(this.pinnedTreeStoreValue.pinnedTrees.map(o=>o.treeID).includes(n)){let o=-1;for(let l=0;l<this.pinnedTreeStoreValue.pinnedTrees.length;l++)if(this.pinnedTreeStoreValue.pinnedTrees[l].treeID===n){o=l;break}if(o===-1){console.warn("Could not find the clicked tree in the pinnedTrees array!");return}const u=this.pinnedTreeStoreValue.pinnedTrees[o];u.isPinned?u.jiggle():(u.isPinned=!0,u.startPos=s,u.x=a.x,u.y=a.y),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}else{const o={tree:r[0],treeMetric:fr(r[2],4),treeID:n,x:a.x,y:a.y,startPos:s,isFav:!1,isPinned:!0,note:"",jiggle:()=>{}};this.pinnedTreeStoreValue.pinnedTrees.push(o),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}}function B2(){const t=this.treeWindowStoreValue.treeMap.get(412);if(t!==void 0){const n={x:70,y:150};if(this.pinnedTreeStoreValue.lastActiveTreeID!==null){const i=this.pinnedTreeStoreValue.pinnedTrees.filter(s=>s.treeID===this.pinnedTreeStoreValue.lastActiveTreeID)[0];n.x=i.x+20,n.y=i.y+30}const r={tree:t[0],treeMetric:fr(t[2],4),treeID:412,x:n.x,y:n.y,startPos:{x:0,y:0,width:0,height:0},isFav:!1,isPinned:!0,note:"",jiggle:()=>{}};this.pinnedTreeStoreValue.pinnedTrees.push(r),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}}let dn=null;function U2(){this.treeMapMap.forEach((n,r)=>{n[2]>=this.localAccuracyLow&&n[2]<=this.localAccuracyHigh?this.selectedTrees.accuracy.add(r):this.selectedTrees.accuracy.delete(r)});const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=E.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburst(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!1)}function j2(){if(this.searchStoreValue.treeMinSampleMap===null)return;for(const[n,r]of this.searchStoreValue.treeMinSampleMap)r>=this.localMinSampleLow&&r<=this.localMinSampleHigh?this.selectedTrees.minSample.add(n):this.selectedTrees.minSample.delete(n);const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=E.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburst(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!1)}function X2(){if(this.searchStoreValue.treeHeightMap===null)return;this.searchStoreValue.treeHeightMap.forEach((n,r)=>{this.localHeightRange.has(n)?this.selectedTrees.height.add(r):this.selectedTrees.height.delete(r)});const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{const r=n;r.previous={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,data:r.data},n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=E.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburstWithAnimation(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!0)}function q2(){if(this.searchStoreValue.treeDepthFeaturesMap===null)return;for(const[n,r]of this.searchStoreValue.treeDepthFeaturesMap){let i=!0;e:for(const[s,a]of r)for(const o of a)if(!this.localDepthFeatures.get(s).has(o)){i=!1;break e}i?this.selectedTrees.depth.add(n):this.selectedTrees.depth.delete(n)}const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{const r=n;r.previous={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,data:r.data},n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=E.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburstWithAnimation(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!0)}function Z2(){if(this.searchStoreValue.treeDepthFeaturesMap===null)return;for(const[n,r]of this.searchStoreValue.treeDepthFeaturesMap){let i=!0;e:for(const[s,a]of r)for(const o of a)if(!this.localAllFeatures.has(o)){i=!1;break e}i?this.selectedTrees.allFeature.add(n):this.selectedTrees.allFeature.delete(n)}const e=new Set;for(const n of this.selectedTrees.accuracy)this.selectedTrees.depth.has(n)&&this.selectedTrees.minSample.has(n)&&this.selectedTrees.allFeature.has(n)&&this.selectedTrees.height.has(n)&&e.add(n);this.dataRoot.eachBefore(n=>{const r=n;r.previous={x0:r.x0,x1:r.x1,y0:r.y0,y1:r.y1,data:r.data},n.data.t!==void 0&&(e.has(n.data.t)?n.data.u=!0:n.data.u=!1)}),this.dataRoot=this.dataRoot.sum(n=>n.u!==void 0&&n.u?1:0);const t=E.partition()(this.dataRoot);t.eachAfter(n=>{var r;if(n.data.u!==void 0&&n.data.u)n.uniqueTreeIDs=new Set([n.data.t]);else{const i=new Set;(r=n.children)==null||r.forEach(s=>{var a;(a=s.uniqueTreeIDs)==null||a.forEach(o=>{i.add(o)})}),n.uniqueTreeIDs=i}}),t.each(n=>{var r;n.treeNum=((r=n.uniqueTreeIDs)==null?void 0:r.size)||0,n.uniqueTreeIDs=null}),this.partition=t,this.updateSunburstWithAnimation(),this.searchStoreValue.updatePlots!==null&&this.searchStoreValue.updatePlots(this.selectedTrees,!0)}function J2(e=500){const t=this.svg.select(".content-group"),n=E.transition().duration(e).ease(E.easeLinear);this.removeText(),this.arcDomainStack.forEach(i=>{i.x0=i.node.x0,i.x1=i.node.x1}),t.select(".arc-group").selectAll("g.arc").data(this.partition.descendants().slice(1),i=>i.data.nid).select("path").transition(n).tween("data",i=>{const s={x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1,data:i.data},a=E.interpolate(i.previous,s),o=E.interpolate(this.xScale.domain(),[this.curHeadNode.x0,this.curHeadNode.x1]);return u=>{this.xScale.domain(o(u)),i.previous=a(u)}}).style("display",i=>i.data.f===";"||i.depth>this.sunburstStoreValue.depthHigh+1?"none":(i.value!==void 0&&i.value===0,"initial")).attrTween("d",i=>()=>this.arc(i.previous)).on("end",(i,s,a)=>{const o=E.select(a[s]);let u="initial";i.data.f===";"||i.depth>this.sunburstStoreValue.depthHigh+1||i.value!==void 0&&i.value===0?u="none":u="initial",o.style("display",u)}),dn!==null&&(window.clearTimeout(dn),dn=null),dn=window.setTimeout(()=>{this.drawCenterText(),this.drawText()},700),this.sunburstUpdated()}function Q2(){const e=this.svg.select(".content-group");this.removeText(),this.arcDomainStack.forEach(t=>{t.x0=t.node.x0,t.x1=t.node.x1}),this.xScale.domain([this.curHeadNode.x0,this.curHeadNode.x1]),e.select(".arc-group").selectAll("g.arc").data(this.partition.descendants().slice(1),t=>t.data.nid).select("path").attr("d",t=>this.arc(t)).style("display",t=>t.data.f===";"||t.depth>this.sunburstStoreValue.depthHigh+1||t.value!==void 0&&t.value===0?"none":"initial"),dn!==null&&(window.clearTimeout(dn),dn=null),dn=window.setTimeout(()=>{this.drawCenterText(),this.drawText()},500),this.sunburstUpdated()}const xi=800;var as,bh,os,Sh,ls,_h,cs,xh,us,kh,hs,Th,fs,Mh;class Tc{constructor({component:t,data:n,initDepthGap:r=2,sunburstStore:i,treeWindowStore:s,pinnedTreeStore:a,searchStore:o,sunburstUpdated:u}){ge(this,as);ge(this,os);ge(this,ls);ge(this,cs);ge(this,us);ge(this,hs);ge(this,fs);N(this,"svg");N(this,"sunburstStore");N(this,"sunburstStoreValue");N(this,"treeWindowStore");N(this,"treeWindowStoreValue");N(this,"pinnedTreeStore");N(this,"pinnedTreeStoreValue");N(this,"searchStore");N(this,"searchStoreValue");N(this,"sunburstUpdated");N(this,"padding");N(this,"width");N(this,"height");N(this,"maxRadius");N(this,"xScale");N(this,"yScale");N(this,"textFontScale");N(this,"data");N(this,"dataRoot");N(this,"treeMapMap");N(this,"partition");N(this,"totalPathNum");N(this,"totalTreeNum");N(this,"featureCount");N(this,"featureValueCount");N(this,"featureOrder");N(this,"arc");N(this,"featureMap");N(this,"colorScale");N(this,"arcDomainStack");N(this,"curHeadNode");N(this,"localAccuracyLow");N(this,"localAccuracyHigh");N(this,"localMinSampleLow");N(this,"localMinSampleHigh");N(this,"localHeightRange");N(this,"localDepthFeatures");N(this,"localAllFeatures");N(this,"viewInitialized",!1);N(this,"selectedTrees");N(this,"textArc",L2);N(this,"doesTextFitArc",N2);N(this,"removeText",R2);N(this,"drawText",F2);N(this,"drawSecondaryText",P2);N(this,"drawCenterText",H2);N(this,"arcClicked",I2);N(this,"arcMouseenterHandler",E2);N(this,"arcMouseleaveHandler",W2);N(this,"leafArcClickHandler",Y2);N(this,"leafArcMouseenterHandler",O2);N(this,"leafArcMouseleaveHandler",z2);N(this,"getTreeWindowPos",G2);N(this,"tempShowPinnedTree",B2);N(this,"syncAccuracyRange",U2);N(this,"syncMinSampleRange",j2);N(this,"updateSunburst",Q2);N(this,"updateSunburstWithAnimation",J2);N(this,"syncHeightRange",X2);N(this,"syncDepthFeatures",q2);N(this,"syncAllFeatures",Z2);N(this,"getFeatureColor",t=>this.colorScale(this.getFeatureNameValue(t,Bn.First,Nr.PairString)));this.svg=E.select(t).select("svg").attr("width","100%").attr("height","100%").attr("viewbox","0 0 650 650").attr("preserveAspectRatio","none"),this.padding={top:10,bottom:10,left:10,right:10};const l=this.svg.node().getBoundingClientRect();this.width=l.width-this.padding.left-this.padding.right,this.height=l.height-this.padding.top-this.padding.bottom,this.data=n.trie,this.treeMapMap=new Map,Object.keys(n.treeMap).forEach(c=>{this.treeMapMap.set(+c,n.treeMap[+c])}),this.featureMap=new Map;for(const[c,f]of Object.entries(n.featureMap))this.featureMap.set(parseInt(c),f);this.featureCount=new Map,this.featureValueCount=new Map,this.colorScale=E.scaleOrdinal(),this.featureOrder=[],this.dataRoot=E.hierarchy(this.data,c=>c.c).sum(c=>c.f==="_"?1:0),this.partition=ne(this,as,bh).call(this),this.curHeadNode=this.partition,this.totalTreeNum=this.partition.treeNum,this.totalPathNum=this.partition.value,this.sunburstStore=i,this.sunburstStoreValue=Eo(),ne(this,ls,_h).call(this,r),this.treeWindowStore=s,this.treeWindowStoreValue=Wo(),ne(this,cs,xh).call(this),this.pinnedTreeStore=a,this.pinnedTreeStoreValue=or(),ne(this,us,kh).call(this),this.searchStore=o,this.searchStoreValue=ar(),this.localAccuracyLow=this.searchStoreValue.curAccuracyLow,this.localAccuracyHigh=this.searchStoreValue.curAccuracyHigh,this.localMinSampleLow=this.searchStoreValue.curMinSampleLow,this.localMinSampleHigh=this.searchStoreValue.curMinSampleHigh,this.localHeightRange=new Set([...this.searchStoreValue.curHeightRange]),this.localDepthFeatures=Sa(this.searchStoreValue.curDepthFeatures),this.localAllFeatures=new Set([...this.searchStoreValue.curAllFeatures]),this.selectedTrees={accuracy:new Set(this.treeMapMap.keys()),minSample:new Set(this.treeMapMap.keys()),height:new Set(this.treeMapMap.keys()),depth:new Set(this.treeMapMap.keys()),allFeature:new Set(this.treeMapMap.keys())},ne(this,hs,Th).call(this),this.sunburstUpdated=u,this.maxRadius=this.width/2,this.xScale=E.scaleLinear().domain([0,1]).range([0,2*Math.PI]).clamp(!0),this.yScale=E.scaleLinear().domain([0,1]).range([0,this.maxRadius]),this.textFontScale=E.scaleLinear().domain([1,this.sunburstStoreValue.depthMax-1]).range([.93,.7]),this.arcDomainStack=[],this.arc=E.arc().startAngle(c=>this.xScale(c.x0)).endAngle(c=>{const f=c;let h=f.x1;return f.x0===f.x1&&(h=f.x0+1e-6),this.xScale(h)}).padAngle(c=>{const f=c,h=this.xScale(c.x1)-this.xScale(c.x0);return f.data.f==="_"?h<.001?0:Math.min(h/2,.015):0}).padRadius(this.radius*1.5).innerRadius(c=>Math.max(0,this.yScale(c.y0))).outerRadius(c=>Math.max(this.yScale(c.y0),this.yScale(c.y1)-1)),console.time("Draw sunburst"),this.initView(),this.viewInitialized=!0,console.timeEnd("Draw sunburst")}get radius(){return this.width/(2*(this.sunburstStoreValue.depthMax-this.sunburstStoreValue.depthLow+1))}getFeatureInfo(t){const n={name:"",value:"",nameValue:"",short:"",shortValue:""},r=parseInt(t);if(!isNaN(r)){const i=this.featureMap.get(r);i!==void 0&&(n.name=i[0],n.value=i[1],n.short=i[2],n.nameValue=`${n.name} ${n.value}`,n.shortValue=`${n.short} ${n.value}`)}return n}getFeatureNameValue(t,n=Bn.First,r=Nr.PairArray){let i=-1;if(t.includes(" "))switch(n){case Bn.First:i=+t.replace(/(.*)\s.*/,"$1");break;case Bn.Second:i=+t.replace(/.*\s(.*)/,"$1");break;case Bn.Both:i=+t.replace(/(.*)\s.*/,"$1");break;default:console.error("Unknown cases")}else i=+t;switch(r){case Nr.PairArray:return isNaN(i)?["",""]:this.featureMap.get(i);case Nr.PairString:{if(isNaN(i))return"";const s=this.featureMap.get(i);return s!==void 0?`${s[0]}:${s[1]}`:(console.error(`Encounter unrecorded key ${i}`),"")}}}initView(){const t=this.svg.append("g").attr("class","content-group").attr("transform",`translate(${this.padding.left+this.width/2}, ${this.padding.top+this.height/2})`);t.append("g").attr("class","mid-circle-group");const n=t.append("g").attr("class","arc-group");t.append("g").attr("class","text-group");const r=n.selectAll("g.arc").data(this.partition.descendants().slice(1),a=>a.data.nid).join("g").attr("class",a=>`arc arc-${a.depth} ${a.data.f==="_"?"leaf leaf-".concat(String(a.data.t)):""}`).classed("leaf",a=>a.data.f==="_");r.append("path").attr("class","arc").attr("class",a=>`arc arc-${a.depth} ${a.data.f==="_"?"leaf leaf-".concat(String(a.data.t)):""}`).attr("id",a=>`arc-${a.data.nid}`).attr("d",a=>this.arc(a)).on("click",(a,o)=>this.arcClicked(a,o)).on("mouseenter",(a,o)=>this.arcMouseenterHandler(a,o)).on("mouseleave",(a,o)=>this.arcMouseleaveHandler(a,o)).style("fill",a=>a.data.f==="_"?"null":this.getFeatureColor(a.data.f)).style("display",a=>a.data.f===";"||a.depth>this.sunburstStoreValue.depthHigh+1?"none":"initial").filter(a=>a.data.f==="_").on("click",(a,o)=>this.leafArcClickHandler(a,o)).on("mouseenter",(a,o)=>this.leafArcMouseenterHandler(a,o)).on("mouseleave",(a,o)=>this.leafArcMouseleaveHandler(a,o)),r.append("title").text(a=>this.getFeatureInfo(a.data.f).nameValue);const s=1/(this.sunburstStoreValue.depthMax+1);this.arcZoom({x0:this.xScale.domain()[0],x1:this.xScale.domain()[1],y0:0,y1:(this.sunburstStoreValue.depthHigh+1)*s},500)}arcZoom(t,n=xi){this.removeText(),ne(this,fs,Mh).call(this,t),this.svg.select(".arc-group").transition().duration(n).ease(E.easeCubicInOut).tween("zoom",()=>{const i=E.interpolate(this.xScale.domain(),[t.x0,t.x1]),s=E.interpolate(this.yScale.domain(),[t.y0,t.y1]);return a=>{this.xScale.domain(i(a)),this.yScale.domain(s(a))}}).on("end",()=>{this.drawText(),this.drawCenterText()}).selectAll(".arc").attrTween("d",i=>()=>this.arc(i)).style("fill-opacity",i=>i.depth>this.sunburstStoreValue.depthHigh?.2:1).style("pointer-events",i=>i.depth>this.sunburstStoreValue.depthHigh?"none":"initial").style("display",i=>{const s=i;return s.data.f===";"||s.depth>this.sunburstStoreValue.depthHigh+1?"none":"initial"})}}as=new WeakSet,bh=function(){let t=0;this.dataRoot.eachBefore(r=>{r.data.f==="_"&&(r.data.u=!0),r.data.nid=t++});for(const[r,i]of this.featureMap){if(this.featureValueCount.has(i[0]))this.featureValueCount.get(i[0]).set(i[1],0);else{const s=new Map;s.set(i[1],0),this.featureValueCount.set(i[0],s)}this.featureCount.has(i[0])||this.featureCount.set(i[0],0)}this.dataRoot.children.forEach(r=>{const[i,s]=this.getFeatureNameValue(r.data.f);this.featureCount.set(i,this.featureCount.get(i)+r.value),this.featureValueCount.get(i).set(s,this.featureValueCount.get(i).get(s)+r.value)}),this.featureCount.set("",0),this.colorScale=ne(this,os,Sh).call(this),this.dataRoot=this.dataRoot.sort((r,i)=>{const s=this.getFeatureInfo(r.data.f).name,a=this.getFeatureInfo(i.data.f).name,o=this.featureCount.get(s),u=this.featureCount.get(a),l=E.lch(this.getFeatureColor(r.data.f)).l,c=E.lch(this.getFeatureColor(i.data.f)).l;return o!==void 0&&u!==void 0?u-o||s.localeCompare(a)||l-c:(console.warn(`Encountered unrecorded keys '${s}', '${a}'`),0)}),this.featureOrder=this.dataRoot.children.map(r=>parseInt(r.data.f)),this.featureMap.forEach((r,i)=>{if(!this.featureOrder.includes(i)){const s=[];this.featureMap.forEach((a,o)=>{a[0]===r[0]&&this.featureOrder.indexOf(o)!==-1&&s.push(this.featureOrder.indexOf(o))}),this.featureOrder.splice(Math.max(...s)+1,0,i)}});const n=E.partition()(this.dataRoot);return n.eachAfter(r=>{var i;if(r.data.f==="_")r.uniqueTreeIDs=new Set([r.data.t]);else{const s=new Set;(i=r.children)==null||i.forEach(a=>{var o;(o=a.uniqueTreeIDs)==null||o.forEach(u=>{s.add(u)})}),r.uniqueTreeIDs=s}}),n.each(r=>{var i;r.treeNum=((i=r.uniqueTreeIDs)==null?void 0:i.size)||0,r.uniqueTreeIDs=null}),n},os=new WeakSet,Sh=function(){const t=[],n=[],s=[E.lch(49.184,30.07,260.445),E.lch(68.968,73.064,62.176),E.lch(56.278,61.87,27.615),E.lch(60.11,50.293,135.863),E.lch(82.442,65.798,87.008),E.lch(69.948,22.911,191.071),E.lch(57.703,28.677,334.556),E.lch(52.777,22.881,53.64)],a=new Map;for(const[l,c]of s.entries())a.set(l,[0,c]);return Array.from(this.featureCount.keys()).filter(l=>l!=="").sort((l,c)=>this.featureCount.get(c)-this.featureCount.get(l)).forEach((l,c)=>{let f,h;if(c>7){console.warn("Number of feature is greater than 8:",l);let y=-1,x=1/0;for(let v=0;v<s.length;v++)a.get(v)[0]<x&&(y=v,x=a.get(v)[0]);f=a.get(y)[1],h=y}else f=s[c],h=c;const p=Array.from(this.featureValueCount.get(l).keys()).sort((y,x)=>this.featureValueCount.get(l).get(x)-this.featureValueCount.get(l).get(y)),g=p.length;let d=f;if(f.l+g*20<=92)p.forEach((y,x)=>{const v=`${l}:${y}`;d=E.lch(f.l+x*20,f.c,f.h),t.push(v),n.push(d.formatHsl())});else{const y=(92-f.l)/g;p.forEach((x,v)=>{const S=`${l}:${x}`;d=E.lch(f.l+v*y,f.c,f.h),t.push(S),n.push(d.formatHsl())})}const m=E.lch(d.l+10,d.c,d.h);a.set(h,[a.get(h)[0]+g,m])}),E.scaleOrdinal(n).domain(t)},ls=new WeakSet,_h=function(t){this.sunburstStore.subscribe(n=>{switch(this.sunburstStoreValue=n,this.sunburstStoreValue.action){case Dn.DepthChanged:{this.sunburstStoreValue.action=Dn.None;const r=1/(this.sunburstStoreValue.depthMax+1),i=this.arcDomainStack.length>0?this.yScale.domain()[0]:0;this.arcZoom({x0:this.xScale.domain()[0],x1:this.xScale.domain()[1],y0:i,y1:(this.sunburstStoreValue.depthHigh+1)*r},500),this.sunburstStore.set(this.sunburstStoreValue);break}case Dn.None:break;default:console.error("Unknown case in sunburstStore action")}}),this.sunburstStoreValue.depthMax=this.partition.height,this.sunburstStoreValue.depthLow=1,this.sunburstStoreValue.depthHigh=this.sunburstStoreValue.depthLow+t,this.sunburstStoreValue.action=Dn.None,this.sunburstStoreValue.depthColors=new Array(this.sunburstStoreValue.depthMax).fill(""),this.sunburstStore.set(this.sunburstStoreValue)},cs=new WeakSet,xh=function(){this.treeWindowStore.subscribe(t=>{this.treeWindowStoreValue=t}),this.treeWindowStoreValue.getFeatureColor=this.getFeatureColor,this.treeWindowStore.set(this.treeWindowStoreValue)},us=new WeakSet,kh=function(){this.pinnedTreeStore.subscribe(t=>{this.pinnedTreeStoreValue=t}),this.pinnedTreeStoreValue.getFeatureColor=this.getFeatureColor,this.pinnedTreeStoreValue.getFeatureInfo=t=>this.getFeatureInfo(t),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)},hs=new WeakSet,Th=function(){this.searchStore.subscribe(n=>{this.searchStoreValue=n,this.viewInitialized&&this.searchStoreValue.shown&&(this.searchStoreValue.curAccuracyHigh!==this.localAccuracyHigh||this.searchStoreValue.curAccuracyLow!==this.localAccuracyLow)?(this.localAccuracyHigh=this.searchStoreValue.curAccuracyHigh,this.localAccuracyLow=this.searchStoreValue.curAccuracyLow,this.syncAccuracyRange()):(this.localAccuracyHigh=this.searchStoreValue.curAccuracyHigh,this.localAccuracyLow=this.searchStoreValue.curAccuracyLow),this.viewInitialized&&this.searchStoreValue.shown&&(this.searchStoreValue.curMinSampleHigh!==this.localMinSampleHigh||this.searchStoreValue.curMinSampleLow!==this.localMinSampleLow)?(this.localMinSampleHigh=this.searchStoreValue.curMinSampleHigh,this.localMinSampleLow=this.searchStoreValue.curMinSampleLow,this.syncMinSampleRange()):(this.localMinSampleHigh=this.searchStoreValue.curMinSampleHigh,this.localMinSampleLow=this.searchStoreValue.curMinSampleLow);const r=[...this.localHeightRange].every(a=>this.searchStoreValue.curHeightRange.has(a))&&this.localHeightRange.size===this.searchStoreValue.curHeightRange.size;this.viewInitialized&&this.searchStoreValue.shown&&!r?(this.localHeightRange=new Set([...this.searchStoreValue.curHeightRange]),this.syncHeightRange()):this.localHeightRange=new Set([...this.searchStoreValue.curHeightRange]);const i=[...this.searchStoreValue.curDepthFeatures.entries()].every(a=>this.localDepthFeatures.has(a[0])?Sc(this.localDepthFeatures.get(a[0]),a[1]):!1);this.viewInitialized&&this.searchStoreValue.shown&&!i?(this.localDepthFeatures=Sa(this.searchStoreValue.curDepthFeatures),this.syncDepthFeatures()):this.localDepthFeatures=Sa(this.searchStoreValue.curDepthFeatures);const s=Sc(this.localAllFeatures,this.searchStoreValue.curAllFeatures);this.viewInitialized&&this.searchStoreValue.shown&&!s?(this.localAllFeatures=new Set([...this.searchStoreValue.curAllFeatures]),this.syncAllFeatures()):this.localAllFeatures=new Set([...this.searchStoreValue.curAllFeatures])}),this.searchStoreValue.getFeatureColor=this.getFeatureColor,this.searchStoreValue.featureMap=this.featureMap,this.searchStoreValue.featureOrder=this.featureOrder;for(let n=1;n<this.partition.height;n++){const r=new Set([...this.featureMap.keys()].map(i=>i));this.searchStoreValue.curDepthFeatures.set(n,r)}const t=new Set([...this.featureMap.keys()].map(n=>n));this.searchStoreValue.curAllFeatures=t,this.searchStore.set(this.searchStoreValue)},fs=new WeakSet,Mh=function(t){let n=!1;this.arcDomainStack.length>0&&(n=this.curHeadNode.depth-this.arcDomainStack[this.arcDomainStack.length-1].node.depth!==1);const r=this.svg.select("g.content-group").selectAll("g.mid-circle-group").data([0]).join("g").attr("class","mid-circle-group").raise(),i=this.curHeadNode.ancestors().filter(c=>c.depth!==0),s=E.scaleLinear().domain([t.y0,t.y1]).range([0,this.maxRadius]),a=s(this.curHeadNode.y1)-s(this.curHeadNode.y0),o=i.map(c=>c.depth),u=E.scaleLinear().domain([E.min(o)-1,E.max(o)]).range([0,a]),l=u(1);r.selectAll("g.mid-circle").data(i,c=>c.value).join(c=>{const f=c.append("g").attr("class","mid-circle").on("click",h=>this.arcClicked(h,null));return f.append("circle").attr("r",0).style("fill",h=>this.getFeatureColor(h.data.f)).call(h=>h.transition().duration(0).delay(n?xi-100:xi+100).attr("r",p=>u(p.depth))),f.append("path").attr("class","mid-circle-text-arc").attr("id",h=>`mid-circle-text-arc-${h.depth}`).attr("d",h=>{const p=[Math.PI*.5,Math.PI*2.5],g=l*(h.depth-.5),d=E.path();return d.arc(0,0,g,p[0],p[1],!1),d.toString()}),f.append("title").text(h=>this.getFeatureInfo(h.data.f).nameValue),f},c=>{const f=c;return f.select("circle").transition("zoom").duration(xi).ease(E.easeCubicInOut).attr("r",h=>u(h.depth)),f.select("path").attr("d",h=>{const p=[Math.PI*.5,Math.PI*2.5],g=l*(h.depth-.5),d=E.path();return d.arc(0,0,g,p[0],p[1],!1),d.toString()}),f})};const Sa=e=>{const t=new Map;return e.forEach((n,r)=>{t.set(r,new Set([...n]))}),t};const on="src/components/sunburst/Sunburst.svelte";function qa(e){var k,F,I,V,D,z,H,R,A,_;let t,n,r,i,s,a,o,u,l,c,f=((k=e[1])==null?void 0:k.curHeadNode.value)===((F=e[1])==null?void 0:F.totalPathNum)?`${((I=e[1])==null?void 0:I.curHeadNode.value)|0}`:`${((V=e[1])==null?void 0:V.curHeadNode.value)|0}/${(D=e[1])==null?void 0:D.totalPathNum}`,h,p,g,d,m=((z=e[1])==null?void 0:z.curHeadNode.treeNum)===((H=e[1])==null?void 0:H.totalTreeNum)?`${((R=e[1])==null?void 0:R.curHeadNode.treeNum)|0}`:`${((A=e[1])==null?void 0:A.curHeadNode.treeNum)|0}/${(_=e[1])==null?void 0:_.totalTreeNum}`,y,x,v;const S={c:function(){var L,P,G;t=M("div"),n=M("div"),r=M("span"),r.textContent="No tree meets the current constraints :(",i=O(),s=M("span"),s.textContent="Try to relax the filtering in the Search Panel",a=O(),o=Nn("svg"),u=O(),l=M("div"),c=M("span"),h=oe(f),p=oe(" paths"),g=O(),d=M("span"),y=oe(m),x=oe(" trees"),b(r,"class","s-_PkX202GTJ8Y"),T(r,on,156,4,3598),b(s,"class","s-_PkX202GTJ8Y"),T(s,on,159,4,3672),b(n,"class","no-tree-message s-_PkX202GTJ8Y"),me(n,"show",((L=e[1])==null?void 0:L.curHeadNode.treeNum)===0),T(n,on,155,2,3515),b(o,"class","sunburst-svg s-_PkX202GTJ8Y"),T(o,on,163,2,3759),b(c,"class","tree-stat s-_PkX202GTJ8Y"),T(c,on,170,4,4e3),b(d,"class","tree-stat s-_PkX202GTJ8Y"),T(d,on,175,4,4230),b(l,"class","stat-overlay s-_PkX202GTJ8Y"),b(l,"title",v=`There are ${(P=e[1])==null?void 0:P.curHeadNode.value} decision paths `.concat(`and ${(G=e[1])==null?void 0:G.curHeadNode.treeNum} decisions trees in the current selection.`)),T(l,on,164,2,3790),b(t,"class","sunburst s-_PkX202GTJ8Y"),T(t,on,154,0,3468)},l:function(L){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(L,P){le(L,t,P),w(t,n),w(n,r),w(n,i),w(n,s),w(t,a),w(t,o),w(t,u),w(t,l),w(l,c),w(c,h),w(c,p),w(l,g),w(l,d),w(d,y),w(d,x),e[9](t)},p:function(L,[P]){var G,Y,U,q,Z,pe,Q,J,B,te,he,X,K;P&2&&me(n,"show",((G=L[1])==null?void 0:G.curHeadNode.treeNum)===0),P&2&&f!==(f=((Y=L[1])==null?void 0:Y.curHeadNode.value)===((U=L[1])==null?void 0:U.totalPathNum)?`${((q=L[1])==null?void 0:q.curHeadNode.value)|0}`:`${((Z=L[1])==null?void 0:Z.curHeadNode.value)|0}/${(pe=L[1])==null?void 0:pe.totalPathNum}`)&&We(h,f),P&2&&m!==(m=((Q=L[1])==null?void 0:Q.curHeadNode.treeNum)===((J=L[1])==null?void 0:J.totalTreeNum)?`${((B=L[1])==null?void 0:B.curHeadNode.treeNum)|0}`:`${((te=L[1])==null?void 0:te.curHeadNode.treeNum)|0}/${(he=L[1])==null?void 0:he.totalTreeNum}`)&&We(y,m),P&2&&v!==(v=`There are ${(X=L[1])==null?void 0:X.curHeadNode.value} decision paths `.concat(`and ${(K=L[1])==null?void 0:K.curHeadNode.treeNum} decisions trees in the current selection.`))&&b(l,"title",v)},i:ye,o:ye,d:function(L){L&&se(t),e[9](null)}};return ee("SvelteRegisterBlock",{block:S,id:qa.name,type:"component",source:"",ctx:e}),S}function K2(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("Sunburst",r,[]);let{data:s=null}=t,{sunburstStore:a=null}=t,{treeWindowStore:o=null}=t,{pinnedTreeStore:u=null}=t,{searchStore:l=null}=t,{initDepthGap:c=2}=t,f=null,h=!1,p=null;const g=()=>{n(1,p)};Le(()=>{n(8,h=!0)});const d=()=>{f&&s&&a&&o&&l&&u&&n(1,p=new Tc({component:f,data:s,initDepthGap:c,sunburstStore:a,treeWindowStore:o,pinnedTreeStore:u,searchStore:l,sunburstUpdated:g}))},m=["data","sunburstStore","treeWindowStore","pinnedTreeStore","searchStore","initDepthGap"];Object.keys(t).forEach(x=>{!~m.indexOf(x)&&x.slice(0,2)!=="$$"&&x!=="slot"&&console.warn(`<Sunburst> was created with unknown prop '${x}'`)});function y(x){et[x?"unshift":"push"](()=>{f=x,n(0,f)})}return e.$$set=x=>{"data"in x&&n(2,s=x.data),"sunburstStore"in x&&n(3,a=x.sunburstStore),"treeWindowStore"in x&&n(4,o=x.treeWindowStore),"pinnedTreeStore"in x&&n(5,u=x.pinnedTreeStore),"searchStore"in x&&n(6,l=x.searchStore),"initDepthGap"in x&&n(7,c=x.initDepthGap)},e.$capture_state=()=>({Sunburst:Tc,onMount:Le,config:Ce,data:s,sunburstStore:a,treeWindowStore:o,pinnedTreeStore:u,searchStore:l,initDepthGap:c,component:f,mounted:h,sunburst:p,sunburstUpdated:g,initView:d}),e.$inject_state=x=>{"data"in x&&n(2,s=x.data),"sunburstStore"in x&&n(3,a=x.sunburstStore),"treeWindowStore"in x&&n(4,o=x.treeWindowStore),"pinnedTreeStore"in x&&n(5,u=x.pinnedTreeStore),"searchStore"in x&&n(6,l=x.searchStore),"initDepthGap"in x&&n(7,c=x.initDepthGap),"component"in x&&n(0,f=x.component),"mounted"in x&&n(8,h=x.mounted),"sunburst"in x&&n(1,p=x.sunburst)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&381&&s&&a&&o&&u&&l&&h&&f&&d()},[f,p,s,a,o,u,l,c,h,y]}class Ch extends wt{constructor(t){super(t);mt(this,t,K2,qa,it,{data:2,sunburstStore:3,treeWindowStore:4,pinnedTreeStore:5,searchStore:6,initDepthGap:7}),ee("SvelteRegisterComponent",{component:this,tagName:"Sunburst_1",options:t,id:qa.name})}get data(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get sunburstStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set sunburstStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get treeWindowStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set treeWindowStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get searchStore(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set searchStore(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get initDepthGap(){throw new Error("<Sunburst>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set initDepthGap(t){throw new Error("<Sunburst>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var ds,Vh,ps,Ah,gs,Dh;class Mc{constructor({component:t,treeMapMap:n,featureMap:r,treeWindowStore:i,treeWindowUpdated:s,width:a=150,height:o=150}){ge(this,ds);ge(this,ps);ge(this,gs);N(this,"treeMap");N(this,"curTreeID");N(this,"curAncestorFs");N(this,"treeWindowStore");N(this,"treeWindowStoreValue");N(this,"treeWindowUpdated");N(this,"svg");N(this,"padding");N(this,"width");N(this,"height");N(this,"getStyle",()=>`left: ${this.treeWindowStoreValue.x}px;
      top: ${this.treeWindowStoreValue.y}px;`);N(this,"shouldHidePinLabel",()=>localStorage.getItem("treeWindowPinnedOnce")===null?(localStorage.setItem("treeWindowPinnedOnce","false"),!1):localStorage.getItem("treeWindowPinnedOnce")==="true");this.treeMap=n,this.curTreeID=0,this.curAncestorFs=[],this.treeWindowUpdated=s,this.treeWindowStore=i,this.treeWindowStoreValue=Wo(),ne(this,ds,Vh).call(this,r),this.svg=E.select(t).select("svg.tree-svg").attr("width",a).attr("height",o).attr("viewbox",`0 0 ${a} ${o}`).attr("preserveAspectRatio","none"),this.padding={top:20,bottom:20,left:0,right:0},this.width=a-this.padding.left-this.padding.right,this.height=o-this.padding.top-this.padding.bottom}get tree(){const t=this.treeMap.get(this.curTreeID);return t!==void 0?t[0]:(console.warn(`No such tree on the record ${this.curTreeID}`),null)}get treeMetric(){const t=this.treeMap.get(this.curTreeID);return t!==void 0?fr(t[2],4):null}}ds=new WeakSet,Vh=function(t){this.treeWindowStore.subscribe(n=>{this.treeWindowStoreValue=n,this.svg!==void 0&&(this.treeWindowStoreValue.treeID!==this.curTreeID||this.treeWindowStoreValue.ancestorFs.length!==this.curAncestorFs.length||!this.treeWindowStoreValue.ancestorFs.every((r,i)=>r===this.curAncestorFs[i]))&&this.treeMap.get(this.treeWindowStoreValue.treeID)&&(this.curTreeID=this.treeWindowStoreValue.treeID,this.curAncestorFs=[...this.treeWindowStoreValue.ancestorFs],ne(this,ps,Ah).call(this)),this.treeWindowUpdated()}),this.treeWindowStoreValue.featureMap=t,this.treeWindowStoreValue.treeMap=this.treeMap,this.treeWindowStore.set(this.treeWindowStoreValue)},ps=new WeakSet,Ah=function(){this.svg.selectAll("g.content").remove(),ne(this,gs,Dh).call(this)},gs=new WeakSet,Dh=function(){if(this.tree===null){console.warn("Trying to draw a tree that does not exist");return}const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=E.hierarchy(this.tree,d=>d.c),r=7,i=r*1,s=E.tree().size([this.width,this.height])(n),a=t.append("g").attr("class","link-group");a.selectAll("path.link").data(s.links()).join("path").attr("class",d=>`link link-${d.source.data.f[0]}`).attr("id",d=>{const m=d.source.ancestors().length>1?d.source.ancestors()[1].data.f[0]:"r",y=d.source.data.f[0],x=d.target.data.f[0];return d.target.data.f[0]==="+"?`link-${m}-${y}-p`:d.target.data.f[0]==="-"?`link-${m}-${y}-n`:`link-${m}-${y}-${x}`}).attr("d",d=>E.line()([[d.source.x,d.source.y],[d.target.x,d.target.y]]));const u=t.append("g").attr("class","node-group").selectAll("g").data(s.descendants()).join("g").attr("class","node").attr("transform",d=>`translate(${d.x}, ${d.y})`),l=new Set(["-","+"]);u.filter(d=>!l.has(d.data.f[0])).append("circle").attr("r",r).style("fill",d=>this.treeWindowStoreValue.getFeatureColor?this.treeWindowStoreValue.getFeatureColor(d.data.f[0]):Ce.colors["gray-500"]),u.filter(d=>l.has(d.data.f[0])).append("rect").attr("x",-i).attr("y",-i).attr("rx",2).attr("ry",2).attr("width",2*i).attr("height",2*i),u.filter(d=>l.has(d.data.f[0])).append("text").attr("dy",.5).text(d=>d.data.f[0]);for(let d=0;d<this.curAncestorFs.length-1;d++){const m=d===0?"r":this.curAncestorFs[d-1],y=this.curAncestorFs[d],x=this.curAncestorFs[d+1];this.curAncestorFs[d+1]==="_"?(a.selectAll(`#link-${m}-${y}-p`).classed("highlighted",!0),a.selectAll(`#link-${m}-${y}-n`).classed("highlighted",!0)):a.selectAll(`#link-${m}-${y}-${x}`).classed("highlighted",!0)}const c=a.selectAll(`.link-${this.curAncestorFs[0]}`).data(),f=5,h=-1,p=[{x:(c[0].source.x+c[0].target.x)/2-f,y:(c[0].source.y+c[0].target.y)/2+h},{x:(c[1].source.x+c[1].target.x)/2+f,y:(c[1].source.y+c[1].target.y)/2+h}];t.append("g").attr("class","label-group").selectAll("text.split-label").data(p).join("text").attr("class","split-label").classed("split-label-left",(d,m)=>m===0).attr("x",d=>d.x).attr("y",d=>d.y).text((d,m)=>m===0?"true":"false")};var Lh='<svg viewBox="0 0 48 63" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M45.606-7.813c-.033.782.309 1.278 1.025 1.49.716.211 1.351.073 1.904-.415l5.713-5.762 6.348 15.771c.162.391.431.668.805.831.375.162.741.179 1.099.048l4.102-1.709c.39-.162.642-.431.756-.805.114-.375.074-.757-.122-1.148l-6.738-15.527 8.008-.488c.781-.033 1.318-.35 1.611-.953.293-.602.163-1.212-.39-1.831L48.828-39.356c-.553-.553-1.131-.707-1.733-.463-.602.244-.904.74-.904 1.489l-.585 30.517Z" style="fill-rule:nonzero" transform="translate(-18.934 59.052) scale(.91051)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(1.43013 0 0 1.46942 -3373.023 -6348.854)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(1.01125 -1.01125 1.03904 1.03904 -6884.807 -2079.508)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(0 -1.43013 1.46942 0 -6348.578 3420.756)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(-1.01125 -1.01125 1.03904 -1.03904 -2079.243 6931.533)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(1.01125 1.01125 -1.03904 1.03904 2129.287 -6885.076)"/><path d="M2377.74 4322.67c0-.91-.76-1.65-1.69-1.65-.94 0-1.7.74-1.7 1.65v5.08c0 .91.76 1.65 1.7 1.65.93 0 1.69-.74 1.69-1.65v-5.08Z" style="fill-opacity:.4" transform="matrix(0 1.43013 -1.46942 0 6396.933 -3375.343)"/></svg>';const{Object:$2}=Io,Rt="src/components/tree-window/TreeWindow.svelte";function Za(e){var V,D;let t,n,r,i,s=((V=e[1])==null?void 0:V.treeWindowStoreValue.treeID)+"",a,o,u,l,c=((D=e[1])==null?void 0:D.treeMetric)+"",f,h,p,g,d,m,y,x,v,S,k,F;const I={c:function(){var H,R,A;t=M("div"),n=M("div"),r=M("span"),i=oe("Tree "),a=oe(s),o=O(),u=M("span"),l=oe("("),f=oe(c),h=oe(")"),p=O(),g=M("div"),d=M("div"),m=M("div"),y=M("div"),x=O(),v=M("span"),v.textContent="pin",S=O(),k=Nn("svg"),b(r,"class","tree-name s-cr5gyj4Gsmo-"),T(r,Rt,156,4,3655),b(u,"class","tree-acc s-cr5gyj4Gsmo-"),T(u,Rt,160,4,3750),b(n,"class","tree-header s-cr5gyj4Gsmo-"),T(n,Rt,155,2,3625),b(y,"class","svg-icon s-cr5gyj4Gsmo-"),T(y,Rt,169,8,3980),b(v,"class","s-cr5gyj4Gsmo-"),T(v,Rt,172,8,4054),b(m,"class","label s-cr5gyj4Gsmo-"),T(m,Rt,168,6,3952),b(d,"class","label-container s-cr5gyj4Gsmo-"),me(d,"no-display",(H=e[1])==null?void 0:H.shouldHidePinLabel()),T(d,Rt,164,4,3847),b(k,"class","tree-svg s-cr5gyj4Gsmo-"),T(k,Rt,176,4,4100),b(g,"class","content s-cr5gyj4Gsmo-"),T(g,Rt,163,2,3821),b(t,"class","tree-window s-cr5gyj4Gsmo-"),b(t,"style",F=(R=e[1])==null?void 0:R.getStyle()),me(t,"show",(A=e[1])==null?void 0:A.treeWindowStoreValue.show),T(t,Rt,149,0,3484)},l:function(H){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(H,R){le(H,t,R),w(t,n),w(n,r),w(r,i),w(r,a),w(n,o),w(n,u),w(u,l),w(u,f),w(u,h),w(t,p),w(t,g),w(g,d),w(d,m),w(m,y),y.innerHTML=Lh,w(m,x),w(m,v),w(g,S),w(g,k),e[6](t)},p:function(H,[R]){var A,_,C,L,P;R&2&&s!==(s=((A=H[1])==null?void 0:A.treeWindowStoreValue.treeID)+"")&&We(a,s),R&2&&c!==(c=((_=H[1])==null?void 0:_.treeMetric)+"")&&We(f,c),R&2&&me(d,"no-display",(C=H[1])==null?void 0:C.shouldHidePinLabel()),R&2&&F!==(F=(L=H[1])==null?void 0:L.getStyle())&&b(t,"style",F),R&2&&me(t,"show",(P=H[1])==null?void 0:P.treeWindowStoreValue.show)},i:ye,o:ye,d:function(H){H&&se(t),e[6](null)}};return ee("SvelteRegisterBlock",{block:I,id:Za.name,type:"component",source:"",ctx:e}),I}function e5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("TreeWindow",r,[]);let{data:s=null}=t,{featureMap:a=null}=t,{treeWindowStore:o=null}=t,u=null,l=!1,c=null;Le(()=>{n(5,l=!0)});const f=()=>{n(1,c)},h=()=>{if(u&&s&&a&&o){const d=s.treeMap,m=new Map;Object.keys(d).forEach(y=>{m.set(+y,d[+y])}),n(1,c=new Mc({component:u,treeMapMap:m,featureMap:a,treeWindowStore:o,treeWindowUpdated:f}))}},p=["data","featureMap","treeWindowStore"];$2.keys(t).forEach(d=>{!~p.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<TreeWindow> was created with unknown prop '${d}'`)});function g(d){et[d?"unshift":"push"](()=>{u=d,n(0,u)})}return e.$$set=d=>{"data"in d&&n(2,s=d.data),"featureMap"in d&&n(3,a=d.featureMap),"treeWindowStore"in d&&n(4,o=d.treeWindowStore)},e.$capture_state=()=>({onMount:Le,TreeWindow:Mc,iconClick:Lh,data:s,featureMap:a,treeWindowStore:o,component:u,mounted:l,treeWindow:c,treeWindowUpdated:f,initView:h}),e.$inject_state=d=>{"data"in d&&n(2,s=d.data),"featureMap"in d&&n(3,a=d.featureMap),"treeWindowStore"in d&&n(4,o=d.treeWindowStore),"component"in d&&n(0,u=d.component),"mounted"in d&&n(5,l=d.mounted),"treeWindow"in d&&n(1,c=d.treeWindow)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&61&&s&&a&&o&&l&&u&&h()},[u,c,s,a,o,l,g]}class Nh extends wt{constructor(t){super(t);mt(this,t,e5,Za,it,{data:2,featureMap:3,treeWindowStore:4}),ee("SvelteRegisterComponent",{component:this,tagName:"TreeWindow_1",options:t,id:Za.name})}get data(){throw new Error("<TreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<TreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get featureMap(){throw new Error("<TreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set featureMap(t){throw new Error("<TreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get treeWindowStore(){throw new Error("<TreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set treeWindowStore(t){throw new Error("<TreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const dt=8;var Qt,Vn,ms,Hh,Zr,Ja,ys,Fh,Jr,ws,Ph,Qr,Qa,vs,Rh,bs,Ih,Ss,Eh;class Cc{constructor({component:t,pinnedTree:n,pinnedTreeStore:r,favoritesStore:i,pinnedTreeWindowUpdated:s,initSwitchChecked:a,width:o=200,height:u=200}){ge(this,Qt);ge(this,ms);ge(this,Zr);ge(this,ys);ge(this,ws);ge(this,Qr);ge(this,vs);ge(this,bs);ge(this,Ss);N(this,"pinnedTree");N(this,"pinnedTreeWindowUpdated");N(this,"svg");N(this,"padding");N(this,"width");N(this,"height");N(this,"dragRegion");N(this,"pinnedTreeStore");N(this,"pinnedTreeStoreValue");N(this,"pinnedTreeStoreUnsubscriber");N(this,"favoritesStore");N(this,"favoritesStoreValue");N(this,"favoritesStoreUnsubscriber");N(this,"sankey");N(this,"accuracyScale",null);N(this,"hidden",!0);N(this,"endPos");N(this,"node");N(this,"playLaunchingAnimation",()=>{const t=this.pinnedTree.startPos.width/this.endPos.width,n=this.pinnedTree.startPos.height/this.endPos.height,r=this.pinnedTree.startPos.x-this.endPos.x,i=this.pinnedTree.startPos.y-this.endPos.y;this.node.animate([{transformOrigin:"top left",opacity:0,transform:`
            translate(${r}px, ${i}px)
            scale(${t}, ${n})
          `},{transformOrigin:"top left",opacity:1,transform:"none"}],{duration:300,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)",fill:"none"})});ge(this,Jr,t=>{const n=E.color(t);let r="currentcolor";if(n!==null){const i=[252,252,252],s=[74,74,74],a=E.color(n).rgb(),o=[a.r,a.g,a.b];dr(i,o)<dr(s,o)&&(r="hsla(0, 0%, 99%, 1)")}return r});N(this,"getStyle",()=>`
      left: ${this.pinnedTree.x}px;      top: ${this.pinnedTree.y}px;`);N(this,"alterLayout",()=>{this.sankey?(ne(this,bs,Ih).call(this),this.sankey=!1):(ne(this,Ss,Eh).call(this),this.sankey=!0)});N(this,"heartClicked",async t=>{if(t.preventDefault(),t.stopPropagation(),ne(this,Qt,Vn).call(this),this.pinnedTree.isFav=!this.pinnedTree.isFav,this.pinnedTreeWindowUpdated(),this.pinnedTree.isFav){await Po();const n=E.select(".hidden-heart");n.transition().duration(400).ease(E.easeCubicInOut).style("transform","scale(1)").style("opacity",1).on("end",()=>{n.classed("pulse",!0),setTimeout(()=>{n.classed("pulse",!1).transition().duration(400).style("transform","scale(0)").style("opacity",0)},1500)});const r=E.select(this.node).select(".icon-heart").classed("play-animation",!0).on("animationend",()=>{r.classed("play-animation",!1)});new Set(this.favoritesStoreValue.favTrees.map(s=>s.pinnedTree.treeID)).has(this.pinnedTree.treeID)||this.favoritesStoreValue.favTrees.push({pinnedTree:this.pinnedTree,pinnedTreeUpdated:()=>{this.pinnedTreeWindowUpdated()},getFeatureColor:this.pinnedTreeStoreValue.getFeatureColor===null?()=>Ce.colors["gray-500"]:this.pinnedTreeStoreValue.getFeatureColor})}else{const r=[...this.favoritesStoreValue.favTrees.map(i=>i.pinnedTree.treeID)].indexOf(this.pinnedTree.treeID);r>-1&&this.favoritesStoreValue.favTrees.splice(r,1)}this.favoritesStore.set(this.favoritesStoreValue),this.pinnedTreeStore.set(this.pinnedTreeStoreValue)});N(this,"noteClicked",t=>{t.preventDefault(),t.stopPropagation(),ne(this,Qt,Vn).call(this);const n=E.select(this.node).select(".note-window");n.classed("show",!n.classed("show"))});N(this,"closeClicked",t=>{t.preventDefault(),t.stopPropagation();let n=!1;if(this.pinnedTreeStoreValue.lastActiveTreeID!==null&&(n=this.pinnedTreeStoreValue.lastActiveTreeID===this.pinnedTree.treeID),this.pinnedTree.isFav)this.pinnedTree.isPinned=!1;else{const r=this.pinnedTreeStoreValue.pinnedTrees.indexOf(this.pinnedTree);r>-1?this.pinnedTreeStoreValue.pinnedTrees.splice(r,1):console.warn("Trying to delete a tree that does not exist!")}if(n){let r=!1;for(let i=this.pinnedTreeStoreValue.pinnedTrees.length-1;i>=0;i--)if(this.pinnedTreeStoreValue.pinnedTrees[i].isPinned){this.pinnedTreeStoreValue.lastActiveTreeID=this.pinnedTreeStoreValue.pinnedTrees[i].treeID,r=!0;break}r||(this.pinnedTreeStoreValue.lastActiveTreeID=null)}this.pinnedTreeStore.set(this.pinnedTreeStoreValue)});N(this,"cancelEvent",t=>{t.preventDefault(),t.stopPropagation()});N(this,"headerMousedownHandler",t=>{t.preventDefault(),t.stopPropagation(),ne(this,Qt,Vn).call(this);const n={x:t.pageX,y:t.pageY},r=s=>{s.preventDefault(),s.stopPropagation();let a=this.node.offsetLeft+s.pageX-n.x,o=this.node.offsetTop+s.pageY-n.y;a=Math.max(this.dragRegion.minLeft,a),a=Math.min(this.dragRegion.maxLeft,a),o=Math.max(this.dragRegion.minTop,o),o=Math.min(this.dragRegion.maxTop,o),n.x=s.pageX,n.y=s.pageY,this.node.style.left=`${a}px`,this.node.style.top=`${o}px`},i=()=>{document.removeEventListener("mousemove",r,!0),document.removeEventListener("mouseup",i,!0),document.body.style.cursor="default",this.pinnedTree.x=parseFloat(this.node.style.left),this.pinnedTree.y=parseFloat(this.node.style.top)};document.addEventListener("mousemove",r,!0),document.addEventListener("mouseup",i,!0),document.body.style.cursor="move"});N(this,"contentMousedownHandler",t=>{ne(this,Qt,Vn).call(this)});N(this,"switchToggled",t=>{t.stopPropagation(),t.preventDefault();const n=E.select(t.currentTarget);n.attr("aria-checked",n.attr("aria-checked")==="true"?"false":!0),this.alterLayout()});var h;this.pinnedTree=n,this.pinnedTreeWindowUpdated=s,this.width=o,this.height=u,this.node=t;const c=((h=this.node.parentNode)==null?void 0:h.parentNode).getBoundingClientRect();this.dragRegion={minLeft:0,maxLeft:c.width-this.width,minTop:0,maxTop:c.height-this.height-50},this.pinnedTree.jiggle=()=>{ne(this,Qt,Vn).call(this),this.node.classList.add("jiggle"),this.node.onanimationend=()=>{this.node.classList.remove("jiggle")}},this.pinnedTreeStore=r,this.pinnedTreeStoreValue=or(),this.pinnedTreeStoreUnsubscriber=this.pinnedTreeStore.subscribe(p=>{this.pinnedTreeStoreValue=p}),this.favoritesStore=i,this.favoritesStoreValue=sr(),this.favoritesStoreUnsubscriber=this.favoritesStore.subscribe(p=>{this.favoritesStoreValue=p}),ne(this,Qt,Vn).call(this),this.svg=E.select(t).select("svg.tree-svg").attr("width",o).attr("height",u).attr("viewbox",`0 0 ${o} ${u}`).attr("preserveAspectRatio","none"),this.padding={top:20,bottom:20,left:0,right:0},this.width=o-this.padding.left-this.padding.right,this.height=u-this.padding.top-this.padding.bottom,a?(this.sankey=!0,ne(this,ws,Ph).call(this)):(this.sankey=!1,ne(this,ms,Hh).call(this));const f=E.select(t).node().getBoundingClientRect();this.endPos={x:this.pinnedTree.x,y:this.pinnedTree.y,width:f.width,height:f.height},this.hidden=!1,this.pinnedTreeWindowUpdated(),this.playLaunchingAnimation()}}Qt=new WeakSet,Vn=function(){var n;const t=this.node.parentNode;(n=t==null?void 0:t.parentNode)==null||n.appendChild(t),this.pinnedTreeStoreValue.lastActiveTreeID=this.pinnedTree.treeID},ms=new WeakSet,Hh=function(){const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=E.hierarchy(this.pinnedTree.tree,l=>l.c),r=dt*1,i=E.tree().size([this.width,this.height])(n),s=t.append("g").attr("class","link-group");s.selectAll("path.link").data(i.links()).join("path").attr("class",l=>`link link-${l.source.data.f[0]}`).attr("id",l=>l.target.data.f[0]==="+"?`link-${l.source.data.f[0]}-p`:l.target.data.f[0]==="-"?`link-${l.source.data.f[0]}-n`:`link-${l.source.data.f[0]}-${l.target.data.f[0]}`).attr("d",l=>E.line()([[l.source.x,l.source.y],[l.target.x,l.target.y]]));const o=t.append("g").attr("class","node-group").selectAll("g").data(i.descendants()).join("g").attr("class","node").attr("transform",l=>`translate(${l.x}, ${l.y})`),u=new Set(["-","+"]);if(o.filter(l=>!u.has(l.data.f[0])).append("rect").attr("class","node-rect").attr("x",-r).attr("y",-r).attr("rx",dt).attr("ry",dt).attr("width",2*r).attr("height",2*r).style("fill",l=>this.pinnedTreeStoreValue.getFeatureColor?this.pinnedTreeStoreValue.getFeatureColor(l.data.f[0]):Ce.colors["gray-500"]),o.filter(l=>!u.has(l.data.f[0])).append("title").text(l=>this.pinnedTreeStoreValue.getFeatureInfo?this.pinnedTreeStoreValue.getFeatureInfo(l.data.f[0]).nameValue:""),o.filter(l=>u.has(l.data.f[0])).append("title").text(l=>{const c=l.data.f[0]==="+"?"yes":"no",f=`${fr(l.data.f[2]/l.data.f[1],4)} (${l.data.f[2]} / ${l.data.f[1]})`;return`Predict: ${c} - Accuracy: ${f}`}),this.accuracyScale===null){const l=[];o.filter(c=>u.has(c.data.f[0])).each(c=>{l.push(c.data.f[2]/c.data.f[1])}),this.accuracyScale=E.scaleLinear().domain([Math.min(...l),Math.max(...l)]).range([.3,1])}o.filter(l=>u.has(l.data.f[0])).append("rect").attr("class","leaf-rect").attr("x",-r).attr("y",-r).attr("rx",2).attr("ry",2).attr("width",2*r).attr("height",2*r).style("stroke-opacity",l=>this.accuracyScale(l.data.f[2]/l.data.f[1])),o.filter(l=>u.has(l.data.f[0])).append("text").attr("dy",.5).text(l=>l.data.f[0]).style("opacity",l=>this.accuracyScale(l.data.f[2]/l.data.f[1])),ne(this,Zr,Ja).call(this,s,t,i)},Zr=new WeakSet,Ja=function(t,n,r,i=null){const s=t.selectAll(`.link-${this.pinnedTree.tree.f[0]}`).data(),a=5,o=-1,u=[{x:(s[0].source.x+s[0].target.x)/2-a,y:(s[0].source.y+s[0].target.y)/2+o},{x:(s[1].source.x+s[1].target.x)/2+a,y:(s[1].source.y+s[1].target.y)/2+o}],l=n.append("g").attr("class","edge-label-group standard").style("opacity",i?0:1);l.selectAll("text.split-label").data(u).join("text").attr("class","split-label").classed("split-label-left",(g,d)=>d===0).attr("x",g=>g.x).attr("y",g=>g.y+3).text((g,d)=>d===0?"true":"false").style("display",s[0].source.height>6?"none":"unset");const c=ne(this,ys,Fh).call(this,r,dt),f=n.append("g").attr("class","node-label-group standard").style("opacity",i?0:1),h=f.selectAll("g.node-label").data(c).join("g").attr("class","node-label").classed("node-label-left",g=>g.pos===St.left).attr("transform",g=>`translate(${g.x}, ${g.y})`),p=h.append("text").text(g=>g.text).style("fill",g=>g.backTextColor);h.append("title").text(g=>g.textLong),p.each((g,d,m)=>{const y=E.select(m[d]);if(d+1<m.length){const x=E.select(m[d+1]),v=y.data()[0],S=x.data()[0];v.y===S.y&&v.pos===St.right&&S.pos===St.right&&S.index===v.index+1&&(v.width*=2)}}),p.each((g,d,m)=>{const y=m[d],x=E.select(y);let v=g.text,S=y.getBoundingClientRect().width;for(;S>g.width;){if(v==="..."){v=".";break}v=v.replace("...",""),v=v.slice(0,v.length-1),v=`${v}...`,S=ot(v,16*.8)}x.text(v)}),i&&(l.transition(i).style("opacity",1),f.transition(i).style("opacity",1))},ys=new WeakSet,Fh=function(t,n){const r=[];let s=12,a=this.width-12;const o=5,u=t.descendants();for(const[l,c]of u.entries()){let f=!1;const h=this.pinnedTreeStoreValue.getFeatureInfo===null?"":this.pinnedTreeStoreValue.getFeatureInfo(c.data.f[0]).shortValue,p=this.pinnedTreeStoreValue.getFeatureInfo===null?"":this.pinnedTreeStoreValue.getFeatureInfo(c.data.f[0]).nameValue;let g=Ce.colors["gray-50"],d=Ce.colors["gray-700"];if(this.pinnedTreeStoreValue.getFeatureColor){const v=this.pinnedTreeStoreValue.getFeatureColor(c.data.f[0]);d=v,g=qs(this,Jr).call(this,v)}l+1<u.length&&c.depth===u[l+1].depth&&(f=!0,a=u[l+1].x-n-o);const m=c.x-n-s-o;let y=a-c.x-n-o;f&&u[l+1].data.f[0]!=="+"&&u[l+1].data.f[0]!=="-"&&(y=(a-c.x-n)/2-o);let x;m>y?(x={x:c.x-n-o,y:c.y,pos:St.left,featureName:c.data.f[0],width:m,text:h,textLong:p,frontTextColor:g,backTextColor:d,index:l},s=c.x+n,a=this.width-12):(x={x:c.x+n+o,y:c.y,pos:St.right,featureName:c.data.f[0],width:y,text:h,textLong:p,frontTextColor:g,backTextColor:d,index:l},c.data.f[0]!=="+"&&c.data.f[0]!=="-"?s=c.x+n+o+y:s=c.x+n+o,a=this.width-12),c.data.f[0]!=="+"&&c.data.f[0]!=="-"&&r.push(x),l+1<u.length&&c.depth!==u[l+1].depth&&(s=12,a=this.width-12)}return r},Jr=new WeakMap,ws=new WeakSet,Ph=function(){const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=E.hierarchy(this.pinnedTree.tree,d=>d.c),r=dt*1,i=E.tree().size([this.width,this.height])(n),s=t.append("g").attr("class","link-group"),a=t.append("g").attr("class","node-group"),o={top:this.padding.top,bottom:this.padding.bottom,left:20,right:20},u=i.data.f[1],l=E.scaleLinear().domain([0,u]).range([0,this.width+this.padding.left+this.padding.right-o.left-o.right]),c=[];let f=0,h=-1;i.descendants().forEach(d=>{const m=Object.assign(d);m.depth!==h&&(f=m.parent===null?o.left:m.parent.x,h=m.depth),m.x=f,m.width=l(m.data.f[1]),f+=m.width,c.push(m)});const p=a.selectAll("g").data(c).join("g").attr("class","node").attr("transform",d=>`translate(${d.x}, ${d.y})`);p.filter(d=>d.data.f[0]!=="+"&&d.data.f[0]!=="-").append("title").text(d=>this.pinnedTreeStoreValue.getFeatureInfo?this.pinnedTreeStoreValue.getFeatureInfo(d.data.f[0]).nameValue:""),p.filter(d=>d.data.f[0]==="+"||d.data.f[0]==="-").append("title").text(d=>{const m=d.data.f[0]==="+"?"yes":"no",y=`${fr(d.data.f[2]/d.data.f[1],4)} (${d.data.f[2]} / ${d.data.f[1]})`;return`Predict: ${m} - Accuracy: ${y}`});const g=new Set(["-","+"]);if(p.filter(d=>!g.has(d.data.f[0])).append("rect").attr("class","node-rect sankey").attr("x",0).attr("y",-r).attr("width",d=>d.width).attr("height",2*r).attr("rx",d=>d.width<16?1:2).attr("ry",d=>d.width<16?1:2).style("fill",d=>this.pinnedTreeStoreValue.getFeatureColor?this.pinnedTreeStoreValue.getFeatureColor(d.data.f[0]):Ce.colors["gray-500"]),this.accuracyScale===null){const d=[];p.filter(m=>g.has(m.data.f[0])).each(m=>{d.push(m.data.f[2]/m.data.f[1])}),this.accuracyScale=E.scaleLinear().domain([Math.min(...d),Math.max(...d)]).range([.3,1])}p.filter(d=>g.has(d.data.f[0])).append("rect").attr("class","leaf-rect").attr("x",0).attr("y",-r).attr("rx",d=>d.width<16?1:2).attr("ry",d=>d.width<16?1:2).attr("width",d=>d.width).attr("height",2*r).style("stroke-opacity",d=>this.accuracyScale(d.data.f[2]/d.data.f[1])),p.filter(d=>g.has(d.data.f[0])).append("text").attr("x",d=>d.width/2).attr("dy",.5).text(d=>d.data.f[0]).style("opacity",d=>d.width<16?0:this.accuracyScale(d.data.f[2]/d.data.f[1])),s.selectAll("path.link").data(i.links()).join("path").attr("class",d=>`link link-${d.source.data.f[0]}`).attr("id",d=>d.target.data.f[0]==="+"?`link-${d.source.data.f[0]}-p`:d.target.data.f[0]==="-"?`link-${d.source.data.f[0]}-n`:`link-${d.source.data.f[0]}-${d.target.data.f[0]}`).attr("d",d=>{const m=d.source,y=d.target;return E.line()([[m.x+m.width/2,m.y],[y.x+y.width/2,y.y-r]])}),ne(this,Qr,Qa).call(this,s,t,c,r)},Qr=new WeakSet,Qa=function(t,n,r,i,s=null){const a=t.selectAll(`.link-${this.pinnedTree.tree.f[0]}`).data(),o=5,u=-.5,l=[];for(const d of[0,1]){const m=a[d].source,y=a[d].target,x=m.x+m.width/2,v=y.x+y.width/2,S=m.y,k=y.y-i,F=r[1].y-r[0].y-2*dt,I=dt/(F+dt)*Math.abs(x-v),V=d===0?x-I:x+I,D=S+dt;l.push({x:d===0?(V+v)/2-o:(V+v)/2+o,y:(D+k)/2+u})}const c=n.append("g").attr("class","edge-label-group sankey").style("opacity",s?0:1);c.selectAll("text.split-label").data(l).join("text").attr("class","split-label").classed("split-label-left",(d,m)=>m===0).attr("x",d=>d.x).attr("y",d=>d.y+3).text((d,m)=>m===0?"true":"false").style("display",a[0].source.height>6?"none":"unset");const f=ne(this,vs,Rh).call(this,r),h=n.append("g").attr("class","node-label-group sankey").style("opacity",s?0:1),p=h.selectAll("g.node-label").data(f).join("g").attr("class","node-label").classed("node-label-left",d=>d.pos===St.left).classed("node-label-middle",d=>d.pos===St.middle).attr("transform",d=>`translate(${d.x}, ${d.y})`),g=p.append("text").text(d=>d.text).style("fill",d=>d.pos===St.middle?d.frontTextColor:d.backTextColor);p.append("title").text(d=>d.textLong),g.each((d,m,y)=>{const x=y[m],v=E.select(x);let S=d.text,k=x.getBoundingClientRect().width;for(;k>d.width;){if(S==="..."){S=".";break}S=S.replace("...",""),S=S.slice(0,S.length-1),S=`${S}...`,k=ot(S,16*.8)}v.text(S)}),s&&(c.transition(s).style("opacity",1),h.transition(s).style("opacity",1))},vs=new WeakSet,Rh=function(t){const n=[];let s=20,a=this.width-20;const o=5;for(const[u,l]of t.entries()){let c=!1;const f=this.pinnedTreeStoreValue.getFeatureInfo===null?"":this.pinnedTreeStoreValue.getFeatureInfo(l.data.f[0]).shortValue,h=this.pinnedTreeStoreValue.getFeatureInfo===null?"":this.pinnedTreeStoreValue.getFeatureInfo(l.data.f[0]).nameValue;let p=Ce.colors["gray-50"],g=Ce.colors["gray-700"];if(this.pinnedTreeStoreValue.getFeatureColor){const v=this.pinnedTreeStoreValue.getFeatureColor(l.data.f[0]);g=v,p=qs(this,Jr).call(this,v)}u+1<t.length&&l.depth===t[u+1].depth&&(c=!0,a=t[u+1].x-o);const d=l.x-s-o,m=c?0:a-l.x-l.width-o,y=l.width-2*o;let x;d>m&&d>y?(x={x:l.x-o,y:l.y+1,pos:St.left,featureName:l.data.f[0],width:d,text:f,textLong:h,frontTextColor:p,backTextColor:g,index:u},s=l.x+l.width,a=this.width-20):y>=d&&y>=m?(x={x:l.x+l.width/2,y:l.y+1,pos:St.middle,featureName:l.data.f[0],width:y,text:f,textLong:h,frontTextColor:p,backTextColor:g,index:u},s=l.x+l.width,a=this.width-20):(x={x:l.x+l.width+o,y:l.y+1,pos:St.right,featureName:l.data.f[0],width:m,text:f,textLong:h,frontTextColor:p,backTextColor:g,index:u},s=l.x+l.width,a=this.width-20),l.data.f[0]!=="+"&&l.data.f[0]!=="-"&&n.push(x),u+1<t.length&&l.depth!==t[u+1].depth&&(s=20,a=this.width-20)}return n},bs=new WeakSet,Ih=function(){const t=this.svg.select("g.content"),n=E.hierarchy(this.pinnedTree.tree,c=>c.c),r=dt*1,i=E.tree().size([this.width,this.height])(n),s=E.transition().duration(400).ease(E.easeCubicInOut),a=t.select(".link-group");a.selectAll("path.link").data(i.links()).join("path").transition(s).attr("d",c=>E.line()([[c.source.x,c.source.y],[c.target.x,c.target.y]]));const u=t.select(".node-group").selectAll("g.node").data(i.descendants()).join("g");u.transition(s).attr("transform",c=>`translate(${c.x}, ${c.y})`);const l=new Set(["-","+"]);u.filter(c=>!l.has(c.data.f[0])).select("rect.node-rect").classed("sankey",!1).transition(s).attr("x",-r).attr("y",-r).attr("rx",dt).attr("ry",dt).attr("width",2*r).attr("height",2*r),u.filter(c=>l.has(c.data.f[0])).select("rect.leaf-rect").attr("class","leaf-rect").transition(s).attr("x",-r).attr("y",-r).attr("rx",2).attr("ry",2).attr("width",2*r).attr("height",2*r),u.filter(c=>l.has(c.data.f[0])).select("text").transition(s).attr("x",0).attr("dy",.5).style("opacity",c=>this.accuracyScale(c.data.f[2]/c.data.f[1])),t.select(".node-label-group.sankey").transition(s).style("opacity",0).style("pointer-events","none"),t.select(".edge-label-group.sankey").transition(s).style("opacity",0).style("pointer-events","none"),t.select(".node-label-group.standard").size()===0?ne(this,Zr,Ja).call(this,a,t,i,s):(t.select(".node-label-group.standard").transition(s).style("opacity",1).style("pointer-events","unset"),t.select(".edge-label-group.standard").transition(s).style("opacity",1).style("pointer-events","unset")),localStorage.setItem("initSwitchChecked","false")},Ss=new WeakSet,Eh=function(){const t=this.svg.select(".content"),n=E.hierarchy(this.pinnedTree.tree,m=>m.c),r=dt*1,i=E.tree().size([this.width,this.height])(n),s=t.select(".link-group"),a=t.select(".node-group"),o={top:this.padding.top,bottom:this.padding.bottom,left:20,right:20},u=i.data.f[1],l=E.scaleLinear().domain([0,u]).range([0,this.width+this.padding.left+this.padding.right-o.left-o.right]),c=[];let f=0,h=-1;i.descendants().forEach(m=>{const y=Object.assign(m);y.depth!==h&&(f=y.parent===null?o.left:y.parent.x,h=y.depth),y.x=f,y.width=l(y.data.f[1]),f+=y.width,c.push(y)});const p=E.transition().duration(400).ease(E.easeCubicInOut),g=a.selectAll("g.node").data(c).join("g");g.transition(p).attr("transform",m=>`translate(${m.x}, ${m.y})`);const d=new Set(["-","+"]);g.filter(m=>!d.has(m.data.f[0])).select("rect.node-rect").classed("sankey",!0).transition(p).attr("x",0).attr("y",-r).attr("width",m=>m.width).attr("height",2*r).attr("rx",m=>m.width<16?1:2).attr("ry",m=>m.width<16?1:2),g.filter(m=>d.has(m.data.f[0])).select("rect.leaf-rect").transition(p).attr("x",0).attr("y",-r).attr("rx",m=>m.width<16?1:2).attr("ry",m=>m.width<16?1:2).attr("width",m=>m.width).attr("height",2*r),g.filter(m=>d.has(m.data.f[0])).select("text").transition(p).attr("x",m=>m.width/2).attr("dy",.5).text(m=>m.data.f[0]).style("opacity",m=>m.width<16?0:this.accuracyScale(m.data.f[2]/m.data.f[1])),s.selectAll("path.link").data(i.links()).join("path").transition(p).attr("d",m=>{const y=m.source,x=m.target;return E.line()([[y.x+y.width/2,y.y],[x.x+x.width/2,x.y-r]])}),t.select(".node-label-group.standard").transition(p).style("opacity",0).style("pointer-events","none"),t.select(".edge-label-group.standard").transition(p).style("opacity",0).style("pointer-events","none"),t.select(".node-label-group.sankey").size()===0?ne(this,Qr,Qa).call(this,s,t,c,r,p):(t.select(".node-label-group.sankey").transition(p).style("opacity",1).style("pointer-events","unset"),t.select(".edge-label-group.sankey").transition(p).style("opacity",1).style("pointer-events","unset")),localStorage.setItem("initSwitchChecked","true")};var Wh='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M2.343 13.657A8 8 0 1113.657 2.343 8 8 0 012.343 13.657zM6.03 4.97a.75.75 0 00-1.06 1.06L6.94 8 4.97 9.97a.75.75 0 101.06 1.06L8 9.06l1.97 1.97a.75.75 0 101.06-1.06L9.06 8l1.97-1.97a.75.75 0 10-1.06-1.06L8 6.94 6.03 4.97z"></path></svg>',Bs='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 16A8 8 0 108 0a8 8 0 000 16zm2.33-11.5c-1.22 0-1.83.5-2.323 1.136C7.513 5 6.903 4.5 5.682 4.5c-1.028 0-2.169.784-2.169 2.5 0 1.499 1.493 3.433 3.246 4.517.52.321.89.479 1.248.484.357-.005.728-.163 1.247-.484C11.007 10.433 12.5 8.5 12.5 7c0-1.716-1.14-2.5-2.17-2.5z"></path></svg>',Oh='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M8 16A8 8 0 108 0a8 8 0 000 16zM4 5a1 1 0 011-1h6a1 1 0 011 1v5a1 1 0 01-1 1H8.707l-1.853 1.854A.5.5 0 016 12.5V11H5a1 1 0 01-1-1V5z"></path></svg>',zh=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-3641,-31)">
        <g transform="matrix(1,0,0,1,-0.831706,0)">
            <g id="icon-heart-circle-clicked">
                <g transform="matrix(3.03726,0,0,3.03726,3642.35,31.6476)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16Z" style="fill:rgb(244,67,54);"/>
                </g>
                <g transform="matrix(3.03726,0,0,3.03726,3642.35,31.6476)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16ZM10.33,4.5C9.11,4.5 8.5,5 8.007,5.636C7.513,5 6.903,4.5 5.682,4.5C4.654,4.5 3.513,5.284 3.513,7C3.513,8.499 5.006,10.433 6.759,11.517C7.279,11.838 7.649,11.996 8.007,12.001C8.364,11.996 8.735,11.838 9.254,11.517C11.007,10.433 12.5,8.5 12.5,7C12.5,5.284 11.36,4.5 10.33,4.5Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,Gh=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-3843,-44)">
        <g transform="matrix(1,0,0,1,-0.831706,0)">
            <g id="icon-note-circle-clicked" transform="matrix(1,0,0,1,-0.0850173,-0.438976)">
                <g transform="matrix(1,0,0,1,3843.92,44.439)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16Z" style="fill:hsl(123,46.2%,33.53%);"/>
                </g>
                <g transform="matrix(1,0,0,1,3843.92,44.439)">
                    <path d="M8,16C12.389,16 16,12.389 16,8C16,3.611 12.389,0 8,0C3.611,0 -0,3.611 0,8C0,12.389 3.611,16 8,16ZM4,5C4,4.451 4.451,4 5,4L11,4C11.549,4 12,4.451 12,5L12,10C12,10.549 11.549,11 11,11L8.707,11L6.854,12.854C6.76,12.948 6.633,13.001 6.5,13.001C6.226,13.001 6,12.775 6,12.501L6,11L5,11C4.451,11 4,10.549 4,10L4,5Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`;const De="src/components/tree-window/PinnedTreeWindow.svelte";function Yh(e){let t;const n={c:function(){t=M("div"),b(t,"class","svg-icon s-YWFeNV-ftNdK"),T(t,De,364,10,10170)},m:function(i,s){le(i,t,s),t.innerHTML=Bs},p:ye,d:function(i){i&&se(t)}};return ee("SvelteRegisterBlock",{block:n,id:Yh.name,type:"else",source:"(364:8) {:else}",ctx:e}),n}function Bh(e){let t;const n={c:function(){t=M("div"),b(t,"class","svg-icon icon-heart s-YWFeNV-ftNdK"),me(t,"play-animation",!1),T(t,De,360,10,10021)},m:function(i,s){le(i,t,s),t.innerHTML=zh},p:ye,d:function(i){i&&se(t)}};return ee("SvelteRegisterBlock",{block:n,id:Bh.name,type:"if",source:"(360:8) {#if pinnedTreeWindow?.pinnedTree.isFav}",ctx:e}),n}function Uh(e){let t;const n={c:function(){t=M("div"),b(t,"class","svg-icon s-YWFeNV-ftNdK"),T(t,De,383,10,10648)},m:function(i,s){le(i,t,s),t.innerHTML=Gh},p:ye,d:function(i){i&&se(t)}};return ee("SvelteRegisterBlock",{block:n,id:Uh.name,type:"else",source:"(383:8) {:else}",ctx:e}),n}function jh(e){let t;const n={c:function(){t=M("div"),b(t,"class","svg-icon s-YWFeNV-ftNdK"),T(t,De,379,10,10547)},m:function(i,s){le(i,t,s),t.innerHTML=Oh},p:ye,d:function(i){i&&se(t)}};return ee("SvelteRegisterBlock",{block:n,id:jh.name,type:"if",source:"(379:8) {#if pinnedTreeWindow?.pinnedTree.note === ''}",ctx:e}),n}function Ka(e){let t,n,r;const i={c:function(){t=M("textarea"),b(t,"class","note-window-input s-YWFeNV-ftNdK"),b(t,"name","note-input"),b(t,"placeholder","Leave a comment."),T(t,De,394,14,10987)},m:function(a,o){le(a,t,o),Gi(t,e[1].pinnedTree.note),n||(r=[de(t,"input",e[11],!1,!1,!1),de(t,"input",e[12])],n=!0)},p:function(a,o){o&2&&Gi(t,a[1].pinnedTree.note)},d:function(a){a&&se(t),n=!1,ze(r)}};return ee("SvelteRegisterBlock",{block:i,id:Ka.name,type:"if",source:"(394:12) {#if pinnedTreeWindow !== null}",ctx:e}),i}function $a(e){var fe,xe;let t,n,r,i,s,a=((fe=e[1])==null?void 0:fe.pinnedTree.treeID)+"",o,u,l,c,f=((xe=e[1])==null?void 0:xe.pinnedTree.treeMetric)+"",h,p,g,d,m,y,x,v,S,k,F,I,V,D,z,H,R,A,_,C,L,P,G,Y,U,q,Z,pe,Q,J;function B(ke,j){var ce;return(ce=ke[1])!=null&&ce.pinnedTree.isFav?Bh:Yh}let te=B(e),he=te(e);function X(ke,j){var ce;return((ce=ke[1])==null?void 0:ce.pinnedTree.note)===""?jh:Uh}let K=X(e),ae=K(e),W=e[1]!==null&&Ka(e);const ve={c:function(){var j,ce,Ne,Te,st,Ie;t=M("div"),n=M("div"),r=M("div"),i=M("span"),s=oe("Tree "),o=oe(a),u=O(),l=M("span"),c=oe("("),h=oe(f),p=oe(")"),d=O(),m=M("div"),y=M("div"),he.c(),x=O(),v=M("div"),ae.c(),S=O(),k=M("div"),F=M("div"),W&&W.c(),I=O(),V=M("div"),D=M("div"),z=O(),H=M("div"),R=Nn("svg"),A=O(),_=M("div"),C=M("button"),L=M("label"),P=oe("Scaled by sample size"),Y=O(),U=M("div"),b(i,"class","tree-name s-YWFeNV-ftNdK"),T(i,De,343,6,9527),b(l,"class","tree-acc s-YWFeNV-ftNdK"),T(l,De,347,6,9624),b(r,"class","tree-info s-YWFeNV-ftNdK"),b(r,"title",g=`Tree ${(j=e[1])==null?void 0:j.pinnedTree.treeID} - Accuracy ${(ce=e[1])==null?void 0:ce.pinnedTree.treeMetric}`),T(r,De,339,4,9372),b(y,"class","control-fav s-YWFeNV-ftNdK"),b(y,"title","Add to my favorites"),T(y,De,353,6,9766),b(F,"class","input-wrapper s-YWFeNV-ftNdK"),T(F,De,389,10,10817),b(k,"class","note-window s-YWFeNV-ftNdK"),b(k,"title",""),me(k,"show",!1),T(k,De,388,8,10753),b(v,"class","control-note s-YWFeNV-ftNdK"),b(v,"title","Leave a comment"),T(v,De,370,6,10280),b(D,"class","svg-icon s-YWFeNV-ftNdK"),T(D,De,412,8,11519),b(V,"class","control-close s-YWFeNV-ftNdK"),b(V,"title","Close the window"),T(V,De,406,6,11316),b(m,"class","control-buttons s-YWFeNV-ftNdK"),T(m,De,352,4,9730),b(n,"class","tree-header s-YWFeNV-ftNdK"),T(n,De,334,2,9214),b(R,"class","tree-svg s-YWFeNV-ftNdK"),T(R,De,423,4,11729),b(H,"class","content s-YWFeNV-ftNdK"),T(H,De,419,2,11627),b(L,"class","switch-label s-YWFeNV-ftNdK"),b(L,"for",G=`switch-${(Ne=e[1])==null?void 0:Ne.pinnedTree.treeID}`),T(L,De,433,6,12015),b(U,"class","switch-track s-YWFeNV-ftNdK"),b(U,"id",q=`switch-${(Te=e[1])==null?void 0:Te.pinnedTree.treeID}`),T(U,De,438,6,12165),b(C,"class","switch s-YWFeNV-ftNdK"),b(C,"aria-checked",Z=e[2]?"true":"false"),b(C,"title","Toggle to visualize sample size as node width"),T(C,De,427,4,11799),b(_,"class","control-footer s-YWFeNV-ftNdK"),T(_,De,426,2,11766),b(t,"class","pinned-tree-window s-YWFeNV-ftNdK"),b(t,"style",pe=(st=e[1])==null?void 0:st.getStyle()),me(t,"hidden",(Ie=e[1])==null?void 0:Ie.hidden),me(t,"jiggle",!1),T(t,De,327,0,9048)},l:function(j){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(j,ce){le(j,t,ce),w(t,n),w(n,r),w(r,i),w(i,s),w(i,o),w(r,u),w(r,l),w(l,c),w(l,h),w(l,p),w(n,d),w(n,m),w(m,y),he.m(y,null),w(m,x),w(m,v),ae.m(v,null),w(v,S),w(v,k),w(k,F),W&&W.m(F,null),w(m,I),w(m,V),w(V,D),D.innerHTML=Wh,w(t,z),w(t,H),w(H,R),w(t,A),w(t,_),w(_,C),w(C,L),w(L,P),w(C,Y),w(C,U),e[21](t),Q||(J=[de(y,"click",e[9],!1,!1,!1),de(y,"mousedown",e[10],!1,!1,!1),de(F,"click",e[13],!1,!1,!1),de(v,"click",e[14],!1,!1,!1),de(v,"mousedown",t5,!1,!1,!1),de(V,"click",e[15],!1,!1,!1),de(V,"mousedown",e[16],!1,!1,!1),de(n,"mousedown",e[17],!1,!1,!1),de(n,"click",e[18],!1,!1,!1),de(H,"mousedown",e[19],!1,!1,!1),de(C,"click",e[20],!1,!1,!1)],Q=!0)},p:function(j,[ce]){var Ne,Te,st,Ie,Gt,vt,Ze,Yt;ce&2&&a!==(a=((Ne=j[1])==null?void 0:Ne.pinnedTree.treeID)+"")&&We(o,a),ce&2&&f!==(f=((Te=j[1])==null?void 0:Te.pinnedTree.treeMetric)+"")&&We(h,f),ce&2&&g!==(g=`Tree ${(st=j[1])==null?void 0:st.pinnedTree.treeID} - Accuracy ${(Ie=j[1])==null?void 0:Ie.pinnedTree.treeMetric}`)&&b(r,"title",g),te===(te=B(j))&&he?he.p(j,ce):(he.d(1),he=te(j),he&&(he.c(),he.m(y,null))),K===(K=X(j))&&ae?ae.p(j,ce):(ae.d(1),ae=K(j),ae&&(ae.c(),ae.m(v,S))),j[1]!==null?W?W.p(j,ce):(W=Ka(j),W.c(),W.m(F,null)):W&&(W.d(1),W=null),ce&2&&G!==(G=`switch-${(Gt=j[1])==null?void 0:Gt.pinnedTree.treeID}`)&&b(L,"for",G),ce&2&&q!==(q=`switch-${(vt=j[1])==null?void 0:vt.pinnedTree.treeID}`)&&b(U,"id",q),ce&4&&Z!==(Z=j[2]?"true":"false")&&b(C,"aria-checked",Z),ce&2&&pe!==(pe=(Ze=j[1])==null?void 0:Ze.getStyle())&&b(t,"style",pe),ce&2&&me(t,"hidden",(Yt=j[1])==null?void 0:Yt.hidden)},i:ye,o:ye,d:function(j){j&&se(t),he.d(),ae.d(),W&&W.d(),e[21](null),Q=!1,ze(J)}};return ee("SvelteRegisterBlock",{block:ve,id:$a.name,type:"component",source:"",ctx:e}),ve}const t5=e=>{e.stopPropagation()};function n5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("PinnedTreeWindow",r,[]);let{pinnedTree:s=null}=t,{pinnedTreeStore:a=null}=t,{favoritesStore:o=null}=t,u=null,l=!1,c=null,f=!1,h=!1;localStorage.getItem("initSwitchChecked")==="true"&&(h=!0),Le(()=>{n(7,l=!0)}),ji(()=>{c==null||c.pinnedTreeStoreUnsubscriber(),c==null||c.favoritesStoreUnsubscriber()});const p=()=>{n(1,c)},g=()=>{n(8,f=!0),u&&s&&a&&o&&n(1,c=new Cc({component:u,pinnedTree:s,pinnedTreeStore:a,favoritesStore:o,pinnedTreeWindowUpdated:p,initSwitchChecked:h}))},d=_=>{_.stopPropagation(),o==null||o.update(C=>C)},m=["pinnedTree","pinnedTreeStore","favoritesStore"];Object.keys(t).forEach(_=>{!~m.indexOf(_)&&_.slice(0,2)!=="$$"&&_!=="slot"&&console.warn(`<PinnedTreeWindow> was created with unknown prop '${_}'`)});const y=_=>c==null?void 0:c.heartClicked(_),x=_=>c==null?void 0:c.cancelEvent(_),v=_=>d(_);function S(){c.pinnedTree.note=this.value,n(1,c)}const k=_=>c==null?void 0:c.cancelEvent(_),F=_=>c==null?void 0:c.noteClicked(_),I=_=>c==null?void 0:c.closeClicked(_),V=_=>c==null?void 0:c.cancelEvent(_),D=_=>c==null?void 0:c.headerMousedownHandler(_),z=_=>c==null?void 0:c.cancelEvent(_),H=_=>c==null?void 0:c.contentMousedownHandler(_),R=_=>c==null?void 0:c.switchToggled(_);function A(_){et[_?"unshift":"push"](()=>{u=_,n(0,u)})}return e.$$set=_=>{"pinnedTree"in _&&n(4,s=_.pinnedTree),"pinnedTreeStore"in _&&n(5,a=_.pinnedTreeStore),"favoritesStore"in _&&n(6,o=_.favoritesStore)},e.$capture_state=()=>({onMount:Le,onDestroy:ji,PinnedTreeWindow:Cc,iconCloseCircle:Wh,iconHeartCircle:Bs,iconNoteCircle:Oh,iconHeartCircleClicked:zh,iconNoteCircleClicked:Gh,pinnedTree:s,pinnedTreeStore:a,favoritesStore:o,component:u,mounted:l,pinnedTreeWindow:c,initialized:f,initSwitchChecked:h,pinnedTreeWindowUpdated:p,initView:g,noteChanged:d}),e.$inject_state=_=>{"pinnedTree"in _&&n(4,s=_.pinnedTree),"pinnedTreeStore"in _&&n(5,a=_.pinnedTreeStore),"favoritesStore"in _&&n(6,o=_.favoritesStore),"component"in _&&n(0,u=_.component),"mounted"in _&&n(7,l=_.mounted),"pinnedTreeWindow"in _&&n(1,c=_.pinnedTreeWindow),"initialized"in _&&n(8,f=_.initialized),"initSwitchChecked"in _&&n(2,h=_.initSwitchChecked)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&497&&s&&l&&u&&a&&o&&!f&&g()},[u,c,h,d,s,a,o,l,f,y,x,v,S,k,F,I,V,D,z,H,R,A]}class Xh extends wt{constructor(t){super(t);mt(this,t,n5,$a,it,{pinnedTree:4,pinnedTreeStore:5,favoritesStore:6}),ee("SvelteRegisterComponent",{component:this,tagName:"PinnedTreeWindow_1",options:t,id:$a.name})}get pinnedTree(){throw new Error("<PinnedTreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTree(t){throw new Error("<PinnedTreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<PinnedTreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<PinnedTreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get favoritesStore(){throw new Error("<PinnedTreeWindow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<PinnedTreeWindow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var _s,qh;class Vc{constructor({favTree:t,component:n,textAreaNode:r,favoritesStore:i,pinnedTreeStore:s}){ge(this,_s);N(this,"favTree");N(this,"textAreaNode");N(this,"favoritesStore");N(this,"favoritesStoreValue");N(this,"favoritesStoreUnsubscriber");N(this,"pinnedTreeStore");N(this,"pinnedTreeStoreValue");N(this,"PinnedTreeStoreValueUnsubscriber");N(this,"svg");N(this,"padding");N(this,"width");N(this,"height");N(this,"adjustTextAreaHeight",async()=>{await Po(),this.textAreaNode.style.removeProperty("height"),this.textAreaNode.style.height=`${this.textAreaNode.scrollHeight}px`});N(this,"noteChanged",t=>{t.stopPropagation(),this.favTree.pinnedTreeUpdated(),this.adjustTextAreaHeight()});N(this,"deleteClicked",t=>{t.preventDefault(),t.stopPropagation();let n=-1;for(let a=0;a<this.pinnedTreeStoreValue.pinnedTrees.length;a++)if(this.pinnedTreeStoreValue.pinnedTrees[a].treeID===this.favTree.pinnedTree.treeID){n=a;break}const r=this.pinnedTreeStoreValue.pinnedTrees[n];r.isPinned?r.isFav=!1:this.pinnedTreeStoreValue.pinnedTrees.splice(n,1),this.pinnedTreeStore.set(this.pinnedTreeStoreValue);const s=[...this.favoritesStoreValue.favTrees.map(a=>a.pinnedTree.treeID)].indexOf(this.favTree.pinnedTree.treeID);s>-1&&this.favoritesStoreValue.favTrees.splice(s,1),this.favoritesStore.set(this.favoritesStoreValue)});N(this,"thumbnailClicked",t=>{t.preventDefault(),t.stopPropagation();for(let n=0;n<this.pinnedTreeStoreValue.pinnedTrees.length;n++){const r=this.pinnedTreeStoreValue.pinnedTrees[n];if(r.treeID===this.favTree.pinnedTree.treeID){if(r.isPinned)r.jiggle();else{const i=this.svg.node().getBoundingClientRect(),s={x:i.left,y:i.top,width:i.width,height:i.height};r.startPos=s,r.isPinned=!0,this.pinnedTreeStore.set(this.pinnedTreeStoreValue)}break}}});this.favTree=t,this.textAreaNode=r,this.favoritesStore=i,this.favoritesStoreValue=sr(),this.favoritesStoreUnsubscriber=this.favoritesStore.subscribe(u=>{this.favoritesStoreValue=u,this.favoritesStoreValue.shown&&this.adjustTextAreaHeight()}),this.pinnedTreeStore=s,this.pinnedTreeStoreValue=or(),this.PinnedTreeStoreValueUnsubscriber=this.pinnedTreeStore.subscribe(u=>{this.pinnedTreeStoreValue=u});const a=70,o=70;this.svg=E.select(n).select("svg.tree-svg").attr("width",a).attr("height",o).attr("viewbox",`0 0 ${a} ${o}`).attr("preserveAspectRatio","none"),this.padding={top:10,bottom:10,left:0,right:0},this.width=a-this.padding.left-this.padding.right,this.height=o-this.padding.top-this.padding.bottom,ne(this,_s,qh).call(this)}}_s=new WeakSet,qh=function(){const t=this.svg.append("g").attr("class","content").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),n=E.hierarchy(this.favTree.pinnedTree.tree,c=>c.c),r=4,i=4,s=E.tree().size([this.width,this.height])(n);t.append("g").attr("class","link-group").selectAll("path.link").data(s.links()).join("path").attr("class",c=>`link link-${c.source.data.f[0]}`).attr("id",c=>{const f=c.source.ancestors().length>1?c.source.ancestors()[1].data.f[0]:"r",h=c.source.data.f[0],p=c.target.data.f[0];return c.target.data.f[0]==="+"?`link-${f}-${h}-p`:c.target.data.f[0]==="-"?`link-${f}-${h}-n`:`link-${f}-${h}-${p}`}).attr("d",c=>E.line()([[c.source.x,c.source.y],[c.target.x,c.target.y]]));const u=t.append("g").attr("class","node-group").selectAll("g").data(s.descendants()).join("g").attr("class","node").attr("transform",c=>`translate(${c.x}, ${c.y})`),l=new Set(["-","+"]);u.filter(c=>!l.has(c.data.f[0])).append("circle").attr("r",r).style("fill",c=>this.favTree.getFeatureColor(c.data.f[0])),u.filter(c=>l.has(c.data.f[0])).append("rect").attr("x",-i).attr("y",-i).attr("rx",1).attr("ry",1).attr("width",2*i).attr("height",2*i),u.filter(c=>l.has(c.data.f[0])).append("text").attr("dy",.5).text(c=>c.data.f[0])};var Zh='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="40"/><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="40" d="M80 112h352"/><path d="M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="40"/></svg>';const _t="src/components/favorites-panel/FavoritesRow.svelte";function eo(e){let t,n,r;const i={c:function(){t=M("textarea"),b(t,"class","note-window-input s-Su409VPrjAJA"),b(t,"name","note-input"),b(t,"placeholder","Leave a comment."),T(t,_t,161,8,4362)},m:function(a,o){le(a,t,o),e[10](t),Gi(t,e[0].pinnedTree.note),n||(r=[de(t,"input",e[11],!1,!1,!1),de(t,"input",e[12])],n=!0)},p:function(a,o){o&1&&Gi(t,a[0].pinnedTree.note)},d:function(a){a&&se(t),e[10](null),n=!1,ze(r)}};return ee("SvelteRegisterBlock",{block:i,id:eo.name,type:"if",source:"(161:6) {#if favTree !== null}",ctx:e}),i}function to(e){var H,R;let t,n,r,i,s,a,o,u,l,c=((H=e[3])==null?void 0:H.favTree.pinnedTree.treeID)+"",f,h,p,g,d=((R=e[3])==null?void 0:R.favTree.pinnedTree.treeMetric)+"",m,y,x,v,S,k,F,I,V,D=e[0]!==null&&eo(e);const z={c:function(){t=M("div"),n=M("div"),r=Nn("svg"),i=O(),s=M("div"),a=M("div"),o=M("div"),u=M("span"),l=oe("Tree "),f=oe(c),h=O(),p=M("span"),g=oe("("),m=oe(d),y=oe(")"),x=O(),v=M("div"),S=M("div"),k=O(),F=M("div"),D&&D.c(),b(r,"class","tree-svg s-Su409VPrjAJA"),T(r,_t,138,4,3714),b(n,"class","tree-left s-Su409VPrjAJA"),T(n,_t,137,2,3686),b(u,"class","tree-name s-Su409VPrjAJA"),T(u,_t,144,8,3896),b(p,"class","tree-metric s-Su409VPrjAJA"),T(p,_t,147,8,4001),b(o,"class","tree-info-left s-Su409VPrjAJA"),T(o,_t,143,6,3859),b(S,"class","svg-icon s-Su409VPrjAJA"),T(S,_t,153,8,4159),b(v,"class","tree-info-right s-Su409VPrjAJA"),T(v,_t,152,6,4121),b(a,"class","tree-info s-Su409VPrjAJA"),T(a,_t,142,4,3829),b(F,"class","tree-note s-Su409VPrjAJA"),T(F,_t,159,4,4301),b(s,"class","tree-right s-Su409VPrjAJA"),T(s,_t,141,2,3800),b(t,"class","tree s-Su409VPrjAJA"),T(t,_t,136,0,3643)},l:function(_){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(_,C){le(_,t,C),w(t,n),w(n,r),w(t,i),w(t,s),w(s,a),w(a,o),w(o,u),w(u,l),w(u,f),w(o,h),w(o,p),w(p,g),w(p,m),w(p,y),w(a,x),w(a,v),w(v,S),S.innerHTML=Zh,w(s,k),w(s,F),D&&D.m(F,null),e[13](t),I||(V=[de(r,"click",e[8],!1,!1,!1),de(S,"click",e[9],!1,!1,!1)],I=!0)},p:function(_,[C]){var L,P;C&8&&c!==(c=((L=_[3])==null?void 0:L.favTree.pinnedTree.treeID)+"")&&We(f,c),C&8&&d!==(d=((P=_[3])==null?void 0:P.favTree.pinnedTree.treeMetric)+"")&&We(m,d),_[0]!==null?D?D.p(_,C):(D=eo(_),D.c(),D.m(F,null)):D&&(D.d(1),D=null)},i:ye,o:ye,d:function(_){_&&se(t),D&&D.d(),e[13](null),I=!1,ze(V)}};return ee("SvelteRegisterBlock",{block:z,id:to.name,type:"component",source:"",ctx:e}),z}function r5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("FavoritesRow",r,[]);let{favTree:s=null}=t,{favoritesStore:a=null}=t,{pinnedTreeStore:o=null}=t,u=null,l=null,c=!1,f=!1,h=null;Le(()=>{n(6,c=!0)}),ji(()=>{h==null||h.favoritesStoreUnsubscriber(),h==null||h.PinnedTreeStoreValueUnsubscriber()});const p=()=>{s&&l&&u&&a&&o&&n(3,h=new Vc({favTree:s,component:u,textAreaNode:l,favoritesStore:a,pinnedTreeStore:o})),n(7,f=!0)},g=["favTree","favoritesStore","pinnedTreeStore"];Object.keys(t).forEach(k=>{!~g.indexOf(k)&&k.slice(0,2)!=="$$"&&k!=="slot"&&console.warn(`<FavoritesRow> was created with unknown prop '${k}'`)});const d=k=>h==null?void 0:h.thumbnailClicked(k),m=k=>h==null?void 0:h.deleteClicked(k);function y(k){et[k?"unshift":"push"](()=>{l=k,n(2,l)})}const x=k=>h.noteChanged(k);function v(){s.pinnedTree.note=this.value,n(0,s)}function S(k){et[k?"unshift":"push"](()=>{u=k,n(1,u)})}return e.$$set=k=>{"favTree"in k&&n(0,s=k.favTree),"favoritesStore"in k&&n(4,a=k.favoritesStore),"pinnedTreeStore"in k&&n(5,o=k.pinnedTreeStore)},e.$capture_state=()=>({FavoritesRow:Vc,onMount:Le,onDestroy:ji,deleteIcon:Zh,favTree:s,favoritesStore:a,pinnedTreeStore:o,component:u,textAreaNode:l,mounted:c,initialized:f,favoriteRow:h,initView:p}),e.$inject_state=k=>{"favTree"in k&&n(0,s=k.favTree),"favoritesStore"in k&&n(4,a=k.favoritesStore),"pinnedTreeStore"in k&&n(5,o=k.pinnedTreeStore),"component"in k&&n(1,u=k.component),"textAreaNode"in k&&n(2,l=k.textAreaNode),"mounted"in k&&n(6,c=k.mounted),"initialized"in k&&n(7,f=k.initialized),"favoriteRow"in k&&n(3,h=k.favoriteRow)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&247&&s&&l&&u&&a&&o&&c&&!f&&p()},[s,u,l,h,a,o,c,f,d,m,y,x,v,S]}class Jh extends wt{constructor(t){super(t);mt(this,t,r5,to,it,{favTree:0,favoritesStore:4,pinnedTreeStore:5}),ee("SvelteRegisterComponent",{component:this,tagName:"FavoritesRow_1",options:t,id:to.name})}get favTree(){throw new Error("<FavoritesRow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favTree(t){throw new Error("<FavoritesRow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get favoritesStore(){throw new Error("<FavoritesRow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<FavoritesRow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<FavoritesRow>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<FavoritesRow>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ac=(e,t)=>{e.stopPropagation(),e.preventDefault();const n=JSON.parse(JSON.stringify(t.favTrees)),r=[];n.forEach(i=>{delete i.getFeatureColor,delete i.pinnedTreeUpdated,delete i.pinnedTree.isPinned,delete i.pinnedTree.isFav,delete i.pinnedTree.jiggle,delete i.pinnedTree.x,delete i.pinnedTree.y,delete i.pinnedTree.startPos,r.push(i.pinnedTree)}),x2(r,null,"favorite-trees.json")};function Qh(e,{from:t,to:n},r={}){const i=getComputedStyle(e),s=i.transform==="none"?"":i.transform,[a,o]=i.transformOrigin.split(" ").map(parseFloat),u=t.left+t.width*a/n.width-(n.left+a),l=t.top+t.height*o/n.height-(n.top+o),{delay:c=0,duration:f=p=>Math.sqrt(p)*120,easing:h=$c}=r;return{delay:c,duration:ti(f)?f(Math.sqrt(u*u+l*l)):f,easing:h,css:(p,g)=>{const d=g*u,m=g*l,y=p+g*t.width/n.width,x=p+g*t.height/n.height;return`transform: ${s} translate(${d}px, ${m}px) scale(${y}, ${x});`}}}var Us='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path></svg>',Kh='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z"></path></svg>';const xt="src/components/favorites-panel/FavoritesPanel.svelte";function ki(e,t,n){const r=e.slice();return r[11]=t[n],r}function no(e){let t,n,r,i;const s=[ef,$h],a=[];function o(l,c){return l[5].favTrees.length===0?0:1}t=o(e),n=a[t]=s[t](e);const u={c:function(){n.c(),r=zi()},m:function(c,f){a[t].m(c,f),le(c,r,f),i=!0},p:function(c,f){let h=t;t=o(c),t===h?a[t].p(c,f):(pn(),Ve(a[h],1,1,()=>{a[h]=null}),gn(),n=a[t],n?n.p(c,f):(n=a[t]=s[t](c),n.c()),_e(n,1),n.m(r.parentNode,r))},i:function(c){i||(_e(n),i=!0)},o:function(c){Ve(n),i=!1},d:function(c){a[t].d(c),c&&se(r)}};return ee("SvelteRegisterBlock",{block:u,id:no.name,type:"if",source:"(166:2) {#if initialized}",ctx:e}),u}function $h(e){let t,n=[],r=new Map,i,s=e[5].favTrees;Re(s);const a=u=>u[11].pinnedTree.treeID;qi(e,s,ki,a);for(let u=0;u<s.length;u+=1){let l=ki(e,s,u),c=a(l);r.set(c,n[u]=ro(c,l))}const o={c:function(){t=M("div");for(let l=0;l<n.length;l+=1)n[l].c();b(t,"class","tree-list s-3FYkPUvX2_k2"),T(t,xt,175,6,4710)},m:function(l,c){le(l,t,c);for(let f=0;f<n.length;f+=1)n[f].m(t,null);i=!0},p:function(l,c){if(c&35){s=l[5].favTrees,Re(s),pn();for(let f=0;f<n.length;f+=1)n[f].r();qi(l,s,ki,a),n=Kc(n,c,a,1,l,s,r,t,Kf,ro,null,ki);for(let f=0;f<n.length;f+=1)n[f].a();gn()}},i:function(l){if(!i){for(let c=0;c<s.length;c+=1)_e(n[c]);i=!0}},o:function(l){for(let c=0;c<n.length;c+=1)Ve(n[c]);i=!1},d:function(l){l&&se(t);for(let c=0;c<n.length;c+=1)n[c].d()}};return ee("SvelteRegisterBlock",{block:o,id:$h.name,type:"else",source:"(175:4) {:else}",ctx:e}),o}function ef(e){let t,n,r,i,s;const a={c:function(){t=M("div"),n=M("div"),r=oe("Click the heart button "),i=M("span"),s=oe(" on tree windows to add favorite trees."),b(i,"class","svg-icon s-3FYkPUvX2_k2"),T(i,xt,169,33,4549),b(n,"class","tree-placeholder-text s-3FYkPUvX2_k2"),T(n,xt,168,8,4480),b(t,"class","tree-placeholder s-3FYkPUvX2_k2"),T(t,xt,167,6,4441)},m:function(u,l){le(u,t,l),w(t,n),w(n,r),w(n,i),i.innerHTML=Bs,w(n,s)},p:ye,i:ye,o:ye,d:function(u){u&&se(t)}};return ee("SvelteRegisterBlock",{block:a,id:ef.name,type:"if",source:"(167:4) {#if favoritesStoreValue.favTrees.length === 0}",ctx:e}),a}function ro(e,t){let n,r,i,s,a,o=ye,u;r=new Jh({props:{favTree:t[11],favoritesStore:t[0],pinnedTreeStore:t[1]},$$inline:!0});const l={key:e,first:null,c:function(){n=M("div"),gt(r.$$.fragment),i=O(),b(n,"class","tree-wrapper s-3FYkPUvX2_k2"),T(n,xt,177,10,4828),this.first=n},m:function(f,h){le(f,n,h),lt(r,n,null),w(n,i),u=!0},p:function(f,h){t=f;const p={};h&32&&(p.favTree=t[11]),h&1&&(p.favoritesStore=t[0]),h&2&&(p.pinnedTreeStore=t[1]),r.$set(p)},r:function(){a=n.getBoundingClientRect()},f:function(){Xf(n),o(),Uc(n,a)},a:function(){o(),o=jf(n,a,Qh,{duration:300})},i:function(f){u||(_e(r.$$.fragment,f),s&&s.end(1),u=!0)},o:function(f){Ve(r.$$.fragment,f),s=Ro(n,ri,{duration:200}),u=!1},d:function(f){f&&se(n),ct(r),f&&s&&s.end()}};return ee("SvelteRegisterBlock",{block:l,id:ro.name,type:"each",source:"(177:8) {#each favoritesStoreValue.favTrees as favTree (favTree.pinnedTree.treeID)}",ctx:t}),l}function io(e){let t,n,r,i,s,a,o,u,l,c,f,h,p,g,d=e[3]&&no(e);const m={c:function(){t=M("div"),n=M("div"),r=M("div"),i=M("div"),i.textContent="My Favorite Trees",s=O(),a=M("div"),o=M("div"),u=O(),l=M("div"),c=O(),d&&d.c(),b(i,"class","title s-3FYkPUvX2_k2"),T(i,xt,150,6,3989),b(o,"class","svg-icon s-3FYkPUvX2_k2"),T(o,xt,152,8,4066),b(l,"class","svg-icon close-icon s-3FYkPUvX2_k2"),T(l,xt,158,8,4228),b(a,"class","icons s-3FYkPUvX2_k2"),T(a,xt,151,6,4038),b(r,"class","header-title s-3FYkPUvX2_k2"),T(r,xt,149,4,3956),b(n,"class","header s-3FYkPUvX2_k2"),T(n,xt,148,2,3931),b(t,"class","favorites-panel s-3FYkPUvX2_k2"),b(t,"style",f=`max-height: ${e[2]}px;`),me(t,"shown",e[5].shown),T(t,xt,142,0,3794)},l:function(x){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(x,v){le(x,t,v),w(t,n),w(n,r),w(r,i),w(r,s),w(r,a),w(a,o),o.innerHTML=Kh,w(a,u),w(a,l),l.innerHTML=Us,w(t,c),d&&d.m(t,null),e[9](t),h=!0,p||(g=[de(o,"click",e[8],!1,!1,!1),de(l,"click",e[6],!1,!1,!1)],p=!0)},p:function(x,[v]){x[3]?d?(d.p(x,v),v&8&&_e(d,1)):(d=no(x),d.c(),_e(d,1),d.m(t,null)):d&&(pn(),Ve(d,1,1,()=>{d=null}),gn()),(!h||v&4&&f!==(f=`max-height: ${x[2]}px;`))&&b(t,"style",f),v&32&&me(t,"shown",x[5].shown)},i:function(x){h||(_e(d),h=!0)},o:function(x){Ve(d),h=!1},d:function(x){x&&se(t),d&&d.d(),e[9](null),p=!1,ze(g)}};return ee("SvelteRegisterBlock",{block:m,id:io.name,type:"component",source:"",ctx:e}),m}function i5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("FavoritesPanel",r,[]);let{favoritesStore:s=null}=t,{pinnedTreeStore:a=null}=t,{width:o=650}=t,u=null,l=!1,c=!1,f=sr();Le(()=>{n(7,l=!0)});const h=()=>{s&&a&&s.subscribe(y=>{n(5,f=y)}),n(3,c=!0)},p=y=>{y.stopPropagation(),y.preventDefault(),n(5,f.shown=!1,f),s==null||s.set(f)},g=["favoritesStore","pinnedTreeStore","width"];Object.keys(t).forEach(y=>{!~g.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&console.warn(`<FavoritesPanel> was created with unknown prop '${y}'`)});const d=y=>Ac(y,f);function m(y){et[y?"unshift":"push"](()=>{u=y,n(4,u)})}return e.$$set=y=>{"favoritesStore"in y&&n(0,s=y.favoritesStore),"pinnedTreeStore"in y&&n(1,a=y.pinnedTreeStore),"width"in y&&n(2,o=y.width)},e.$capture_state=()=>({FavoritesRow:Jh,downloadClicked:Ac,getFavoritesStoreDefaultValue:sr,onMount:Le,flip:Qh,fade:ri,closeIcon:Us,downloadIcon:Kh,heartDemoIcon:Bs,favoritesStore:s,pinnedTreeStore:a,width:o,component:u,mounted:l,initialized:c,favoritesStoreValue:f,initView:h,closeClicked:p}),e.$inject_state=y=>{"favoritesStore"in y&&n(0,s=y.favoritesStore),"pinnedTreeStore"in y&&n(1,a=y.pinnedTreeStore),"width"in y&&n(2,o=y.width),"component"in y&&n(4,u=y.component),"mounted"in y&&n(7,l=y.mounted),"initialized"in y&&n(3,c=y.initialized),"favoritesStoreValue"in y&&n(5,f=y.favoritesStoreValue)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&139&&s&&a&&l&&!c&&h()},[s,a,o,c,u,f,p,l,d,m]}class tf extends wt{constructor(t){super(t);mt(this,t,i5,io,it,{favoritesStore:0,pinnedTreeStore:1,width:2}),ee("SvelteRegisterComponent",{component:this,tagName:"FavoritesPanel",options:t,id:io.name})}get favoritesStore(){throw new Error("<FavoritesPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set favoritesStore(t){throw new Error("<FavoritesPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pinnedTreeStore(){throw new Error("<FavoritesPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pinnedTreeStore(t){throw new Error("<FavoritesPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<FavoritesPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(t){throw new Error("<FavoritesPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ti=E.format(",.3~f"),pt=45,Mi="slider-left-thumb",Ci="slider-right-thumb",Mr=268,Cr=16,Xe=8,Yn={default:6,original:6*1.8};var xs,nf,ks,rf,Ts,sf,ln,Un,Kr,so,nr,Wi,rr,Oi,Ms,af,Cs,of,cn,jn,$r,ao,Vs,lf,As,cf,Ds,uf,Ls,hf,Ns,ff,Hs,df,Fs,pf,Ps,gf,ei,oo;class Dc{constructor(t,n,r,i){ge(this,xs);ge(this,ks);ge(this,Ts);ge(this,ln);ge(this,Kr);ge(this,nr);ge(this,rr);ge(this,Ms);ge(this,Cs);ge(this,cn);ge(this,$r);ge(this,Vs);ge(this,As);ge(this,Ds);ge(this,Ls);ge(this,Ns);ge(this,Hs);ge(this,Fs);ge(this,Ps);ge(this,ei);N(this,"component");N(this,"accuracyRow");N(this,"accuracySVG",null);N(this,"minSampleRow");N(this,"minSampleSVG",null);N(this,"heightRow");N(this,"heightSVG",null);N(this,"data");N(this,"treeMapMap");N(this,"accuracyDensities");N(this,"heightDensities");N(this,"minSampleDensities");N(this,"accuracyXScale");N(this,"accuracyYScale");N(this,"densityClip");N(this,"minSampleXScale");N(this,"minSampleYScale");N(this,"minSampleDensityClip");N(this,"heightXScale");N(this,"heightYScale");N(this,"searchStore");N(this,"searchStoreValue");N(this,"curAccuracyLow");N(this,"curAccuracyHigh");N(this,"accuracyLow");N(this,"accuracyHigh");N(this,"curMinSampleLow");N(this,"curMinSampleHigh");N(this,"minSampleLow");N(this,"minSampleHigh");N(this,"searchUpdated");N(this,"refreshAccuracy",()=>{ne(this,ln,Un).call(this,"slider-left-thumb",this.accuracyLow),ne(this,ln,Un).call(this,"slider-right-thumb",this.accuracyHigh)});N(this,"refreshMinSample",()=>{ne(this,cn,jn).call(this,"slider-left-thumb",this.minSampleLow),ne(this,cn,jn).call(this,"slider-right-thumb",this.minSampleHigh)});N(this,"refreshHeight",()=>{var t;for(const n of this.heightXScale.domain()){const r=E.select(this.component).select(`#height-checkbox-${n}`);r.property("checked")||((t=this.heightSVG)==null||t.select(`#bar-${n}`).classed("selected",!0),r.property("checked",!0),this.searchStoreValue.curHeightRange.add(n))}this.searchStore.set(this.searchStoreValue)});N(this,"refreshDepth",t=>{const n=E.select(this.component).select(`#level-row-${t} .level-content`),r=this.searchStoreValue.curDepthFeatures.get(t);if(r===void 0){console.warn(`Unknown depth ${t}`);return}for(const i of this.searchStoreValue.featureOrder){const s=n.select(`#depth-check-box-label-${t}-${i}`);s.property("checked")||(s.property("checked",!0),r.add(i))}this.searchStoreValue.curDepthFeatures.set(t,r),this.searchStore.set(this.searchStoreValue)});N(this,"refreshAllFeatures",()=>{const t=E.select(this.component).select("#level-row-0 .level-content"),n=this.searchStoreValue.curAllFeatures;for(const r of this.searchStoreValue.featureOrder){const i=t.select(`#depth-check-box-label-0-${r}`);i.property("checked")||(i.property("checked",!0),n.add(r))}this.searchStoreValue.curAllFeatures=n,this.searchStore.set(this.searchStoreValue)});N(this,"updatePlots",(t,n=!1)=>{var k,F,I;const r=[],i=[],s=new Map;if(this.searchStoreValue.treeHeightMap)for(const[V,D]of this.searchStoreValue.treeHeightMap)s.set(V,0);let a=1;this.searchStoreValue.treeHeightMap&&(a=this.searchStoreValue.treeHeightMap.size);const o=E.transition("updatePlot").duration(500);for(const V in this.data.treeMap){const D=parseInt(V);if(t.allFeature.has(D)&&t.depth.has(D)&&t.height.has(D)&&t.minSample.has(D)&&r.push(this.data.treeMap[V][2]),t.allFeature.has(D)&&t.depth.has(D)&&t.height.has(D)&&t.accuracy.has(D)&&this.searchStoreValue.treeMinSampleMap!==null&&i.push(this.searchStoreValue.treeMinSampleMap.get(D)),t.allFeature.has(D)&&t.depth.has(D)&&t.minSample.has(D)&&t.accuracy.has(D)&&this.searchStoreValue.treeHeightMap!==null){const z=this.searchStoreValue.treeHeightMap.get(D),H=s.get(z);s.set(z,H+1)}}const u=50,l=E.bin().thresholds(u),c=l(r),f=[];if(c.forEach(V=>{f.push({x:V.x0===void 0?0:V.x0,y:V.length/a})}),f.length>2){const V=f[1].x-f[0].x;f.unshift({x:f[0].x-V,y:0}),f.push({x:f.slice(-1)[0].x+V,y:0})}const h=[];if(l(i).forEach(V=>{h.push({x:V.x0===void 0?0:V.x0,y:V.length/a})}),h.length>2){const V=h[1].x-h[0].x;h.unshift({x:Math.max(0,h[0].x-V),y:0}),h.push({x:h.slice(-1)[0].x+V,y:0})}const g=[];s.forEach((V,D)=>{g.push({x:D,y:V/a})}),g.sort((V,D)=>V.x-D.x);const d=(k=this.accuracySVG)==null?void 0:k.select("g.hist-group"),m=E.line().curve(E.curveBasis).x(V=>this.accuracyXScale(V.x)).y(V=>this.accuracyYScale(V.y));n?(d==null||d.select("path.area-path").datum(f).transition(o).attr("d",m),d==null||d.select("path.area-path.selected").datum(f).transition(o).attr("d",m)):(d==null||d.select("path.area-path").datum(f).attr("d",m),d==null||d.select("path.area-path.selected").datum(f).attr("d",m));const y=(F=this.minSampleSVG)==null?void 0:F.select("g.hist-group"),x=E.line().curve(E.curveBasis).x(V=>this.minSampleXScale(V.x)).y(V=>this.minSampleYScale(V.y));n?(y==null||y.select("path.area-path").datum(h).transition(o).attr("d",x),y==null||y.select("path.area-path.selected").datum(h).transition(o).attr("d",x)):(y==null||y.select("path.area-path").datum(h).attr("d",x),y==null||y.select("path.area-path.selected").datum(h).attr("d",x));const v=(I=this.heightSVG)==null?void 0:I.select("g.hist-group"),S=v==null?void 0:v.selectAll("g.bar").data(g);n?(S==null||S.select("rect").transition(o).attr("y",V=>this.heightYScale(V.y)).attr("height",V=>this.heightYScale(0)-this.heightYScale(V.y)),S==null||S.select("text").transition(o).attr("y",V=>this.heightYScale(V.y)-5)):(S==null||S.select("rect").attr("y",V=>this.heightYScale(V.y)).attr("height",V=>this.heightYScale(0)-this.heightYScale(V.y)),S==null||S.select("text").attr("y",V=>this.heightYScale(V.y)-5)),S==null||S.select("tspan").text(V=>`(${E.format(".0%")(V.y)})`),S==null||S.select("title").text(V=>`Height: ${V.x} (${E.format(".4%")(V.y)})`)});this.component=t,this.searchUpdated=r,this.searchStore=i,this.searchStoreValue=ar(),this.searchStore.subscribe(a=>{this.searchStoreValue=a,this.searchUpdated()}),this.accuracyRow=E.select(t).select(".accuracy-row"),this.minSampleRow=E.select(t).select(".min-sample-row"),this.heightRow=E.select(t).select(".height-row"),this.curAccuracyLow=0,this.curAccuracyHigh=1,this.accuracyLow=0,this.accuracyHigh=1,this.curMinSampleLow=0,this.curMinSampleHigh=1,this.minSampleLow=0,this.minSampleHigh=1,this.data=n,this.treeMapMap=new Map,Object.keys(n.treeMap).forEach(a=>{this.treeMapMap.set(+a,n.treeMap[+a])});const s=ne(this,xs,nf).call(this);this.accuracyDensities=s.accuracyDensities,this.heightDensities=s.heightDensities,this.minSampleDensities=s.minSampleDensities,this.accuracyXScale=E.scaleLinear(),this.accuracyYScale=E.scaleLinear(),this.densityClip=null,this.accuracySVG=ne(this,ks,rf).call(this),ne(this,Ts,sf).call(this),this.minSampleXScale=E.scaleLinear(),this.minSampleYScale=E.scaleLinear(),this.minSampleDensityClip=null,this.minSampleSVG=ne(this,Ms,af).call(this),ne(this,Cs,of).call(this),this.heightXScale=E.scaleBand(),this.heightYScale=E.scaleLinear(),this.heightSVG=ne(this,Ds,uf).call(this),ne(this,Ls,hf).call(this),ne(this,Hs,df).call(this),this.searchStoreValue.updatePlots=(a,o)=>{this.updatePlots(a,o)},this.searchStore.set(this.searchStoreValue)}}xs=new WeakSet,nf=function(){const t=[];for(const v in this.data.treeMap)t.push(this.data.treeMap[v][2]);const n=t.length,r=50,s=E.bin().thresholds(r)(t),a=[];s.forEach(v=>{a.push({x:v.x0===void 0?0:v.x0,y:v.length/n})});const o=a[1].x-a[0].x;a.unshift({x:a[0].x-o,y:0}),a.push({x:a.slice(-1)[0].x+o,y:0}),this.curAccuracyLow=a[0].x,this.curAccuracyHigh=a.slice(-1)[0].x,this.accuracyLow=this.curAccuracyLow,this.accuracyHigh=this.curAccuracyHigh;const u=new Map;E.hierarchy(this.data.trie,v=>v.c).eachBefore(v=>{if(v.data.t!==void 0){const S=v.data.t;u.has(S)?u.set(S,Math.max(u.get(S),v.depth)):u.set(S,v.depth)}});const c=new Map,f=new Map,h=[];for(const[v,S]of this.treeMapMap){const k=new Map,F=E.hierarchy(S[0],V=>V.c);let I=1/0;F.each(V=>{V.data.f[0]!=="+"&&V.data.f[0]!=="-"?k.has(V.depth+1)?k.get(V.depth+1).add(parseInt(V.data.f[0])):k.set(V.depth+1,new Set([parseInt(V.data.f[0])])):I=Math.min(I,V.data.f[1])}),c.set(v,k),f.set(v,I),h.push(I)}const p=new Map;Array.from(u.values()).forEach(v=>{p.has(v)?p.set(v,p.get(v)+1):p.set(v,1)});const g=[];p.forEach((v,S)=>{g.push({x:S,y:v/n})}),g.sort((v,S)=>v.x-S.x);const d=50,m=E.bin().thresholds(d)(h),y=[];m.forEach(v=>{y.push({x:v.x0===void 0?0:v.x0,y:v.length/n})});const x=y[1].x-y[0].x;return y.unshift({x:Math.max(0,y[0].x-x),y:0}),y.push({x:y.slice(-1)[0].x+x,y:0}),this.curMinSampleLow=y[0].x,this.curMinSampleHigh=y.slice(-1)[0].x,this.minSampleLow=this.curMinSampleLow,this.minSampleHigh=this.curMinSampleHigh,this.searchStoreValue.treeHeightMap=u,this.searchStoreValue.treeMinSampleMap=f,this.searchStoreValue.treeDepthFeaturesMap=c,this.searchStore.set(this.searchStoreValue),{accuracyDensities:a,heightDensities:g,minSampleDensities:y}},ks=new WeakSet,rf=function(){const t=Mr-Cr*2,n=30,r=15,i=pt+r+n,s=this.accuracyRow.select(".svg-accuracy").attr("width",t).attr("height",i),a={top:0,left:Xe,right:Xe,bottom:0,histTop:2},o=t-a.left-a.right;s.append("g").attr("class","border-group").attr("transform",`translate(${0}, ${a.top})`).append("rect").attr("width",t).attr("height",pt-a.top).style("fill","none").style("stroke",Ce.colors["gray-300"]);const u=s.append("g").attr("class","hist-group").attr("transform",`translate(${Xe}, ${a.top})`);this.accuracyXScale=E.scaleLinear().domain([this.accuracyDensities[0].x,this.accuracyDensities.slice(-1)[0].x]).range([0,o]);const l=Math.max(...this.accuracyDensities.map(k=>k.y));this.accuracyYScale=E.scaleLinear().domain([0,l]).range([pt-a.bottom-a.top,a.histTop]);const c=E.line().curve(E.curveBasis).x(k=>this.accuracyXScale(k.x)).y(k=>this.accuracyYScale(k.y)),h=u.append("path").attr("class","area-path").datum(this.accuracyDensities).attr("d",c).clone(!0).classed("selected",!0);this.densityClip=u.append("clipPath").attr("id","accuracy-density-clip").append("rect").style("fill","hsla(100, 50%, 50%, 0.1)").attr("x",this.accuracyXScale(this.curAccuracyLow)).attr("width",this.accuracyXScale(this.curAccuracyHigh)-this.accuracyXScale(this.curAccuracyLow)).attr("height",pt),h.attr("clip-path","url(#accuracy-density-clip)");const p=s.append("g").attr("class","tick-group").attr("transform",`translate(${Xe}, ${pt+r})`),g=p.append("g").attr("class","tick-back-group"),d=p.append("g").attr("class","tick-top-group"),m=30,y=[],x=this.accuracyDensities[1].x-this.accuracyDensities[0].x,v=this.accuracyLow+x,S=this.accuracyHigh;for(let k=0;k<=m;k++)y.push(v+(S-v)*k/m);return d.selectAll("g.tick").data(y).join("g").attr("class","tick").attr("transform",k=>`translate(${this.accuracyXScale(k)}, 0)`).append("line").attr("y2",Yn.default),ne(this,rr,Oi).call(this),g.append("text").attr("class","label-min-value").attr("x",-4).attr("y",Yn.default*2.2).style("text-anchor","start").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",Ce.colors["gray-500"]).text(Ti(this.accuracyLow)),g.append("text").attr("class","label-max-value").attr("x",o+4).attr("y",Yn.default*2.2).style("text-anchor","end").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",Ce.colors["gray-500"]).text(Ti(this.accuracyHigh)),s},Ts=new WeakSet,sf=function(){ne(this,ln,Un).call(this,Mi,this.curAccuracyLow),ne(this,ln,Un).call(this,Ci,this.curAccuracyHigh),this.accuracyRow.select(`#${Mi}`).on("mousedown",t=>ne(this,Kr,so).call(this,t)),this.accuracyRow.select(`#${Ci}`).on("mousedown",t=>ne(this,Kr,so).call(this,t)),ne(this,nr,Wi).call(this)},ln=new WeakSet,Un=function(t,n){switch(n=Math.min(Math.max(n,this.accuracyLow),this.accuracyHigh),t){case"slider-left-thumb":n=Math.min(this.curAccuracyHigh,n);break;case"slider-right-thumb":n=Math.max(this.curAccuracyLow,n);break;default:console.warn("Unknown thumb type in moveThumb()");break}const r=this.accuracyRow.select(`#${t}`).attr("data-curValue",n),i=Mr-2*Cr-2*Xe;let s=(n-this.accuracyLow)/(this.accuracyHigh-this.accuracyLow)*i;switch(t){case"slider-left-thumb":s-=Xe,this.curAccuracyLow=n,this.searchStoreValue.curAccuracyLow=this.curAccuracyLow;break;case"slider-right-thumb":this.curAccuracyHigh=n,this.searchStoreValue.curAccuracyHigh=this.curAccuracyHigh;break;default:console.warn("Unknown thumb type in moveThumb()");break}this.searchStore.set(this.searchStoreValue),r.style("left",`${s}px`),ne(this,nr,Wi).call(this),ne(this,rr,Oi).call(this),this.searchUpdated()},Kr=new WeakSet,so=function(t){t.preventDefault(),t.stopPropagation();const n=t.target;if(n===null||!n.id.includes("thumb"))return;const r=n.parentNode,i=r.getBoundingClientRect().width;n.focus();const s=o=>{o.preventDefault(),o.stopPropagation();const u=o.pageX-r.getBoundingClientRect().x,l=this.accuracyLow+(this.accuracyHigh-this.accuracyLow)*u/i;ne(this,ln,Un).call(this,n.id,l)},a=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a),document.body.style.cursor="default",n.blur()};document.addEventListener("mousemove",s),document.addEventListener("mouseup",a),document.body.style.cursor="grabbing"},nr=new WeakSet,Wi=function(){const t=this.accuracyRow.select("#slider-left-thumb"),n=this.accuracyRow.select("#slider-right-thumb"),r=parseFloat(t.style("left")),s=parseFloat(n.style("left"))-r;this.accuracyRow.select(".track .range-track").style("left",`${r+Xe}px`).style("width",`${s}px`),this.densityClip!==null&&this.densityClip.attr("x",this.accuracyXScale(this.curAccuracyLow)).attr("width",this.accuracyXScale(this.curAccuracyHigh)-this.accuracyXScale(this.curAccuracyLow))},rr=new WeakSet,Oi=function(){if(this.accuracySVG===null)return;const t=this.accuracySVG.select("g.tick-top-group").selectAll("g.tick");t.filter(n=>n>=this.curAccuracyLow&&n<=this.curAccuracyHigh).classed("out-range",!1),t.filter(n=>n<this.curAccuracyLow||n>this.curAccuracyHigh).classed("out-range",!0),this.curAccuracyHigh===this.curAccuracyLow&&this.accuracySVG.select("g.tick-top-group").selectAll("g.tick").classed("out-range",!0)},Ms=new WeakSet,af=function(){const t=Mr-Cr*2,n=30,r=15,i=pt+r+n,s=this.minSampleRow.select(".svg-min-sample").attr("width",t).attr("height",i),a={top:0,left:Xe,right:Xe,bottom:0,histTop:2},o=t-a.left-a.right;s.append("g").attr("class","border-group").attr("transform",`translate(${0}, ${a.top})`).append("rect").attr("width",t).attr("height",pt-a.top).style("fill","none").style("stroke",Ce.colors["gray-300"]);const u=s.append("g").attr("class","hist-group").attr("transform",`translate(${Xe}, ${a.top})`);this.minSampleXScale=E.scaleLinear().domain([this.minSampleDensities[0].x,this.minSampleDensities.slice(-1)[0].x]).range([0,o]);const l=Math.max(...this.minSampleDensities.map(k=>k.y));this.minSampleYScale=E.scaleLinear().domain([0,l]).range([pt-a.bottom-a.top,a.histTop]);const c=E.line().curve(E.curveBasis).x(k=>this.minSampleXScale(k.x)).y(k=>this.minSampleYScale(k.y)),h=u.append("path").attr("class","area-path").datum(this.minSampleDensities).attr("d",c).clone(!0).classed("selected",!0);this.minSampleDensityClip=u.append("clipPath").attr("id","min-sample-density-clip").append("rect").style("fill","hsla(100, 50%, 50%, 0.1)").attr("x",this.minSampleXScale(this.curMinSampleLow)).attr("width",this.minSampleXScale(this.curMinSampleHigh)-this.minSampleXScale(this.curMinSampleLow)).attr("height",pt),h.attr("clip-path","url(#min-sample-density-clip)");const p=s.append("g").attr("class","tick-group").attr("transform",`translate(${Xe}, ${pt+r})`),g=p.append("g").attr("class","tick-back-group"),d=p.append("g").attr("class","tick-top-group"),m=30,y=[],x=this.minSampleDensities[1].x-this.minSampleDensities[0].x,v=this.minSampleLow+x,S=this.minSampleHigh;for(let k=0;k<=m;k++)y.push(v+(S-v)*k/m);return d.selectAll("g.tick").data(y).join("g").attr("class","tick").attr("transform",k=>`translate(${this.minSampleXScale(k)}, 0)`).append("line").attr("y2",Yn.default),ne(this,rr,Oi).call(this),g.append("text").attr("class","label-min-value").attr("x",-4).attr("y",Yn.default*2.2).style("text-anchor","start").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",Ce.colors["gray-500"]).text(Ti(this.minSampleLow)),g.append("text").attr("class","label-max-value").attr("x",o+4).attr("y",Yn.default*2.2).style("text-anchor","end").style("dominant-baseline","hanging").style("font-size","0.9em").style("fill",Ce.colors["gray-500"]).text(Ti(this.minSampleHigh)),s},Cs=new WeakSet,of=function(){ne(this,cn,jn).call(this,Mi,this.curMinSampleLow),ne(this,cn,jn).call(this,Ci,this.curMinSampleHigh),this.minSampleRow.select(`#${Mi}`).on("mousedown",t=>ne(this,$r,ao).call(this,t)),this.minSampleRow.select(`#${Ci}`).on("mousedown",t=>ne(this,$r,ao).call(this,t)),ne(this,nr,Wi).call(this)},cn=new WeakSet,jn=function(t,n){switch(n=Math.min(Math.max(n,this.minSampleLow),this.minSampleHigh),t){case"slider-left-thumb":n=Math.min(this.curMinSampleHigh,n);break;case"slider-right-thumb":n=Math.max(this.curMinSampleLow,n);break;default:console.warn("Unknown thumb type in moveThumb()");break}const r=this.minSampleRow.select(`#${t}`).attr("data-curValue",n),i=Mr-2*Cr-2*Xe;let s=(n-this.minSampleLow)/(this.minSampleHigh-this.minSampleLow)*i;switch(t){case"slider-left-thumb":s-=Xe,this.curMinSampleLow=n,this.searchStoreValue.curMinSampleLow=this.curMinSampleLow;break;case"slider-right-thumb":this.curMinSampleHigh=n,this.searchStoreValue.curMinSampleHigh=this.curMinSampleHigh;break;default:console.warn("Unknown thumb type in moveThumb()");break}this.searchStore.set(this.searchStoreValue),r.style("left",`${s}px`),ne(this,Vs,lf).call(this),ne(this,As,cf).call(this),this.searchUpdated()},$r=new WeakSet,ao=function(t){t.preventDefault(),t.stopPropagation();const n=t.target;if(n===null||!n.id.includes("thumb"))return;const r=n.parentNode,i=r.getBoundingClientRect().width;n.focus();const s=o=>{o.preventDefault(),o.stopPropagation();const u=o.pageX-r.getBoundingClientRect().x;let l=this.minSampleLow+(this.minSampleHigh-this.minSampleLow)*u/i;l=fr(l,0),ne(this,cn,jn).call(this,n.id,l)},a=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a),document.body.style.cursor="default",n.blur()};document.addEventListener("mousemove",s),document.addEventListener("mouseup",a),document.body.style.cursor="grabbing"},Vs=new WeakSet,lf=function(){const t=this.minSampleRow.select("#slider-left-thumb"),n=this.minSampleRow.select("#slider-right-thumb"),r=parseFloat(t.style("left")),s=parseFloat(n.style("left"))-r;this.minSampleRow.select(".track .range-track").style("left",`${r+Xe}px`).style("width",`${s}px`),this.minSampleDensityClip!==null&&this.minSampleDensityClip.attr("x",this.minSampleXScale(this.curMinSampleLow)).attr("width",this.minSampleXScale(this.curMinSampleHigh)-this.minSampleXScale(this.curMinSampleLow))},As=new WeakSet,cf=function(){if(this.minSampleSVG===null)return;const t=this.minSampleSVG.select("g.tick-top-group").selectAll("g.tick");t.filter(n=>n>=this.curMinSampleLow&&n<=this.curMinSampleHigh).classed("out-range",!1),t.filter(n=>n<this.curMinSampleLow||n>this.curMinSampleHigh).classed("out-range",!0),this.curMinSampleHigh===this.curMinSampleLow&&this.minSampleSVG.select("g.tick-top-group").selectAll("g.tick").classed("out-range",!0)},Ds=new WeakSet,uf=function(){const t=Mr-Cr*2,n=0,i=pt+0+n,s=this.heightRow.select(".svg-height").attr("width",t).attr("height",i),a={top:0,left:Xe,right:Xe,bottom:0,histTop:20},o=t-a.left-a.right;s.append("g").attr("class","border-group").attr("transform",`translate(${0}, ${a.top})`).append("rect").attr("width",t).attr("height",pt-a.top).style("fill","none").style("stroke",Ce.colors["gray-300"]);const u=s.append("g").attr("class","hist-group").attr("transform",`translate(${Xe}, ${a.top})`);this.heightXScale=E.scaleBand().domain(this.heightDensities.map(h=>h.x)).range([0,o]).paddingInner(.35);const l=Math.max(...this.heightDensities.map(h=>h.y));this.heightYScale=E.scaleLinear().domain([0,l]).range([pt-a.bottom-a.top,a.histTop]);const c=u.selectAll("g.bar").data(this.heightDensities).join("g").attr("class","bar selected").attr("id",h=>`bar-${h.x}`).attr("transform",h=>`translate(${this.heightXScale(h.x)}, ${0})`);return c.append("rect").attr("x",0).attr("y",h=>this.heightYScale(h.y)).attr("width",this.heightXScale.bandwidth()).attr("height",h=>this.heightYScale(0)-this.heightYScale(h.y)),c.append("text").attr("x",this.heightXScale.bandwidth()/2).attr("y",h=>this.heightYScale(h.y)-5).append("tspan").text(h=>`(${E.format(".0%")(h.y)})`),c.append("title").text(h=>`Height: ${h.x} (${E.format(".4%")(h.y)})`),this.searchStoreValue.curHeightRange=new Set(this.heightXScale.domain()),this.searchStore.set(this.searchStoreValue),s},Ls=new WeakSet,hf=function(){const t=E.select(this.component).select(".height-checkboxes");this.heightDensities.forEach(n=>{t.append("label").attr("class","height-checkbox-label").attr("for",`height-checkbox-${n.x}`).text(n.x).style("left",`${this.heightXScale(n.x)+this.heightXScale.bandwidth()/2+13}px`),t.append("input").attr("type","checkbox").property("checked",!0).attr("class","height-checkbox").attr("id",`height-checkbox-${n.x}`).style("left",`${this.heightXScale(n.x)+this.heightXScale.bandwidth()/2-4}px`).on("change",i=>ne(this,Ns,ff).call(this,i,n.x))})},Ns=new WeakSet,ff=function(t,n){var i;t.preventDefault();const r=t.target;(i=this.heightSVG)==null||i.select(`#bar-${n}`).classed("selected",r.checked),r.checked?this.searchStoreValue.curHeightRange.add(n):this.searchStoreValue.curHeightRange.delete(n),this.searchStore.set(this.searchStoreValue)},Hs=new WeakSet,df=async function(){await Po();for(const t of this.searchStoreValue.curDepthFeatures.keys())ne(this,ei,oo).call(this,t);ne(this,ei,oo).call(this,0)},Fs=new WeakSet,pf=function(t,n,r){t.preventDefault();const i=t.target,s=this.searchStoreValue.curDepthFeatures.get(n);if(s===void 0){console.error(`Unknown depth ${n}`);return}i.checked?s.add(r):s.delete(r),this.searchStoreValue.curDepthFeatures.set(n,s),this.searchStore.set(this.searchStoreValue)},Ps=new WeakSet,gf=function(t,n){t.preventDefault();const r=t.target,i=this.searchStoreValue.curAllFeatures;r.checked?i.add(n):i.delete(n),this.searchStoreValue.curAllFeatures=i,this.searchStore.set(this.searchStoreValue)},ei=new WeakSet,oo=function(t){var o,u;const n=E.select(this.component).select(`#level-row-${t} .level-content`),r=new Set([]),i=new Set([]);for(const l of this.searchStoreValue.featureOrder){let c=this.searchStoreValue.featureMap.get(l);c===void 0&&(c=["","",""],console.error(`Cannot find feature ${l} in featureMap`)),i.has(c[2])?r.add(c[2]):i.add(c[2])}let s=null,a=null;for(const l of this.searchStoreValue.featureOrder){let c=this.searchStoreValue.featureMap.get(l);c===void 0&&(c=["","",""],console.error(`Cannot find feature ${l} in featureMap`));let f=n;if(s!==null&&c[2]!==a&&(a=null,s=null),r.has(c[2])){if(s===null){const y=n.append("div").attr("class","depth-checkbox-row");y.append("div").attr("class","depth-checkbox-row-title").text(c[2]),s=y.append("div").attr("class","depth-checkbox-row-checkboxes"),a=c[2]}f=s.append("div").attr("class","checkbox-wrapper")}else f=n.append("div").attr("class","depth-checkbox-single-row").append("div").attr("class","checkbox-wrapper");const h=f.append("input").attr("type","checkbox").property("checked",!0).attr("class","depth-checkbox").attr("id",`depth-check-box-label-${t}-${l}`),p=f.append("label").attr("class","depth-checkbox-label").attr("for",`depth-check-box-label-${t}-${l}`);let g=`${c[2]} ${c[1]}`;c[2]===a&&(g=`${c[1]}`),p.append("span").text(g),p.attr("title",t===0?`Show/hide trees using "${c[0]} ${c[1]}"`:`Show/hide trees using "${c[0]} ${c[1]}" at depth ${t}`);let d="initial";const m=(u=(o=this.searchStoreValue).getFeatureColor)==null?void 0:u.call(o,String(l));m!==void 0&&(d=m),h.style("accent-color",d),h.on("change",y=>{t===0?ne(this,Ps,gf).call(this,y,l):ne(this,Fs,pf).call(this,y,t,l)})}};var lo=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 75 131" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-907,-4228)">
        <g transform="matrix(1,0,0,1.4297,0,4061.32)">
            <g transform="matrix(1.93064,0,0,1.35038,-2646,-5771.08)">
                <g id="range-thumb-right">
                    <path d="M1840.41,4360.03L1878.97,4360.03L1878.97,4427.36L1840.41,4403.12L1840.41,4360.03Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,co=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 76 131" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-808,-4228)">
        <g transform="matrix(1,0,0,1.4297,0,4061.32)">
            <g transform="matrix(1.93064,0,0,1.35038,-2744.28,-5771.08)">
                <g id="range-thumb-left">
                    <path d="M1840.41,4360.03L1878.97,4360.03L1878.97,4403.12L1840.41,4427.36L1840.41,4360.03Z"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,ll='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"/></svg>',tr='<svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><path d="M256 48C141.31 48 48 141.32 48 256c0 114.86 93.14 208 208 208 114.69 0 208-93.31 208-208 0-114.87-93.13-208-208-208zm0 313a94 94 0 010-188h4.21l-14.11-14.1a14 14 0 0119.8-19.8l40 40a14 14 0 010 19.8l-40 40a14 14 0 01-19.8-19.8l18-18c-2.38-.1-5.1-.1-8.1-.1a66 66 0 1066 66 14 14 0 0128 0 94.11 94.11 0 01-94 94z"/></svg>';const{Object:s5,console:a5}=Io,$="src/components/search-panel/SearchPanel.svelte";function Lc(e,t,n){const r=e.slice();return r[25]=t[n],r}function uo(e){var x,v;let t,n,r,i,s,a,o,u,l,c,f=e[4].curAllFeatures.size===Object.keys((x=e[0])==null?void 0:x.featureMap).length?"Include all features":`Include ${e[4].curAllFeatures.size} out of ${Object.keys((v=e[0])==null?void 0:v.featureMap).length} features`,h,p,g,d,m;const y={c:function(){t=M("div"),n=M("div"),r=M("span"),r.textContent="Features",i=O(),s=M("div"),a=M("span"),o=O(),u=M("span"),l=O(),c=M("div"),h=oe(f),p=O(),g=M("div"),b(r,"class","s-H0d2FahnGNOH"),T(r,$,622,10,17385),b(a,"class","title-icon refresh-button s-H0d2FahnGNOH"),b(a,"title","Reset the filter"),T(a,$,624,12,17455),b(u,"class","title-icon detail-button s-H0d2FahnGNOH"),b(u,"title","Show details"),b(u,"data-detail","false"),T(u,$,632,12,17706),b(s,"class","title-icons s-H0d2FahnGNOH"),T(s,$,623,10,17417),b(n,"class","row-title s-H0d2FahnGNOH"),T(n,$,621,8,17351),b(c,"class","level-summary s-H0d2FahnGNOH"),T(c,$,642,8,17983),b(g,"class","level-content s-H0d2FahnGNOH"),T(g,$,650,8,18323),b(t,"class","row level-row level-row-all s-H0d2FahnGNOH"),b(t,"id","level-row-0"),me(t,"show-detail",e[5].has(0)),T(t,$,616,6,17209)},m:function(k,F){le(k,t,F),w(t,n),w(n,r),w(n,i),w(n,s),w(s,a),a.innerHTML=tr,w(s,o),w(s,u),u.innerHTML=ll,w(t,l),w(t,c),w(c,h),w(t,p),w(t,g),d||(m=[de(a,"click",e[18],!1,!1,!1),de(u,"click",e[19],!1,!1,!1)],d=!0)},p:function(k,F){var I,V;F&17&&f!==(f=k[4].curAllFeatures.size===Object.keys((I=k[0])==null?void 0:I.featureMap).length?"Include all features":`Include ${k[4].curAllFeatures.size} out of ${Object.keys((V=k[0])==null?void 0:V.featureMap).length} features`)&&We(h,f),F&32&&me(t,"show-detail",k[5].has(0))},d:function(k){k&&se(t),d=!1,ze(m)}};return ee("SvelteRegisterBlock",{block:y,id:uo.name,type:"if",source:"(616:4) {#if data}",ctx:e}),y}function ho(e){var V,D,z,H;let t,n,r,i=`Depth ${e[25]}`,s,a,o,u,l,c,f,h,p=((V=e[4].curDepthFeatures.get(e[25]))==null?void 0:V.size)===Object.keys((D=e[0])==null?void 0:D.featureMap).length?"Include all features":`Include ${(z=e[4].curDepthFeatures.get(e[25]))==null?void 0:z.size} out of ${Object.keys((H=e[0])==null?void 0:H.featureMap).length} features`,g,d,m,y,x,v,S;function k(...R){return e[20](e[25],...R)}function F(...R){return e[21](e[25],...R)}const I={c:function(){t=M("div"),n=M("div"),r=M("span"),s=oe(i),a=O(),o=M("div"),u=M("span"),l=O(),c=M("span"),f=O(),h=M("div"),g=oe(p),d=O(),m=M("div"),y=O(),b(r,"class","s-H0d2FahnGNOH"),T(r,$,661,10,18625),b(u,"class","title-icon refresh-button s-H0d2FahnGNOH"),b(u,"title","Reset the filter"),T(u,$,663,12,18705),b(c,"class","title-icon detail-button s-H0d2FahnGNOH"),b(c,"title","Show details"),b(c,"data-detail","false"),T(c,$,671,12,18957),b(o,"class","title-icons s-H0d2FahnGNOH"),T(o,$,662,10,18667),b(n,"class","row-title s-H0d2FahnGNOH"),T(n,$,660,8,18591),b(h,"class","level-summary s-H0d2FahnGNOH"),T(h,$,681,8,19238),b(m,"class","level-content s-H0d2FahnGNOH"),T(m,$,689,8,19606),b(t,"class","row level-row s-H0d2FahnGNOH"),b(t,"id",x=`level-row-${e[25]}`),me(t,"show-detail",e[5].has(e[25])),T(t,$,655,6,18450)},m:function(A,_){le(A,t,_),w(t,n),w(n,r),w(r,s),w(n,a),w(n,o),w(o,u),u.innerHTML=tr,w(o,l),w(o,c),c.innerHTML=ll,w(t,f),w(t,h),w(h,g),w(t,d),w(t,m),w(t,y),v||(S=[de(u,"click",k,!1,!1,!1),de(c,"click",F,!1,!1,!1)],v=!0)},p:function(A,_){var C,L,P,G;e=A,_&16&&i!==(i=`Depth ${e[25]}`)&&We(s,i),_&17&&p!==(p=((C=e[4].curDepthFeatures.get(e[25]))==null?void 0:C.size)===Object.keys((L=e[0])==null?void 0:L.featureMap).length?"Include all features":`Include ${(P=e[4].curDepthFeatures.get(e[25]))==null?void 0:P.size} out of ${Object.keys((G=e[0])==null?void 0:G.featureMap).length} features`)&&We(g,p),_&16&&x!==(x=`level-row-${e[25]}`)&&b(t,"id",x),_&48&&me(t,"show-detail",e[5].has(e[25]))},d:function(A){A&&se(t),v=!1,ze(S)}};return ee("SvelteRegisterBlock",{block:I,id:ho.name,type:"each",source:"(655:4) {#each [...searchStoreValue.curDepthFeatures.keys()] as depth}",ctx:e}),I}function fo(e){var Be,wr,Tn,ft;let t,n,r,i,s,a,o,u,l,c,f,h,p,g,d,m,y,x,v,S,k,F,I,V,D,z,H=e[7]((Be=e[3])==null?void 0:Be.curAccuracyLow)+"",R,A,_,C,L,P,G,Y=e[7]((wr=e[3])==null?void 0:wr.curAccuracyHigh)+"",U,q,Z,pe,Q,J,B,te,he,X,K,ae,W,ve,fe,xe,ke,j,ce,Ne,Te,st,Ie=e[8]((Tn=e[3])==null?void 0:Tn.curMinSampleLow)+"",Gt,vt,Ze,Yt,Bt,vn,tn,ut=e[8]((ft=e[3])==null?void 0:ft.curMinSampleHigh)+"",Wn,nn,rn,bn,sn,Ut,Nt,bt,mr,kt,jt,yr,ht,Sn,_n,an,Ht,Ft,Xt,xn,qt,kn,Ae=e[0]&&uo(e),Ye=[...e[4].curDepthFeatures.keys()];Re(Ye);let Me=[];for(let Ee=0;Ee<Ye.length;Ee+=1)Me[Ee]=ho(Lc(e,Ye,Ee));const Tt={c:function(){t=M("div"),n=M("div"),r=M("div"),i=M("div"),i.textContent="Search Trees",s=O(),a=M("div"),o=M("div"),u=O(),l=M("div"),c=M("div"),f=M("div"),h=M("span"),h.textContent="Accuracy",p=O(),g=M("div"),d=M("span"),m=O(),y=M("div"),x=M("div"),v=M("div"),S=M("div"),k=O(),F=M("div"),I=new An,V=O(),D=M("div"),z=M("span"),R=oe(H),A=O(),_=M("div"),C=new An,L=O(),P=M("div"),G=M("span"),U=oe(Y),q=O(),Z=M("div"),pe=Nn("svg"),Q=O(),J=M("div"),B=M("div"),te=M("span"),te.textContent="Minimum Leaf Sample",he=O(),X=M("div"),K=M("span"),ae=O(),W=M("div"),ve=M("div"),fe=M("div"),xe=M("div"),ke=O(),j=M("div"),ce=new An,Ne=O(),Te=M("div"),st=M("span"),Gt=oe(Ie),vt=O(),Ze=M("div"),Yt=new An,Bt=O(),vn=M("div"),tn=M("span"),Wn=oe(ut),nn=O(),rn=M("div"),bn=Nn("svg"),sn=O(),Ut=M("div"),Nt=M("div"),bt=M("span"),bt.textContent="Height",mr=O(),kt=M("div"),jt=M("span"),yr=O(),ht=M("div"),Sn=M("div"),_n=Nn("svg"),an=O(),Ht=M("div"),Ft=O(),Ae&&Ae.c(),Xt=O();for(let we=0;we<Me.length;we+=1)Me[we].c();b(i,"class","title s-H0d2FahnGNOH"),T(i,$,468,6,12924),b(o,"class","svg-icon close-icon s-H0d2FahnGNOH"),T(o,$,470,8,12996),b(a,"class","icons s-H0d2FahnGNOH"),T(a,$,469,6,12968),b(r,"class","header-title s-H0d2FahnGNOH"),T(r,$,467,4,12891),b(n,"class","header s-H0d2FahnGNOH"),T(n,$,466,2,12866),b(h,"class","s-H0d2FahnGNOH"),T(h,$,480,8,13232),b(d,"class","title-icon refresh-button s-H0d2FahnGNOH"),b(d,"title","Reset the filter"),T(d,$,482,10,13298),b(g,"class","title-icons s-H0d2FahnGNOH"),T(g,$,481,8,13262),b(f,"class","row-title s-H0d2FahnGNOH"),T(f,$,479,6,13200),b(S,"class","range-track s-H0d2FahnGNOH"),T(S,$,500,12,13789),I.a=V,b(z,"class","thumb-label-span s-H0d2FahnGNOH"),T(z,$,509,16,14113),b(D,"class","thumb-label thumb-label-left s-H0d2FahnGNOH"),T(D,$,508,14,14054),b(F,"id","slider-left-thumb"),b(F,"tabindex","-1"),Xn(F,"left","0px"),b(F,"class","svg-icon icon-range-thumb-left thumb s-H0d2FahnGNOH"),T(F,$,501,12,13829),C.a=L,b(G,"class","thumb-label-span s-H0d2FahnGNOH"),T(G,$,522,16,14568),b(P,"class","thumb-label thumb-label-right s-H0d2FahnGNOH"),T(P,$,521,14,14508),b(_,"id","slider-right-thumb"),b(_,"tabindex","-1"),Xn(_,"left","0px"),b(_,"class","svg-icon icon-range-thumb-right thumb s-H0d2FahnGNOH"),T(_,$,514,12,14280),b(v,"class","track s-H0d2FahnGNOH"),T(v,$,499,10,13757),b(x,"class","feature-slider s-H0d2FahnGNOH"),T(x,$,492,8,13594),b(pe,"class","svg-accuracy s-H0d2FahnGNOH"),T(pe,$,531,10,14802),b(Z,"class","feature-hist s-H0d2FahnGNOH"),T(Z,$,530,8,14765),b(y,"class","accuracy-content s-H0d2FahnGNOH"),T(y,$,491,6,13555),b(c,"class","row accuracy-row s-H0d2FahnGNOH"),T(c,$,478,4,13163),b(te,"class","s-H0d2FahnGNOH"),T(te,$,538,8,14946),b(K,"class","title-icon refresh-button s-H0d2FahnGNOH"),b(K,"title","Reset the filter"),T(K,$,540,10,15023),b(X,"class","title-icons s-H0d2FahnGNOH"),T(X,$,539,8,14987),b(B,"class","row-title s-H0d2FahnGNOH"),T(B,$,537,6,14914),b(xe,"class","range-track s-H0d2FahnGNOH"),T(xe,$,558,12,15517),ce.a=Ne,b(st,"class","thumb-label-span s-H0d2FahnGNOH"),T(st,$,567,16,15841),b(Te,"class","thumb-label thumb-label-left s-H0d2FahnGNOH"),T(Te,$,566,14,15782),b(j,"id","slider-left-thumb"),b(j,"tabindex","-1"),Xn(j,"left","0px"),b(j,"class","svg-icon icon-range-thumb-left thumb s-H0d2FahnGNOH"),T(j,$,559,12,15557),Yt.a=Bt,b(tn,"class","thumb-label-span s-H0d2FahnGNOH"),T(tn,$,580,16,16303),b(vn,"class","thumb-label thumb-label-right s-H0d2FahnGNOH"),T(vn,$,579,14,16243),b(Ze,"id","slider-right-thumb"),b(Ze,"tabindex","-1"),Xn(Ze,"left","0px"),b(Ze,"class","svg-icon icon-range-thumb-right thumb s-H0d2FahnGNOH"),T(Ze,$,572,12,16015),b(fe,"class","track s-H0d2FahnGNOH"),T(fe,$,557,10,15485),b(ve,"class","feature-slider s-H0d2FahnGNOH"),T(ve,$,550,8,15322),b(bn,"class","svg-min-sample s-H0d2FahnGNOH"),T(bn,$,589,10,16544),b(rn,"class","feature-hist s-H0d2FahnGNOH"),T(rn,$,588,8,16507),b(W,"class","min-sample-content s-H0d2FahnGNOH"),T(W,$,549,6,15281),b(J,"class","row min-sample-row s-H0d2FahnGNOH"),T(J,$,536,4,14875),b(bt,"class","s-H0d2FahnGNOH"),T(bt,$,596,8,16686),b(jt,"class","title-icon refresh-button s-H0d2FahnGNOH"),b(jt,"title","Reset the filter"),T(jt,$,598,10,16750),b(kt,"class","title-icons s-H0d2FahnGNOH"),T(kt,$,597,8,16714),b(Nt,"class","row-title s-H0d2FahnGNOH"),T(Nt,$,595,6,16654),b(_n,"class","svg-height s-H0d2FahnGNOH"),T(_n,$,609,10,17079),b(Sn,"class","feature-hist s-H0d2FahnGNOH"),T(Sn,$,608,8,17042),b(Ht,"class","height-checkboxes s-H0d2FahnGNOH"),T(Ht,$,611,8,17129),b(ht,"class","height-content s-H0d2FahnGNOH"),T(ht,$,607,6,17005),b(Ut,"class","row height-row s-H0d2FahnGNOH"),T(Ut,$,594,4,16619),b(l,"class","search-list s-H0d2FahnGNOH"),T(l,$,477,2,13133),b(t,"class","search-panel s-H0d2FahnGNOH"),b(t,"style",xn=`max-height: ${e[1]}px;`),me(t,"shown",e[4].shown),T(t,$,460,0,12735)},l:function(we){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(we,Pe){le(we,t,Pe),w(t,n),w(n,r),w(r,i),w(r,s),w(r,a),w(a,o),o.innerHTML=Us,w(t,u),w(t,l),w(l,c),w(c,f),w(f,h),w(f,p),w(f,g),w(g,d),d.innerHTML=tr,w(c,m),w(c,y),w(y,x),w(x,v),w(v,S),w(v,k),w(v,F),I.m(lo,F),w(F,V),w(F,D),w(D,z),w(z,R),w(v,A),w(v,_),C.m(co,_),w(_,L),w(_,P),w(P,G),w(G,U),w(y,q),w(y,Z),w(Z,pe),w(l,Q),w(l,J),w(J,B),w(B,te),w(B,he),w(B,X),w(X,K),K.innerHTML=tr,w(J,ae),w(J,W),w(W,ve),w(ve,fe),w(fe,xe),w(fe,ke),w(fe,j),ce.m(lo,j),w(j,Ne),w(j,Te),w(Te,st),w(st,Gt),w(fe,vt),w(fe,Ze),Yt.m(co,Ze),w(Ze,Bt),w(Ze,vn),w(vn,tn),w(tn,Wn),w(W,nn),w(W,rn),w(rn,bn),w(l,sn),w(l,Ut),w(Ut,Nt),w(Nt,bt),w(Nt,mr),w(Nt,kt),w(kt,jt),jt.innerHTML=tr,w(Ut,yr),w(Ut,ht),w(ht,Sn),w(Sn,_n),w(ht,an),w(ht,Ht),w(l,Ft),Ae&&Ae.m(l,null),w(l,Xt);for(let He=0;He<Me.length;He+=1)Me[He].m(l,null);e[22](t),qt||(kn=[de(o,"click",e[9],!1,!1,!1),de(d,"click",e[15],!1,!1,!1),de(x,"click",o5,!1,!1,!1),de(K,"click",e[16],!1,!1,!1),de(ve,"click",l5,!1,!1,!1),de(jt,"click",e[17],!1,!1,!1)],qt=!0)},p:function(we,[Pe]){var He,ui,vr,Se;if(Pe&8&&H!==(H=we[7]((He=we[3])==null?void 0:He.curAccuracyLow)+"")&&We(R,H),Pe&8&&Y!==(Y=we[7]((ui=we[3])==null?void 0:ui.curAccuracyHigh)+"")&&We(U,Y),Pe&8&&Ie!==(Ie=we[8]((vr=we[3])==null?void 0:vr.curMinSampleLow)+"")&&We(Gt,Ie),Pe&8&&ut!==(ut=we[8]((Se=we[3])==null?void 0:Se.curMinSampleHigh)+"")&&We(Wn,ut),we[0]?Ae?Ae.p(we,Pe):(Ae=uo(we),Ae.c(),Ae.m(l,Xt)):Ae&&(Ae.d(1),Ae=null),Pe&3185){Ye=[...we[4].curDepthFeatures.keys()],Re(Ye);let ie;for(ie=0;ie<Ye.length;ie+=1){const Ue=Lc(we,Ye,ie);Me[ie]?Me[ie].p(Ue,Pe):(Me[ie]=ho(Ue),Me[ie].c(),Me[ie].m(l,null))}for(;ie<Me.length;ie+=1)Me[ie].d(1);Me.length=Ye.length}Pe&2&&xn!==(xn=`max-height: ${we[1]}px;`)&&b(t,"style",xn),Pe&16&&me(t,"shown",we[4].shown)},i:ye,o:ye,d:function(we){we&&se(t),Ae&&Ae.d(),un(Me,we),e[22](null),qt=!1,ze(kn)}};return ee("SvelteRegisterBlock",{block:Tt,id:fo.name,type:"component",source:"",ctx:e}),Tt}const o5=e=>{e.preventDefault(),e.stopPropagation()},l5=e=>{e.preventDefault(),e.stopPropagation()};function c5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("SearchPanel",r,[]);let{data:s=null}=t,{searchStore:a=null}=t,{width:o=650}=t,u=null,l=!1,c=!1,f=null,h=ar(),p=new Set([]);var g;(function(C){C[C.Accuracy=0]="Accuracy",C[C.Height=1]="Height",C[C.MinSample=2]="MinSample",C[C.Depth=3]="Depth",C[C.AllFeatures=4]="AllFeatures"})(g||(g={}));const d=E.format(",.3f"),m=E.format("d");Le(()=>{n(13,l=!0)});const y=()=>{n(3,f)},x=C=>{C.stopPropagation(),C.preventDefault(),n(4,h.shown=!1,h),a==null||a.set(h)},v=(C,L)=>{C.stopPropagation(),C.preventDefault();const P=C.currentTarget;P.dataset.detail==="false"?(P.dataset.detail="true",p.add(L)):(P.dataset.detail="false",p.delete(L)),n(5,p)},S=(C,L,P=null)=>{if(f!==null)switch(C.preventDefault(),L){case g.Accuracy:{f.refreshAccuracy();break}case g.MinSample:{f.refreshMinSample();break}case g.Depth:{P!==null&&f.refreshDepth(P);break}case g.AllFeatures:{f.refreshAllFeatures();break}case g.Height:{f.refreshHeight();break}default:console.warn("Unexpected case for refreshClicked()")}},k=()=>{n(14,c=!0),a&&u&&s&&(a.subscribe(C=>{n(4,h=C)}),n(3,f=new Dc(u,s,y,a)))},F=["data","searchStore","width"];s5.keys(t).forEach(C=>{!~F.indexOf(C)&&C.slice(0,2)!=="$$"&&C!=="slot"&&a5.warn(`<SearchPanel> was created with unknown prop '${C}'`)});const I=C=>S(C,g.Accuracy),V=C=>S(C,g.MinSample),D=C=>S(C,g.Height),z=C=>S(C,g.AllFeatures),H=C=>v(C,0),R=(C,L)=>S(L,g.Depth,C),A=(C,L)=>v(L,C);function _(C){et[C?"unshift":"push"](()=>{u=C,n(2,u)})}return e.$$set=C=>{"data"in C&&n(0,s=C.data),"searchStore"in C&&n(12,a=C.searchStore),"width"in C&&n(1,o=C.width)},e.$capture_state=()=>({d3:E,getSearchStoreDefaultValue:ar,onMount:Le,SearchPanel:Dc,closeIcon:Us,thumbLeftIcon:lo,thumbRightIcon:co,downIcon:ll,refreshIcon:tr,data:s,searchStore:a,width:o,component:u,mounted:l,initialized:c,searchPanel:f,searchStoreValue:h,depthWithDetails:p,RefreshLocation:g,formatter:d,sampleFormatter:m,searchUpdated:y,closeClicked:x,detailClicked:v,refreshClicked:S,initView:k}),e.$inject_state=C=>{"data"in C&&n(0,s=C.data),"searchStore"in C&&n(12,a=C.searchStore),"width"in C&&n(1,o=C.width),"component"in C&&n(2,u=C.component),"mounted"in C&&n(13,l=C.mounted),"initialized"in C&&n(14,c=C.initialized),"searchPanel"in C&&n(3,f=C.searchPanel),"searchStoreValue"in C&&n(4,h=C.searchStoreValue),"depthWithDetails"in C&&n(5,p=C.depthWithDetails),"RefreshLocation"in C&&n(6,g=C.RefreshLocation)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&28677&&s&&a&&l&&!c&&u&&k()},[s,o,u,f,h,p,g,d,m,x,v,S,a,l,c,I,V,D,z,H,R,A,_]}class mf extends wt{constructor(t){super(t);mt(this,t,c5,fo,it,{data:0,searchStore:12,width:1}),ee("SvelteRegisterComponent",{component:this,tagName:"SearchPanel_1",options:t,id:fo.name})}get data(){throw new Error("<SearchPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<SearchPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get searchStore(){throw new Error("<SearchPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set searchStore(t){throw new Error("<SearchPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<SearchPanel>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(t){throw new Error("<SearchPanel>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}class Nc{constructor(t,n,r,i){N(this,"component");N(this,"inputElem");N(this,"dropzoneUpdated");N(this,"initDataFromDropzone");N(this,"isDragging",!1);N(this,"dragElement",null);N(this,"errorMessage"," ");N(this,"clickHandler",()=>{var t;(t=this.inputElem)==null||t.click()});N(this,"dragEnterHandler",t=>{t.preventDefault(),this.isDragging=!0,this.dragElement=t.target,this.dropzoneUpdated()});N(this,"dragOverHandler",t=>{t.preventDefault()});N(this,"dragLeaveHandler",t=>{t.preventDefault(),this.dragElement===t.target&&(this.isDragging=!1,this.dropzoneUpdated())});N(this,"dropHandler",async t=>{var i;t.preventDefault();let n=null,r=null;(i=t.dataTransfer)!=null&&i.items?t.dataTransfer.items[0].kind==="file"&&(r=t.dataTransfer.items[0].getAsFile(),n=await this.validateFile(r)):(r=t.dataTransfer.files[0],n=await this.validateFile(r)),this.isDragging=!1,this.dropzoneUpdated(),n&&this.initDataFromDropzone(n)});N(this,"inputChanged",async t=>{t.preventDefault();let n=null;const r=t.target.files;if(r!==null){const i=r[0];n=await this.validateFile(i),console.log(n)}!n||this.initDataFromDropzone(n)});N(this,"inputClicked",()=>{});N(this,"readJSON",t=>new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{i.result?n(JSON.parse(i.result)):n(null)},i.onerror=r,i.readAsText(t)}));N(this,"validateFile",async t=>t.type!=="application/json"?(this.errorMessage="It is not a JSON file",this.dropzoneUpdated(),null):await this.readJSON(t));this.component=t,this.inputElem=n,this.dropzoneUpdated=r,this.initDataFromDropzone=i}}var js=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 346 346" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-5570,-6461)">
        <g transform="matrix(1.49616,0,0,1,-2856.48,922)">
            <g id="timbertrek-logo">
                <g transform="matrix(0.660497,0,0,0.988207,1497.7,1465.12)">
                    <circle cx="6434.56" cy="4297.56" r="174.558" style="fill:rgb(66,66,66);"/>
                    <path d="M6434.56,4123C6530.9,4123 6609.12,4201.22 6609.12,4297.56C6609.12,4393.9 6530.9,4472.12 6434.56,4472.12C6338.22,4472.12 6260,4393.9 6260,4297.56C6260,4201.22 6338.22,4123 6434.56,4123ZM6434.56,4131.31C6526.31,4131.31 6600.81,4205.81 6600.81,4297.56C6600.81,4389.31 6526.31,4463.81 6434.56,4463.81C6342.81,4463.81 6268.31,4389.31 6268.31,4297.56C6268.31,4205.81 6342.81,4131.31 6434.56,4131.31Z" style="fill:rgb(123,123,123);"/>
                </g>
                <g transform="matrix(0.628201,0,0,0.939888,2139.91,-523.818)">
                    <path d="M5691.27,6656.44L5660.64,6656.44L5742.98,6526.8L5823.36,6656.44L5792.72,6656.44L5820.76,6721.2L5742.66,6679.85L5663.24,6721.12L5691.27,6656.44ZM5742.89,6571.51L5742.89,6652.51L5790.28,6676.11L5742.89,6571.51Z" style="fill:white;"/>
                </g>
                <g>
                    <g transform="matrix(-0.445586,6.73401e-17,-1.13133e-16,-1.66667,8499.43,14925.7)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                    <g transform="matrix(1.15018e-15,-0.666667,1.11396,4.44089e-15,-410.51,9829)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                    <g transform="matrix(0.445586,3.52496e-15,-6.0106e-15,1.66667,2996,-3501.67)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                    <g transform="matrix(-3.52474e-15,0.666667,-1.11396,-1.33227e-14,11905.9,1595)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:white;"/>
                    </g>
                </g>
                <g transform="matrix(0.668379,0,0,1,1554.3,-396)">
                    <g transform="matrix(-0.61592,-0.255122,0.637806,-1.5398,6551.69,16195.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.471405,-0.471405,1.17851,-1.17851,2670.11,15534.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.255122,-0.61592,1.5398,-0.637806,-662.81,13437.5)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.255122,-0.61592,1.5398,0.637806,-3813.83,6385.69)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.471405,-0.471405,1.17851,1.17851,-3152.2,2504.11)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.61592,-0.255122,0.637806,1.5398,-1055.53,-828.81)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.61592,0.255122,-0.637806,1.5398,5996.31,-3979.83)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.471405,0.471405,-1.17851,1.17851,9877.89,-3318.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(0.255122,0.61592,-1.5398,0.637806,13210.8,-1221.53)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.255122,0.61592,-1.5398,-0.637806,16361.8,5830.31)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.471405,0.471405,-1.17851,-1.17851,15700.2,9711.89)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                    <g transform="matrix(-0.61592,0.255122,-0.637806,-1.5398,13603.5,13044.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);"/>
                    </g>
                </g>
                <g transform="matrix(0.660497,0,0,0.988207,1497.7,1465.12)">
                    <path d="M6434.56,4123C6530.9,4123 6609.12,4201.22 6609.12,4297.56C6609.12,4393.9 6530.9,4472.12 6434.56,4472.12C6338.22,4472.12 6260,4393.9 6260,4297.56C6260,4201.22 6338.22,4123 6434.56,4123ZM6434.56,4135.65C6523.92,4135.65 6596.47,4208.2 6596.47,4297.56C6596.47,4386.92 6523.92,4459.47 6434.56,4459.47C6345.2,4459.47 6272.65,4386.92 6272.65,4297.56C6272.65,4208.2 6345.2,4135.65 6434.56,4135.65Z" style="fill:rgb(128,128,128);"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`;const Kt="src/components/dropzone/Dropzone.svelte";function yf(e){let t;const n={c:function(){t=M("div"),t.textContent="Loading Rashomon set...",b(t,"class","drop-message s-5AsLhRYgdrVb"),T(t,Kt,134,6,3214)},m:function(i,s){le(i,t,s)},d:function(i){i&&se(t)}};return ee("SvelteRegisterBlock",{block:n,id:yf.name,type:"else",source:"(134:4) {:else}",ctx:e}),n}function wf(e){let t,n,r,i,s,a;const o={c:function(){t=M("div"),t.textContent="Drop a Rashomon trie file (.json) here to start",n=O(),r=M("div"),i=M("a"),i.textContent="How to generate this file?",b(t,"class","drop-message s-5AsLhRYgdrVb"),T(t,Kt,118,6,2829),b(i,"href","https://github.com/poloclub/timbertrek#web-demo"),b(i,"target","_blank"),b(i,"class","s-5AsLhRYgdrVb"),T(i,Kt,128,8,3049),b(r,"class","help-message s-5AsLhRYgdrVb"),T(r,Kt,122,6,2932)},m:function(l,c){le(l,t,c),le(l,n,c),le(l,r,c),w(r,i),s||(a=de(r,"click",u5,!1,!1,!1),s=!0)},d:function(l){l&&se(t),l&&se(n),l&&se(r),s=!1,a()}};return ee("SvelteRegisterBlock",{block:o,id:wf.name,type:"if",source:"(118:4) {#if curDataset === 'my own set'}",ctx:e}),o}function po(e){var x;let t,n,r,i,s,a,o=((x=e[4])==null?void 0:x.errorMessage)+"",u,l,c,f,h,p;function g(v,S){return v[1]==="my own set"?wf:yf}let d=g(e),m=d(e);const y={c:function(){var S;t=M("div"),n=M("div"),r=M("div"),i=O(),m.c(),s=O(),a=M("span"),u=oe(o),l=O(),c=M("input"),b(r,"class","svg-icon s-5AsLhRYgdrVb"),T(r,Kt,113,4,2727),b(a,"class","error-message s-5AsLhRYgdrVb"),T(a,Kt,137,4,3285),b(c,"accept","json"),b(c,"type","file"),b(c,"autocomplete","off"),Xn(c,"display","none"),b(c,"class","s-5AsLhRYgdrVb"),T(c,Kt,141,4,3362),b(n,"class","dropzone s-5AsLhRYgdrVb"),me(n,"drag-over",(S=e[4])==null?void 0:S.isDragging),T(n,Kt,104,2,2401),b(t,"class","dropzone-tab s-5AsLhRYgdrVb"),b(t,"style",f=`height: ${e[0]+Ce.layout.toolbarHeight}px;`),T(t,Kt,99,0,2283)},l:function(S){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(S,k){le(S,t,k),w(t,n),w(n,r),r.innerHTML=js,w(n,i),m.m(n,null),w(n,s),w(n,a),w(a,u),w(n,l),w(n,c),e[10](c),e[16](t),h||(p=[de(c,"change",e[8],!1,!1,!1),de(c,"click",e[9],!1,!1,!1),de(n,"click",e[11],!1,!1,!1),de(n,"dragenter",e[12],!1,!1,!1),de(n,"dragover",e[13],!1,!1,!1),de(n,"dragleave",e[14],!1,!1,!1),de(n,"drop",e[15],!1,!1,!1)],h=!0)},p:function(S,[k]){var F,I;d!==(d=g(S))&&(m.d(1),m=d(S),m&&(m.c(),m.m(n,s))),k&16&&o!==(o=((F=S[4])==null?void 0:F.errorMessage)+"")&&We(u,o),k&16&&me(n,"drag-over",(I=S[4])==null?void 0:I.isDragging),k&1&&f!==(f=`height: ${S[0]+Ce.layout.toolbarHeight}px;`)&&b(t,"style",f)},i:ye,o:ye,d:function(S){S&&se(t),m.d(),e[10](null),e[16](null),h=!1,ze(p)}};return ee("SvelteRegisterBlock",{block:y,id:po.name,type:"component",source:"",ctx:e}),y}const u5=e=>{e.stopPropagation()};function h5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("Dropzone",r,[]);let{initDataFromDropzone:s}=t,{width:a=650}=t,{curDataset:o="my own set"}=t,u=null,l=null,c=null,f=!1,h=!1;Le(()=>{n(6,f=!0)});const p=()=>{n(4,c)},g=()=>{f&&u&&l&&(n(4,c=new Nc(u,l,p,s)),n(7,h=!0))},d=["initDataFromDropzone","width","curDataset"];Object.keys(t).forEach(D=>{!~d.indexOf(D)&&D.slice(0,2)!=="$$"&&D!=="slot"&&console.warn(`<Dropzone> was created with unknown prop '${D}'`)});const m=D=>c==null?void 0:c.inputChanged(D),y=D=>c==null?void 0:c.inputClicked();function x(D){et[D?"unshift":"push"](()=>{l=D,n(3,l)})}const v=D=>c==null?void 0:c.clickHandler(),S=D=>c==null?void 0:c.dragEnterHandler(D),k=D=>c==null?void 0:c.dragOverHandler(D),F=D=>c==null?void 0:c.dragLeaveHandler(D),I=D=>c==null?void 0:c.dropHandler(D);function V(D){et[D?"unshift":"push"](()=>{u=D,n(2,u)})}return e.$$set=D=>{"initDataFromDropzone"in D&&n(5,s=D.initDataFromDropzone),"width"in D&&n(0,a=D.width),"curDataset"in D&&n(1,o=D.curDataset)},e.$capture_state=()=>({onMount:Le,Dropzone:Nc,config:Ce,logoIcon:js,initDataFromDropzone:s,width:a,curDataset:o,component:u,inputElem:l,dropzone:c,mounted:f,initialized:h,dropzoneUpdated:p,initView:g}),e.$inject_state=D=>{"initDataFromDropzone"in D&&n(5,s=D.initDataFromDropzone),"width"in D&&n(0,a=D.width),"curDataset"in D&&n(1,o=D.curDataset),"component"in D&&n(2,u=D.component),"inputElem"in D&&n(3,l=D.inputElem),"dropzone"in D&&n(4,c=D.dropzone),"mounted"in D&&n(6,f=D.mounted),"initialized"in D&&n(7,h=D.initialized)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&236&&f&&u&&l&&s&&!h&&g()},[a,o,u,l,c,s,f,h,m,y,x,v,S,k,F,I,V]}class vf extends wt{constructor(t){super(t);mt(this,t,h5,po,it,{initDataFromDropzone:5,width:0,curDataset:1}),ee("SvelteRegisterComponent",{component:this,tagName:"Dropzone_1",options:t,id:po.name});const{ctx:n}=this.$$,r=t.props||{};n[5]===void 0&&!("initDataFromDropzone"in r)&&console.warn("<Dropzone> was created without expected prop 'initDataFromDropzone'")}get initDataFromDropzone(){throw new Error("<Dropzone>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set initDataFromDropzone(t){throw new Error("<Dropzone>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get width(){throw new Error("<Dropzone>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set width(t){throw new Error("<Dropzone>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get curDataset(){throw new Error("<Dropzone>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set curDataset(t){throw new Error("<Dropzone>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var bf='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>',Sf=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 66 82" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(1,0,0,1,-3896,-24)">
        <g transform="matrix(1,0,0,1,-0.831706,0)">
            <g id="icon-file" transform="matrix(1,0,0,0.996062,3887.07,100.115)">
                <path d="M27.49,-23.779C26.644,-23.779 25.944,-24.048 25.391,-24.585C24.837,-25.122 24.561,-25.781 24.561,-26.563C24.561,-27.376 24.837,-28.052 25.391,-28.589C25.944,-29.126 26.644,-29.395 27.49,-29.395L57.129,-29.395C57.975,-29.395 58.675,-29.126 59.228,-28.589C59.782,-28.052 60.059,-27.376 60.059,-26.563C60.059,-25.781 59.782,-25.122 59.228,-24.585C58.675,-24.048 57.975,-23.779 57.129,-23.779L27.49,-23.779ZM27.49,-9.082C26.644,-9.082 25.944,-9.351 25.391,-9.888C24.837,-10.425 24.561,-11.1 24.561,-11.914C24.561,-12.695 24.837,-13.363 25.391,-13.916C25.944,-14.469 26.644,-14.746 27.49,-14.746L57.129,-14.746C57.975,-14.746 58.675,-14.469 59.228,-13.916C59.782,-13.363 60.059,-12.695 60.059,-11.914C60.059,-11.1 59.782,-10.425 59.228,-9.888C58.675,-9.351 57.975,-9.082 57.129,-9.082L27.49,-9.082ZM22.022,5.908L62.5,5.908C66.602,5.908 69.678,4.867 71.729,2.783C73.779,0.7 74.805,-2.409 74.805,-6.543L74.805,-40.43L46.875,-40.43C41.797,-40.43 39.258,-42.969 39.258,-48.047L39.258,-76.416L22.022,-76.416C17.92,-76.416 14.852,-75.374 12.817,-73.291C10.783,-71.208 9.766,-68.099 9.766,-63.965L9.766,-6.543C9.766,-2.376 10.783,0.741 12.817,2.808C14.852,4.875 17.92,5.908 22.022,5.908ZM46.875,-46.143L74.365,-46.143C74.235,-47.054 73.877,-47.957 73.291,-48.853C72.705,-49.748 71.891,-50.716 70.85,-51.758L50.586,-72.461C49.577,-73.503 48.617,-74.325 47.705,-74.927C46.794,-75.529 45.882,-75.911 44.971,-76.074L44.971,-48.047C44.971,-46.777 45.605,-46.143 46.875,-46.143Z" style="fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
</svg>
`;const{Map:f5,Object:d5}=Io,qe="src/components/timber/Timber.svelte";function Vi(e,t,n){const r=e.slice();return r[23]=t[n],r}function _f(e){let t,n,r,i,s,a;n=new yh({props:{favoritesStore:e[9],sunburstStore:e[10],searchStore:e[13],sunburstWidth:e[6]},$$inline:!0}),s=new Ch({props:{data:e[4],initDepthGap:e[2],sunburstStore:e[10],treeWindowStore:e[11],pinnedTreeStore:e[12],searchStore:e[13]},$$inline:!0});const o={c:function(){t=M("div"),gt(n.$$.fragment),r=O(),i=M("div"),gt(s.$$.fragment),b(t,"class","toolbar s-DgMWn4VSIQjZ"),T(t,qe,334,8,9621),b(i,"class","sunburst-wrapper s-DgMWn4VSIQjZ"),T(i,qe,343,8,9810)},m:function(l,c){le(l,t,c),lt(n,t,null),le(l,r,c),le(l,i,c),lt(s,i,null),a=!0},p:function(l,c){const f={};c&64&&(f.sunburstWidth=l[6]),n.$set(f);const h={};c&16&&(h.data=l[4]),c&4&&(h.initDepthGap=l[2]),s.$set(h)},i:function(l){a||(_e(n.$$.fragment,l),_e(s.$$.fragment,l),a=!0)},o:function(l){Ve(n.$$.fragment,l),Ve(s.$$.fragment,l),a=!1},d:function(l){l&&se(t),ct(n),l&&se(r),l&&se(i),ct(s)}};return ee("SvelteRegisterBlock",{block:o,id:_f.name,type:"else",source:"(334:6) {:else}",ctx:e}),o}function xf(e){let t,n;t=new vf({props:{initDataFromDropzone:e[8],width:e[6],curDataset:e[0]},$$inline:!0});const r={c:function(){gt(t.$$.fragment)},m:function(s,a){lt(t,s,a),n=!0},p:function(s,a){const o={};a&64&&(o.width=s[6]),a&1&&(o.curDataset=s[0]),t.$set(o)},i:function(s){n||(_e(t.$$.fragment,s),n=!0)},o:function(s){Ve(t.$$.fragment,s),n=!1},d:function(s){ct(t,s)}};return ee("SvelteRegisterBlock",{block:r,id:xf.name,type:"if",source:"(332:6) {#if data === null}",ctx:e}),r}function go(e){let t,n,r,i;n=new Xh({props:{pinnedTree:e[23],pinnedTreeStore:e[12],favoritesStore:e[9]},$$inline:!0});const s={c:function(){t=M("div"),gt(n.$$.fragment),b(t,"class","pinned-tree-window-wrapper s-DgMWn4VSIQjZ"),T(t,qe,373,6,10546)},m:function(o,u){le(o,t,u),lt(n,t,null),i=!0},p:function(o,u){const l={};u&128&&(l.pinnedTree=o[23]),n.$set(l)},i:function(o){i||(_e(n.$$.fragment,o),r&&r.end(1),i=!0)},o:function(o){Ve(n.$$.fragment,o),r=Ro(t,ri,{duration:100}),i=!1},d:function(o){o&&se(t),ct(n),o&&r&&r.end()}};return ee("SvelteRegisterBlock",{block:s,id:go.name,type:"if",source:"(373:4) {#if pinnedTree.isPinned}",ctx:e}),s}function mo(e,t){let n,r,i,s=t[23].isPinned&&go(t);const a={key:e,first:null,c:function(){n=zi(),s&&s.c(),r=zi(),this.first=n},m:function(u,l){le(u,n,l),s&&s.m(u,l),le(u,r,l),i=!0},p:function(u,l){t=u,t[23].isPinned?s?(s.p(t,l),l&128&&_e(s,1)):(s=go(t),s.c(),_e(s,1),s.m(r.parentNode,r)):s&&(pn(),Ve(s,1,1,()=>{s=null}),gn())},i:function(u){i||(_e(s),i=!0)},o:function(u){Ve(s),i=!1},d:function(u){u&&se(n),s&&s.d(u),u&&se(r)}};return ee("SvelteRegisterBlock",{block:a,id:mo.name,type:"each",source:"(372:2) {#each pinnedTreeStoreValue.pinnedTrees as pinnedTree (pinnedTree.treeID)}",ctx:t}),a}function yo(e){let t,n,r,i,s,a,o,u,l,c,f,h,p,g,d,m,y,x,v,S,k,F,I,V,D,z,H,R,A,_=[],C=new f5,L,P;const G=[xf,_f],Y=[];function U(Q,J){return Q[4]===null?0:1}x=U(e),v=Y[x]=G[x](e),F=new tf({props:{favoritesStore:e[9],pinnedTreeStore:e[12],width:e[6]},$$inline:!0}),D=new mf({props:{data:e[4],searchStore:e[13],width:e[6]},$$inline:!0}),R=new Nh({props:{data:e[4],featureMap:e[5],treeWindowStore:e[11]},$$inline:!0});let q=e[7].pinnedTrees;Re(q);const Z=Q=>Q[23].treeID;qi(e,q,Vi,Z);for(let Q=0;Q<q.length;Q+=1){let J=Vi(e,q,Q),B=Z(J);C.set(B,_[Q]=mo(B,J))}const pe={c:function(){t=M("div"),n=M("div"),r=M("div"),i=M("div"),s=M("div"),a=O(),o=M("div"),u=M("div"),u.textContent="TimberTrek",l=O(),c=M("div"),c.textContent="Curating decision trees that align with human knowledge",f=O(),h=M("div"),p=M("a"),g=O(),d=M("a"),m=O(),y=M("div"),v.c(),S=O(),k=M("div"),gt(F.$$.fragment),I=O(),V=M("div"),gt(D.$$.fragment),H=O(),gt(R.$$.fragment),A=O();for(let J=0;J<_.length;J+=1)_[J].c();L=O(),b(s,"class","svg-icon s-DgMWn4VSIQjZ"),T(s,qe,294,8,8544),b(u,"class","logo-icon s-DgMWn4VSIQjZ"),T(u,qe,298,10,8651),b(c,"class","logo-tag s-DgMWn4VSIQjZ"),b(c,"title","Curating decision trees that align with human knowledge"),me(c,"no-display",e[6]<400),T(c,qe,299,10,8701),b(o,"class","logo-text s-DgMWn4VSIQjZ"),T(o,qe,297,8,8617),b(i,"class","logo s-DgMWn4VSIQjZ"),T(i,qe,293,6,8517),b(p,"class","svg-icon paper-icon s-DgMWn4VSIQjZ"),b(p,"title","Research paper"),b(p,"target","_blank"),b(p,"href","https://github.com/poloclub/timbertrek"),T(p,qe,310,8,9028),b(d,"class","svg-icon s-DgMWn4VSIQjZ"),b(d,"title","Open-source code"),b(d,"target","_blank"),b(d,"href","https://github.com/poloclub/timbertrek"),T(d,qe,319,8,9244),b(h,"class","right-icons s-DgMWn4VSIQjZ"),T(h,qe,309,6,8994),b(r,"class","header s-DgMWn4VSIQjZ"),T(r,qe,292,4,8490),b(y,"class","content s-DgMWn4VSIQjZ"),T(y,qe,330,4,9472),b(k,"class","sidebar s-DgMWn4VSIQjZ"),b(k,"style",e[3]),T(k,qe,356,4,10077),b(V,"class","sidebar s-DgMWn4VSIQjZ"),b(V,"style",e[3]),T(V,qe,364,4,10248),b(n,"class","timbertrek s-DgMWn4VSIQjZ"),b(n,"style",z=`width: ${e[6]}px;`),T(n,qe,291,2,8424),b(t,"class","timbertrek-page s-DgMWn4VSIQjZ"),T(t,qe,290,0,8370)},l:function(J){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(J,B){le(J,t,B),w(t,n),w(n,r),w(r,i),w(i,s),s.innerHTML=js,w(i,a),w(i,o),w(o,u),w(o,l),w(o,c),w(r,f),w(r,h),w(h,p),p.innerHTML=Sf,w(h,g),w(h,d),d.innerHTML=bf,w(n,m),w(n,y),Y[x].m(y,null),w(n,S),w(n,k),lt(F,k,null),w(n,I),w(n,V),lt(D,V,null),w(t,H),lt(R,t,null),w(t,A);for(let te=0;te<_.length;te+=1)_[te].m(t,null);w(t,L),e[19](t),P=!0},p:function(J,[B]){B&64&&me(c,"no-display",J[6]<400);let te=x;x=U(J),x===te?Y[x].p(J,B):(pn(),Ve(Y[te],1,1,()=>{Y[te]=null}),gn(),v=Y[x],v?v.p(J,B):(v=Y[x]=G[x](J),v.c()),_e(v,1),v.m(y,null));const he={};B&64&&(he.width=J[6]),F.$set(he),(!P||B&8)&&b(k,"style",J[3]);const X={};B&16&&(X.data=J[4]),B&64&&(X.width=J[6]),D.$set(X),(!P||B&8)&&b(V,"style",J[3]),(!P||B&64&&z!==(z=`width: ${J[6]}px;`))&&b(n,"style",z);const K={};B&16&&(K.data=J[4]),B&32&&(K.featureMap=J[5]),R.$set(K),B&4736&&(q=J[7].pinnedTrees,Re(q),pn(),qi(J,q,Vi,Z),_=Kc(_,B,Z,1,J,q,C,t,Qc,mo,L,Vi),gn())},i:function(J){if(!P){_e(v),_e(F.$$.fragment,J),_e(D.$$.fragment,J),_e(R.$$.fragment,J);for(let B=0;B<q.length;B+=1)_e(_[B]);P=!0}},o:function(J){Ve(v),Ve(F.$$.fragment,J),Ve(D.$$.fragment,J),Ve(R.$$.fragment,J);for(let B=0;B<_.length;B+=1)Ve(_[B]);P=!1},d:function(J){J&&se(t),Y[x].d(),ct(F),ct(D),ct(R);for(let B=0;B<_.length;B+=1)_[B].d();e[19](null)}};return ee("SvelteRegisterBlock",{block:pe,id:yo.name,type:"component",source:"",ctx:e}),pe}const p5=!1;function g5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("Timber",r,[]);let{notebookMode:s=!1}=t,{curDataset:a="compas"}=t,{timbertrekTransitioning:o=!1}=t,u=null,l=!1,c=!1,f=2,h="",p=null,g=null,d=s?500:650;const m=new Map;m.set("compas","compas-rules-mul_0.05-reg_0.01.json"),m.set("fico","fico-rules-mul_0.05-reg_0.01.json"),m.set("car evaluation","car-rules-mul_0.15-reg_0.015.json"),m.set("my own set","");const y=A=>{n(4,p=A),n(5,g=new Map);for(const[_,C]of Object.entries(p.featureMap))g.set(parseInt(_),C)},x=async A=>{if(A!=="my own dataset"&&(A==="car evaluation"?n(2,f=4):n(2,f=2),m.has(A))){n(16,l=!0);const _=m.get(A),C=await E.json(`/timbertrek/data/${_}`);y(C)}},v=A=>{n(4,p=A),n(5,g=new Map);for(const[_,C]of Object.entries(p.featureMap))g.set(parseInt(_),C)},S=pl(),k=gl(),F=ml(),I=yl(),V=wl();let D=or();I.subscribe(A=>{n(7,D=A)}),Le(()=>{s&&document.addEventListener("timbertrekData",_=>{const C=_,L=C.data;n(6,d=C.width),y(L)});const A=Math.floor((window.innerWidth-d)/2);A<268&&n(3,h=`transform: translateX(calc(100% - ${268-A+5}px))`),n(17,c=!0)});const z=["notebookMode","curDataset","timbertrekTransitioning"];d5.keys(t).forEach(A=>{!~z.indexOf(A)&&A.slice(0,2)!=="$$"&&A!=="slot"&&console.warn(`<Timber> was created with unknown prop '${A}'`)});const H=()=>{localStorage.clear()};function R(A){et[A?"unshift":"push"](()=>{u=A,n(1,u)})}return e.$$set=A=>{"notebookMode"in A&&n(14,s=A.notebookMode),"curDataset"in A&&n(0,a=A.curDataset),"timbertrekTransitioning"in A&&n(15,o=A.timbertrekTransitioning)},e.$capture_state=()=>({onMount:Le,fade:ri,cubicInOut:t0,getFavoritesStore:pl,getSunburstStore:gl,getTreeWindowStore:ml,getPinnedTreeStore:yl,getPinnedTreeStoreDefaultValue:or,getSearchStore:wl,Toolbar:yh,Sunburst:Ch,TreeWindow:Nh,PinnedTreeWindow:Xh,FavoritesPanel:tf,SearchPanel:mf,Dropzone:vf,d3:E,logoIcon:js,githubIcon:bf,paperIcon:Sf,notebookMode:s,curDataset:a,timbertrekTransitioning:o,component:u,initialized:l,mounted:c,initDepthGap:f,sidebarStyle:h,data:p,featureMap:g,sunburstWidth:d,devMode:p5,datasetMap:m,initData:y,readDataFromFile:x,initDataFromDropzone:v,favoritesStore:S,sunburstStore:k,treeWindowStore:F,pinnedTreeStore:I,searchStore:V,pinnedTreeStoreValue:D}),e.$inject_state=A=>{"notebookMode"in A&&n(14,s=A.notebookMode),"curDataset"in A&&n(0,a=A.curDataset),"timbertrekTransitioning"in A&&n(15,o=A.timbertrekTransitioning),"component"in A&&n(1,u=A.component),"initialized"in A&&n(16,l=A.initialized),"mounted"in A&&n(17,c=A.mounted),"initDepthGap"in A&&n(2,f=A.initDepthGap),"sidebarStyle"in A&&n(3,h=A.sidebarStyle),"data"in A&&n(4,p=A.data),"featureMap"in A&&n(5,g=A.featureMap),"sunburstWidth"in A&&n(6,d=A.sunburstWidth),"pinnedTreeStoreValue"in A&&n(7,D=A.pinnedTreeStoreValue)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{e.$$.dirty&245761&&!s&&a&&!l&&c&&!o&&x(a)},[a,u,f,h,p,g,d,D,v,S,k,F,I,V,s,o,l,c,H,R]}class Xs extends wt{constructor(t){super(t);mt(this,t,g5,yo,it,{notebookMode:14,curDataset:0,timbertrekTransitioning:15}),ee("SvelteRegisterComponent",{component:this,tagName:"Timber",options:t,id:yo.name})}get notebookMode(){throw new Error("<Timber>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set notebookMode(t){throw new Error("<Timber>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get curDataset(){throw new Error("<Timber>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set curDataset(t){throw new Error("<Timber>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get timbertrekTransitioning(){throw new Error("<Timber>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set timbertrekTransitioning(t){throw new Error("<Timber>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const m5="src/components/article/Youtube.svelte";function wo(e){let t;const n={c:function(){t=M("div"),b(t,"id",e[0]),T(t,m5,37,0,1053)},l:function(i){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,s){le(i,t,s)},p:function(i,[s]){s&1&&b(t,"id",i[0])},i:ye,o:ye,d:function(i){i&&se(t)}};return ee("SvelteRegisterBlock",{block:n,id:wo.name,type:"component",source:"",ctx:e}),n}let y5=!1;var cl=document.createElement("script");cl.src="https://www.youtube.com/iframe_api";var vo=document.getElementsByTagName("script")[0];vo.parentNode.insertBefore(cl,vo);window.onYouTubeIframeAPIReady=()=>window.dispatchEvent(new Event("iframeApiReady"));function w5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("Youtube",r,[]);let{videoId:s}=t,{playerId:a="player"}=t,o;function u(h=0){o.seekTo(h),o.playVideo()}const l=fl();window.addEventListener("iframeApiReady",function(h){o=new YT.Player(a,{videoId:s,width:"780",height:"439",events:{onReady:c}})});function c(h){o.unMute()}const f=["videoId","playerId"];return Object.keys(t).forEach(h=>{!~f.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Youtube> was created with unknown prop '${h}'`)}),e.$$set=h=>{"videoId"in h&&n(1,s=h.videoId),"playerId"in h&&n(0,a=h.playerId)},e.$capture_state=()=>({iframeApiReady:y5,setContext:qf,onMount:Le,tag:cl,firstScriptTag:vo,createEventDispatcher:fl,getContext:Zf,videoId:s,playerId:a,player:o,play:u,dispatch:l,onPlayerReady:c}),e.$inject_state=h=>{"videoId"in h&&n(1,s=h.videoId),"playerId"in h&&n(0,a=h.playerId),"player"in h&&(o=h.player)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[a,s,u]}class kf extends wt{constructor(t){super(t);mt(this,t,w5,wo,it,{videoId:1,playerId:0,play:2}),ee("SvelteRegisterComponent",{component:this,tagName:"Youtube",options:t,id:wo.name});const{ctx:n}=this.$$,r=t.props||{};n[1]===void 0&&!("videoId"in r)&&console.warn("<Youtube> was created without expected prop 'videoId'")}get videoId(){throw new Error("<Youtube>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set videoId(t){throw new Error("<Youtube>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get playerId(){throw new Error("<Youtube>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set playerId(t){throw new Error("<Youtube>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get play(){return this.$$.ctx[2]}set play(t){throw new Error("<Youtube>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var Tf=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 401 401" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;">
    <g transform="matrix(1,0,0,1,-19411,-12326)">
        <g transform="matrix(2.82395,0,0,1,1793.2,6727.4)">
            <g id="timbertrek-logo-light" transform="matrix(0.614272,1.43604e-16,-7.51731e-17,1.15942,2779.06,-823.626)">
                <g transform="matrix(0.628201,0,0,0.939888,2139.91,-523.818)">
                    <path d="M5691.27,6656.44L5660.64,6656.44L5742.98,6526.8L5823.36,6656.44L5792.72,6656.44L5820.76,6721.2L5742.66,6679.85L5663.24,6721.12L5691.27,6656.44ZM5742.89,6571.51L5742.89,6652.51L5790.28,6676.11L5742.89,6571.51Z" style="fill:rgb(128,128,128);"/>
                </g>
                <g transform="matrix(0.950085,-2.46519e-32,-2.46519e-32,0.950085,286.898,285.116)">
                    <g transform="matrix(-0.445586,6.73401e-17,-1.13133e-16,-1.66667,8499.43,14925.7)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);stroke:rgb(128,128,128);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(1.15018e-15,-0.666667,1.11396,4.44089e-15,-410.51,9829)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);stroke:rgb(128,128,128);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.445586,3.52496e-15,-6.0106e-15,1.66667,2996,-3501.67)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);stroke:rgb(128,128,128);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-3.52474e-15,0.666667,-1.11396,-1.33227e-14,11905.9,1595)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(128,128,128);stroke:rgb(128,128,128);stroke-width:2.98px;"/>
                    </g>
                </g>
                <g transform="matrix(0.634876,0,0,0.949874,1764.5,-89.8317)">
                    <g transform="matrix(-0.61592,-0.255122,0.637806,-1.5398,6551.69,16195.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.471405,-0.471405,1.17851,-1.17851,2670.11,15534.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.255122,-0.61592,1.5398,-0.637806,-662.81,13437.5)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.255122,-0.61592,1.5398,0.637806,-3813.83,6385.69)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.471405,-0.471405,1.17851,1.17851,-3152.2,2504.11)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.61592,-0.255122,0.637806,1.5398,-1055.53,-828.81)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.61592,0.255122,-0.637806,1.5398,5996.31,-3979.83)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.471405,0.471405,-1.17851,1.17851,9877.89,-3318.2)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(0.255122,0.61592,-1.5398,0.637806,13210.8,-1221.53)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.255122,0.61592,-1.5398,-0.637806,16361.8,5830.31)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.471405,0.471405,-1.17851,-1.17851,15700.2,9711.89)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                    <g transform="matrix(-0.61592,0.255122,-0.637806,-1.5398,13603.5,13044.8)">
                        <path d="M6183,5608C6183,5606.34 6179.64,5605 6175.5,5605C6171.36,5605 6168,5606.34 6168,5608L6168,5626C6168,5627.66 6171.36,5629 6175.5,5629C6179.64,5629 6183,5627.66 6183,5626L6183,5608Z" style="fill:rgb(204,204,204);stroke:rgb(204,204,204);stroke-width:2.98px;"/>
                    </g>
                </g>
                <g transform="matrix(0.660497,0,0,0.988207,1497.7,1465.12)">
                    <path d="M6434.56,4123C6530.9,4123 6609.12,4201.22 6609.12,4297.56C6609.12,4393.9 6530.9,4472.12 6434.56,4472.12C6338.22,4472.12 6260,4393.9 6260,4297.56C6260,4201.22 6338.22,4123 6434.56,4123ZM6434.56,4139.36C6521.87,4139.36 6592.75,4210.25 6592.75,4297.56C6592.75,4384.87 6521.87,4455.75 6434.56,4455.75C6347.25,4455.75 6276.36,4384.87 6276.36,4297.56C6276.36,4210.25 6347.25,4139.36 6434.56,4139.36Z" style="fill:rgb(128,128,128);"/>
                </g>
            </g>
        </g>
    </g>
</svg>
`,Mf='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M14.064 0a8.75 8.75 0 00-6.187 2.563l-.459.458c-.314.314-.616.641-.904.979H3.31a1.75 1.75 0 00-1.49.833L.11 7.607a.75.75 0 00.418 1.11l3.102.954c.037.051.079.1.124.145l2.429 2.428c.046.046.094.088.145.125l.954 3.102a.75.75 0 001.11.418l2.774-1.707a1.75 1.75 0 00.833-1.49V9.485c.338-.288.665-.59.979-.904l.458-.459A8.75 8.75 0 0016 1.936V1.75A1.75 1.75 0 0014.25 0h-.186zM10.5 10.625c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 00.119-.213v-2.066zM3.678 8.116L5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 00-.213.119l-1.2 1.95 1.782.547zm5.26-4.493A7.25 7.25 0 0114.063 1.5h.186a.25.25 0 01.25.25v.186a7.25 7.25 0 01-2.123 5.127l-.459.458a15.21 15.21 0 01-2.499 2.02l-2.317 1.5-2.143-2.143 1.5-2.317a15.25 15.25 0 012.02-2.5l.458-.458h.002zM12 5a1 1 0 11-2 0 1 1 0 012 0zm-8.44 9.56a1.5 1.5 0 10-2.12-2.12c-.734.73-1.047 2.332-1.15 3.003a.23.23 0 00.265.265c.671-.103 2.273-.416 3.005-1.148z"></path></svg>',Cf='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Pro 5.15.3 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --><path d="M448 348.106V80c0-26.51-21.49-48-48-48H48C21.49 32 0 53.49 0 80v351.988c0 26.51 21.49 48 48 48h268.118a48 48 0 0 0 33.941-14.059l83.882-83.882A48 48 0 0 0 448 348.106zm-128 80v-76.118h76.118L320 428.106zM400 80v223.988H296c-13.255 0-24 10.745-24 24v104H48V80h352z"/></svg>',Fe={tool:[`It is essential to understand how machine learning (ML) models make predictions in high-stakes settings such as healthcare, finance, and criminal justice. ML researchers have made great strides in developing interpretable models, and recent research focuses on <strong>operationalizing interpretability</strong> \u2014 leveraging an understanding of the domain to create more responsible and trustworthy ML systems.
`,`To help ML practitioners build trustworthy models, researchers have very recently developed a technique to generate the set of almost-optimal sparse interpretable decision trees. This set of high-performing models is called the <a target="_blank" href="https://arxiv.org/abs/1908.01755">Rashomon set</a>, named after the <a target="_blank" href="https://projecteuclid.org/journals/statistical-science/volume-16/issue-3/Statistical-Modeling--The-Two-Cultures-with-comments-and-a/10.1214/ss/1009213726.full">Rashomon effect</a> in statistics. A Rashomon set of sparse decision trees can have <em>thousands of inherently interpretable and almost-equally accurate models</em>, providing opportunities for users to choose ones that best align with their knowledge and needs (e.g., fairness, monotonicity, simplicity). However, the large size of Rashomon sets and the diversity of contained models pose challenges for users to effectively explore and compare all these good models. TimberTrek is the first interactive visualization tool designed to tackle this critical challenge through <strong>summarizing the whole Rashomon set</strong> of sparse decision trees and empowering users to <strong>curate accurate and trustworthy models</strong>.
`],usage:{p1:`With a flexible interface design, there are two options to use TimberTrek to explore your Rashomon sets. The first option is to select <a href='#top' style="font-variant: small-caps;">my own set</a> on the top of this page, and then upload your Rashomon trie data by dragging it to the interface (Video 2-1). You can follow the instruction in the tool to learn how to generate the Rashomon JSON file.
`,p2:`You can directly use TimberTrek in any computational notebooks, such as Jupyter Notebook & Lab, Google Colab, and VS Code Notebook. To do that, you only need to install TimberTrek's Python package via <code>pip install timbertrek</code>. Then you can create a TimberTrek instance by passing your Rashomon trie data. With <a href="https://github.com/xiaohk/stickyland" target="_blank">Sticky Cells</a>, you can even create multiple repositionable TimberTrek windows and compare different subsets of a Rashomon set side by side! Try TimberTrek in the Jupyter Notebook below
`},tutorial:{p1:`With multiple tightly integrated views, you can use TimberTrek to <em>explore</em>, <em>compare</em>, and <em>curate</em> sparse decision trees that align with your knowledge and values.
`,items:[{id:"summary",name:"Rashomon Overview",isWide:!1,descriptions:[`TimberTrek's primary view is a <a href='https://www.cc.gatech.edu/gvu/ii/sunburst/' target='_blank'>Sunburst</a> that summarizes all decision trees in the Rashomon set. We generate this <em>Rashomon Overview</em> by extracting all decision paths (path from the tree root to a leaf) from all decision trees in the Rashomon set. The Sunburst has \\(k\\) rings, where \\(k\\) is the height of the tallest tree in the Rashomon set. Each ring corresponds to a level of the decision path.
`,`Each ring is split into multiple sectors where each sector correspond to a testing condition of the decision tree. We color code the sectors based on the feature attributes. For example, <span class="feature-tag" style="color: #4E79A7">number of prior crime</span>,  <span class="feature-tag" style="color: #F28E2C">age</span>, and <span class="feature-tag" style="color: #76B7B2">sex</span>. For features that have multiple values, we use color lightness to encode different values. For example, <span class="feature-tag" style="color: #4E79A7">prior > 3</span>,  <span class="feature-tag" style="color: #6B95C4">prior = 0</span>, and <span class="feature-tag" style="color: #88B1E2">prior = 1</span>. Finally, we use <span class="feature-tag" style="color: hsl(0,0%, 60%)">gray</span> to color encode <span class="feature-tag" style="color: hsl(0,0%, 60%)">leaf sectors</span> (end of a decision path). Each <span class="feature-tag" style="color: hsl(0,0%, 60%)">leaf sector</span> is linked to a decision tree that has the corresponding decision path. Sectors are positioned based on their hierarchical relationship in the decision rule. For example, if we have two sectors aligned as <span class="feature-tag" style="color: #4E79A7">prior > 3</span>,  <span class="feature-tag" style="color: #F28E2C">age < 26</span>, it means all decision rules after these two sectors use <span class="feature-tag" style="color: #4E79A7">prior > 3</span> as the first split and <span class="feature-tag" style="color: #F28E2C">age < 26</span> as the second split.
`,`You can click a sector to "zoom into" a subset of decision trees with the selected decision path patterns; the Sunburst only displays decision rules with a feature order up to the clicked sector. You can hover over a <span class="feature-tag" style="color: hsl(0,0%, 60%)">leaf sector</span> to see a preview of its linked decision tree. Some Rashomon sets can have very tall trees. Therefore, you can use the depth menu (on the top left) to control how many levels to show in the Sunburst; it is helpful to focus on a few levels at a time.
`],caption:"The <em>Rashomon Overview</em> adapts Sunburst to summarize the whole Rashomon set. It organizes decision trees based on their decision paths. Users can click a sector to zoom into a specific subset of models with similar prediction patterns. Users can also control the number of levels to show in the Sunburst."},{id:"tree",name:"Tree Window",isWide:!0,descriptions:[`When you click a <span class="feature-tag" style="color: hsl(0,0%, 60%)">leaf sector</span>, a <em>Tree Window</em> appears to present details for the linked decision tree. This window uses a node-link diagram to visualize the tree structure by default. This window uses stroke opacity to encode the accuracies of each leaf node in the tree; when you hover over a leaf node, you can also inspect the number of samples that the leaf node affects. In addition, you can click the toggle switch on the bottom right to switch the tree visualization to a waterfall-like plot, where the size of each node is augmented by the training samples that pass through them.
`,`You can open multiple <em>Tree Windows</em> at once, and drag windows into different locations. Arranging multiple windows side by side could help you compare the structures and prediction patterns of interested model candidates.
`],caption:`A <em>Tree Windows</em> uses a node-link diagram to illustrate the details of a decision tree. An alternative waterfall-like chart augments node size with its sample size, helping users to better understand each tree's robustness. To compare the structure and prediction patterns of multiple decision trees, users can open multiple windows and drag to reposition them side by side.
`},{id:"search",name:"Search Panel",isWide:!0,descriptions:[`Want to quickly identify trees with desired properties? The <em>Search Panel</em> comes to the rescue! This panel provides a suite of filtering tools that control what decision trees to include in the Sunburst. For example, you can drag the "Minimum Leaf Sample" slider to tell the <em>Rashomon Overview</em> to only display decision trees whose leaves have more samples. Similarly, you can click the checkboxes to select what features to include in the tree or at a particular level. Adjusting the filtering setting would trigger the <em>Rashomon Overview</em> to animate to display/hide affected sectors.
`],caption:`The <em>Search Panel</em> allows users to search for decision trees with desired properties by applying different filtering tools. For example, a user can drag the accuracy slider to hide decision trees with slightly smaller accuracy scores. Similarly, a user can also click checkboxes under "Depth 3" to search for trees that use specific features in their second level.
`},{id:"favorite",name:"Favorite Panel",isWide:!0,descriptions:[`Once you have found decision trees that meet your needs, you can click the heart button on the top right of the <em>Tree Window</em> to bookmark them. You can see all bookmarked trees in the <em>Favorite Panel</em>. You can also click the comment button on the <em>Tree Window</em> to add a short comment to document why you choose this decision tree. Alternatively, you can add or edit comments in the <em>Favorite Panel</em> directly. Once you are satisfied with your decision tree curation, you can click the download button to save all bookmarked trees with your comments. You can load these trees with TimberTrek's Python package. Your comments can also help you continue curating in the future.
`],caption:`Users can use the <em>Favorite Panel</em> to keep track of all bookmarked decision trees. This panel shows a thumbnail of each tree along with a user-entered comment. The comment can document the model curation motivation and context. Once satisfied with their curation, a user can click the save button to download all bookmarked trees with their documentation. It helps users deploy satisfactory models or continue curation in the future.
`}]},development:`TimberTrek is written in <a href='https://www.typescriptlang.org' target='_blank'>TypeScript</a> using <a href='https://svelte.dev' target='_blank'>Svelte</a> as a framework and <a href='https://d3js.org' target='_blank'>D3.js</a> for visualizations. The source code is available on <a href='https://github.com/poloclub/timbertrek' target='_blank'>GitHub</a>. The entire app runs locally and privately in your web-browser, and your model and data would never leave your machine. Anyone can easily access TimberTrek on their desktop or tablets, without a need of setting up dedicated servers or writing code. With a flexible design, TimberTrek supports all types of computational notebooks, such as Jupyter Notebook & Lab, Google Colab, and VS Code Notebook. With the cross-platform support, we hope TimberTrek will fit into your favorite ML development workflow.
`,team:`Led by <a href='https://zijie.wang/' target='_blank'>Jay Wang</a>, TimberTrek is a result of a collaboration between ML and visualization researchers from Georgia Tech, Duke University, Fujitsu Laboratories, and University of British Columbia. TimberTrek is created by <a href='https://zijie.wang/' target='_blank'>Jay Wang</a>, <a href='https://www.linkedin.com/in/chudizhong' target='_blank'>Chudi Zhong</a>, <a href='https://www.linkedin.com/in/rui-xin-8070181b9' target='_blank'>Rui Xin</a>, <a href='https://scholar.google.com/citations?user=9fY1WVIAAAAJ&hl=en' target='_blank'>Takuya Takagi</a>, <a href='https://users.cs.duke.edu/~zhichen/' target='_blank'>Zhi Chen</a>, <a href='' target='_blank'>Polo Chau</a>, <a href='https://users.cs.duke.edu/~cynthia/' target='_blank'>Cynthia Rudin</a>, and <a href='https://www.seltzer.com/margo/' target='_blank'>Margo Seltzer</a>.
`,contribute:[`If you have any questions or feedback, feel free to <a href='https://github.com/poloclub/timbertrek/issues' target='_blank'>open an issue</a> or contact <a href='https://zijie.wang/' target='_blank'>Jay Wang</a>.
`,`We\u2019d love to hear your experience with TimberTrek! If you\u2019d like to share (e.g., what is your typical workflow to curate decision trees, what features of TimberTrek you find most helpful), please reach out to us. TimberTrek is an open-source project, and we welcome <a href='https://github.com/poloclub/timbertrek/pulls' target='_blank'>pull requests</a> for new feature implementations and bug fixes, etc.
`],youtubeTimes:[{startTime:0,name:"Sparse decision tree",timestamp:"(0:00-0:06)"},{startTime:6,name:"Rashomon set",timestamp:"(0:06-0:38)"},{startTime:38,name:"Introducing TimberTrek",timestamp:"(0:38-0:45)"},{startTime:45,name:"Rashomon overview",timestamp:"(0:45-1:13)"},{startTime:73,name:"Tree windows",timestamp:"(1:13-1:33)"},{startTime:93,name:"Search Panel",timestamp:"(1:33-2:02)"},{startTime:122,name:"Searching for fair models",timestamp:"(2:02-2:41)"},{startTime:161,name:"Computational notebook support",timestamp:"(2:41-2:49)"},{startTime:129,name:"Try TimberTrek",timestamp:"(2:49-3:00)"}]};Fe.tool;Fe.usage;Fe.tutorial;Fe.development;Fe.team;Fe.contribute;Fe.youtubeTimes;const re="src/components/article/Article.svelte";function Hc(e,t,n){const r=e.slice();return r[14]=t[n],r[16]=n,r}function Fc(e,t,n){const r=e.slice();return r[17]=t[n],r[16]=n,r}function Pc(e,t,n){const r=e.slice();return r[19]=t[n],r}function Rc(e,t,n){const r=e.slice();return r[19]=t[n],r}function Ic(e,t,n){const r=e.slice();return r[24]=t[n],r[16]=n,r}function bo(e){let t,n,r,i,s,a,o;n=new Xs({props:{notebookMode:!1,curDataset:e[2],timbertrekTransitioning:e[3]},$$inline:!0});const u={c:function(){t=M("div"),gt(n.$$.fragment),b(t,"class","timbertrek-wrapper s-NAp586LyR7ay"),T(t,re,354,8,8929)},m:function(c,f){le(c,t,f),lt(n,t,null),s=!0,a||(o=[de(t,"introstart",e[7],!1,!1,!1),de(t,"introend",e[8],!1,!1,!1)],a=!0)},p:function(c,f){const h={};f&4&&(h.curDataset=c[2]),f&8&&(h.timbertrekTransitioning=c[3]),n.$set(h)},i:function(c){s||(_e(n.$$.fragment,c),ir(()=>{i&&i.end(1),r=Qf(t,xa,{x:300,duration:300}),r.start()}),s=!0)},o:function(c){Ve(n.$$.fragment,c),r&&r.invalidate(),i=Ro(t,xa,{x:-300,duration:300}),s=!1},d:function(c){c&&se(t),ct(n),c&&i&&i.end(),a=!1,ze(o)}};return ee("SvelteRegisterBlock",{block:u,id:bo.name,type:"key",source:"(354:6) {#key curDataset}",ctx:e}),u}function So(e){let t,n=e[24]+"",r,i,s,a;function o(){return e[9](e[24])}const u={c:function(){t=M("span"),r=oe(n),i=O(),b(t,"class","option s-NAp586LyR7ay"),b(t,"data-text",e[24]),me(t,"selected",e[24]===e[2]),T(t,re,378,10,9594)},m:function(c,f){le(c,t,f),w(t,r),w(t,i),s||(a=de(t,"click",o,!1,!1,!1),s=!0)},p:function(c,f){e=c,f&36&&me(t,"selected",e[24]===e[2])},d:function(c){c&&se(t),s=!1,a()}};return ee("SvelteRegisterBlock",{block:u,id:So.name,type:"each",source:"(378:8) {#each datasets as name, i}",ctx:e}),u}function _o(e){let t,n=e[19]+"";const r={c:function(){t=M("p"),b(t,"class","s-NAp586LyR7ay"),T(t,re,402,6,10205)},m:function(s,a){le(s,t,a),t.innerHTML=n},p:ye,d:function(s){s&&se(t)}};return ee("SvelteRegisterBlock",{block:r,id:_o.name,type:"each",source:"(402:4) {#each text.tool as p}",ctx:e}),r}function Vf(e){let t,n,r,i,s,a,o,u,l,c,f;const h={c:function(){t=M("div"),n=M("div"),r=O(),i=M("img"),a=O(),o=M("div"),u=M("span"),l=oe(`Launch Jupyter
            Notebook`),b(n,"class","mask s-NAp586LyR7ay"),T(n,re,428,10,10918),b(i,"alt","Jupyter notebook place holder"),Is(i.src,s="/timbertrek/data/jupyter-placeholder.png")||b(i,"src",s),b(i,"class","s-NAp586LyR7ay"),T(i,re,429,10,10949),b(u,"class","svg-icon s-NAp586LyR7ay"),T(u,re,439,12,11235),b(o,"class","button s-NAp586LyR7ay"),T(o,re,433,10,11101),b(t,"class","demo-placeholder s-NAp586LyR7ay"),T(t,re,422,8,10786)},m:function(g,d){le(g,t,d),w(t,n),w(t,r),w(t,i),w(t,a),w(t,o),w(o,u),u.innerHTML=Mf,w(o,l),c||(f=[de(o,"click",e[11],!1,!1,!1),de(t,"click",e[12],!1,!1,!1)],c=!0)},p:ye,d:function(g){g&&se(t),c=!1,ze(f)}};return ee("SvelteRegisterBlock",{block:h,id:Vf.name,type:"else",source:"(422:6) {:else}",ctx:e}),h}function Af(e){let t,n;const r={c:function(){t=M("iframe"),b(t,"title","Jupyter notebook"),Is(t.src,n="https://poloclub.github.io/timbertrek/notebook/retro/notebooks/?path=campas.ipynb")||b(t,"src",n),b(t,"width","100%"),b(t,"height","100%"),b(t,"class","s-NAp586LyR7ay"),T(t,re,415,8,10565)},m:function(s,a){le(s,t,a)},p:ye,d:function(s){s&&se(t)}};return ee("SvelteRegisterBlock",{block:r,id:Af.name,type:"if",source:"(415:6) {#if showIFrame}",ctx:e}),r}function xo(e){let t,n=e[19]+"";const r={c:function(){t=M("p"),b(t,"class","s-NAp586LyR7ay"),T(t,re,464,8,12029)},m:function(s,a){le(s,t,a),t.innerHTML=n},p:ye,d:function(s){s&&se(t)}};return ee("SvelteRegisterBlock",{block:r,id:xo.name,type:"each",source:"(464:6) {#each item.descriptions.slice(1) as p}",ctx:e}),r}function ko(e){let t,n=e[17].name+"",r,i,s,a=e[17].descriptions[0]+"",o,u,l,c,f,h,p,g,d,m=e[16]+1+"",y,x,v,S=e[17].caption+"",k,F,I=e[17].descriptions.slice(1);Re(I);let V=[];for(let z=0;z<I.length;z+=1)V[z]=xo(Pc(e,I,z));const D={c:function(){t=M("h4"),r=oe(n),i=O(),s=M("p"),o=O(),u=M("div"),l=M("video"),c=M("source"),h=M("track"),p=O(),g=M("div"),d=oe("Video "),y=oe(m),x=oe(". "),v=new An,k=O();for(let H=0;H<V.length;H+=1)V[H].c();F=zi(),b(t,"id",e[17].id),b(t,"class","s-NAp586LyR7ay"),T(t,re,452,6,11559),b(s,"class","s-NAp586LyR7ay"),T(s,re,453,6,11599),Is(c.src,f=`/timbertrek/video/${e[17].id}.mp4`)||b(c,"src",f),b(c,"class","s-NAp586LyR7ay"),T(c,re,456,10,11744),b(h,"kind","captions"),b(h,"class","s-NAp586LyR7ay"),T(h,re,457,10,11821),l.autoplay=!0,l.loop=!0,l.muted=!0,l.playsInline=!0,b(l,"class","s-NAp586LyR7ay"),T(l,re,455,8,11694),v.a=null,b(g,"class","figure-caption s-NAp586LyR7ay"),T(g,re,459,8,11872),b(u,"class","video s-NAp586LyR7ay"),me(u,"wide-video",!1),T(u,re,454,6,11641)},m:function(H,R){le(H,t,R),w(t,r),le(H,i,R),le(H,s,R),s.innerHTML=a,le(H,o,R),le(H,u,R),w(u,l),w(l,c),w(l,h),w(u,p),w(u,g),w(g,d),w(g,y),w(g,x),v.m(S,g),le(H,k,R);for(let A=0;A<V.length;A+=1)V[A].m(H,R);le(H,F,R)},p:function(H,R){if(R&0){I=H[17].descriptions.slice(1),Re(I);let A;for(A=0;A<I.length;A+=1){const _=Pc(H,I,A);V[A]?V[A].p(_,R):(V[A]=xo(_),V[A].c(),V[A].m(F.parentNode,F))}for(;A<V.length;A+=1)V[A].d(1);V.length=I.length}},d:function(H){H&&se(t),H&&se(i),H&&se(s),H&&se(o),H&&se(u),H&&se(k),un(V,H),H&&se(F)}};return ee("SvelteRegisterBlock",{block:D,id:ko.name,type:"each",source:"(452:4) {#each text.tutorial.items as item, i}",ctx:e}),D}function To(e){let t,n=e[14].name+"",r,i,s,a=e[14].timestamp+"",o,u,l,c;const f={c:function(){t=M("li"),r=oe(n),i=O(),s=M("small"),o=oe(a),u=O(),b(s,"class","s-NAp586LyR7ay"),T(s,re,474,10,12298),b(t,"class","video-link s-NAp586LyR7ay"),T(t,re,472,8,12196)},m:function(p,g){le(p,t,g),w(t,r),w(t,i),w(t,s),w(s,o),w(t,u),l||(c=de(t,"click",function(){ti(e[1].play(e[14].startTime))&&e[1].play(e[14].startTime).apply(this,arguments)},!1,!1,!1),l=!0)},p:function(p,g){e=p},d:function(p){p&&se(t),l=!1,c()}};return ee("SvelteRegisterBlock",{block:f,id:To.name,type:"each",source:"(472:6) {#each text.youtubeTimes as time, i}",ctx:e}),f}function Mo(e){let t,n,r,i,s,a,o=e[2],u,l,c,f,h,p,g,d,m,y,x,v,S,k,F,I,V,D,z,H,R,A,_,C=Fe.usage.p1+"",L,P,G,Y=Fe.usage.p2+"",U,q,Z,pe,Q,J,B,te,he,X,K,ae,W=Fe.tutorial.p1+"",ve,fe,xe,ke,j,ce,Ne,Te,st,Ie,Gt,vt,Ze,Yt,Bt,vn=Fe.development+"",tn,ut,Wn,nn,rn,bn,sn,Ut=Fe.team+"",Nt,bt,mr,kt,jt=Fe.contribute[0]+"",yr,ht,Sn=Fe.contribute[1]+"",_n,an,Ht,Ft,Xt,xn,qt,kn,Ae=bo(e),Ye=e[5];Re(Ye);let Me=[];for(let Se=0;Se<Ye.length;Se+=1)Me[Se]=So(Ic(e,Ye,Se));let Tt=Fe.tool;Re(Tt);let Be=[];for(let Se=0;Se<Tt.length;Se+=1)Be[Se]=_o(Rc(e,Tt,Se));function wr(Se,ie){return Se[4]?Af:Vf}let Tn=wr(e),ft=Tn(e),Ee=Fe.tutorial.items;Re(Ee);let we=[];for(let Se=0;Se<Ee.length;Se+=1)we[Se]=ko(Fc(e,Ee,Se));let Pe=Fe.youtubeTimes;Re(Pe);let He=[];for(let Se=0;Se<Pe.length;Se+=1)He[Se]=To(Hc(e,Pe,Se));let ui={videoId:"3gMTO07lyTs",playerId:"demo_video"};Te=new kf({props:ui,$$inline:!0}),e[13](Te);const vr={c:function(){t=M("script"),r=O(),i=M("div"),s=M("div"),a=M("div"),Ae.c(),u=O(),l=M("div"),c=M("span"),c.textContent="Choose a Rashomon set:",f=O(),h=M("div");for(let ie=0;ie<Me.length;ie+=1)Me[ie].c();p=O(),g=M("div"),d=M("h2"),m=M("span"),m.textContent="What is",y=O(),x=M("span"),v=O(),S=M("span"),k=M("span"),k.textContent="TimberTrek",F=oe("?"),I=O();for(let ie=0;ie<Be.length;ie+=1)Be[ie].c();V=O(),D=M("h2"),z=oe("How to Use "),H=M("span"),H.textContent="TimberTrek",R=oe("?"),A=O(),_=M("p"),L=O(),P=M("p"),G=new An,U=oe(`(click the
      `),q=M("span"),Z=oe(` button to create sticky
      cells).`),pe=O(),Q=M("div"),ft.c(),J=O(),B=M("h2"),te=oe("What Can I do with "),he=M("span"),he.textContent="TimberTrek",X=oe("?"),K=O(),ae=M("p"),ve=O();for(let ie=0;ie<we.length;ie+=1)we[ie].c();fe=O(),xe=M("h2"),xe.textContent="Demo Video",ke=O(),j=M("ul");for(let ie=0;ie<He.length;ie+=1)He[ie].c();ce=O(),Ne=M("div"),gt(Te.$$.fragment),st=O(),Ie=M("h2"),Gt=oe("How is "),vt=M("span"),vt.textContent="TimberTrek",Ze=oe(" Developed?"),Yt=O(),Bt=M("p"),tn=O(),ut=M("h2"),Wn=oe("Who Developed "),nn=M("span"),nn.textContent="TimberTrek",rn=oe("?"),bn=O(),sn=M("p"),Nt=O(),bt=M("h2"),bt.textContent="How Can I Contribute?",mr=O(),kt=M("p"),yr=O(),ht=M("p"),_n=O(),an=M("div"),Ht=M("div"),Ft=M("div"),Xt=M("div"),Xt.textContent="VIS'22 Short Paper Submission",xn=O(),qt=M("div"),qt.textContent="Thanks for reviewing our manuscript!",b(t,"id","MathJax-script"),t.async=!0,Is(t.src,n="https://cdn.jsdelivr.net/npm/mathjax@3.2/es5/tex-mml-chtml.js")||b(t,"src",n),b(t,"class","s-NAp586LyR7ay"),T(t,re,344,2,8636),b(a,"class","timbertrek-app s-NAp586LyR7ay"),T(a,re,352,4,8868),b(c,"class","option-title s-NAp586LyR7ay"),T(c,re,375,6,9463),b(h,"class","options s-NAp586LyR7ay"),T(h,re,376,6,9526),b(l,"class","dataset-options s-NAp586LyR7ay"),T(l,re,374,4,9427),b(s,"class","main-app s-NAp586LyR7ay"),b(s,"tabindex","-1"),T(s,re,351,2,8805),b(m,"class","s-NAp586LyR7ay"),T(m,re,393,6,9902),b(x,"class","svg-icon logo-icon s-NAp586LyR7ay"),T(x,re,394,6,9930),b(k,"class","tool-name s-NAp586LyR7ay"),T(k,re,395,12,9999),b(S,"class","s-NAp586LyR7ay"),T(S,re,395,6,9993),b(d,"id","tool"),b(d,"class","s-NAp586LyR7ay"),T(d,re,392,4,9881),b(H,"class","tool-name s-NAp586LyR7ay"),T(H,re,405,30,10265),b(D,"id","usage"),b(D,"class","s-NAp586LyR7ay"),T(D,re,405,4,10239),b(_,"class","s-NAp586LyR7ay"),T(_,re,406,4,10317),G.a=U,b(q,"class","svg-icon note-icon s-NAp586LyR7ay"),T(q,re,409,6,10398),b(P,"class","s-NAp586LyR7ay"),T(P,re,407,4,10350),b(Q,"class","jupyter-demo s-NAp586LyR7ay"),T(Q,re,413,4,10507),b(he,"class","tool-name s-NAp586LyR7ay"),T(he,re,447,25,11420),b(B,"id","usage"),b(B,"class","s-NAp586LyR7ay"),T(B,re,446,4,11379),b(ae,"class","s-NAp586LyR7ay"),T(ae,re,449,4,11477),b(xe,"id","youtube-video"),b(xe,"class","s-NAp586LyR7ay"),T(xe,re,468,4,12077),b(j,"class","video-list s-NAp586LyR7ay"),T(j,re,470,4,12121),b(Ne,"class","youtube-video s-NAp586LyR7ay"),T(Ne,re,479,4,12373),b(vt,"class","tool-name s-NAp586LyR7ay"),Xn(vt,"margin-right","8px"),T(vt,re,488,13,12564),b(Ie,"id","usage"),b(Ie,"class","s-NAp586LyR7ay"),T(Ie,re,487,4,12535),b(Bt,"class","s-NAp586LyR7ay"),T(Bt,re,491,4,12665),b(nn,"class","tool-name s-NAp586LyR7ay"),T(nn,re,493,32,12730),b(ut,"id","team"),b(ut,"class","s-NAp586LyR7ay"),T(ut,re,493,4,12702),b(sn,"class","s-NAp586LyR7ay"),T(sn,re,494,4,12782),b(bt,"id","team"),b(bt,"class","s-NAp586LyR7ay"),T(bt,re,496,4,12812),b(kt,"class","s-NAp586LyR7ay"),T(kt,re,497,4,12857),b(ht,"class","s-NAp586LyR7ay"),T(ht,re,498,4,12895),b(g,"class","article s-NAp586LyR7ay"),T(g,re,391,2,9855),b(Xt,"class","s-NAp586LyR7ay"),T(Xt,re,504,8,13038),b(qt,"class","s-NAp586LyR7ay"),T(qt,re,505,8,13087),b(Ft,"class","footer-cp s-NAp586LyR7ay"),T(Ft,re,503,6,13006),b(Ht,"class","footer-main s-NAp586LyR7ay"),T(Ht,re,502,4,12974),b(an,"class","article-footer s-NAp586LyR7ay"),T(an,re,501,2,12941),b(i,"class","article-page s-NAp586LyR7ay"),T(i,re,350,0,8776)},l:function(ie){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(ie,Ue){w(document.head,t),le(ie,r,Ue),le(ie,i,Ue),w(i,s),w(s,a),Ae.m(a,null),w(s,u),w(s,l),w(l,c),w(l,f),w(l,h);for(let je=0;je<Me.length;je+=1)Me[je].m(h,null);e[10](s),w(i,p),w(i,g),w(g,d),w(d,m),w(d,y),w(d,x),x.innerHTML=Tf,w(d,v),w(d,S),w(S,k),w(S,F),w(g,I);for(let je=0;je<Be.length;je+=1)Be[je].m(g,null);w(g,V),w(g,D),w(D,z),w(D,H),w(D,R),w(g,A),w(g,_),_.innerHTML=C,w(g,L),w(g,P),G.m(Y,P),w(P,U),w(P,q),q.innerHTML=Cf,w(P,Z),w(g,pe),w(g,Q),ft.m(Q,null),w(g,J),w(g,B),w(B,te),w(B,he),w(B,X),w(g,K),w(g,ae),ae.innerHTML=W,w(g,ve);for(let je=0;je<we.length;je+=1)we[je].m(g,null);w(g,fe),w(g,xe),w(g,ke),w(g,j);for(let je=0;je<He.length;je+=1)He[je].m(j,null);w(g,ce),w(g,Ne),lt(Te,Ne,null),w(g,st),w(g,Ie),w(Ie,Gt),w(Ie,vt),w(Ie,Ze),w(g,Yt),w(g,Bt),Bt.innerHTML=vn,w(g,tn),w(g,ut),w(ut,Wn),w(ut,nn),w(ut,rn),w(g,bn),w(g,sn),sn.innerHTML=Ut,w(g,Nt),w(g,bt),w(g,mr),w(g,kt),kt.innerHTML=jt,w(g,yr),w(g,ht),ht.innerHTML=Sn,w(i,_n),w(i,an),w(an,Ht),w(Ht,Ft),w(Ft,Xt),w(Ft,xn),w(Ft,qt),kn=!0},p:function(ie,[Ue]){if(Ue&4&&it(o,o=ie[2])?(pn(),Ve(Ae,1,1,ye),gn(),Ae=bo(ie),Ae.c(),_e(Ae),Ae.m(a,null)):Ae.p(ie,Ue),Ue&100){Ye=ie[5],Re(Ye);let ue;for(ue=0;ue<Ye.length;ue+=1){const Mt=Ic(ie,Ye,ue);Me[ue]?Me[ue].p(Mt,Ue):(Me[ue]=So(Mt),Me[ue].c(),Me[ue].m(h,null))}for(;ue<Me.length;ue+=1)Me[ue].d(1);Me.length=Ye.length}if(Ue&0){Tt=Fe.tool,Re(Tt);let ue;for(ue=0;ue<Tt.length;ue+=1){const Mt=Rc(ie,Tt,ue);Be[ue]?Be[ue].p(Mt,Ue):(Be[ue]=_o(Mt),Be[ue].c(),Be[ue].m(g,V))}for(;ue<Be.length;ue+=1)Be[ue].d(1);Be.length=Tt.length}if(Tn===(Tn=wr(ie))&&ft?ft.p(ie,Ue):(ft.d(1),ft=Tn(ie),ft&&(ft.c(),ft.m(Q,null))),Ue&0){Ee=Fe.tutorial.items,Re(Ee);let ue;for(ue=0;ue<Ee.length;ue+=1){const Mt=Fc(ie,Ee,ue);we[ue]?we[ue].p(Mt,Ue):(we[ue]=ko(Mt),we[ue].c(),we[ue].m(g,fe))}for(;ue<we.length;ue+=1)we[ue].d(1);we.length=Ee.length}if(Ue&2){Pe=Fe.youtubeTimes,Re(Pe);let ue;for(ue=0;ue<Pe.length;ue+=1){const Mt=Hc(ie,Pe,ue);He[ue]?He[ue].p(Mt,Ue):(He[ue]=To(Mt),He[ue].c(),He[ue].m(j,null))}for(;ue<He.length;ue+=1)He[ue].d(1);He.length=Pe.length}const je={};Te.$set(je)},i:function(ie){kn||(_e(Ae),_e(Te.$$.fragment,ie),kn=!0)},o:function(ie){Ve(Ae),Ve(Te.$$.fragment,ie),kn=!1},d:function(ie){se(t),ie&&se(r),ie&&se(i),Ae.d(ie),un(Me,ie),e[10](null),un(Be,ie),ft.d(),un(we,ie),un(He,ie),e[13](null),ct(Te)}};return ee("SvelteRegisterBlock",{block:vr,id:Mo.name,type:"component",source:"",ctx:e}),vr}function v5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("Article",r,[]);let s=null,a=null,o="compas",u=!1,l=!1;const c=["compas","fico","car evaluation","my own set"],f=S=>{n(3,u=!0),n(2,o=S)};Le(()=>{});const h=[];Object.keys(t).forEach(S=>{!~h.indexOf(S)&&S.slice(0,2)!=="$$"&&S!=="slot"&&console.warn(`<Article> was created with unknown prop '${S}'`)});const p=()=>{n(3,u=!0)},g=()=>{n(3,u=!1)},d=S=>f(S);function m(S){et[S?"unshift":"push"](()=>{s=S,n(0,s)})}const y=()=>{n(4,l=!0)},x=()=>{n(4,l=!0)};function v(S){et[S?"unshift":"push"](()=>{a=S,n(1,a)})}return e.$capture_state=()=>({onMount:Le,TimberTrek:Xs,Youtube:kf,fade:ri,fly:xa,iconLogo:Tf,iconRocket:Mf,iconNote:Cf,text:Fe,component:s,currentPlayer:a,curDataset:o,timbertrekTransitioning:u,showIFrame:l,datasets:c,optionClicked:f}),e.$inject_state=S=>{"component"in S&&n(0,s=S.component),"currentPlayer"in S&&n(1,a=S.currentPlayer),"curDataset"in S&&n(2,o=S.curDataset),"timbertrekTransitioning"in S&&n(3,u=S.timbertrekTransitioning),"showIFrame"in S&&n(4,l=S.showIFrame)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,a,o,u,l,c,f,p,g,d,m,y,x,v]}class Df extends wt{constructor(t){super(t);mt(this,t,v5,Mo,it,{}),ee("SvelteRegisterComponent",{component:this,tagName:"Article",options:t,id:Mo.name})}}const Ec="src/components/notebook/Notebook.svelte";function Co(e){let t,n,r,i;r=new Xs({props:{notebookMode:!0},$$inline:!0});const s={c:function(){t=M("div"),n=M("div"),gt(r.$$.fragment),b(n,"class","main-app s-G67tNxa3tjK8"),T(n,Ec,22,2,453),b(t,"class","notebook-page s-G67tNxa3tjK8"),T(t,Ec,21,0,423)},l:function(o){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(o,u){le(o,t,u),w(t,n),lt(r,n,null),e[1](n),i=!0},p:ye,i:function(o){i||(_e(r.$$.fragment,o),i=!0)},o:function(o){Ve(r.$$.fragment,o),i=!1},d:function(o){o&&se(t),ct(r),e[1](null)}};return ee("SvelteRegisterBlock",{block:s,id:Co.name,type:"component",source:"",ctx:e}),s}function b5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("Notebook",r,[]);let s=null;const a=[];Object.keys(t).forEach(u=>{!~a.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Notebook> was created with unknown prop '${u}'`)});function o(u){et[u?"unshift":"push"](()=>{s=u,n(0,s)})}return e.$capture_state=()=>({onMount:Le,TimberTrek:Xs,component:s}),e.$inject_state=u=>{"component"in u&&n(0,s=u.component)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,o]}class Lf extends wt{constructor(t){super(t);mt(this,t,b5,Co,it,{}),ee("SvelteRegisterComponent",{component:this,tagName:"Notebook",options:t,id:Co.name})}}const Ai="src/App.svelte";function Nf(e){let t,n;t=new Lf({$$inline:!0});const r={c:function(){gt(t.$$.fragment)},m:function(s,a){lt(t,s,a),n=!0},i:function(s){n||(_e(t.$$.fragment,s),n=!0)},o:function(s){Ve(t.$$.fragment,s),n=!1},d:function(s){ct(t,s)}};return ee("SvelteRegisterBlock",{block:r,id:Nf.name,type:"else",source:"(20:2) {:else}",ctx:e}),r}function Hf(e){let t,n;t=new Df({$$inline:!0});const r={c:function(){gt(t.$$.fragment)},m:function(s,a){lt(t,s,a),n=!0},i:function(s){n||(_e(t.$$.fragment,s),n=!0)},o:function(s){Ve(t.$$.fragment,s),n=!1},d:function(s){ct(t,s)}};return ee("SvelteRegisterBlock",{block:r,id:Hf.name,type:"if",source:"(18:2) {#if mode === 'article'}",ctx:e}),r}function Vo(e){let t,n,r,i,s,a,o,u;const l=[Hf,Nf],c=[];function f(p,g){return p[0]==="article"?0:1}a=f(e),o=c[a]=l[a](e);const h={c:function(){t=M("link"),n=M("link"),r=M("link"),i=O(),s=M("div"),o.c(),b(t,"rel","preconnect"),b(t,"href","https://fonts.googleapis.com"),b(t,"class","s-XsEmFtvddWTw"),T(t,Ai,8,2,228),b(n,"rel","preconnect"),b(n,"href","https://fonts.gstatic.com"),b(n,"crossorigin",""),b(n,"class","s-XsEmFtvddWTw"),T(n,Ai,9,2,292),b(r,"href","https://fonts.googleapis.com/css2?family=Lato&display=swap"),b(r,"rel","stylesheet"),b(r,"class","s-XsEmFtvddWTw"),T(r,Ai,10,2,365),b(s,"class","stand-alone-page s-XsEmFtvddWTw"),T(s,Ai,16,0,483)},l:function(g){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(g,d){w(document.head,t),w(document.head,n),w(document.head,r),le(g,i,d),le(g,s,d),c[a].m(s,null),u=!0},p:function(g,[d]){let m=a;a=f(g),a!==m&&(pn(),Ve(c[m],1,1,()=>{c[m]=null}),gn(),o=c[a],o||(o=c[a]=l[a](g),o.c()),_e(o,1),o.m(s,null))},i:function(g){u||(_e(o),u=!0)},o:function(g){Ve(o),u=!1},d:function(g){se(t),se(n),se(r),g&&se(i),g&&se(s),c[a].d()}};return ee("SvelteRegisterBlock",{block:h,id:Vo.name,type:"component",source:"",ctx:e}),h}function S5(e,t,n){let{$$slots:r={},$$scope:i}=t;yt("App",r,[]);let{mode:s="article"}=t;const a=["mode"];return Object.keys(t).forEach(o=>{!~a.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<App> was created with unknown prop '${o}'`)}),e.$$set=o=>{"mode"in o&&n(0,s=o.mode)},e.$capture_state=()=>({Article:Df,Notebook:Lf,mode:s}),e.$inject_state=o=>{"mode"in o&&n(0,s=o.mode)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s]}class _5 extends wt{constructor(t){super(t);mt(this,t,S5,Vo,it,{mode:0}),ee("SvelteRegisterComponent",{component:this,tagName:"App",options:t,id:Vo.name})}get mode(){throw new Error("<App>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(t){throw new Error("<App>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}new _5({target:document.body,props:{mode:"article"}});
